import{j as e,p as U,q as Rt,b as re,a as Te,T as ae,ai as It,w as Bt,aj as $t,B as it,v as Ee,x as Ze,e as We,ae as Ae,_ as at,o as lt,z as ue,I as ye,M as me,a7 as At,aa as ct,k as dt,y as V,Y as Ke,ak as pt,h as Ve,a2 as _t,l as Ue,a3 as Mt,a4 as Qe,a5 as Tt,A as Et,m as Wt,J as Ft,E as Pe,al as Lt,a1 as Se,am as Ge,n as ut,X as Dt,i as qt,a0 as Ot}from"./ui-vendor-BmgxlMsf.js";import{a as u,d as xt}from"./react-vendor-uDOJF2jQ.js";import{e as Nt,F as Ht,g as Vt,b as Pt,C as p,u as _e,D as pe,h as Me,w as te,i as Gt}from"./FeatureInfoButton-nGplUxMY.js";import{S as Zt}from"./ScenarioDashboard-BzFUdSvS.js";import{u as be}from"./useBranding-D1cHbBzE.js";import{u as Kt}from"./useMobile-YxjH166V.js";import{P as Ut}from"./progress-bar-CZJEIjJp.js";import{A as Qt,M as ht,a as gt}from"./MicrophoneTestDialog-3Mxy0Xdd.js";import{D as Jt}from"./DeviceSettingsDialog-Bk-hr9U4.js";import{F as ft}from"./fullscreen-loader-DD3Nz0k1.js";import{D as Yt}from"./DynamicFormField-sJA8NUF0.js";import"./ScenarioCard-GiVmDvNr.js";import"./dialog-DnUGiHGA.js";import"./utils-BEHD0UYf.js";import"./DeviceSetupPage-CHKUzrBR.js";const tt="[SIMULATOR_DASHBOARD]",Xt={briefcase:it,banknote:$t,user:Bt,presentation:It,target:ae,mic:U},er=async()=>{const r=await fetch(`${Vt()}/simulator/scenarios`,{headers:{"X-WP-Nonce":Pt()},credentials:"same-origin"});if(!r.ok)throw new Error("Fehler beim Laden der Szenarien");const a=await r.json();if(a.success&&a.data?.scenarios)return a.data.scenarios;throw new Error("Keine Szenarien gefunden")},tr=r=>Xt[r.icon]||it,rr=r=>[{text:`${r.question_count_min}-${r.question_count_max} Fragen`},{icon:re,text:`${Math.round(r.time_limit_per_question/60)} Min/Frage`}],rt=({onSelectScenario:r,isAuthenticated:a,requireAuth:g,setPendingScenario:o,onNavigateToHistory:s})=>(u.useEffect(()=>(console.log(`${tt} ðŸ”µ MOUNT`),()=>{console.log(`${tt} ðŸ”´ UNMOUNT`)}),[]),e.jsxs(e.Fragment,{children:[e.jsx(Nt,{featureId:"simulator",showOnMount:!0}),e.jsx(Zt,{title:"Szenario-Training",subtitle:"Trainiere wichtige Karriere-Skills mit KI-Feedback",headerIcon:Te,headerActions:e.jsx(Ht,{featureId:"simulator",size:"sm"}),fetchScenarios:er,moduleKey:"simulator",historyButtonLabel:"Meine Szenario-Trainings",onNavigateToHistory:s,onSelectScenario:r,renderCardMeta:rr,getIconForScenario:tr,cardActionLabel:"Starten",cardActionIcon:Rt,categoryField:"category",emptyStateIcon:U,emptyStateTitle:"Keine Trainingsszenarien verfÃ¼gbar.",searchPlaceholder:"Szenarien durchsuchen...",isAuthenticated:a,requireAuth:g,setPendingScenario:o,loadingMessage:"Szenarien werden geladen..."})]})),sr=({field:r,value:a,onChange:g,error:o,focusColor:s,branding:l})=>{const m=s||"#4a9ec9",w={width:"100%",padding:`${l.space[3]} ${l.space[4]}`,borderRadius:l.radius.lg,border:`2px solid ${o?p.red[500]:p.slate[200]}`,fontSize:l.fontSize.base,color:p.slate[900],backgroundColor:"white",outline:"none",transition:l.transition.normal},b={borderColor:m,boxShadow:`0 0 0 3px ${m}1a`},x=i=>{Object.assign(i.target.style,b),setTimeout(()=>{const I=i.target;if(I){const C=I.closest("div");C&&C.scrollIntoView({behavior:"smooth",block:"center"})}},300)},d=i=>{i.target.style.borderColor=o?p.red[500]:p.slate[200],i.target.style.boxShadow="none"},n=()=>{switch(r.type){case"text":return e.jsx("input",{type:"text",value:a||"",onChange:i=>g(r.key,i.target.value),placeholder:r.placeholder||"",style:w,onFocus:x,onBlur:d});case"textarea":return e.jsx("textarea",{value:a||"",onChange:i=>g(r.key,i.target.value),placeholder:r.placeholder||"",rows:4,style:{...w,resize:"vertical",minHeight:"100px"},onFocus:x,onBlur:d});case"select":return e.jsxs("select",{value:a||r.default||"",onChange:i=>g(r.key,i.target.value),style:{...w,cursor:"pointer",appearance:"none",backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 12px center",backgroundRepeat:"no-repeat",backgroundSize:"20px",paddingRight:"44px"},onFocus:x,onBlur:d,children:[e.jsx("option",{value:"",children:"Bitte wÃ¤hlen..."}),r.options?.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))]});case"number":return e.jsx("input",{type:"number",value:a||"",onChange:i=>g(r.key,i.target.value),placeholder:r.placeholder||"",min:r.validation?.min,max:r.validation?.max,style:w,onFocus:x,onBlur:d});default:return e.jsx("input",{type:"text",value:a||"",onChange:i=>g(r.key,i.target.value),placeholder:r.placeholder||"",style:w,onFocus:x,onBlur:d})}};return e.jsxs("div",{style:{marginBottom:l.space[5]},children:[e.jsxs("label",{style:{display:"block",marginBottom:l.space[2],fontSize:l.fontSize.sm,fontWeight:600,color:p.slate[700]},children:[r.label,r.required&&e.jsx("span",{style:{color:p.red[500],marginLeft:l.space[1]},children:"*"})]}),n(),o&&e.jsxs("p",{style:{marginTop:l.space[1.5],fontSize:l.fontSize.xs,color:p.red[500],display:"flex",alignItems:"center",gap:l.space[1]},children:[e.jsx(ue,{style:{width:"14px",height:"14px"}}),o]}),r.hint&&!o&&e.jsxs("p",{style:{marginTop:l.space[1.5],fontSize:l.fontSize.xs,color:p.slate[500],display:"flex",alignItems:"center",gap:l.space[1]},children:[e.jsx(ye,{style:{width:"14px",height:"14px"}}),r.hint]})]})},nr=({scenario:r,onBack:a,onNext:g})=>{const[o,s]=u.useState({}),[l,m]=u.useState({}),[w,b]=u.useState([]),[x,d]=u.useState(!1),n=be(),i=xt.useMemo(()=>{if(!r?.input_configuration)return[];try{const h=typeof r.input_configuration=="string"?JSON.parse(r.input_configuration):r.input_configuration;return Array.isArray(h)?h.filter(t=>t.user_input!==!1):[]}catch(h){return console.error("Error parsing input_configuration:",h),[]}},[r?.input_configuration]);u.useEffect(()=>{const h={};i.forEach(t=>{t.default&&(h[t.key]=t.default)}),s(h)},[i]);const I=(h,t)=>{s(c=>({...c,[h]:t})),l[h]&&m(c=>{const S={...c};return delete S[h],S})},C=()=>{b(h=>[...h,{key:"",value:""}])},v=(h,t,c)=>{b(S=>{const B=[...S];return B[h]={...B[h],[t]:c},B})},T=h=>{b(t=>t.filter((c,S)=>S!==h))},E=()=>{const h={};return i.forEach(t=>{const c=o[t.key];if(t.required&&(!c||c.trim()==="")){h[t.key]="Dieses Feld ist erforderlich";return}if(!(!c||c.trim()==="")&&t.validation){const{minLength:S,maxLength:B,min:W,max:F,pattern:A}=t.validation;S&&c.length<S&&(h[t.key]=`Mindestens ${S} Zeichen erforderlich`),B&&c.length>B&&(h[t.key]=`Maximal ${B} Zeichen erlaubt`),W!==void 0&&Number(c)<W&&(h[t.key]=`Mindestens ${W}`),F!==void 0&&Number(c)>F&&(h[t.key]=`Maximal ${F}`),A&&!new RegExp(A).test(c)&&(h[t.key]="UngÃ¼ltiges Format")}}),m(h),Object.keys(h).length===0},R=h=>{if(h.preventDefault(),!E())return;const t={...o};w.forEach(c=>{c.key&&c.value&&(t[c.key]=c.value)}),g(t)};return u.useEffect(()=>{i.length===0&&g({})},[i,g]),i.length===0?null:e.jsxs("div",{style:{padding:n.space[6],paddingBottom:"200px",maxWidth:"640px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:n.space[8]},children:[e.jsxs("button",{onClick:a,style:{display:"inline-flex",alignItems:"center",gap:n.space[2],padding:`${n.space[2]} ${n.space[3]}`,marginBottom:n.space[4],border:"none",background:"transparent",color:p.slate[600],fontSize:n.fontSize.sm,cursor:"pointer",borderRadius:n.radius.md,transition:n.transition.normal},onMouseEnter:h=>h.target.style.background=p.slate[100],onMouseLeave:h=>h.target.style.background="transparent",children:[e.jsx(Ee,{style:{width:"18px",height:"18px"}}),"ZurÃ¼ck zur Ãœbersicht"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:n.space[4]},children:[e.jsx("div",{style:{width:"56px",height:"56px",borderRadius:n.radius.xl,background:n.headerGradient,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Te,{style:{width:"28px",height:"28px",color:"white"}})}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:n.fontSize["2xl"],fontWeight:700,color:p.slate[900],margin:0},children:r.title}),e.jsx("p",{style:{fontSize:n.fontSize.sm,color:p.slate[600],margin:`${n.space[1]} 0 0 0`},children:"Personalisiere dein Training"})]})]})]}),e.jsx("div",{style:{padding:`${n.space[4]} ${n.space[5]}`,borderRadius:n.radius.lg,backgroundColor:p.slate[100],marginBottom:n.space[6]},children:e.jsx("p",{style:{fontSize:n.fontSize.sm,color:p.slate[700],margin:0,lineHeight:1.6},children:r.description})}),e.jsxs("form",{onSubmit:R,children:[i.map(h=>e.jsx(sr,{field:h,value:o[h.key],onChange:I,error:l[h.key],focusColor:n.primaryAccent,branding:n},h.key)),r?.allow_custom_variables&&e.jsxs("div",{style:{marginTop:n.space[5],marginBottom:n.space[5],paddingTop:n.space[5],borderTop:`1px solid ${p.slate[200]}`},children:[e.jsxs("button",{type:"button",onClick:()=>d(!x),style:{display:"flex",alignItems:"flex-start",gap:n.space[2],padding:"0",border:"none",background:"none",color:p.slate[500],fontSize:n.fontSize.sm,fontWeight:500,cursor:"pointer",marginBottom:x?n.space[4]:"0",textAlign:"left"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:n.space[2],flexShrink:0},children:[x?e.jsx(Ze,{size:18}):e.jsx(We,{size:18}),e.jsx(Ae,{size:16})]}),e.jsx("span",{style:{lineHeight:"1.4"},children:"ZusÃ¤tzliche Variablen hinzufÃ¼gen (optional)"})]}),x&&e.jsxs("div",{style:{backgroundColor:p.slate[50],borderRadius:n.radius.lg,padding:n.space[4]},children:[e.jsx("p",{style:{fontSize:n.fontSize.sm,color:p.slate[500],margin:`0 0 ${n.space[3]} 0`},children:"FÃ¼ge eigene Variablen hinzu, die in das Training einflieÃŸen sollen."}),w.length>0&&e.jsx("div",{style:{marginBottom:n.space[3]},children:w.map((h,t)=>e.jsxs("div",{style:{backgroundColor:"white",border:`1px solid ${p.slate[200]}`,borderRadius:n.radius.md,padding:n.space[3],marginBottom:n.space[3]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:n.space[2]},children:[e.jsx("input",{type:"text",value:h.key||"",onChange:c=>v(t,"key",c.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"_")),placeholder:"variable_name",style:{padding:`${n.space[2]} ${n.space[3]}`,borderRadius:n.radius.md,border:`1px solid ${p.slate[200]}`,fontSize:n.fontSize.sm,fontFamily:"monospace",backgroundColor:p.slate[50],flex:1,marginRight:n.space[2]}}),e.jsx("button",{type:"button",onClick:()=>T(t),style:{padding:n.space[2],border:"none",backgroundColor:"transparent",cursor:"pointer",color:p.red[500],display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(at,{size:16})})]}),e.jsx("textarea",{value:h.value||"",onChange:c=>v(t,"value",c.target.value),placeholder:"Wert der Variable...",rows:2,style:{width:"100%",padding:`${n.space[2]} ${n.space[3]}`,borderRadius:n.radius.md,border:`1px solid ${p.slate[200]}`,fontSize:n.fontSize.sm,resize:"vertical"}})]},t))}),e.jsxs("button",{type:"button",onClick:C,style:{display:"flex",alignItems:"center",gap:n.space[2],padding:`${n.space[2]} ${n.space[3]}`,border:`1px dashed ${p.slate[300]}`,borderRadius:n.radius.md,backgroundColor:"white",color:p.slate[600],fontSize:n.fontSize.sm,cursor:"pointer",width:"100%",justifyContent:"center"},children:[e.jsx(Ae,{size:16}),"Variable hinzufÃ¼gen"]})]})]}),e.jsxs("div",{style:{padding:`${n.space[4]} ${n.space[5]}`,borderRadius:n.radius.lg,backgroundColor:n.primaryAccentLight,marginTop:n.space[6],marginBottom:n.space[6],display:"flex",gap:n.space[5],flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:n.fontSize.xs,color:p.slate[500],display:"block"},children:"Fragen"}),e.jsxs("span",{style:{fontSize:n.fontSize.base,fontWeight:600,color:p.slate[900]},children:[r.question_count_min,"-",r.question_count_max]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:n.fontSize.xs,color:p.slate[500],display:"block"},children:"Zeit pro Frage"}),e.jsxs("span",{style:{fontSize:n.fontSize.base,fontWeight:600,color:p.slate[900]},children:[Math.round(r.time_limit_per_question/60)," Min"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:n.fontSize.xs,color:p.slate[500],display:"block"},children:"Wiederholen"}),e.jsx("span",{style:{fontSize:n.fontSize.base,fontWeight:600,color:p.slate[900]},children:r.allow_retry?"Erlaubt":"Nicht erlaubt"})]})]}),e.jsxs("button",{type:"submit",style:{width:"100%",padding:`${n.space[4]} ${n.space[6]}`,borderRadius:n.radius.xl,border:"none",background:n.buttonGradient,color:"white",fontSize:n.fontSize.base,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:n.space[2.5],transition:n.transition.normal,boxShadow:`0 4px 12px ${n.primaryAccent}4d`},onMouseEnter:h=>{h.target.style.transform="translateY(-2px)",h.target.style.boxShadow=`0 6px 16px ${n.primaryAccent}66`},onMouseLeave:h=>{h.target.style.transform="none",h.target.style.boxShadow=`0 4px 12px ${n.primaryAccent}4d`},children:["Weiter",e.jsx(lt,{style:{width:"20px",height:"20px"}})]})]})]})},Be=({score:r,label:a,size:g="normal",primaryAccent:o,branding:s})=>{const l=r!=null?r*10:null,w=(x=>x>=80?s.success:x>=60?o:x>=40?s.warning:s.error)(l),b=g==="large";return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:s.space[1]},children:[e.jsx("div",{style:{width:b?"80px":"56px",height:b?"80px":"56px",borderRadius:s.radius.full,backgroundColor:`${w}15`,border:`3px solid ${w}`,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{fontSize:b?s.fontSize["5xl"]:s.fontSize["2xl"],fontWeight:s.fontWeight.bold,color:w},children:l!=null?Math.round(l):"-"})}),e.jsx("span",{style:{fontSize:b?s.fontSize.base:s.fontSize.xs,color:s.textSecondary,fontWeight:s.fontWeight.medium},children:a})]})},de=({title:r,icon:a,children:g,defaultOpen:o=!0,primaryAccent:s,branding:l})=>{const[m,w]=u.useState(o);return e.jsxs("div",{style:{borderRadius:l.radius.lg,border:`1px solid ${l.borderColor}`,backgroundColor:l.cardBg,overflow:"hidden",marginBottom:l.space[4]},children:[e.jsxs("button",{onClick:()=>w(!m),style:{width:"100%",padding:`${l.space[4]} ${l.space[5]}`,display:"flex",alignItems:"center",justifyContent:"space-between",border:"none",backgroundColor:"transparent",cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:l.space[3]},children:[e.jsx(a,{style:{width:l.iconSize.lg,height:l.iconSize.lg,color:s}}),e.jsx("span",{style:{fontSize:l.fontSize.md,fontWeight:l.fontWeight.semibold,color:l.textMain},children:r})]}),m?e.jsx(Ze,{style:{width:l.iconSize.lg,height:l.iconSize.lg,color:l.textMuted}}):e.jsx(We,{style:{width:l.iconSize.lg,height:l.iconSize.lg,color:l.textMuted}})]}),m&&e.jsx("div",{style:{padding:`0 ${l.space[5]} ${l.space[5]} ${l.space[5]}`,borderTop:`1px solid ${l.cardBgHover}`,paddingTop:l.space[4]},children:g})]})},Ne=({text:r,type:a,primaryAccent:g,primaryAccentLight:o,branding:s})=>{const l={strength:{icon:ct,color:s.success,bg:s.successLight},improvement:{icon:dt,color:s.warning,bg:s.warningLight},tip:{icon:V,color:g,bg:o}},{icon:m,color:w,bg:b}=l[a]||l.tip;return e.jsxs("div",{style:{display:"flex",gap:s.space[3],padding:s.space[3],borderRadius:s.radius.md,backgroundColor:b,marginBottom:s.space[2]},children:[e.jsx(m,{style:{width:s.iconSize.md,height:s.iconSize.md,color:w,flexShrink:0,marginTop:"2px"}}),e.jsx("span",{style:{fontSize:s.fontSize.base,color:s.textSecondary,lineHeight:1.5},children:r})]})},or=({metrics:r,branding:a})=>{if(!r)return null;const o=(l=>{switch(l){case"optimal":return{label:"Optimal",color:a.success};case"zu_schnell":return{label:"Zu schnell",color:a.warning};case"zu_langsam":return{label:"Zu langsam",color:a.warning};default:return{label:l||"N/A",color:a.textMuted}}})(r.speech_rate),s=l=>{switch(l){case"niedrig":return a.success;case"mittel":return a.warning;case"hoch":return a.error;default:return a.textMuted}};return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:a.space[4]},children:[e.jsxs("div",{style:{padding:a.space[4],borderRadius:a.radius.md,backgroundColor:a.cardBgHover},children:[e.jsx("span",{style:{fontSize:a.fontSize.xs,color:a.textMuted,display:"block",marginBottom:a.space[1]},children:"Sprechtempo"}),e.jsx("span",{style:{fontSize:a.fontSize.lg,fontWeight:a.fontWeight.semibold,color:o.color},children:o.label})]}),r.filler_words&&e.jsxs("div",{style:{padding:a.space[4],borderRadius:a.radius.md,backgroundColor:a.cardBgHover},children:[e.jsx("span",{style:{fontSize:a.fontSize.xs,color:a.textMuted,display:"block",marginBottom:a.space[1]},children:"FÃ¼llwÃ¶rter"}),e.jsxs("span",{style:{fontSize:a.fontSize.lg,fontWeight:600,color:s(r.filler_words.severity)},children:[r.filler_words.count||0,r.filler_words.words?.length>0&&e.jsxs("span",{style:{fontSize:"12px",fontWeight:400,marginLeft:"8px"},children:["(",r.filler_words.words.slice(0,3).join(", "),")"]})]})]}),r.confidence_score!==void 0&&e.jsxs("div",{style:{padding:"16px",borderRadius:"10px",backgroundColor:a.cardBgHover},children:[e.jsx("span",{style:{fontSize:"12px",color:a.textMuted,display:"block",marginBottom:"4px"},children:"Selbstbewusstsein"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{flex:1,height:"8px",backgroundColor:a.borderColor,borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${r.confidence_score}%`,height:"100%",backgroundColor:r.confidence_score>=70?a.success:a.warning,borderRadius:"4px"}})}),e.jsxs("span",{style:{fontSize:"14px",fontWeight:600,color:a.textSecondary},children:[r.confidence_score,"%"]})]})]}),r.clarity_score!==void 0&&e.jsxs("div",{style:{padding:"16px",borderRadius:"10px",backgroundColor:a.cardBgHover},children:[e.jsx("span",{style:{fontSize:"12px",color:a.textMuted,display:"block",marginBottom:"4px"},children:"Klarheit"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{flex:1,height:"8px",backgroundColor:a.borderColor,borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${r.clarity_score}%`,height:"100%",backgroundColor:r.clarity_score>=70?a.success:a.warning,borderRadius:"4px"}})}),e.jsxs("span",{style:{fontSize:"14px",fontWeight:600,color:a.textSecondary},children:[r.clarity_score,"%"]})]})]}),r.notes&&e.jsxs("div",{style:{gridColumn:"1 / -1",padding:"12px 16px",borderRadius:"10px",backgroundColor:a.primaryAccentLight,fontSize:"14px",color:a.textSecondary,lineHeight:1.5},children:["ðŸ’¡ ",r.notes]})]})},ir=({audioUrl:r,primaryAccent:a,branding:g})=>{const o=u.useRef(null),[s,l]=u.useState(!1),[m,w]=u.useState(0),[b,x]=u.useState(0),[d,n]=u.useState(!0),[i,I]=u.useState(null);u.useEffect(()=>{if(!r)return;n(!0),I(null);const R=new Audio;o.current=R;const h=()=>{const c=R.duration;c&&isFinite(c)&&c>0&&x(c),n(!1)},t=()=>{n(!1);const c=R.duration;c&&isFinite(c)&&c>0&&x(c)};return R.addEventListener("loadedmetadata",h),R.addEventListener("canplaythrough",t),R.addEventListener("timeupdate",()=>w(R.currentTime)),R.addEventListener("play",()=>l(!0)),R.addEventListener("pause",()=>l(!1)),R.addEventListener("ended",()=>l(!1)),R.addEventListener("error",()=>{I("Audio nicht verfÃ¼gbar"),n(!1)}),R.src=r,R.load(),()=>{R.pause(),R.src=""}},[r]);const C=()=>{o.current&&(s?o.current.pause():o.current.play())},v=R=>{const h=R.currentTarget.getBoundingClientRect(),t=(R.clientX-h.left)/h.width;o.current&&b>0&&(o.current.currentTime=t*b)},T=R=>{o.current&&(o.current.currentTime=Math.max(0,Math.min(o.current.currentTime+R,b)))};if(!r)return null;if(i)return e.jsxs("div",{style:{padding:"12px 16px",background:g.cardBgHover,borderRadius:"10px",color:g.textMuted,fontSize:"13px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(ue,{size:16})," ",i]});const E=b>0?m/b*100:0;return e.jsxs("div",{style:{background:g.cardBgHover,borderRadius:"12px",padding:"16px"},children:[e.jsx("div",{onClick:v,style:{height:"6px",background:g.borderColor,borderRadius:"3px",cursor:"pointer",marginBottom:"12px"},children:e.jsx("div",{style:{width:`${E}%`,height:"100%",background:a,borderRadius:"3px",transition:"width 0.1s"}})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},children:[e.jsx("button",{onClick:()=>T(-10),style:{background:"none",border:"none",cursor:"pointer",padding:"6px",color:g.textMuted,display:"flex",alignItems:"center"},children:e.jsx(_t,{size:20})}),e.jsx("button",{onClick:C,disabled:d,style:{width:"44px",height:"44px",borderRadius:"50%",background:a,border:"none",cursor:d?"wait":"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#ffffff",opacity:d?.7:1},children:d?e.jsx(Ue,{size:20,color:"#ffffff",style:{animation:"spin 1s linear infinite"}}):s?e.jsx(Mt,{size:20,color:"#ffffff",fill:"#ffffff"}):e.jsx(Qe,{size:20,color:"#ffffff",fill:"#ffffff",style:{marginLeft:"2px"}})}),e.jsx("button",{onClick:()=>T(10),style:{background:"none",border:"none",cursor:"pointer",padding:"6px",color:g.textMuted,display:"flex",alignItems:"center"},children:e.jsx(Tt,{size:20})})]}),e.jsxs("div",{style:{textAlign:"center",marginTop:"8px",fontSize:"12px",color:g.textMuted},children:[Me(m)," / ",Me(b)]}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]})},ar=({transcript:r,feedback:a,audioMetrics:g,audioUrl:o,onRetry:s,onNext:l,onComplete:m,isLastQuestion:w,hideButtons:b=!1})=>{const{branding:x}=_e(),d=be(),n=x?.["--button-gradient"]||x?.["--header-gradient"]||pe["--header-gradient"],i=x?.["--primary-accent"]||pe["--primary-accent"],I=x?.["--primary-accent-light"]||pe["--primary-accent-light"],C=typeof a=="string"?JSON.parse(a):a;return e.jsxs("div",{style:{backgroundColor:d.cardBgHover,borderRadius:d.radius.xl,padding:d.space[6]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"20px",marginBottom:"24px",padding:d.space[5],backgroundColor:d.cardBg,borderRadius:d.radius.lg},children:[e.jsx(Be,{score:C?.scores?.overall,label:"Gesamt",size:"large",primaryAccent:i,branding:d}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:d.textMain,margin:"0 0 8px 0"},children:"Feedback zu deiner Antwort"}),e.jsx("p",{style:{fontSize:"14px",color:d.textSecondary,margin:0,lineHeight:1.5},children:C?.summary||"Deine Antwort wurde analysiert."})]})]}),C?.scores&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"32px",padding:"16px",marginBottom:"16px",backgroundColor:d.cardBg,borderRadius:"12px"},children:[e.jsx(Be,{score:C.scores.content,label:"Inhalt",primaryAccent:i,branding:d}),e.jsx(Be,{score:C.scores.structure,label:"Struktur",primaryAccent:i,branding:d}),e.jsx(Be,{score:C.scores.relevance,label:"Relevanz",primaryAccent:i,branding:d})]}),e.jsx(de,{title:"Transkript",icon:me,defaultOpen:!0,primaryAccent:i,branding:d,children:e.jsxs("div",{style:{padding:"16px",borderRadius:"10px",backgroundColor:d.cardBgHover,fontStyle:"italic",color:d.textSecondary,lineHeight:1.6,fontSize:"14px"},children:['"',r||"Keine Transkription verfÃ¼gbar.",'"']})}),o&&e.jsx(de,{title:"Deine Aufnahme",icon:At,defaultOpen:!0,primaryAccent:i,branding:d,children:e.jsx(ir,{audioUrl:o,primaryAccent:i,branding:d})}),C?.strengths?.length>0&&e.jsx(de,{title:"StÃ¤rken",icon:ct,defaultOpen:!0,primaryAccent:i,branding:d,children:C.strengths.map((v,T)=>e.jsx(Ne,{text:v,type:"strength",primaryAccent:i,primaryAccentLight:I,branding:d},T))}),C?.improvements?.length>0&&e.jsx(de,{title:"Verbesserungen",icon:dt,defaultOpen:!0,primaryAccent:i,branding:d,children:C.improvements.map((v,T)=>e.jsx(Ne,{text:v,type:"improvement",primaryAccent:i,primaryAccentLight:I,branding:d},T))}),C?.tips?.length>0&&e.jsx(de,{title:"Tipps",icon:V,defaultOpen:!1,primaryAccent:i,branding:d,children:C.tips.map((v,T)=>e.jsx(Ne,{text:v,type:"tip",primaryAccent:i,primaryAccentLight:I,branding:d},T))}),g&&e.jsx(de,{title:"Sprechanalyse",icon:U,defaultOpen:!1,primaryAccent:i,branding:d,children:e.jsx(or,{metrics:g,branding:d})}),!b&&e.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"24px",justifyContent:"flex-end",flexWrap:"wrap"},children:[s&&e.jsxs("button",{onClick:s,style:{display:"flex",alignItems:"center",gap:"8px",padding:"14px 24px",borderRadius:"12px",border:`2px solid ${d.borderColor}`,backgroundColor:d.cardBg,color:d.textSecondary,fontSize:"15px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:v=>{v.target.style.borderColor=i,v.target.style.color=i},onMouseLeave:v=>{v.target.style.borderColor=d.borderColor,v.target.style.color=d.textSecondary},children:[e.jsx(Ke,{style:{width:"18px",height:"18px"}}),"Nochmal versuchen"]}),e.jsx("button",{onClick:w?m:l,style:{display:"flex",alignItems:"center",gap:"8px",padding:"14px 24px",borderRadius:"12px",border:"none",background:n,color:"white",fontSize:"15px",fontWeight:600,cursor:"pointer",boxShadow:`0 4px 12px ${i}4d`,transition:"all 0.2s"},onMouseEnter:v=>{v.target.style.transform="translateY(-2px)",v.target.style.boxShadow=`0 6px 16px ${i}66`},onMouseLeave:v=>{v.target.style.transform="none",v.target.style.boxShadow=`0 4px 12px ${i}4d`},children:w?e.jsxs(e.Fragment,{children:[e.jsx(pt,{style:{width:"18px",height:"18px"}}),"Training abschlieÃŸen"]}):e.jsxs(e.Fragment,{children:["NÃ¤chste Frage",e.jsx(Ve,{style:{width:"18px",height:"18px"}})]})})]})]})},lr=({tips:r,primaryAccent:a,tipsLabel:g,branding:o})=>{const[s,l]=u.useState(!0);return!r||r.length===0?null:e.jsxs("div",{style:{background:o.cardBg,borderRadius:o.radius.xl,border:`1px solid ${o.borderColor}`,overflow:"hidden"},children:[e.jsxs("button",{onClick:()=>l(!s),style:{width:"100%",padding:`${o.space[4]} ${o.space[6]}`,background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:o.space[2],fontSize:o.fontSize.base,fontWeight:o.fontWeight.semibold,color:o.textMain},children:[e.jsx(V,{size:o.iconSize.md,color:a}),g||"Tipps fÃ¼r diese Frage"]}),e.jsx(We,{size:o.iconSize.md,color:o.textMuted,style:{transform:s?"rotate(180deg)":"none",transition:o.transition.normal}})]}),e.jsx(Et,{children:s&&e.jsx(Wt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},style:{overflow:"hidden"},children:e.jsx("div",{style:{padding:`0 ${o.space[6]} ${o.space[6]}`},children:r.map((m,w)=>e.jsxs("div",{style:{display:"flex",gap:o.space[3],padding:`${o.space[3]} ${o.space[4]}`,borderRadius:o.radius.md,backgroundColor:o.warningLight,marginBottom:w<r.length-1?o.space[2]:0},children:[e.jsx(V,{style:{width:o.iconSize.sm,height:o.iconSize.sm,color:o.warning,flexShrink:0,marginTop:"2px"}}),e.jsx("p",{style:{fontSize:o.fontSize.base,color:o.textSecondary,margin:0,lineHeight:1.5},children:m.replace(/^Tipp \d+:\s*/i,"")})]},w))})})})]})},cr=({seconds:r,maxSeconds:a,isRecording:g,branding:o})=>{const s=a>0?r/a*100:0,l=s>75,m=s>90;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:o.space[3],padding:`${o.space[3]} ${o.space[4]}`,borderRadius:o.radius.lg,backgroundColor:m?o.errorLight:l?o.warningLight:o.cardBgHover},children:[e.jsx(re,{style:{width:o.iconSize.lg,height:o.iconSize.lg,color:m?o.error:l?o.warning:o.textSecondary}}),e.jsx("span",{style:{fontSize:o.fontSize.xl,fontWeight:o.fontWeight.semibold,fontFamily:"monospace",color:m?o.error:l?o.warning:o.textSecondary},children:Me(r)}),e.jsxs("span",{style:{fontSize:o.fontSize.base,color:o.textMuted},children:["/ ",Me(a)]})]})},st=({onRecordingComplete:r,timeLimit:a,disabled:g,deviceId:o,themedGradient:s,primaryAccent:l,isSubmitting:m,labels:w,onOpenSettings:b,branding:x,isMobile:d,onStreamChange:n})=>{const[i,I]=u.useState("idle"),[C,v]=u.useState(0),[T,E]=u.useState(0),[R,h]=u.useState(!1),t=u.useRef(null),c=u.useRef([]),S=u.useRef(null),B=u.useRef(null),W=u.useRef(null),F=u.useRef(null),A=u.useRef(null),P=u.useRef(0),N=u.useRef(!1);u.useEffect(()=>()=>{J()},[]),u.useEffect(()=>{i==="recording"&&C>=a&&_()},[C,a,i]);const J=()=>{S.current&&clearInterval(S.current),F.current&&cancelAnimationFrame(F.current),B.current&&(B.current.close(),B.current=null),A.current&&(A.current.getTracks().forEach(z=>z.stop()),A.current=null,n&&n(null))},f=async()=>{try{h(!1),c.current=[],v(0);let z;const H={audio:o?{deviceId:{exact:o}}:!0};try{z=await navigator.mediaDevices.getUserMedia(H)}catch(L){throw console.error("[SIMULATOR] Selected device unavailable:",L),L.name==="OverconstrainedError"||L.name==="NotFoundError"?(h(!1),new Error("Das ausgewÃ¤hlte Mikrofon ist nicht verfÃ¼gbar. Bitte wÃ¤hle ein anderes Mikrofon in den Einstellungen.")):L}A.current=z,n&&n(z),B.current=new(window.AudioContext||window.webkitAudioContext),W.current=B.current.createAnalyser(),B.current.createMediaStreamSource(z).connect(W.current),W.current.fftSize=256;const X=()=>{if(W.current&&N.current){const L=new Uint8Array(W.current.frequencyBinCount);W.current.getByteFrequencyData(L);const Q=L.reduce((we,Fe)=>we+Fe)/L.length;E(Q/255)}F.current=requestAnimationFrame(X)};N.current=!0,X();const je=MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":MediaRecorder.isTypeSupported("audio/webm")?"audio/webm":"audio/mp4";t.current=new MediaRecorder(z,{mimeType:je}),t.current.ondataavailable=L=>{L.data.size>0&&c.current.push(L.data)},t.current.onstop=()=>{const L=new Blob(c.current,{type:je});r(L,P.current)},t.current.start(1e3),I("recording"),S.current=setInterval(()=>{v(L=>L+1)},1e3)}catch(z){console.error("Error starting recording:",z),(z.name==="NotAllowedError"||z.name==="PermissionDeniedError")&&h(!0)}},y=()=>{t.current&&t.current.state==="recording"&&(t.current.pause(),I("paused"),N.current=!1,S.current&&(clearInterval(S.current),S.current=null),E(0))},k=()=>{t.current&&t.current.state==="paused"&&(t.current.resume(),I("recording"),N.current=!0,S.current=setInterval(()=>{v(z=>z+1)},1e3))},_=()=>{P.current=C,N.current=!1,S.current&&(clearInterval(S.current),S.current=null),F.current&&(cancelAnimationFrame(F.current),F.current=null),B.current&&(B.current.close(),B.current=null),t.current&&t.current.state!=="inactive"&&t.current.stop(),A.current&&(A.current.getTracks().forEach(z=>z.stop()),A.current=null),I("idle"),E(0),v(0)},j=()=>{i==="idle"?f():i==="recording"?y():i==="paused"&&k()};return R?e.jsxs("div",{style:{padding:"24px",borderRadius:"16px",backgroundColor:x.errorLight,textAlign:"center"},children:[e.jsx(Ft,{style:{width:"48px",height:"48px",color:x.error,marginBottom:"12px"}}),e.jsx("p",{style:{color:x.error,fontWeight:600,margin:0},children:"Mikrofonzugriff verweigert"}),e.jsx("p",{style:{color:x.textSecondary,fontSize:"14px",marginTop:"8px"},children:"Bitte erlaube den Zugriff auf dein Mikrofon in den Browser-Einstellungen."})]}):e.jsxs("div",{style:{padding:"24px",borderRadius:"16px",backgroundColor:x.cardBg,border:`1px solid ${x.borderColor}`,position:"relative"},children:[d&&e.jsx("button",{onClick:b,style:{position:"absolute",top:"12px",right:"12px",padding:"10px",borderRadius:"10px",background:x.cardBgHover,border:`1px solid ${x.borderColor}`,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Pe,{size:18,color:x.textMuted})}),e.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"24px"},children:e.jsx(cr,{seconds:C,maxSeconds:a,isRecording:i==="recording",branding:x})}),i==="recording"&&e.jsx("div",{style:{marginBottom:"24px"},children:e.jsx(Qt,{audioLevel:T,isActive:!0,variant:"bars",size:"sm",accentColor:l})}),i==="paused"&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"8px",height:"60px",marginBottom:"24px",color:x.warning},children:[e.jsx(U,{size:24}),e.jsx("span",{style:{fontSize:"16px",fontWeight:600},children:"Aufnahme pausiert"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"12px"},children:[!d&&e.jsx("button",{onClick:b,style:{padding:"14px",borderRadius:"12px",background:x.cardBgHover,border:`1px solid ${x.borderColor}`,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Pe,{size:20,color:x.textMuted})}),e.jsxs("button",{onClick:j,disabled:g||m,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",padding:d?"14px 20px":"14px 28px",borderRadius:"12px",border:"none",flex:d?1:"none",background:i==="idle"?g||m?x.borderColor:x.error:i==="recording"?x.warning:x.success,color:"white",fontSize:d?"15px":"16px",fontWeight:600,cursor:g||m?"not-allowed":"pointer",boxShadow:g||m?"none":"0 4px 14px rgba(0, 0, 0, 0.2)"},children:[i==="idle"&&e.jsxs(e.Fragment,{children:[e.jsx(U,{style:{width:"20px",height:"20px"}}),"Aufnahme starten"]}),i==="recording"&&e.jsxs(e.Fragment,{children:[e.jsx(Lt,{style:{width:"18px",height:"18px"}}),"Pausieren"]}),i==="paused"&&e.jsxs(e.Fragment,{children:[e.jsx(Qe,{style:{width:"18px",height:"18px"}}),"Fortsetzen"]})]}),(i==="recording"||i==="paused")&&e.jsxs("button",{onClick:_,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:d?"14px 16px":"14px 24px",borderRadius:"12px",border:"none",flex:d?1:"none",backgroundColor:x.cardBgHover,color:x.textMain,fontSize:d?"15px":"16px",fontWeight:600,cursor:"pointer"},children:[e.jsx(Se,{style:{width:"18px",height:"18px",color:x.success}}),w?.submitButton||"Antwort abgeben"]})]}),i==="idle"&&!m&&e.jsx("p",{style:{textAlign:"center",marginTop:"16px",color:x.textMuted,fontSize:"14px"},children:w?.submitHint||"Klicke auf den Button, um deine Antwort aufzunehmen"}),m&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"24px"},children:[e.jsx(Ue,{style:{width:"32px",height:"32px",color:l,animation:"spin 1s linear infinite"}}),e.jsx("p",{style:{marginTop:"12px",color:x.textSecondary,fontSize:"14px"},children:w?.analyzing||"Antwort wird analysiert..."})]}),e.jsx("style",{children:`
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.8; } }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
      `})]})},nt={target:ae,clock:re,mic:U,"message-square":me,lightbulb:V,brain:Ge,info:ye,settings:Pe,check:Se,Target:ae,Clock:re,Mic:U,MessageSquare:me,Lightbulb:V,Brain:Ge},dr=({scenario:r,variables:a,questions:g,onStart:o,onBack:s,selectedMicrophoneId:l,onMicrophoneChange:m,onMicrophoneTest:w,themedGradient:b,primaryAccent:x,primaryAccentLight:d,isLoading:n,branding:i})=>{const I=r?.mode==="SIMULATION",C=I?"Situationen":"Fragen",v=I?"Zeit pro Situation":"Zeit pro Frage",T=[{icon:ae,title:"Strukturiert antworten",description:"Nutze die STAR-Methode (Situation, Task, Action, Result) fÃ¼r Beispiele aus deiner Erfahrung."},{icon:re,title:"Zeit im Blick behalten",description:`Du hast ${Math.round((r.time_limit_per_question||120)/60)} Minuten pro ${I?"Situation":"Frage"}. ${I?"Reagiere":"Antworte"} prÃ¤zise, aber ausfÃ¼hrlich genug.`},{icon:U,title:"Klar und deutlich sprechen",description:"Sprich in normalem Tempo. Kurze Pausen zum Nachdenken sind vÃ¶llig in Ordnung."},{icon:me,title:"Konkrete Beispiele nennen",description:"Belege deine Aussagen mit konkreten Beispielen und Zahlen wo mÃ¶glich."}],E=r.tips&&Array.isArray(r.tips)&&r.tips.length>0?r.tips.map((c,S)=>typeof c=="string"?{icon:V,title:`Tipp ${S+1}`,description:c}:{icon:nt[c.icon]||nt[c.icon?.toLowerCase()]||V,title:c.title||`Tipp ${S+1}`,description:c.text||c.description||""}):T,R=u.useMemo(()=>{if(!r?.input_configuration)return{};try{const c=typeof r.input_configuration=="string"?JSON.parse(r.input_configuration):r.input_configuration;return Array.isArray(c)?c.reduce((S,B)=>(B.key&&B.label&&(S[B.key]=B.label),S),{}):{}}catch{return{}}},[r?.input_configuration]),h=a?Object.entries(a).filter(([c,S])=>S&&S.trim&&S.trim()!=="").map(([c,S])=>({label:R[c]||c.replace(/_/g," ").replace(/\b\w/g,B=>B.toUpperCase()),value:S})):[],t=c=>{if(!c||!a)return c;let S=c;return Object.entries(a).forEach(([B,W])=>{W&&(S=S.replace(new RegExp(`\\$\\{${B}\\}`,"g"),W),S=S.replace(new RegExp(`\\{${B}\\}`,"g"),W))}),S};return e.jsxs("div",{style:{padding:"24px",maxWidth:"800px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("button",{onClick:s,style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"8px 12px",marginBottom:"16px",border:"none",background:"transparent",color:i.textSecondary,fontSize:"14px",cursor:"pointer",borderRadius:"8px"},children:[e.jsx(Ee,{style:{width:"18px",height:"18px"}}),"ZurÃ¼ck"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",background:b,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(V,{style:{width:"32px",height:"32px",color:"white"}})}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"28px",fontWeight:700,color:i.textMain,margin:0},children:"Vorbereitung"}),e.jsxs("p",{style:{fontSize:"16px",color:i.textSecondary,margin:"4px 0 0 0"},children:[r.title,g.length>0?` â€¢ ${g.length} ${C}`:""]})]})]})]}),r.long_description&&e.jsx("div",{style:{padding:"20px 24px",borderRadius:"16px",backgroundColor:i.cardBg,border:`1px solid ${i.borderColor}`,marginBottom:"24px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"14px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:b,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(ye,{style:{width:"20px",height:"20px",color:"white"}})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:i.textMain,margin:"0 0 8px 0"},children:"Deine Aufgabe"}),e.jsx("p",{style:{fontSize:"15px",lineHeight:"1.6",color:i.textSecondary,margin:0,whiteSpace:"pre-wrap"},children:t(r.long_description?.replace(/\/n/g,`
`))})]})]})}),h.length>0&&e.jsxs("div",{style:{padding:"20px",borderRadius:"16px",backgroundColor:d,marginBottom:"24px"},children:[e.jsx("h3",{style:{fontSize:"14px",fontWeight:600,color:x,margin:"0 0 12px 0",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Dein Profil"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"16px"},children:h.map((c,S)=>e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:i.textMuted,display:"block"},children:c.label}),e.jsx("span",{style:{fontSize:"15px",fontWeight:500,color:i.textMain},children:c.value})]},S))})]}),e.jsxs("div",{style:{padding:"24px",borderRadius:"16px",backgroundColor:i.cardBg,border:`1px solid ${i.borderColor}`,marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"16px"},children:[e.jsx(U,{style:{width:"22px",height:"22px",color:x}}),e.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:i.textMain,margin:0},children:"Mikrofon testen"})]}),e.jsx(ht,{selectedDeviceId:l,onDeviceChange:m,onTestClick:w})]}),e.jsxs("button",{onClick:o,disabled:n,style:{width:"100%",padding:"18px 28px",borderRadius:"14px",border:"none",background:n?i.borderColor:b,color:"white",fontSize:"18px",fontWeight:600,cursor:n?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",boxShadow:n?"none":`0 4px 12px ${x}4d`,marginBottom:"24px",opacity:n?.7:1},children:[e.jsx(Qe,{style:{width:"24px",height:"24px"}}),"GesprÃ¤ch starten"]}),e.jsxs("div",{style:{padding:"24px",borderRadius:"16px",backgroundColor:i.cardBg,border:`1px solid ${i.borderColor}`,marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"20px"},children:[e.jsx(V,{style:{width:"22px",height:"22px",color:i.warning}}),e.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:i.textMain,margin:0},children:"Tipps fÃ¼r dein GesprÃ¤ch"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:E.map((c,S)=>e.jsxs("div",{style:{display:"flex",gap:"16px",padding:"16px",borderRadius:"12px",backgroundColor:i.cardBgHover},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",backgroundColor:d,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(c.icon,{style:{width:"22px",height:"22px",color:x}})}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"15px",fontWeight:600,color:i.textMain,margin:"0 0 4px 0"},children:c.title}),e.jsx("p",{style:{fontSize:"14px",color:i.textSecondary,margin:0,lineHeight:1.5},children:c.description})]})]},S))})]}),e.jsxs("div",{style:{padding:"16px 20px",borderRadius:"12px",backgroundColor:i.cardBgHover,display:"flex",gap:"24px",flexWrap:"wrap"},children:[g.length>0&&e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:i.textMuted,display:"block"},children:C}),e.jsx("span",{style:{fontSize:"18px",fontWeight:600,color:i.textMain},children:g.length})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:i.textMuted,display:"block"},children:v}),e.jsxs("span",{style:{fontSize:"18px",fontWeight:600,color:i.textMain},children:[Math.round((r.time_limit_per_question||120)/60)," Min"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:i.textMuted,display:"block"},children:"Wiederholen"}),e.jsx("span",{style:{fontSize:"18px",fontWeight:600,color:i.textMain},children:r.allow_retry?"Erlaubt":"Nicht erlaubt"})]})]})]})},pr=({isOpen:r,onClose:a,onConfirm:g,answeredCount:o,totalCount:s,labels:l})=>r?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:a,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",maxWidth:"420px",width:"90%",boxShadow:"0 20px 50px rgba(0, 0, 0, 0.2)"},onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#dcfce7",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ut,{size:24,color:"#22c55e"})}),e.jsx("h3",{style:{fontSize:"18px",fontWeight:600,color:"#0f172a",margin:0},children:"Training beenden?"})]}),o>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{style:{fontSize:"14px",color:"#64748b",lineHeight:1.6,marginBottom:"8px"},children:["Du hast ",e.jsx("strong",{children:l.answeredCount(o,s)})," beantwortet."]}),e.jsxs("p",{style:{fontSize:"14px",color:"#64748b",lineHeight:1.6,marginBottom:"24px"},children:["MÃ¶chtest du das Training jetzt mit den bisherigen Antworten abschlieÃŸen oder weitere ",l.questionsLabel," beantworten?"]})]}):e.jsxs("p",{style:{fontSize:"14px",color:"#64748b",lineHeight:1.6,marginBottom:"24px"},children:["Du hast noch keine ",l.questionsLabel," beantwortet. MÃ¶chtest du das Training wirklich beenden?"]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:a,style:{padding:"10px 20px",borderRadius:"10px",border:"1px solid #e2e8f0",background:"white",color:"#64748b",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"Weiter trainieren"}),e.jsx("button",{onClick:g,style:{padding:"10px 20px",borderRadius:"10px",border:"none",background:"#22c55e",color:"white",fontSize:"14px",fontWeight:600,cursor:"pointer",boxShadow:"0 2px 8px rgba(34, 197, 94, 0.3)"},children:"Training beenden"})]})]})}):null,ur=({isOpen:r,onClose:a,onConfirm:g,answeredCount:o,labels:s})=>r?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:a,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",maxWidth:"420px",width:"90%",boxShadow:"0 20px 50px rgba(0, 0, 0, 0.2)"},onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ue,{size:24,color:"#ef4444"})}),e.jsx("h3",{style:{fontSize:"18px",fontWeight:600,color:"#0f172a",margin:0},children:"Training abbrechen?"})]}),e.jsxs("p",{style:{fontSize:"14px",color:"#64748b",lineHeight:1.6,marginBottom:"24px"},children:[e.jsx("strong",{children:"Achtung:"})," Wenn du das Training abbrichst, werden alle deine bisherigen Antworten",o>0?` (${o} ${s.questionsLabel})`:""," ",e.jsx("strong",{children:"nicht gespeichert"})," und gehen verloren."]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:a,style:{padding:"10px 20px",borderRadius:"10px",border:"1px solid #e2e8f0",background:"white",color:"#64748b",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"ZurÃ¼ck"}),e.jsx("button",{onClick:g,style:{padding:"10px 20px",borderRadius:"10px",border:"none",background:"#ef4444",color:"white",fontSize:"14px",fontWeight:600,cursor:"pointer",boxShadow:"0 2px 8px rgba(239, 68, 68, 0.3)"},children:"Abbrechen"})]})]})}):null,xr=({session:r,questions:a,scenario:g,variables:o,preloadedQuestions:s,onSessionCreated:l,onComplete:m,onExit:w,startFromQuestion:b=0,initialMicrophoneId:x})=>{const d=Kt(),[n,i]=u.useState(r),[I,C]=u.useState(a||[]),[v,T]=u.useState(!1),[E,R]=u.useState(null),{demoCode:h}=_e(),t=g?.mode==="SIMULATION",c={questionLabel:t?"Situation / Aussage des GegenÃ¼bers:":"Interviewfrage:",questionFallback:t?"Situation":"Frage",questionLoading:t?"Situation wird geladen...":"Frage wird geladen...",answerPlaceholder:t?"Deine Reaktion...":"Deine Antwort...",submitButton:t?"Reaktion abgeben":"Antwort abgeben",submitHint:t?"Klicke auf den Button, um deine Reaktion aufzunehmen":"Klicke auf den Button, um deine Antwort aufzunehmen",analyzing:t?"Reaktion wird analysiert...":"Antwort wird analysiert...",questionCounter:($,q)=>t?`Situation ${$} von ${q}`:`Frage ${$} von ${q}`,questionsCount:$=>t?`${$} Situationen`:`${$} Fragen`,answeredCount:($,q)=>t?`${$} von ${q} Situationen`:`${$} von ${q} Fragen`,tipsLabel:t?"Tipps fÃ¼r diese Situation":"Tipps fÃ¼r diese Frage",nextButton:t?"NÃ¤chste Situation":"NÃ¤chste Frage",timePerQuestion:t?"Zeit pro Situation":"Zeit pro Frage",questionsLabel:t?"Situationen":"Fragen",recommendedTime:t?"Empfohlene Reaktionszeit":"Empfohlene Antwortzeit"},S=b>0;s&&s.length>0;const B=S?Array.from({length:b},($,q)=>q):[],[W,F]=u.useState(S?"interview":"preparation"),[A,P]=u.useState(b||n?.current_question_index||0),[N,J]=u.useState(null),[f,y]=u.useState(!1),[k,_]=u.useState(!1),[j,z]=u.useState(null),[H,Y]=u.useState([]),[X,je]=u.useState(B),L="karriereheld_selected_microphone",[Q,we]=u.useState(()=>{if(x)return x;try{return localStorage.getItem(L)||null}catch{return null}}),[Fe,ke]=u.useState(!1),[mt,xe]=u.useState(!1),ve=u.useRef(null),ze=u.useCallback(()=>{ve.current&&(ve.current.getTracks().forEach($=>$.stop()),ve.current=null)},[]),Je=u.useCallback($=>{ve.current=$},[]);u.useEffect(()=>()=>{ze()},[ze]),u.useEffect(()=>{if(Q)try{localStorage.setItem(L,Q)}catch{}},[Q]);const[yt,Le]=u.useState(!1),[St,De]=u.useState(!1),[se,Ye]=u.useState(!1),[he,Ce]=u.useState(null),[Z,Xe]=u.useState(!1),{branding:Re}=_e(),M=be(),bt=Re?.["--header-gradient"]||pe["--header-gradient"],ne=Re?.["--button-gradient"]||bt,le=Re?.["--primary-accent"]||pe["--primary-accent"],jt=Re?.["--primary-accent-light"]||pe["--primary-accent-light"],D=I[A],ee=A===I.length-1,ge=A===0,et=async($,q)=>{if(q<2){z("Die Aufnahme ist zu kurz. Bitte sprechen Sie mindestens 2 Sekunden.");return}if($.size<5e3){console.warn("[SimulatorSession] Audio too small:",$.size,"bytes"),z("Die Aufnahme enthÃ¤lt keine verwertbaren Audiodaten. Bitte sprechen Sie wÃ¤hrend der Aufnahme und versuchen Sie es erneut.");return}_(!0),z(null);try{const O=await te.submitSimulatorAnswer(n.id,$,A,D.question,D.category,q);if(!O.success)throw new Error(O.message||"Fehler beim Analysieren der Antwort");if(J(O.data),y(!0),Y(K=>[...K.filter(oe=>oe.questionIndex!==A),{questionIndex:A,feedback:O.data}]),je(K=>K.includes(A)?K:[...K,A]),t&&!Z){Ye(!0),Ce(null);const K=X.includes(A);try{const oe=await te.generateNextTurn(n.id);if(oe.success){const ce=oe.data.next_question;oe.data.is_finished?(Ce(ce),C(K?ie=>{const fe=[...ie];return fe[A+1]=ce,fe.slice(0,A+2)}:ie=>[...ie,ce]),Xe(!0)):(Ce(ce),K?(C(ie=>{const fe=[...ie];return fe[A+1]=ce,fe.slice(0,A+2)}),Xe(!1)):C(ie=>[...ie,ce]))}}catch(oe){console.error("Error generating next turn:",oe)}finally{Ye(!1)}}}catch(O){console.error("Error submitting answer:",O),z(O.message||"Ein Fehler ist aufgetreten")}finally{_(!1)}},qe=()=>{J(null),y(!1),z(null)},Oe=()=>{if(J(null),y(!1),z(null),t){if(he){P($=>$+1),Ce(null);return}if(Z){Ie();return}}else ee||P($=>$+1)},wt=()=>{J(null),y(!1),z(null),ge||P($=>$-1)},kt=()=>{Le(!0)},Ie=async()=>{Le(!1),xe(!1),ke(!1),ze();try{const $=await te.completeSimulatorSession(n.id);$.success?m($.data):m({session:{...n,status:"completed"}})}catch($){console.error("Error completing session:",$),m({session:{...n,status:"completed"}})}},vt=()=>{De(!0)},zt=()=>{De(!1),xe(!1),ke(!1),ze(),w()},Ct=async()=>{if(n&&I.length>0){F("interview");return}T(!0),R(null);try{const $=await te.createSimulatorSession({scenario_id:g.id,variables:o,demo_code:h||null,questions:s||null});if(!$.success)throw new Error($.message||"Fehler beim Erstellen der Session");const q=$.data.session;let O;if(s&&s.length>0)O=s,await te.updateSimulatorSessionQuestions(q.id,O);else{const K=await te.generateSimulatorQuestions(q.id);if(!K.success)throw new Error(K.message||"Fehler beim Generieren der Fragen");O=K.data.questions}i({...q,questions_json:O}),C(O),l&&l({session:{...q,questions_json:O},questions:O,selectedMicrophoneId:Q}),F("interview")}catch($){console.error("Error creating session:",$),R($.message||"Ein Fehler ist aufgetreten")}finally{T(!1)}};return W==="preparation"?e.jsxs(e.Fragment,{children:[e.jsx(dr,{scenario:g,variables:o,questions:I,onStart:Ct,onBack:w,selectedMicrophoneId:Q,onMicrophoneChange:we,onMicrophoneTest:()=>ke(!0),themedGradient:ne,primaryAccent:le,primaryAccentLight:jt,isLoading:v,branding:M}),e.jsx(gt,{isOpen:Fe,onClose:()=>ke(!1),deviceId:Q}),E&&e.jsx("div",{style:{position:"fixed",bottom:"24px",left:"50%",transform:"translateX(-50%)",padding:"12px 24px",borderRadius:"12px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",fontSize:"14px",fontWeight:500,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",zIndex:100},children:E}),e.jsx(ft,{isLoading:v,message:t?"Situationen werden generiert...":"Fragen werden generiert...",subMessage:"Die KI erstellt personalisierte Inhalte basierend auf deinen Angaben."})]}):e.jsxs("div",{style:{padding:d?"16px":"24px",maxWidth:"1000px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",justifyContent:"space-between",alignItems:d?"stretch":"center",gap:d?"12px":"0",marginBottom:"24px"},children:[e.jsx("h1",{style:{fontSize:d?"18px":"20px",fontWeight:600,color:"#0f172a",margin:0},children:g?.title}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",justifyContent:d?"space-between":"flex-end"},children:[!(f&&(t&&Z&&!he||!t&&ee))&&e.jsxs("button",{onClick:kt,style:{padding:d?"10px 14px":"8px 16px",borderRadius:"8px",background:"#22c55e",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",color:"white",fontSize:"14px",fontWeight:600,boxShadow:"0 2px 8px rgba(34, 197, 94, 0.3)",flex:d?1:"none",justifyContent:"center"},children:[e.jsx(ut,{size:16}),d?"Beenden":"Training beenden"]}),e.jsxs("button",{onClick:vt,style:{padding:d?"10px 14px":"8px 16px",borderRadius:"8px",background:"#f1f5f9",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",color:"#64748b",fontSize:"14px",flex:d?1:"none",justifyContent:"center"},children:[e.jsx(Dt,{size:16}),"Abbrechen"]})]})]}),e.jsx(pr,{isOpen:yt,onClose:()=>Le(!1),onConfirm:Ie,answeredCount:X.length,totalCount:I.length,labels:c}),e.jsx(ur,{isOpen:St,onClose:()=>De(!1),onConfirm:zt,answeredCount:X.length,labels:c}),!f&&!t&&e.jsxs("div",{style:{display:"flex",gap:d?"8px":"12px",justifyContent:"center",marginBottom:"16px"},children:[e.jsxs("button",{onClick:wt,disabled:ge,style:{display:"flex",alignItems:"center",gap:"6px",padding:d?"10px 14px":"12px 20px",borderRadius:"10px",border:`2px solid ${M.borderColor}`,backgroundColor:M.cardBg,color:ge?M.textMuted:M.textSecondary,fontSize:d?"13px":"14px",fontWeight:600,cursor:ge?"not-allowed":"pointer",opacity:ge?.5:1,flex:d?1:"none",justifyContent:"center"},children:[e.jsx(qt,{size:16}),"ZurÃ¼ck"]}),e.jsxs("button",{onClick:Oe,disabled:ee,style:{display:"flex",alignItems:"center",gap:"6px",padding:d?"10px 14px":"12px 20px",borderRadius:"10px",border:`2px solid ${M.borderColor}`,backgroundColor:M.cardBg,color:ee?M.textMuted:M.textSecondary,fontSize:d?"13px":"14px",fontWeight:600,cursor:ee?"not-allowed":"pointer",opacity:ee?.5:1,flex:d?1:"none",justifyContent:"center"},children:[d?"Ãœberspringen":"Frage Ã¼berspringen",e.jsx(Ve,{size:16})]})]}),e.jsx(Ut,{current:A,total:I.length,answeredQuestions:X,primaryAccent:le,b:M,labels:c}),f?e.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"16px",justifyContent:"flex-end"},children:[g.allow_retry&&e.jsxs("button",{onClick:qe,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",borderRadius:"10px",border:`2px solid ${M.borderColor}`,backgroundColor:M.cardBg,color:M.textSecondary,fontSize:"14px",fontWeight:600,cursor:"pointer"},children:[e.jsx(Ke,{size:16}),"Nochmal versuchen"]}),e.jsxs("button",{onClick:t?Z&&!he?Ie:Oe:ee?Ie:Oe,disabled:t&&se&&!Z,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",borderRadius:"10px",border:"none",background:t&&se&&!Z?M.textMuted:ne,color:"white",fontSize:"14px",fontWeight:600,cursor:t&&se&&!Z?"wait":"pointer",boxShadow:t&&se&&!Z?"none":`0 4px 12px ${le}4d`,opacity:t&&se&&!Z?.7:1},children:[t&&se&&!Z?e.jsxs(e.Fragment,{children:[e.jsx(Ue,{size:16,className:"animate-spin",style:{animation:"spin 1s linear infinite"}}),"GesprÃ¤chspartner tippt..."]}):t?Z&&!he?"Training abschlieÃŸen":c.nextButton:ee?"Training abschlieÃŸen":c.nextButton,!se&&!(t?Z&&!he:ee)&&e.jsx(Ve,{size:16})]})]}),e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"20px",border:"1px solid #e2e8f0",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:ne,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"13px",fontWeight:600},children:A+1}),e.jsx("span",{style:{fontSize:"14px",color:"#64748b"},children:D?.category||c.questionFallback})]}),e.jsx("p",{style:{fontSize:"16px",fontWeight:500,color:"#0f172a",margin:0,lineHeight:1.5},children:D?.question||c.questionLoading})]}),e.jsx(ar,{transcript:N.transcript,feedback:N.feedback,audioMetrics:N.audio_analysis,audioUrl:N.audio_url,hideButtons:!0})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:d?"16px":"24px"},children:[d?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"16px",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"26px",height:"26px",borderRadius:"50%",background:ne,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"12px",fontWeight:600,flexShrink:0},children:A+1}),e.jsx("span",{style:{fontSize:"13px",color:"#64748b"},children:D?.category||c.questionFallback})]}),e.jsx("p",{style:{fontSize:"15px",fontWeight:600,color:"#0f172a",lineHeight:1.5,margin:0},children:D?.question||c.questionLoading}),D?.estimated_answer_time&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:"#64748b",fontSize:"13px",marginTop:"12px"},children:[e.jsx(re,{size:14}),c.recommendedTime,": ca. ",Math.round(D.estimated_answer_time/60)," Min"]})]}),e.jsx(st,{onRecordingComplete:et,timeLimit:g.time_limit_per_question||120,disabled:!1,deviceId:Q,themedGradient:ne,primaryAccent:le,isSubmitting:k,labels:c,onOpenSettings:()=>xe(!0),branding:M,isMobile:!0,onStreamChange:Je}),j&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"16px",borderRadius:"12px",backgroundColor:M.errorLight},children:[e.jsx(ue,{style:{width:"24px",height:"24px",color:M.error}}),e.jsx("p",{style:{marginTop:"8px",color:M.error,fontWeight:500,fontSize:"14px",textAlign:"center"},children:j}),e.jsx("button",{onClick:qe,style:{marginTop:"12px",padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:M.error,color:"white",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"Erneut versuchen"})]})]}):e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[e.jsxs("div",{children:[e.jsx(st,{onRecordingComplete:et,timeLimit:g.time_limit_per_question||120,disabled:!1,deviceId:Q,themedGradient:ne,primaryAccent:le,isSubmitting:k,labels:c,onOpenSettings:()=>xe(!0),branding:M,isMobile:!1,onStreamChange:Je}),j&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",marginTop:"16px",borderRadius:"12px",backgroundColor:M.errorLight},children:[e.jsx(ue,{style:{width:"24px",height:"24px",color:M.error}}),e.jsx("p",{style:{marginTop:"8px",color:M.error,fontWeight:500,fontSize:"14px",textAlign:"center"},children:j}),e.jsx("button",{onClick:qe,style:{marginTop:"12px",padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:M.error,color:"white",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"Erneut versuchen"})]})]}),e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"24px",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:ne,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"13px",fontWeight:600},children:A+1}),e.jsx("span",{style:{fontSize:"14px",color:"#64748b"},children:D?.category||c.questionFallback})]}),e.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:"#0f172a",lineHeight:1.5,marginBottom:"16px"},children:D?.question||c.questionLoading}),D?.estimated_answer_time&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:"#64748b",fontSize:"14px"},children:[e.jsx(re,{size:16}),c.recommendedTime,": ca. ",Math.round(D.estimated_answer_time/60)," Min"]})]})]}),D?.tips&&D.tips.length>0&&e.jsx(lr,{tips:D.tips,primaryAccent:le,tipsLabel:c.tipsLabel,branding:M})]}),e.jsx(Jt,{isOpen:mt,onClose:()=>xe(!1),mode:"audio",selectedMicrophoneId:Q,onMicrophoneChange:we})]})},$e=({score:r,label:a,primaryAccent:g,b:o})=>{const s=r!=null?r*10:null,l=Gt(s,g);return e.jsxs("div",{style:{textAlign:"center",padding:o.space[4],backgroundColor:p.slate[100],borderRadius:o.radius.lg},children:[e.jsx("div",{style:{fontSize:o.fontSize["4xl"],fontWeight:700,color:l,marginBottom:"4px"},children:s!=null?Math.round(s):"-"}),e.jsx("div",{style:{fontSize:o.fontSize.sm,color:p.slate[600]},children:a})]})},He=({icon:r,value:a,label:g,primaryAccent:o,b:s})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:s.space[3],padding:`${s.space[3]} ${s.space[4]}`,backgroundColor:p.slate[100],borderRadius:s.radius.md},children:[e.jsx(r,{style:{width:"20px",height:"20px",color:o}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:s.fontSize.xl,fontWeight:600,color:p.slate[900]},children:a}),e.jsx("div",{style:{fontSize:s.fontSize.xs,color:p.slate[500]},children:g})]})]}),hr=({session:r,scenario:a,onBackToDashboard:g,onStartNew:o})=>{const s=be(),l=r.summary_feedback||r.summary_feedback_json,m=l?typeof l=="string"?JSON.parse(l):l:null,w=r.overall_score||m?.overall_score||0,b=w<=10?w*10:w,d=(n=>n>=90?{text:"Ausgezeichnet!",emoji:"ðŸŒŸ"}:n>=80?{text:"Sehr gut!",emoji:"ðŸŽ‰"}:n>=70?{text:"Gut!",emoji:"ðŸ‘"}:n>=60?{text:"Solide Leistung",emoji:"ðŸ‘"}:n>=50?{text:"AusbaufÃ¤hig",emoji:"ðŸ’ª"}:{text:"Weiter Ã¼ben!",emoji:"ðŸ“š"})(b);return e.jsxs("div",{style:{padding:s.space[6],maxWidth:"640px",margin:"0 auto"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:s.headerGradient,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",boxShadow:`0 8px 24px ${s.primaryAccent}4d`},children:e.jsx(pt,{style:{width:"40px",height:"40px",color:"white"}})}),e.jsxs("h1",{style:{fontSize:s.fontSize["5xl"],fontWeight:700,color:p.slate[900],margin:"0 0 8px 0"},children:["Training abgeschlossen! ",d.emoji]}),e.jsxs("p",{style:{fontSize:s.fontSize.lg,color:p.slate[600],margin:0},children:[a?.title||"Skill Training"," - ",d.text]})]}),e.jsxs("div",{style:{padding:s.space[6],borderRadius:s.radius.xl,backgroundColor:"white",border:`1px solid ${p.slate[200]}`,textAlign:"center",marginBottom:s.space[6]},children:[e.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",border:`6px solid ${s.primaryAccent}`,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",backgroundColor:s.primaryAccentLight},children:e.jsx("span",{style:{fontSize:s.fontSize["5xl"],fontWeight:700,color:s.primaryAccent},children:b?Math.round(b):"-"})}),e.jsx("p",{style:{fontSize:s.fontSize.base,color:p.slate[500],margin:0},children:b?"Gesamtbewertung (von 100)":"Keine Fragen beantwortet"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:s.space[3],marginBottom:s.space[6]},children:[e.jsx(He,{icon:Se,value:`${r.completed_questions??0}/${r.total_questions||"-"}`,label:"Fragen",primaryAccent:s.primaryAccent,b:s}),e.jsx(He,{icon:ae,value:m?.average_content_score?Math.round(m.average_content_score*10):"-",label:"Ã˜ Inhalt",primaryAccent:s.primaryAccent,b:s}),e.jsx(He,{icon:Ot,value:m?.average_delivery_score?Math.round(m.average_delivery_score*10):"-",label:"Ã˜ PrÃ¤sentation",primaryAccent:s.primaryAccent,b:s})]}),m?.scores&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:s.space[3],marginBottom:s.space[6]},children:[e.jsx($e,{score:m.scores.content,label:"Inhalt",primaryAccent:s.primaryAccent,b:s}),e.jsx($e,{score:m.scores.structure,label:"Struktur",primaryAccent:s.primaryAccent,b:s}),e.jsx($e,{score:m.scores.relevance,label:"Relevanz",primaryAccent:s.primaryAccent,b:s}),e.jsx($e,{score:m.scores.delivery,label:"PrÃ¤sentation",primaryAccent:s.primaryAccent,b:s})]}),m?.summary&&e.jsxs("div",{style:{padding:s.space[5],borderRadius:s.radius.lg,backgroundColor:p.slate[100],marginBottom:s.space[6]},children:[e.jsx("h3",{style:{fontSize:s.fontSize.base,fontWeight:600,color:p.slate[700],margin:"0 0 8px 0"},children:"Zusammenfassung"}),e.jsx("p",{style:{fontSize:s.fontSize.base,color:p.slate[600],margin:0,lineHeight:1.6},children:m.summary})]}),m?.key_takeaways?.length>0&&e.jsxs("div",{style:{padding:s.space[5],borderRadius:s.radius.lg,backgroundColor:p.green[100],marginBottom:s.space[6]},children:[e.jsx("h3",{style:{fontSize:s.fontSize.base,fontWeight:600,color:p.green[500],margin:"0 0 12px 0"},children:"ðŸ’¡ Die wichtigsten Erkenntnisse"}),e.jsx("ul",{style:{margin:0,paddingLeft:s.space[5],color:p.slate[700],fontSize:s.fontSize.base,lineHeight:1.6},children:m.key_takeaways.map((n,i)=>e.jsx("li",{style:{marginBottom:"8px"},children:n},i))})]}),e.jsxs("div",{style:{display:"flex",gap:s.space[3],marginTop:"32px"},children:[e.jsxs("button",{onClick:g,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:s.space[2],padding:`${s.space[3.5]} ${s.space[6]}`,borderRadius:s.radius.lg,border:`2px solid ${p.slate[300]}`,backgroundColor:"white",color:p.slate[700],fontSize:s.fontSize.base,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:n=>{n.target.style.borderColor=s.primaryAccent,n.target.style.color=s.primaryAccent},onMouseLeave:n=>{n.target.style.borderColor=p.slate[300],n.target.style.color=p.slate[700]},children:[e.jsx(Ee,{style:{width:"18px",height:"18px"}}),"Zur Ãœbersicht"]}),e.jsxs("button",{onClick:o,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:s.space[2],padding:`${s.space[3.5]} ${s.space[6]}`,borderRadius:s.radius.lg,border:"none",background:s.buttonGradient,color:"white",fontSize:s.fontSize.base,fontWeight:600,cursor:"pointer",boxShadow:`0 4px 12px ${s.primaryAccent}4d`,transition:"all 0.2s"},onMouseEnter:n=>{n.target.style.transform="translateY(-2px)",n.target.style.boxShadow=`0 6px 16px ${s.primaryAccent}66`},onMouseLeave:n=>{n.target.style.transform="none",n.target.style.boxShadow=`0 4px 12px ${s.primaryAccent}4d`},children:[e.jsx(Ke,{style:{width:"18px",height:"18px"}}),"Nochmal Ã¼ben"]})]})]})},G={DASHBOARD:"dashboard",VARIABLES:"variables",SESSION:"session",COMPLETE:"complete"},Ar=({isAuthenticated:r,requireAuth:a,setPendingAction:g,pendingContinueSession:o,clearPendingContinueSession:s,pendingRepeatSession:l,clearPendingRepeatSession:m,onNavigateToHistory:w})=>{const[b,x]=u.useState(G.DASHBOARD),[d,n]=u.useState(null),[i,I]=u.useState(null),[C,v]=u.useState([]),[T,E]=u.useState({}),[R,h]=u.useState(null),[t,c]=u.useState(null),[S,B]=u.useState(null),[W,F]=u.useState(0);u.useEffect(()=>{S&&r&&(n(S),x(G.VARIABLES),B(null))},[S,r]),u.useEffect(()=>{if(o&&r){const{session:j,scenario:z}=o,H=j.questions||j.questions_json,Y=typeof H=="string"?JSON.parse(H):H||[],X=j.completed_questions||j.answered_count||0;n(z||{id:j.scenario_id,title:j.scenario_title}),I(j),v(Y),E({}),F(X),x(G.SESSION),s&&s()}},[o,r,s]),u.useEffect(()=>{if(l&&r){const{session:j,scenario:z}=l,H=j.questions||j.questions_json,Y=typeof H=="string"?JSON.parse(H):H||[];n(z||{id:j.scenario_id,title:j.scenario_title}),v(Y),E({}),F(0),x(G.SESSION),m&&m()}},[l,r,m]),u.useEffect(()=>{window.scrollTo(0,0)},[b]);const A=u.useCallback(j=>{n(j),x(G.VARIABLES)},[]),P=u.useCallback(()=>{n(null),I(null),v([]),E({}),h(null),F(0),c(null),x(G.DASHBOARD)},[]),N=u.useCallback(j=>{E(j),x(G.SESSION)},[]),J=u.useCallback(j=>{I(j.session),v(j.questions),j.selectedMicrophoneId&&c(j.selectedMicrophoneId)},[]),f=u.useCallback(j=>{h(j.session),x(G.COMPLETE)},[]),y=u.useCallback(()=>{P()},[P]),k=u.useCallback(()=>{I(null),v([]),h(null),F(0),c(null),x(G.VARIABLES)},[]),_=()=>{switch(b){case G.DASHBOARD:return e.jsx(rt,{onSelectScenario:A,isAuthenticated:r,requireAuth:a,setPendingScenario:B,onNavigateToHistory:w});case G.VARIABLES:return e.jsx(nr,{scenario:d,onBack:P,onNext:N});case G.SESSION:return e.jsx(xr,{session:i,questions:C,scenario:d,variables:T,preloadedQuestions:C.length>0?C:null,onSessionCreated:J,onComplete:f,onExit:y,startFromQuestion:W,initialMicrophoneId:t});case G.COMPLETE:return e.jsx(hr,{session:R,scenario:d,onBackToDashboard:P,onStartNew:k});default:return e.jsx(rt,{onSelectScenario:A,isAuthenticated:r,requireAuth:a,setPendingScenario:B,onNavigateToHistory:w})}};return e.jsx("div",{style:{minHeight:"100%"},children:_()})},ot={target:ae,clock:re,mic:U,"message-square":me,lightbulb:V,brain:Ge,info:ye,check:Se,sparkles:Te},gr=[{icon:ae,title:"Strukturiert antworten",description:"Nutze die STAR-Methode (Situation, Task, Action, Result) fÃ¼r Beispiele."},{icon:re,title:"Zeit im Blick",description:"Antworte prÃ¤zise, aber ausfÃ¼hrlich genug."},{icon:U,title:"Klar sprechen",description:"Sprich in normalem Tempo. Pausen sind vÃ¶llig in Ordnung."}],_r=({scenario:r,onBack:a,onStart:g,preloadedQuestions:o})=>{const[s,l]=u.useState({}),[m,w]=u.useState({}),[b,x]=u.useState(!1),[d,n]=u.useState(null),[i,I]=u.useState(null),[C,v]=u.useState(!1),[T,E]=u.useState([]),[R,h]=u.useState(!1),t=be(),{demoCode:c}=_e(),S=xt.useMemo(()=>{if(!r?.input_configuration)return[];try{const f=typeof r.input_configuration=="string"?JSON.parse(r.input_configuration):r.input_configuration;return Array.isArray(f)?f.filter(y=>y.user_input!==!1):[]}catch(f){return console.error("Error parsing input_configuration:",f),[]}},[r?.input_configuration]);u.useEffect(()=>{const f={};S.forEach(y=>{y.default&&(f[y.key]=y.default)}),l(f)},[S]);const B=(f,y)=>{if(!f)return f;let k=f;return Object.entries(y||{}).forEach(([_,j])=>{j&&(k=k.replace(new RegExp(`\\$\\{${_}\\}`,"g"),j),k=k.replace(new RegExp(`\\{${_}\\}`,"g"),j))}),k},W=(f,y)=>{l(k=>({...k,[f]:y})),m[f]&&w(k=>{const _={...k};return delete _[f],_})},F=()=>{E(f=>[...f,{key:"",value:""}])},A=(f,y,k)=>{E(_=>{const j=[..._];return j[f]={...j[f],[y]:k},j})},P=f=>{E(y=>y.filter((k,_)=>_!==f))},N=()=>{const f={};return S.forEach(y=>{const k=s[y.key];if(y.required&&(!k||k.trim()==="")){f[y.key]="Dieses Feld ist erforderlich";return}if(!(!k||k.trim()==="")&&y.validation){const{minLength:_,maxLength:j,min:z,max:H,pattern:Y}=y.validation;_&&k.length<_&&(f[y.key]=`Mindestens ${_} Zeichen erforderlich`),j&&k.length>j&&(f[y.key]=`Maximal ${j} Zeichen erlaubt`),z!==void 0&&Number(k)<z&&(f[y.key]=`Mindestens ${z}`),H!==void 0&&Number(k)>H&&(f[y.key]=`Maximal ${H}`),Y&&!new RegExp(Y).test(k)&&(f[y.key]="UngÃ¼ltiges Format")}}),w(f),Object.keys(f).length===0},J=async f=>{if(f.preventDefault(),n(null),!!N()){x(!0);try{const y={...s};T.forEach(z=>{z.key&&z.value&&(y[z.key]=z.value)});const k=await te.createSimulatorSession({scenario_id:r.id,variables:y,demo_code:c||null,questions:o||null});if(!k.success)throw new Error(k.message||"Fehler beim Erstellen der Session");const _=k.data.session;let j;if(o&&o.length>0)j=o,await te.updateSimulatorSessionQuestions(_.id,j);else{const z=await te.generateSimulatorQuestions(_.id);if(!z.success)throw new Error(z.message||"Fehler beim Generieren der Fragen");j=z.data.questions}g({session:{..._,questions_json:j},questions:j,scenario:r,variables:y,selectedMicrophoneId:i})}catch(y){console.error("Error starting session:",y),n(y.message||"Ein Fehler ist aufgetreten")}finally{x(!1)}}};return e.jsxs("div",{style:{padding:t.space[6],paddingBottom:"200px",maxWidth:"640px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("button",{onClick:a,style:{display:"inline-flex",alignItems:"center",gap:t.space[2],padding:`${t.space[2]} ${t.space[3]}`,marginBottom:t.space[4],border:"none",background:"transparent",color:p.slate[600],fontSize:t.fontSize.base,cursor:"pointer",borderRadius:t.radius.sm,transition:t.transition.normal},onMouseEnter:f=>f.target.style.background=p.slate[100],onMouseLeave:f=>f.target.style.background="transparent",children:[e.jsx(Ee,{style:{width:"18px",height:"18px"}}),"ZurÃ¼ck zur Ãœbersicht"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t.space[4]},children:[e.jsx("div",{style:{width:"56px",height:"56px",borderRadius:t.radius.lg,background:t.headerGradient,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Te,{style:{width:"28px",height:"28px",color:"white"}})}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:t.fontSize["4xl"],fontWeight:700,color:p.slate[900],margin:0},children:r.title}),e.jsx("p",{style:{fontSize:t.fontSize.base,color:p.slate[600],margin:"4px 0 0 0"},children:"Konfiguriere dein Training"})]})]})]}),e.jsx("div",{style:{padding:`${t.space[4]} ${t.space[5]}`,borderRadius:t.radius.lg,backgroundColor:p.slate[100],marginBottom:t.space[6]},children:e.jsx("p",{style:{fontSize:t.fontSize.base,color:p.slate[700],margin:0,lineHeight:1.6},children:r.description})}),r.long_description&&e.jsx("div",{style:{padding:`${t.space[5]} ${t.space[6]}`,borderRadius:t.radius.lg,backgroundColor:"white",border:`1px solid ${p.slate[200]}`,marginBottom:t.space[6]},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"14px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:t.radius.md,background:t.headerGradient,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(ye,{style:{width:"20px",height:"20px",color:"white"}})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:t.fontSize.md,fontWeight:600,color:p.slate[900],margin:`0 0 ${t.space[2]} 0`},children:"Deine Aufgabe"}),e.jsx("p",{style:{fontSize:t.fontSize.base,lineHeight:"1.6",color:p.slate[700],margin:0,whiteSpace:"pre-wrap"},children:B(r.long_description?.replace(/\/n/g,`
`),s)})]})]})}),(()=>{const f=r.tips&&Array.isArray(r.tips)&&r.tips.length>0?r.tips.map((y,k)=>typeof y=="string"?{icon:V,title:`Tipp ${k+1}`,description:y}:{icon:ot[y.icon]||ot[y.icon?.toLowerCase()]||V,title:y.title||`Tipp ${k+1}`,description:y.text||y.description||""}):gr;return e.jsxs("div",{style:{padding:`${t.space[5]} ${t.space[6]}`,borderRadius:t.radius.lg,backgroundColor:"white",border:`1px solid ${p.slate[200]}`,marginBottom:t.space[6]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t.space[2.5],marginBottom:t.space[4]},children:[e.jsx(V,{style:{width:"20px",height:"20px",color:t.primaryAccent}}),e.jsx("h3",{style:{fontSize:t.fontSize.lg,fontWeight:600,color:p.slate[900],margin:0},children:"Tipps fÃ¼r dein Training"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:t.space[3]},children:f.map((y,k)=>{const _=y.icon;return e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:t.space[3],padding:`${t.space[3]} ${t.space[4]}`,borderRadius:t.radius.md,backgroundColor:p.slate[50]},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:t.radius.sm,background:t.headerGradient,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(_,{style:{width:"16px",height:"16px",color:"white"}})}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontWeight:600,color:p.slate[900],fontSize:t.fontSize.base,margin:"0 0 2px 0"},children:y.title}),e.jsx("p",{style:{fontSize:t.fontSize.sm,color:p.slate[600],lineHeight:1.5,margin:0},children:y.description})]})]},k)})})]})})(),e.jsxs("form",{onSubmit:J,children:[S.length>0?S.map(f=>e.jsx(Yt,{field:f,value:s[f.key],onChange:W,error:m[f.key],focusColor:t.primaryAccent},f.key)):e.jsxs("div",{style:{padding:t.space[6],textAlign:"center",color:p.slate[500]},children:[e.jsx(Se,{style:{width:"32px",height:"32px",marginBottom:t.space[3],opacity:.5}}),e.jsx("p",{style:{margin:0},children:"Keine zusÃ¤tzliche Konfiguration erforderlich."})]}),r?.allow_custom_variables&&e.jsxs("div",{style:{marginTop:t.space[5],marginBottom:t.space[5],paddingTop:t.space[5],borderTop:`1px solid ${p.slate[200]}`},children:[e.jsxs("button",{type:"button",onClick:()=>h(!R),style:{display:"flex",alignItems:"flex-start",gap:t.space[2],padding:"0",border:"none",background:"none",color:p.slate[500],fontSize:t.fontSize.sm,fontWeight:500,cursor:"pointer",marginBottom:R?t.space[4]:"0",textAlign:"left"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:t.space[2],flexShrink:0},children:[R?e.jsx(Ze,{size:18}):e.jsx(We,{size:18}),e.jsx(Ae,{size:16})]}),e.jsx("span",{style:{lineHeight:"1.4"},children:"ZusÃ¤tzliche Variablen hinzufÃ¼gen (optional)"})]}),R&&e.jsxs("div",{style:{backgroundColor:p.slate[50],borderRadius:t.radius.lg,padding:t.space[4]},children:[e.jsx("p",{style:{fontSize:t.fontSize.sm,color:p.slate[500],margin:`0 0 ${t.space[3]} 0`},children:"FÃ¼ge eigene Variablen hinzu, die in die Fragen-Generierung und Feedback einflieÃŸen sollen."}),T.length>0&&e.jsx("div",{style:{marginBottom:t.space[3]},children:T.map((f,y)=>e.jsxs("div",{style:{backgroundColor:"white",border:`1px solid ${p.slate[200]}`,borderRadius:t.radius.md,padding:t.space[3],marginBottom:t.space[3]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:t.space[2]},children:[e.jsx("input",{type:"text",value:f.key||"",onChange:k=>A(y,"key",k.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"_")),placeholder:"variable_name",style:{padding:`${t.space[2]} ${t.space[3]}`,borderRadius:t.radius.md,border:`1px solid ${p.slate[200]}`,fontSize:t.fontSize.sm,fontFamily:"monospace",backgroundColor:p.slate[50],flex:1,marginRight:t.space[2]}}),e.jsx("button",{type:"button",onClick:()=>P(y),style:{padding:t.space[2],border:"none",backgroundColor:"transparent",cursor:"pointer",color:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(at,{size:18})})]}),e.jsx("textarea",{value:f.value||"",onChange:k=>A(y,"value",k.target.value),placeholder:"Wert eingeben... (mehrzeilig mÃ¶glich)",rows:3,style:{width:"100%",padding:`${t.space[2]} ${t.space[3]}`,borderRadius:t.radius.md,border:`1px solid ${p.slate[200]}`,fontSize:t.fontSize.sm,resize:"vertical",minHeight:"80px",boxSizing:"border-box"}})]},y))}),e.jsxs("button",{type:"button",onClick:F,style:{display:"flex",alignItems:"center",gap:t.space[1.5],padding:`${t.space[2]} ${t.space[3]}`,border:`1px dashed ${p.slate[300]}`,borderRadius:t.radius.md,background:"transparent",color:p.slate[600],fontSize:t.fontSize.sm,cursor:"pointer",width:"100%",justifyContent:"center"},children:[e.jsx(Ae,{size:16}),"Variable hinzufÃ¼gen"]})]})]}),e.jsxs("div",{style:{padding:`${t.space[4]} ${t.space[5]}`,borderRadius:t.radius.lg,backgroundColor:t.primaryAccentLight,marginTop:t.space[6],marginBottom:t.space[6],display:"flex",gap:t.space[5],flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:t.fontSize.xs,color:p.slate[500],display:"block"},children:"Fragen"}),e.jsxs("span",{style:{fontSize:t.fontSize.lg,fontWeight:600,color:p.slate[900]},children:[r.question_count_min,"-",r.question_count_max]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:t.fontSize.xs,color:p.slate[500],display:"block"},children:"Zeit pro Frage"}),e.jsxs("span",{style:{fontSize:t.fontSize.lg,fontWeight:600,color:p.slate[900]},children:[Math.round(r.time_limit_per_question/60)," Min"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:t.fontSize.xs,color:p.slate[500],display:"block"},children:"Wiederholen"}),e.jsx("span",{style:{fontSize:t.fontSize.lg,fontWeight:600,color:p.slate[900]},children:r.allow_retry?"Erlaubt":"Nicht erlaubt"})]})]}),e.jsxs("div",{style:{padding:t.space[6],borderRadius:t.radius.xl,backgroundColor:"white",border:`1px solid ${p.slate[200]}`,marginBottom:t.space[6]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t.space[2.5],marginBottom:t.space[4]},children:[e.jsx(U,{style:{width:"22px",height:"22px",color:t.primaryAccent}}),e.jsx("h3",{style:{fontSize:t.fontSize.lg,fontWeight:600,color:p.slate[900],margin:0},children:"Mikrofon auswÃ¤hlen"})]}),e.jsx(ht,{selectedDeviceId:i,onDeviceChange:I,onTestClick:()=>v(!0)})]}),d&&e.jsxs("div",{style:{padding:`${t.space[3]} ${t.space[4]}`,borderRadius:t.radius.lg,backgroundColor:p.red[100],color:p.red[500],marginBottom:t.space[5],display:"flex",alignItems:"center",gap:t.space[2]},children:[e.jsx(ue,{style:{width:"18px",height:"18px"}}),d]}),e.jsxs("button",{type:"submit",disabled:b,style:{width:"100%",padding:`${t.space[4]} ${t.space[6]}`,borderRadius:t.radius.lg,border:"none",background:b?p.slate[300]:t.buttonGradient,color:"white",fontSize:t.fontSize.lg,fontWeight:600,cursor:b?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:t.space[2.5],transition:t.transition.normal,boxShadow:b?"none":`0 4px 12px ${t.primaryAccent}4d`},onMouseEnter:f=>{b||(f.target.style.transform="translateY(-2px)",f.target.style.boxShadow=`0 6px 16px ${t.primaryAccent}66`)},onMouseLeave:f=>{f.target.style.transform="none",f.target.style.boxShadow=b?"none":`0 4px 12px ${t.primaryAccent}4d`},children:["Training starten",e.jsx(lt,{style:{width:"20px",height:"20px"}})]})]}),e.jsx(gt,{isOpen:C,onClose:()=>v(!1),deviceId:i}),e.jsx(ft,{isLoading:b,message:"Fragen werden generiert...",subMessage:"Die KI erstellt personalisierte Fragen basierend auf deinen Angaben."})]})};export{ur as CancelConfirmDialog,pr as CompleteConfirmDialog,ar as ImmediateFeedback,dr as PreSessionView,lr as QuestionTips,hr as SessionComplete,cr as SessionTimer,Ar as SimulatorApp,st as SimulatorAudioRecorder,rt as SimulatorDashboard,xr as SimulatorSession,_r as SimulatorWizard};
