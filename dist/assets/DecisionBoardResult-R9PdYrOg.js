import{j as e,A as L,m as g,aZ as we,X as re,L as Z,ax as Ge,a as D,a7 as He,h as Qe,b as Ue,ab as q,ac as O,a_ as Ve,y as Ne,al as le,d as ce,z as ge,U as Ze,x as Je,C as Xe,O as Ye,v as es,t as pe,aI as ss,ae as ts,a$ as rs}from"./ui-vendor-CK2qDPx5.js";import{a as o,d as _}from"./react-vendor-uDOJF2jQ.js";import{C as ve,B as ue}from"./select-native-wbknQOfn.js";import{I as as}from"./input-BVjqAN7x.js";import{T as xe}from"./textarea-BrjjQ996.js";import{n as ns,o as is,q as be,r as ls}from"./index.js";import{A as Ce}from"./AudioRecorder-Ddk64iHS.js";import{B as E}from"./button-B5ekuaAG.js";import{C as w}from"./FeatureInfoButton-BIcqmuT1.js";import{C as oe,a as de,b as ke,c as ze}from"./card-CNi93tgw.js";const os=()=>`wizard_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,ds=({value:s,onChange:m,type:a})=>{const r=a==="pro",l=r?w.green[500]:w.red[500];return e.jsxs("div",{className:"flex items-center gap-2 min-w-[100px]",children:[e.jsx("input",{type:"range",min:"1",max:"10",value:s,onChange:x=>m(parseInt(x.target.value)),className:"w-[70px] h-1.5 rounded cursor-pointer appearance-none",style:{background:`linear-gradient(90deg, ${l} 0%, ${l} ${(s-1)*11.1}%, ${w.slate[200]} ${(s-1)*11.1}%, ${w.slate[200]} 100%)`}}),e.jsx("span",{className:`min-w-[24px] text-center font-semibold text-sm ${r?"text-green-600":"text-red-600"}`,children:s})]})},cs=({item:s,onToggle:m,onWeightChange:a,onTextChange:r})=>{const l=s.type==="pro",x=_.useRef(null);return _.useEffect(()=>{const d=x.current;d&&(d.style.height="auto",d.style.height=Math.max(36,d.scrollHeight)+"px")},[s.text]),e.jsxs(g.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex flex-col sm:flex-row items-start gap-3 p-3 sm:p-4 rounded-xl border-2 transition-all ${s.selected?l?"bg-green-50 border-green-200":"bg-red-50 border-red-200":"bg-slate-50 border-slate-200"}`,children:[e.jsx("div",{onClick:()=>m(s.id),className:`w-6 h-6 rounded-md border-2 flex items-center justify-center shrink-0 cursor-pointer transition-all ${s.selected?l?"border-green-600 bg-green-600":"border-red-600 bg-red-600":"border-slate-300 bg-transparent"}`,children:s.selected&&e.jsx(Ue,{size:14,className:"text-white",strokeWidth:3})}),e.jsxs("div",{className:"flex-1 min-w-0 w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l?e.jsx(q,{size:16,className:"text-green-600"}):e.jsx(O,{size:16,className:"text-red-600"}),e.jsx("span",{className:`text-xs font-semibold uppercase ${l?"text-green-600":"text-red-600"}`,children:l?"Pro":"Contra"})]}),e.jsx("textarea",{ref:x,value:s.text,onChange:d=>r(s.id,d.target.value),className:`w-full text-base font-medium text-slate-800 mb-2 px-2.5 py-2 border rounded-lg bg-white resize-none overflow-hidden min-h-[36px] leading-snug ${l?"border-green-200":"border-red-200"}`}),s.source_quote&&e.jsxs("div",{className:"flex items-start gap-1.5 text-sm text-slate-500 italic",children:[e.jsx(Ve,{size:12,className:"shrink-0 mt-0.5"}),e.jsxs("span",{children:['"',s.source_quote,'"']})]})]}),e.jsx("div",{onClick:d=>d.stopPropagation(),className:"shrink-0 self-center sm:self-start",children:e.jsx(ds,{value:s.weight,onChange:d=>a(s.id,d),type:s.type})})]})},xs=({isOpen:s,onClose:m,topic:a,existingPros:r,existingCons:l,onAddItems:x,selectedMicrophoneId:d})=>{const[f,p]=o.useState("loading_question"),[b,F]=o.useState(""),[T,N]=o.useState(""),[c,W]=o.useState(""),[v,S]=o.useState([]),[k,P]=o.useState([]),[C,A]=o.useState(null),[B,M]=o.useState(0);o.useEffect(()=>{s&&f==="loading_question"&&J()},[f,s]),o.useEffect(()=>{s&&(p("loading_question"),F(""),W(""),S([]),P([]),A(null),M(0))},[s]);const J=async()=>{A(null);try{const n=window.bewerbungstrainerConfig?.geminiApiKey;if(!n)throw new Error("API-Key nicht konfiguriert");const j=await ns(a,r,l,k,n);F(j.question),N(j.question_type||""),p("input"),M(y=>y+1)}catch(n){console.error("[DeepDiveWizard] Question generation error:",n),A(n.message||"Fehler beim Generieren der Frage"),p("input")}},R=async()=>{if(c.trim()){p("analyzing"),A(null);try{const n=window.bewerbungstrainerConfig?.geminiApiKey;if(!n)throw new Error("API-Key nicht konfiguriert");const y=((await is(a,b,c,n)).extracted_items||[]).map(z=>({...z,id:os(),selected:!0}));S(y),P(z=>[...z,{question:b,answer:c}]),p("selection")}catch(n){console.error("[DeepDiveWizard] Extraction error:",n),A(n.message||"Fehler beim Analysieren der Antwort"),p("input")}}},X=o.useCallback(n=>{S(j=>j.map(y=>y.id===n?{...y,selected:!y.selected}:y))},[]),Y=o.useCallback((n,j)=>{S(y=>y.map(z=>z.id===n?{...z,weight:j}:z))},[]),ae=o.useCallback((n,j)=>{S(y=>y.map(z=>z.id===n?{...z,text:j}:z))},[]),G=()=>{const n=v.filter(j=>j.selected);n.length>0&&x(n),W(""),S([]),p("loading_question")},ne=()=>{P(n=>[...n,{question:b,answer:c}]),W(""),S([]),p("loading_question")},ee=()=>{const n=v.filter(j=>j.selected);n.length>0&&x(n),m()};return s?e.jsxs(L,{children:[e.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[9999] p-3 sm:p-4",onClick:m,children:e.jsxs(g.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:n=>n.stopPropagation(),className:"bg-white rounded-2xl w-full max-w-[640px] max-h-[90dvh] overflow-hidden shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-slate-200 bg-brand-gradient",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/20 flex items-center justify-center",children:e.jsx(we,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white m-0",children:"Deep Dive Interview"}),e.jsxs("p",{className:"text-sm text-white/80 m-0",children:["Frage ",B," ‚Ä¢ Entdecke deine wahren Motive"]})]})]}),e.jsx("button",{onClick:m,className:"w-10 h-10 rounded-lg border-none bg-white/20 text-white cursor-pointer flex items-center justify-center hover:bg-white/30 transition-all",children:e.jsx(re,{size:24})})]}),e.jsxs("div",{className:"flex-1 overflow-auto p-4 sm:p-5",children:[f==="loading_question"&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 sm:py-16 gap-4",children:[e.jsx(Z,{size:48,className:"text-primary animate-spin"}),e.jsx("p",{className:"text-slate-500 text-lg",children:"Generiere n√§chste Frage..."})]}),f==="input"&&e.jsxs("div",{children:[e.jsxs("div",{className:"bg-primary/10 rounded-xl p-4 sm:p-5 mb-5 border-l-4 border-primary",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ge,{size:16,className:"text-primary"}),e.jsx("span",{className:"text-sm font-semibold text-primary uppercase",children:"Coach fragt"})]}),e.jsx("p",{className:"text-lg sm:text-xl font-medium text-slate-800 leading-relaxed m-0",children:b||"Lade Frage..."})]}),C&&e.jsx("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg mb-4 text-sm",children:C}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-medium text-slate-500 mb-2",children:"Deine Antwort"}),e.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[e.jsx(xe,{value:c,onChange:n=>W(n.target.value),placeholder:"Schreib einfach drauf los... Was f√§llt dir ein? Was f√ºhlst du dabei?",rows:5,className:"flex-[1_1_300px] min-w-0 text-base p-4 rounded-xl resize-y min-h-[120px]"}),e.jsx("div",{className:"shrink-0 pb-1",children:e.jsx(Ce,{onTranscriptReady:n=>{W(j=>j.trim()?j.trim()+`

`+n:n)},warmUp:!!d,deviceId:d})})]})]})]}),f==="analyzing"&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 sm:py-16 gap-4",children:[e.jsx(g.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:e.jsx(D,{size:48,className:"text-primary"})}),e.jsx("p",{className:"text-slate-500 text-lg",children:"KI extrahiert Argumente..."})]}),f==="selection"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(D,{size:20,className:"text-primary"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-800 m-0",children:"Extrahierte Argumente"})]}),v.length===0?e.jsxs("div",{className:"text-center py-8 sm:py-10 bg-slate-50 rounded-xl",children:[e.jsx("p",{className:"text-slate-500 mb-3",children:"Keine konkreten Argumente gefunden."}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Das ist okay! Versuch es mit einer ausf√ºhrlicheren Antwort oder einer anderen Frage."})]}):e.jsx("div",{className:"flex flex-col gap-3",children:v.map(n=>e.jsx(cs,{item:n,onToggle:X,onWeightChange:Y,onTextChange:ae},n.id))}),e.jsx("p",{className:"text-sm text-slate-400 mt-4 text-center",children:"Klicke auf ein Argument um es ab-/anzuw√§hlen. Passe die Gewichtung nach Bedarf an."})]})]}),e.jsxs("div",{className:"p-3 sm:p-4 border-t border-slate-200 flex flex-wrap justify-between gap-3 shrink-0 bg-white",children:[f==="input"&&e.jsxs(e.Fragment,{children:[e.jsx(E,{variant:"ghost",onClick:m,className:"order-1",children:"Abbrechen"}),e.jsxs("div",{className:"flex gap-2 order-2 flex-1 sm:flex-none justify-end",children:[e.jsxs(E,{variant:"outline",onClick:ne,className:"flex-1 sm:flex-none",children:[e.jsx(He,{size:16,className:"mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:"√úberspringen"}),e.jsx("span",{className:"sm:hidden",children:"Skip"})]}),e.jsxs(E,{variant:"solid",onClick:R,disabled:!c.trim()||c.length<10,className:`flex-1 sm:flex-none ${c.trim().length>=10?"bg-brand-gradient":""}`,children:[e.jsx(D,{size:16,className:"mr-2"}),"Auswerten"]})]})]}),f==="selection"&&e.jsxs(e.Fragment,{children:[e.jsx(E,{variant:"outline",onClick:ee,className:"order-1",children:"Fertig"}),e.jsxs(E,{variant:"solid",onClick:()=>{v.filter(j=>j.selected).length>0?G():ne()},className:"bg-brand-gradient order-2",children:[v.some(n=>n.selected)?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:inline",children:"√úbernehmen & Weiter"}),e.jsx("span",{className:"sm:hidden",children:"Weiter"})]}):"N√§chste Frage",e.jsx(Qe,{size:16,className:"ml-1"})]})]})]})]})}),e.jsx("style",{children:`
          input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: white;
            border: 2px solid currentColor;
            cursor: pointer;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
          }

          input[type="range"]::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: white;
            border: 2px solid currentColor;
            cursor: pointer;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
          }
        `})]}):null},K=()=>`item_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Ae=[{id:"strategist",name:"Der Stratege",icon:"‚ôüÔ∏è",color:w.indigo[500],bgColor:"bg-indigo-50",borderColor:"border-indigo-500",textColor:"text-indigo-600",description:"Karriere, Geld, Macht"},{id:"security",name:"Der Sicherheits-Beauftragte",icon:"üõ°Ô∏è",color:w.cyan[600],bgColor:"bg-cyan-50",borderColor:"border-cyan-600",textColor:"text-cyan-700",description:"Risiko, Best√§ndigkeit"},{id:"feelgood",name:"Der Feel-Good Manager",icon:"üßò",color:w.emerald[500],bgColor:"bg-emerald-50",borderColor:"border-emerald-500",textColor:"text-emerald-600",description:"Work-Life-Balance, Kultur"},{id:"growth",name:"Der Gr√ºnder",icon:"üöÄ",color:w.amber[500],bgColor:"bg-amber-50",borderColor:"border-amber-500",textColor:"text-amber-600",description:"Wachstum, Innovation"},{id:"future",name:"Dein Zukunfts-Ich",icon:"üîÆ",color:w.violet[500],bgColor:"bg-violet-50",borderColor:"border-violet-500",textColor:"text-violet-600",description:"Langzeit, Reue-Vermeidung"}],ms=({value:s,onChange:m,onChangeEnd:a,color:r})=>{const l=r==="green",x=l?w.green[500]:w.red[500];return e.jsxs("div",{className:"flex items-center gap-2 min-w-[90px] shrink-0",children:[e.jsx("input",{type:"range",min:"1",max:"10",value:s,onChange:d=>m(parseInt(d.target.value)),onMouseUp:a,onTouchEnd:a,className:"w-[60px] h-1.5 rounded cursor-pointer appearance-none shrink-0",style:{background:`linear-gradient(90deg, ${x} 0%, ${x} ${(s-1)*11.1}%, ${w.slate[200]} ${(s-1)*11.1}%, ${w.slate[200]} 100%)`}}),e.jsx("span",{className:`min-w-[20px] text-center font-semibold text-sm shrink-0 ${l?"text-green-700":"text-red-700"}`,children:s})]})},fe=({item:s,onUpdate:m,onDelete:a,onBlur:r,color:l,autoFocus:x})=>{const d=l==="green",f=_.useRef(null);return _.useEffect(()=>{const p=f.current;p&&(p.style.height="auto",p.style.height=Math.max(44,p.scrollHeight)+"px")},[s.text]),e.jsxs(g.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,x:d?-20:20},transition:{duration:.2},className:`decision-item flex flex-wrap items-start gap-2.5 p-3 rounded-lg border ${d?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsxs("div",{className:"decision-item-input-row flex items-start gap-2.5 flex-[1_1_100%] min-w-0",children:[e.jsx("div",{className:"shrink-0 pt-2",children:d?e.jsx(q,{size:20,className:"text-green-700"}):e.jsx(O,{size:20,className:"text-red-700"})}),e.jsx(xe,{ref:f,value:s.text,onChange:p=>m(s.id,{text:p.target.value}),onBlur:r,autoFocus:x,placeholder:d?"Pro-Argument...":"Contra-Argument...",rows:1,className:`flex-1 min-w-0 bg-white rounded-md px-3 py-2 text-base resize-none min-h-[44px] overflow-hidden border ${d?"border-green-300":"border-red-300"}`})]}),e.jsxs("div",{className:"decision-item-controls flex items-center justify-end gap-2 shrink-0 ml-auto",children:[e.jsx(ms,{value:s.weight,onChange:p=>m(s.id,{weight:p}),onChangeEnd:r,color:l}),e.jsx("button",{onClick:()=>a(s.id),className:"p-2 bg-transparent border-none rounded cursor-pointer text-slate-400 transition-all shrink-0 hover:bg-red-50 hover:text-red-700",children:e.jsx(Ye,{size:18})})]})]})},hs=({proScore:s,contraScore:m})=>{const a=s+m,r=a>0?Math.round(s/a*100):50,l=100-r;return e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex justify-between mb-2 text-base font-semibold",children:[e.jsxs("span",{className:"text-green-700",children:["Pro: ",s," Punkte (",r,"%)"]}),e.jsxs("span",{className:"text-red-700",children:["Contra: ",m," Punkte (",l,"%)"]})]}),e.jsxs("div",{className:"h-6 rounded-lg overflow-hidden flex bg-slate-100 shadow-inner",children:[e.jsx(g.div,{initial:{width:0},animate:{width:`${r}%`},transition:{duration:.5,ease:"easeOut"},className:"h-full flex items-center justify-center text-white font-semibold text-xs bg-gradient-to-r from-green-500 to-green-600",style:{minWidth:r>10?"auto":"0"},children:r>15&&`${r}%`}),e.jsx(g.div,{initial:{width:0},animate:{width:`${l}%`},transition:{duration:.5,ease:"easeOut"},className:"h-full flex items-center justify-center text-white font-semibold text-xs bg-gradient-to-r from-red-500 to-red-600",style:{minWidth:l>10?"auto":"0"},children:l>15&&`${l}%`})]})]})},je=({suggestion:s,onAdd:m,isAdded:a})=>{const r=s.type==="pro",[l,x]=_.useState(5),d=r?w.green[500]:w.red[500];return e.jsxs(g.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:`flex flex-col gap-2 px-4 py-3 rounded-lg border ${r?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-6 h-6 rounded flex items-center justify-center shrink-0 mt-0.5 ${r?"bg-green-100":"bg-red-100"}`,children:r?e.jsx(q,{size:14,className:"text-green-700"}):e.jsx(O,{size:14,className:"text-red-700"})}),e.jsx("span",{className:"flex-1 text-base text-slate-600 leading-snug",children:s.text})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3 pl-9",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"Gewichtung:"}),e.jsx("input",{type:"range",min:"1",max:"10",value:l,onChange:f=>x(parseInt(f.target.value)),disabled:a,className:"w-[80px] h-1.5 rounded cursor-pointer appearance-none",style:{background:`linear-gradient(90deg, ${d} 0%, ${d} ${(l-1)*11.1}%, ${w.slate[200]} ${(l-1)*11.1}%, ${w.slate[200]} 100%)`,opacity:a?.5:1}}),e.jsx("span",{className:`min-w-[20px] text-center font-semibold text-sm ${r?"text-green-700":"text-red-700"}`,children:l})]}),e.jsx("button",{onClick:()=>m({...s,weight:l}),disabled:a,className:`w-10 h-10 rounded-lg border-2 flex items-center justify-center shrink-0 transition-all ${a?"bg-slate-100 border-slate-200 text-slate-400 cursor-default":r?"bg-green-50 border-green-300 text-green-600 cursor-pointer hover:bg-green-100 hover:border-green-400":"bg-red-50 border-red-300 text-red-600 cursor-pointer hover:bg-red-100 hover:border-red-400"}`,children:a?"‚úì":e.jsx(le,{size:20,strokeWidth:2.5})})]})]})},gs=({isOpen:s,onClose:m,activePersona:a,isLoading:r,suggestions:l,onAddSuggestion:x,onLoadMore:d,addedSuggestions:f})=>{if(!s)return null;const p=Ae.find(b=>b.id===a);return e.jsxs(g.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"relative mt-4 p-5 bg-white rounded-xl shadow-lg border-2",style:{borderColor:p?.color||w.indigo[500]},children:[e.jsx("button",{onClick:m,className:"absolute top-3 right-3 w-10 h-10 rounded-md border-none bg-slate-100 text-slate-600 cursor-pointer flex items-center justify-center hover:bg-slate-200",children:e.jsx(re,{size:20,strokeWidth:2.5})}),e.jsxs("div",{className:"flex items-center gap-3 mb-4 pr-8",children:[e.jsx("span",{className:"text-4xl",children:p?.icon}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-slate-800 m-0",children:p?.name}),e.jsx("p",{className:"text-sm text-slate-600 m-0",children:p?.description})]})]}),r?e.jsxs("div",{className:"flex flex-col items-center gap-3 py-6",children:[e.jsx(Z,{size:28,className:"animate-spin",style:{color:p?.color}}),e.jsxs("span",{className:"text-slate-600 text-base",children:[p?.name," denkt nach..."]})]}):e.jsxs("div",{className:"flex flex-col gap-2.5",children:[e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"text-xs font-semibold text-green-700 uppercase tracking-wide",children:"Pro-Argumente"})}),l.filter(b=>b.type==="pro").map((b,F)=>e.jsx(je,{suggestion:b,onAdd:x,isAdded:f.has(`${b.type}-${b.text}`)},`pro-${F}`)),e.jsx("div",{className:"mt-3 mb-2",children:e.jsx("span",{className:"text-xs font-semibold text-red-700 uppercase tracking-wide",children:"Contra-Argumente"})}),l.filter(b=>b.type==="con").map((b,F)=>e.jsx(je,{suggestion:b,onAdd:x,isAdded:f.has(`${b.type}-${b.text}`)},`con-${F}`)),l.length>0&&d&&e.jsx("button",{onClick:d,disabled:r,className:"mt-4 py-3 px-4 bg-transparent border-2 border-dashed rounded-lg text-base font-medium cursor-pointer flex items-center justify-center gap-2 w-full transition-all disabled:cursor-not-allowed disabled:opacity-60 hover:bg-slate-50",style:{borderColor:p?.color||w.slate[200],color:p?.color||w.slate[500]},children:r?e.jsxs(e.Fragment,{children:[e.jsx(Z,{size:18,className:"animate-spin"}),"Generiere mehr..."]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{size:18}),"Mehr Inspirationen"]})})]})]})},ps=({topic:s,onSelectPersona:m,activePersona:a,isLoading:r,suggestions:l,onCloseBrainstorm:x,onAddSuggestion:d,onLoadMore:f,addedSuggestions:p})=>{const[b,F]=o.useState(!1),T=s.trim().length>0;return e.jsxs(ve,{variant:"elevated",className:"mb-4 p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer gap-2",onClick:()=>F(!b),children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 rounded-md bg-gradient-to-br from-indigo-500 to-violet-500 flex items-center justify-center shrink-0",children:e.jsx(Ze,{size:20,color:"white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 m-0",children:"Brainstorming"}),e.jsx("p",{className:"text-base text-slate-600 m-0 whitespace-nowrap overflow-hidden text-ellipsis",children:"Frag dein inneres Team"})]})]}),b?e.jsx(Je,{size:22,className:"text-slate-500 shrink-0"}):e.jsx(Xe,{size:22,className:"text-slate-500 shrink-0"})]}),e.jsx(L,{children:b&&e.jsx(g.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"flex flex-wrap gap-2 pb-2",children:Ae.map(N=>e.jsxs("button",{onClick:c=>{c.stopPropagation(),T&&m(N.id)},disabled:!T||r&&a===N.id,className:`flex items-center gap-1.5 px-3 py-2 rounded-md border-2 cursor-pointer transition-all whitespace-nowrap ${a===N.id?`${N.bgColor} ${N.borderColor}`:"bg-white border-slate-200"} ${T?"":"cursor-not-allowed opacity-50"}`,children:[r&&a===N.id?e.jsx(Z,{size:14,className:"animate-spin",style:{color:N.color}}):e.jsx("span",{className:"text-lg",children:N.icon}),e.jsx("span",{className:`text-sm font-medium ${a===N.id?N.textColor:"text-slate-600"}`,children:N.name.replace("Der ","").replace("Dein ","")})]},N.id))}),!T&&e.jsx("p",{className:"mt-3 text-sm text-slate-400 italic",children:"Gib zuerst deine Entscheidungsfrage ein, um Vorschl√§ge zu erhalten."}),e.jsx(L,{children:a&&e.jsx(gs,{isOpen:!!a,onClose:x,activePersona:a,isLoading:r,suggestions:l,onAddSuggestion:d,onLoadMore:f,addedSuggestions:p})})]})})})]})},Ss=({initialData:s,onAnalysisComplete:m,onCancel:a,isAuthenticated:r,requireAuth:l,savedDecisionId:x,onSaveDraft:d,onUpdateSession:f,onDecisionIdChange:p,selectedMicrophoneId:b,onMicrophoneChange:F})=>{const[T,N]=o.useState(!1),[c,W]=o.useState(s?.topic||""),[v,S]=o.useState(s?.context||""),[k,P]=o.useState(s?.pros||[{id:K(),text:"",weight:5}]),[C,A]=o.useState(s?.cons||[{id:K(),text:"",weight:5}]),[B,M]=o.useState(!1),[J,R]=o.useState(null),[X,Y]=o.useState(null),[ae,G]=o.useState(!1),[ne,ee]=o.useState(!1),n=_.useRef(null),[j,y]=o.useState({activePersona:null,isLoading:!1,suggestions:[]}),[z,Se]=o.useState(new Set),H=o.useMemo(()=>k.reduce((t,i)=>t+(i.text.trim()?i.weight:0),0),[k]),Q=o.useMemo(()=>C.reduce((t,i)=>t+(i.text.trim()?i.weight:0),0),[C]),me=k.some(t=>t.text.trim()),he=C.some(t=>t.text.trim()),$=c.trim()&&(me||he),se=o.useCallback(async()=>{if(n.current&&clearTimeout(n.current),!c.trim()||!d||!f)return;const t={topic:c,context:v,pros:k,cons:C,proScore:H,contraScore:Q};ee(!0);try{if(x)await f(x,{...t,status:"draft"}),console.log("[DecisionBoard] Auto-saved (update):",x);else{const i=await d(t);i&&p&&p(i),console.log("[DecisionBoard] Auto-saved (create):",i)}}catch(i){console.error("[DecisionBoard] Auto-save failed:",i)}finally{ee(!1)}},[c,v,k,C,H,Q,x,d,f,p]),te=o.useCallback(()=>{n.current&&clearTimeout(n.current),se()},[se]);_.useEffect(()=>()=>{n.current&&clearTimeout(n.current)},[]);const $e=o.useCallback(()=>{const t=K();P(i=>[...i,{id:t,text:"",weight:5}]),Y(t)},[]),Ie=o.useCallback(()=>{const t=K();A(i=>[...i,{id:t,text:"",weight:5}]),Y(t)},[]),Fe=o.useCallback((t,i)=>{P(u=>u.map(h=>h.id===t?{...h,...i}:h))},[]),Pe=o.useCallback((t,i)=>{A(u=>u.map(h=>h.id===t?{...h,...i}:h))},[]),Be=o.useCallback(t=>{P(i=>i.filter(u=>u.id!==t))},[]),Ee=o.useCallback(t=>{A(i=>i.filter(u=>u.id!==t))},[]),De=o.useCallback(async t=>{y(i=>({...i,activePersona:t,isLoading:!0,suggestions:[]}));try{const i=window.bewerbungstrainerConfig?.geminiApiKey;if(!i)throw new Error("API-Key nicht konfiguriert");const u=v.trim()||null,h=await be(c,t,i,u,k,C);y(U=>({...U,isLoading:!1,suggestions:h.suggestions||[]}))}catch(i){console.error("[DecisionBoard] Brainstorm error:",i),y(u=>({...u,isLoading:!1,suggestions:[]})),R(i.message||"Fehler beim Brainstorming")}},[c,v,k,C]),Te=o.useCallback(()=>{y({activePersona:null,isLoading:!1,suggestions:[]})},[]),We=o.useCallback(t=>{const i=`${t.type}-${t.text}`;Se(h=>new Set([...h,i]));const u={id:K(),text:t.text,weight:t.weight||5};t.type==="pro"?P(h=>h.length===1&&!h[0].text.trim()?[u]:[...h,u]):A(h=>h.length===1&&!h[0].text.trim()?[u]:[...h,u])},[]),_e=o.useCallback(async()=>{const{activePersona:t,suggestions:i}=j;if(t){y(u=>({...u,isLoading:!0}));try{const u=window.bewerbungstrainerConfig?.geminiApiKey;if(!u)throw new Error("API-Key nicht konfiguriert");const h=i.filter(I=>I.type==="pro").map(I=>({text:I.text})),U=i.filter(I=>I.type==="con").map(I=>({text:I.text})),V=[...k,...h],qe=[...C,...U],Oe=v.trim()||null,Me=await be(c,t,u,Oe,V,qe);y(I=>({...I,isLoading:!1,suggestions:[...I.suggestions,...Me.suggestions||[]]}))}catch(u){console.error("[DecisionBoard] Load more error:",u),y(h=>({...h,isLoading:!1})),R(u.message||"Fehler beim Laden weiterer Vorschl√§ge")}}},[j,c,v,k,C]),Re=o.useCallback(t=>{S(i=>i.trim()?i.trim()+`

`+t:t)},[]),Ke=o.useCallback(t=>{t.forEach(i=>{const u={id:K(),text:i.text,weight:i.weight||5};i.type==="pro"?P(h=>h.length===1&&!h[0].text.trim()?[u]:[...h,u]):A(h=>h.length===1&&!h[0].text.trim()?[u]:[...h,u])}),setTimeout(()=>se(),100)},[se]),Le=o.useCallback(async()=>{if($){M(!0),R(null);try{const t=window.bewerbungstrainerConfig?.geminiApiKey;if(!t)throw new Error("API-Key nicht konfiguriert");const i=k.filter(V=>V.text.trim()),u=C.filter(V=>V.text.trim()),h={topic:c,context:v.trim()||null,pros:i,cons:u,proScore:H,contraScore:Q},U=await ls(h,t);m(h,U)}catch(t){console.error("[DecisionBoard] Analysis error:",t),R(t.message||"Fehler bei der Analyse")}finally{M(!1)}}},[c,v,k,C,H,Q,$,m]);return e.jsxs("div",{className:"p-4 max-w-[1200px] mx-auto",children:[a&&e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs("button",{onClick:()=>N(!0),className:"flex items-center gap-2 px-4 py-2 rounded-md border border-slate-200 bg-white text-slate-600 cursor-pointer text-base font-medium transition-all hover:bg-red-50 hover:border-red-500 hover:text-red-700",children:[e.jsx(re,{size:18}),"Abbrechen"]})}),e.jsx("div",{className:"mb-4 text-center",children:e.jsx("p",{className:"text-sm text-slate-400 max-w-[600px] mx-auto",children:"Analysiere deine Entscheidung objektiv. Gewichte Pro und Contra, und erhalte KI-gest√ºtzte Impulse f√ºr blinde Flecken."})}),e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"mb-4 p-5 md:p-6 rounded-2xl",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(251,191,36,0.08) 100%)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",border:"1px solid rgba(251,191,36,0.2)",boxShadow:"0 4px 24px rgba(251,191,36,0.1), inset 0 0 20px rgba(255,255,255,0.5)"},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(g.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"linear-gradient(135deg, #FCD34D 0%, #F59E0B 100%)",boxShadow:"0 4px 12px rgba(245,158,11,0.3)"},children:e.jsx(Ne,{size:20,color:"white"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Deine Entscheidungsfrage"})]}),e.jsx(as,{value:c,onChange:t=>W(t.target.value),onBlur:te,placeholder:"z.B. Soll ich das Jobangebot annehmen?",className:"text-lg p-4 rounded-lg mb-4"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block text-base font-medium text-slate-600 mb-2",children:"Beschreibe die Situation (optional)"}),e.jsxs("div",{className:"context-input-wrapper flex flex-wrap items-end gap-3",children:[e.jsx(xe,{value:v,onChange:t=>S(t.target.value),onBlur:te,placeholder:"Hintergrund, Rahmenbedingungen, Gef√ºhle, was dich besch√§ftigt...",rows:3,className:"flex-[1_1_300px] min-w-0 text-base px-4 py-3 rounded-lg resize-y min-h-[80px]"}),e.jsx("div",{className:"shrink-0 pb-1",children:e.jsx(Ce,{onTranscriptReady:Re,warmUp:!!b,deviceId:b})})]})]})]}),e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},whileHover:c.trim()?{scale:1.01,boxShadow:"0 8px 32px rgba(99,102,241,0.25)"}:{},whileTap:c.trim()?{scale:.99}:{},onClick:()=>c.trim()&&G(!0),className:`mb-4 p-5 md:p-6 rounded-2xl transition-all relative overflow-hidden ${c.trim()?"cursor-pointer":"cursor-not-allowed opacity-60"}`,style:{background:c.trim()?"linear-gradient(135deg, rgba(99,102,241,0.12) 0%, rgba(139,92,246,0.08) 100%)":"linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(248,250,252,0.9) 100%)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",border:c.trim()?"2px solid rgba(99,102,241,0.3)":"1px solid rgba(0,0,0,0.08)",boxShadow:c.trim()?"0 4px 24px rgba(99,102,241,0.15), inset 0 0 30px rgba(99,102,241,0.05)":"0 2px 12px rgba(0,0,0,0.06)"},children:[c.trim()&&e.jsx(g.div,{animate:{x:["-100%","200%"]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut",repeatDelay:1},style:{position:"absolute",top:0,left:0,width:"40%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent)",pointerEvents:"none"}}),e.jsxs("div",{className:"deep-dive-card-content flex items-center justify-between gap-3 flex-wrap relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-[1_1_auto] min-w-[200px]",children:[e.jsx(g.div,{animate:c.trim()?{scale:[1,1.08,1]}:{},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"w-12 h-12 rounded-xl flex items-center justify-center shrink-0",style:{background:"linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%)",boxShadow:c.trim()?"0 4px 16px rgba(99,102,241,0.4)":"0 2px 8px rgba(99,102,241,0.2)"},children:e.jsx(we,{size:22,color:"white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 m-0",children:"Deep Dive Interview"}),e.jsx("p",{className:"text-sm text-slate-600 m-0 leading-snug",children:"Entdecke verborgene Argumente durch gezielte Coaching-Fragen"})]})]}),e.jsxs(g.button,{whileHover:c.trim()?{scale:1.05}:{},whileTap:c.trim()?{scale:.95}:{},disabled:!c.trim(),onClick:t=>{t.stopPropagation(),c.trim()&&G(!0)},className:"shrink-0 flex items-center gap-2 px-5 py-2.5 rounded-xl font-semibold text-sm transition-all",style:{background:c.trim()?"linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%)":"#E2E8F0",color:c.trim()?"white":"#94A3B8",border:"none",boxShadow:c.trim()?"0 4px 12px rgba(99,102,241,0.3)":"none",cursor:c.trim()?"pointer":"not-allowed"},children:[e.jsx(D,{size:18}),"Starten"]})]})]}),e.jsx(ps,{topic:c,onSelectPersona:De,activePersona:j.activePersona,isLoading:j.isLoading,suggestions:j.suggestions,onCloseBrainstorm:Te,onAddSuggestion:We,onLoadMore:_e,addedSuggestions:z}),e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(min(100%,380px),1fr))] gap-4 mb-6",children:[e.jsxs(g.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.2},className:"decision-card-pro rounded-2xl p-6",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(34,197,94,0.08) 100%)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",border:"2px solid rgba(34,197,94,0.2)",boxShadow:"0 4px 24px rgba(34,197,94,0.1), inset 0 0 30px rgba(34,197,94,0.03)"},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(g.div,{animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"w-11 h-11 rounded-xl flex items-center justify-center",style:{background:"linear-gradient(135deg, #22C55E 0%, #16A34A 100%)",boxShadow:"0 4px 12px rgba(34,197,94,0.35)"},children:e.jsx(q,{size:20,color:"white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold m-0",style:{color:"#16A34A"},children:"PRO"}),e.jsx("p",{className:"text-sm text-slate-600 m-0",children:"Was spricht daf√ºr?"})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(L,{mode:"popLayout",children:k.map(t=>e.jsx(fe,{item:t,onUpdate:Fe,onDelete:Be,onBlur:te,color:"green",autoFocus:X===t.id},t.id))}),e.jsxs(g.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:$e,className:"flex items-center justify-center gap-2 w-full py-3 rounded-xl font-medium text-sm transition-all",style:{background:"transparent",border:"2px dashed rgba(34,197,94,0.4)",color:"#16A34A"},children:[e.jsx(le,{size:18}),"Argument hinzuf√ºgen"]})]})]}),e.jsxs(g.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.3},className:"decision-card-contra rounded-2xl p-6",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(239,68,68,0.08) 100%)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",border:"2px solid rgba(239,68,68,0.2)",boxShadow:"0 4px 24px rgba(239,68,68,0.1), inset 0 0 30px rgba(239,68,68,0.03)"},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(g.div,{animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut",delay:.5},className:"w-11 h-11 rounded-xl flex items-center justify-center",style:{background:"linear-gradient(135deg, #EF4444 0%, #DC2626 100%)",boxShadow:"0 4px 12px rgba(239,68,68,0.35)"},children:e.jsx(O,{size:20,color:"white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold m-0",style:{color:"#DC2626"},children:"CONTRA"}),e.jsx("p",{className:"text-sm text-slate-600 m-0",children:"Was spricht dagegen?"})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(L,{mode:"popLayout",children:C.map(t=>e.jsx(fe,{item:t,onUpdate:Pe,onDelete:Ee,onBlur:te,color:"red",autoFocus:X===t.id},t.id))}),e.jsxs(g.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:Ie,className:"flex items-center justify-center gap-2 w-full py-3 rounded-xl font-medium text-sm transition-all",style:{background:"transparent",border:"2px dashed rgba(239,68,68,0.4)",color:"#DC2626"},children:[e.jsx(le,{size:18}),"Argument hinzuf√ºgen"]})]})]})]}),(me||he)&&e.jsxs(ve,{variant:"elevated",className:"mb-6 p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ce,{size:20,className:"text-primary"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Rationaler Score"})]}),e.jsx(hs,{proScore:H,contraScore:Q})]}),J&&e.jsxs(g.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-lg mb-6 text-red-700",children:[e.jsx(ge,{size:20}),e.jsx("span",{children:J})]}),e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.4},className:"flex justify-center",children:e.jsxs(g.button,{onClick:Le,disabled:!$||B,whileHover:$&&!B?{scale:1.03,boxShadow:"0 12px 40px rgba(99,102,241,0.4)"}:{},whileTap:$&&!B?{scale:.98}:{},className:"relative overflow-hidden flex items-center gap-3 px-10 py-4 rounded-2xl font-bold text-lg transition-all",style:{background:$?"linear-gradient(135deg, #6366F1 0%, #8B5CF6 50%, #7C3AED 100%)":"#E2E8F0",color:$?"white":"#94A3B8",border:"none",boxShadow:$?"0 8px 32px rgba(99,102,241,0.35), inset 0 1px 0 rgba(255,255,255,0.2)":"none",cursor:$&&!B?"pointer":"not-allowed",opacity:B?.85:1},children:[$&&!B&&e.jsx(g.div,{animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,ease:"easeInOut",repeatDelay:1},style:{position:"absolute",top:0,left:0,width:"50%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.25), transparent)",pointerEvents:"none"}}),B?e.jsxs(e.Fragment,{children:[e.jsx(Z,{size:22,className:"animate-spin"}),e.jsx("span",{children:"Analyse l√§uft..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{size:22}),e.jsx("span",{children:"Entscheidung analysieren"})]})]})}),e.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }

          input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: white;
            border: 2px solid currentColor;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
          }

          input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: white;
            border: 2px solid currentColor;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
          }

          /* Mobile responsive: stack controls below textarea */
          @media (max-width: 480px) {
            .decision-item {
              flex-direction: column !important;
            }
            .decision-item-input-row {
              width: 100% !important;
              flex: 1 1 100% !important;
            }
            .decision-item-controls {
              width: 100% !important;
              justify-content: flex-start !important;
              padding-left: 32px;
            }
          }

          .scrollbar-hide::-webkit-scrollbar {
            display: none;
          }
          .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
          }
        `}),e.jsx(L,{children:T&&e.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>N(!1),children:e.jsxs(g.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:t=>t.stopPropagation(),className:"bg-white rounded-xl p-6 max-w-[400px] w-full shadow-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-md bg-red-50 flex items-center justify-center",children:e.jsx(ge,{size:22,className:"text-red-500"})}),e.jsx("h3",{className:"text-xl font-semibold text-slate-800 m-0",children:"Session abbrechen?"})]}),e.jsx("p",{className:"text-base text-slate-600 mb-6 leading-relaxed",children:"Alle eingegebenen Daten werden verworfen und nicht gespeichert."}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(ue,{variant:"outline",onClick:()=>N(!1),children:"Zur√ºck"}),e.jsxs(ue,{variant:"solid",onClick:()=>{N(!1),a()},className:"bg-red-500 hover:bg-red-600 text-white",children:[e.jsx(re,{size:18,className:"mr-2"}),"Abbrechen"]})]})]})})}),e.jsx(xs,{isOpen:ae,onClose:()=>G(!1),topic:c,existingPros:k,existingCons:C,onAddItems:Ke,selectedMicrophoneId:b})]})},ie=()=>e.jsxs("div",{className:"p-6 rounded-xl bg-slate-50 border border-slate-200",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-slate-200 mb-4 animate-pulse"}),e.jsx("div",{className:"w-3/5 h-6 rounded-md bg-slate-200 mb-3 animate-pulse"}),e.jsx("div",{className:"w-full h-4 rounded-sm bg-slate-200 mb-2 animate-pulse"}),e.jsx("div",{className:"w-5/6 h-4 rounded-sm bg-slate-200 animate-pulse"})]}),ye=s=>s&&s.split(/(\*\*[^*]+\*\*)/g).map((a,r)=>a.startsWith("**")&&a.endsWith("**")?e.jsx("strong",{children:a.slice(2,-2)},r):a),us=({card:s,index:m})=>{const a={blind_spot:{bgClass:"bg-yellow-50",borderClass:"border-yellow-400",iconBgClass:"bg-yellow-200",iconColorClass:"text-yellow-700",bulletColorClass:"bg-yellow-700",icon:Ne},challenger:{bgClass:"bg-red-50",borderClass:"border-red-300",iconBgClass:"bg-red-50",iconColorClass:"text-red-600",bulletColorClass:"bg-red-600",icon:rs},intuition:{bgClass:"bg-purple-50",borderClass:"border-purple-300",iconBgClass:"bg-purple-100",iconColorClass:"text-purple-700",bulletColorClass:"bg-purple-700",icon:ts}},r=a[s.type]||a.blind_spot,l=r.icon,x=s.points||(s.content?[s.content]:[]);return e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:m*.15},className:`p-6 rounded-xl ${r.bgClass} border-2 ${r.borderClass} h-full flex flex-col`,children:[e.jsx("div",{className:`w-12 h-12 rounded-lg ${r.iconBgClass} flex items-center justify-center mb-4`,children:e.jsx(l,{size:28,className:r.iconColorClass})}),e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-3",children:s.title}),s.type==="challenger"&&s.argument&&e.jsxs("div",{className:`py-2.5 px-3.5 bg-white/60 rounded-md mb-3 border-l-[3px] ${r.borderClass}`,children:[e.jsx("span",{className:"text-sm text-slate-600 block mb-0.5",children:"Hinterfragtes Argument:"}),e.jsxs("span",{className:"text-base font-semibold text-slate-800",children:['"',s.argument,'"']})]}),s.type==="intuition"&&s.question&&e.jsxs("div",{className:`py-2.5 px-3.5 bg-white/60 rounded-md mb-3 border-l-[3px] ${r.borderClass}`,children:[e.jsx("span",{className:"text-sm text-slate-600 block mb-0.5",children:"Reflexionsfrage:"}),e.jsx("span",{className:"text-base font-semibold text-slate-800 italic",children:ye(s.question)})]}),e.jsx("ul",{className:"list-none p-0 m-0 flex-1",children:x.map((d,f)=>e.jsxs("li",{className:"flex items-start gap-2.5 mb-2.5 text-base leading-relaxed text-slate-600",children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${r.bulletColorClass} mt-2 shrink-0`}),e.jsx("span",{children:ye(d)})]},f))})]})},bs=({proScore:s,contraScore:m})=>{const a=s+m,r=a>0?Math.round(s/a*100):50,l=100-r,x=s>m?"pro":s<m?"contra":"neutral";return e.jsxs(oe,{variant:"elevated",padding:"lg",className:"mb-6",children:[e.jsx(ke,{children:e.jsx(ze,{icon:ce,size:"lg",children:"Rationaler Score"})}),e.jsxs(de,{children:[e.jsxs("div",{className:"flex justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{size:20,className:"text-green-600"}),e.jsxs("span",{className:"text-4xl font-bold text-green-600",children:[r,"%"]}),e.jsxs("span",{className:"text-slate-600 text-base",children:["(",s," Punkte)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-slate-600 text-base",children:["(",m," Punkte)"]}),e.jsxs("span",{className:"text-4xl font-bold text-red-600",children:[l,"%"]}),e.jsx(O,{size:20,className:"text-red-600"})]})]}),e.jsxs("div",{className:"h-8 rounded-xl overflow-hidden flex bg-slate-100 shadow-inner",children:[e.jsx(g.div,{initial:{width:0},animate:{width:`${r}%`},transition:{duration:.8,ease:"easeOut"},className:"bg-gradient-to-r from-green-500 to-green-600 h-full"}),e.jsx(g.div,{initial:{width:0},animate:{width:`${l}%`},transition:{duration:.8,ease:"easeOut"},className:"bg-gradient-to-r from-red-500 to-red-600 h-full"})]}),e.jsxs("p",{className:"mt-4 text-center text-base text-slate-600",children:[x==="pro"&&e.jsxs(e.Fragment,{children:["Die Zahlen sprechen ",e.jsx("strong",{className:"text-green-600",children:"f√ºr"})," deine Entscheidung."]}),x==="contra"&&e.jsxs(e.Fragment,{children:["Die Zahlen sprechen ",e.jsx("strong",{className:"text-red-600",children:"gegen"})," deine Entscheidung."]}),x==="neutral"&&e.jsxs(e.Fragment,{children:["Die Argumente sind ",e.jsx("strong",{children:"ausgeglichen"})," - hier lohnt sich ein genauerer Blick."]})]})]})]})},$s=({decisionData:s,analysisResult:m,onStartNew:a,onEditDecision:r})=>{const l=!m;return e.jsxs("div",{className:"p-6 max-w-[1200px] mx-auto",children:[e.jsxs(g.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4},className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs(E,{variant:"ghost",onClick:r,children:[e.jsx(es,{size:18,className:"mr-2"}),"Bearbeiten"]}),e.jsxs(E,{variant:"outline",onClick:a,children:[e.jsx(pe,{size:18,className:"mr-2"}),"Neue Analyse"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-xl bg-brand-gradient mb-4 shadow-lg",children:e.jsx(D,{size:32,color:"white"})}),e.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-2",children:"Deine Entscheidungsanalyse"}),e.jsxs("p",{className:"text-xl text-slate-600 italic",children:['"',s?.topic,'"']})]})]}),s&&e.jsx(bs,{proScore:s.proScore,contraScore:s.contraScore}),m?.analysis_summary&&e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},children:e.jsx(oe,{variant:"gradient",padding:"lg",className:"mb-6",children:e.jsx(de,{children:e.jsx("p",{className:"text-lg leading-relaxed text-slate-800 text-center italic",children:m.analysis_summary})})})}),e.jsxs(g.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.4,delay:.3},className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 mb-5 flex items-center gap-2.5",children:[e.jsx(D,{size:24,className:"text-primary"}),"KI-Coaching Impulse"]}),e.jsx("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(min(100%,320px),1fr))] gap-5",children:l?e.jsxs(e.Fragment,{children:[e.jsx(ie,{}),e.jsx(ie,{}),e.jsx(ie,{})]}):m?.cards?.map((x,d)=>e.jsx(us,{card:x,index:d},x.type||d))})]}),e.jsxs(oe,{variant:"elevated",padding:"lg",children:[e.jsx(ke,{children:e.jsx(ze,{icon:ce,size:"md",children:"Deine Argumente"})}),e.jsx(de,{children:e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(min(100%,280px),1fr))] gap-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-green-600 mb-3 flex items-center gap-2",children:[e.jsx(q,{size:18}),"Pro (",s?.proScore," Punkte)"]}),e.jsx("ul",{className:"list-none p-0 m-0",children:s?.pros?.map((x,d)=>e.jsxs("li",{className:"py-2.5 px-3.5 bg-green-50 rounded-md mb-2 flex justify-between items-center",children:[e.jsx("span",{className:"text-green-800",children:x.text}),e.jsx("span",{className:"bg-green-100 text-green-600 px-2 py-0.5 rounded-sm text-sm font-semibold",children:x.weight})]},x.id||d))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-red-600 mb-3 flex items-center gap-2",children:[e.jsx(O,{size:18}),"Contra (",s?.contraScore," Punkte)"]}),e.jsx("ul",{className:"list-none p-0 m-0",children:s?.cons?.map((x,d)=>e.jsxs("li",{className:"py-2.5 px-3.5 bg-red-50 rounded-md mb-2 flex justify-between items-center",children:[e.jsx("span",{className:"text-red-800",children:x.text}),e.jsx("span",{className:"bg-red-100 text-red-600 px-2 py-0.5 rounded-sm text-sm font-semibold",children:x.weight})]},x.id||d))})]})]})})]}),e.jsxs("div",{className:"flex justify-center gap-4 mt-8",children:[e.jsxs(E,{variant:"outline",size:"lg",onClick:r,children:[e.jsx(ss,{size:18,className:"mr-2"}),"Argumente anpassen"]}),e.jsxs(E,{variant:"solid",size:"lg",onClick:a,className:"bg-brand-gradient",children:[e.jsx(pe,{size:18,className:"mr-2"}),"Neue Entscheidung"]})]}),e.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
          }
        `})]})};export{$s as D,Ss as a};
