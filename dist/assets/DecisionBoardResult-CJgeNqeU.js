import{j as e,A as F,m as k,aY as we,X as re,p as X,E as Ke,a as T,ab as Ge,h as _e,t as qe,af as K,ag as G,aZ as Ne,S as se,x as ve,aj as de,Y as ye,U as Oe,W as Qe,e as Ve,a6 as Ue,Q as Ze,O as je,aG as Xe,ai as Ye,a_ as Je}from"./ui-vendor-DceLfMgS.js";import{a as g,d as H}from"./react-vendor-uDOJF2jQ.js";import{C as P,a as oe,b as ae,c as Y}from"./card-CDygNAxq.js";import{B as v}from"./button-CkRsmUDc.js";import{I as et}from"./input-DiAaxk0a.js";import{T as ge}from"./textarea-Dst_4ahf.js";import{u as pe}from"./useBranding-vyTCBMMQ.js";import{f as tt,h as it,i as Se,j as nt}from"./gemini-NRR8YfWJ.js";import{A as rt}from"./AudioRecorder-BaM5p1Nh.js";const st=()=>`wizard_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,ot=({value:s,onChange:x,type:r,b:l})=>{const i=r==="pro"?l.success:l.error;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:l.space[2],minWidth:"100px"},children:[e.jsx("input",{type:"range",min:"1",max:"10",value:s,onChange:p=>x(parseInt(p.target.value)),style:{width:"70px",height:"6px",borderRadius:l.radius.sm,background:`linear-gradient(90deg, ${i} 0%, ${i} ${(s-1)*11.1}%, ${l.borderColor} ${(s-1)*11.1}%, ${l.borderColor} 100%)`,appearance:"none",cursor:"pointer"}}),e.jsx("span",{style:{minWidth:"24px",textAlign:"center",fontWeight:l.fontWeight.semibold,fontSize:l.fontSize.sm,color:i},children:s})]})},at=({item:s,onToggle:x,onWeightChange:r,onTextChange:l,b:i})=>{const p=s.type==="pro",n=p?i.successLight:i.errorLight,c=p?"#bbf7d0":"#fecaca",o=p?i.successDark:i.errorDark,t=H.useRef(null);return H.useEffect(()=>{const u=t.current;u&&(u.style.height="auto",u.style.height=Math.max(36,u.scrollHeight)+"px")},[s.text]),e.jsxs(k.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},style:{display:"flex",alignItems:"flex-start",gap:i.space[3],padding:i.space[4],backgroundColor:s.selected?n:i.cardBgHover,borderRadius:i.radius.lg,border:`2px solid ${s.selected?c:i.borderColor}`,transition:i.transition.normal},children:[e.jsx("div",{onClick:()=>x(s.id),style:{width:"24px",height:"24px",borderRadius:i.radius.md,border:`2px solid ${s.selected?o:i.borderColor}`,backgroundColor:s.selected?o:"transparent",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,cursor:"pointer",transition:i.transition.normal},children:s.selected&&e.jsx(qe,{size:14,color:i.white,strokeWidth:3})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:i.space[2],marginBottom:i.space[1]},children:[p?e.jsx(K,{size:i.iconSize.md,color:o}):e.jsx(G,{size:i.iconSize.md,color:o}),e.jsx("span",{style:{fontSize:i.fontSize.xs,fontWeight:i.fontWeight.semibold,color:o,textTransform:"uppercase"},children:p?"Pro":"Contra"})]}),e.jsx("textarea",{ref:t,value:s.text,onChange:u=>l(s.id,u.target.value),style:{width:"100%",fontSize:i.fontSize.md,fontWeight:i.fontWeight.medium,color:i.textMain,marginBottom:i.space[2],padding:`${i.space[2]} ${i.space[2.5]}`,border:`1px solid ${c}`,borderRadius:i.radius.md,backgroundColor:i.white,resize:"none",overflow:"hidden",minHeight:"36px",lineHeight:1.4}}),s.source_quote&&e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:i.space[1.5],fontSize:i.fontSize.sm,color:i.textMuted,fontStyle:"italic"},children:[e.jsx(Ne,{size:12,style:{flexShrink:0,marginTop:"2px"}}),e.jsxs("span",{children:['"',s.source_quote,'"']})]})]}),e.jsx("div",{onClick:u=>u.stopPropagation(),children:e.jsx(ot,{value:s.weight,onChange:u=>r(s.id,u),type:s.type,b:i})})]})},lt=({isOpen:s,onClose:x,topic:r,existingPros:l,existingCons:i,onAddItems:p})=>{const n=pe(),[c,o]=g.useState("loading_question"),[t,u]=g.useState(""),[b,j]=g.useState(""),[S,f]=g.useState(""),[$,C]=g.useState([]),[L,w]=g.useState([]),[R,A]=g.useState(null),[J,_]=g.useState(0);g.useEffect(()=>{s&&c==="loading_question"&&M()},[c,s]),g.useEffect(()=>{s&&(o("loading_question"),u(""),f(""),C([]),w([]),A(null),_(0))},[s]);const M=async()=>{A(null);try{const h=window.bewerbungstrainerConfig?.geminiApiKey;if(!h)throw new Error("API-Key nicht konfiguriert");const z=await tt(r,l,i,L,h);u(z.question),j(z.question_type||""),o("input"),_(W=>W+1)}catch(h){console.error("[DeepDiveWizard] Question generation error:",h),A(h.message||"Fehler beim Generieren der Frage"),o("input")}},ee=async()=>{if(S.trim()){o("analyzing"),A(null);try{const h=window.bewerbungstrainerConfig?.geminiApiKey;if(!h)throw new Error("API-Key nicht konfiguriert");const W=((await it(r,t,S,h)).extracted_items||[]).map(B=>({...B,id:st(),selected:!0}));C(W),w(B=>[...B,{question:t,answer:S}]),o("selection")}catch(h){console.error("[DeepDiveWizard] Extraction error:",h),A(h.message||"Fehler beim Analysieren der Antwort"),o("input")}}},te=g.useCallback(h=>{C(z=>z.map(W=>W.id===h?{...W,selected:!W.selected}:W))},[]),le=g.useCallback((h,z)=>{C(W=>W.map(B=>B.id===h?{...B,weight:z}:B))},[]),q=g.useCallback((h,z)=>{C(W=>W.map(B=>B.id===h?{...B,text:z}:B))},[]),he=()=>{const h=$.filter(z=>z.selected);h.length>0&&p(h),f(""),C([]),o("loading_question")},N=()=>{w(h=>[...h,{question:t,answer:S}]),f(""),C([]),o("loading_question")},D=()=>{const h=$.filter(z=>z.selected);h.length>0&&p(h),x()};return s?e.jsxs(F,{children:[e.jsx(k.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:n.zIndex.modal,padding:n.space[4]},onClick:x,children:e.jsxs(k.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:h=>h.stopPropagation(),className:"wizard-modal",style:{backgroundColor:n.cardBgColor,borderRadius:n.radius.xl,width:"100%",maxWidth:"640px",maxHeight:"90dvh",overflow:"hidden",boxShadow:n.shadow.xl,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${n.space[4]} ${n.space[5]}`,borderBottom:`1px solid ${n.borderColor}`,background:n.headerGradient},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:n.space[3]},children:[e.jsx("div",{style:{width:n.space[10],height:n.space[10],borderRadius:n.radius.lg,backgroundColor:"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(we,{size:n.iconSize.xl,color:n.white})}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:n.fontSize.xl,fontWeight:n.fontWeight.bold,color:n.white,margin:0},children:"Deep Dive Interview"}),e.jsxs("p",{style:{fontSize:n.fontSize.sm,color:"rgba(255,255,255,0.8)",margin:0},children:["Frage ",J," ‚Ä¢ Entdecke deine wahren Motive"]})]})]}),e.jsx("button",{onClick:x,style:{width:n.space[10],height:n.space[10],borderRadius:n.radius.md,border:"none",backgroundColor:"rgba(255,255,255,0.2)",color:n.white,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(re,{size:n.iconSize.xl})})]}),e.jsxs("div",{style:{flex:1,overflow:"auto",padding:n.space[5]},children:[c==="loading_question"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:n.space[8],gap:n.space[4]},children:[e.jsx(X,{size:48,color:n.primaryAccent,style:{animation:"spin 1s linear infinite"}}),e.jsx("p",{style:{color:n.textSecondary,fontSize:n.fontSize.lg},children:"Generiere n√§chste Frage..."})]}),c==="input"&&e.jsxs("div",{children:[e.jsxs("div",{style:{backgroundColor:`${n.primaryAccent}10`,borderRadius:n.radius.lg,padding:n.space[5],marginBottom:n.space[5],borderLeft:`4px solid ${n.primaryAccent}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:n.space[2],marginBottom:n.space[2]},children:[e.jsx(Ke,{size:n.iconSize.md,color:n.primaryAccent}),e.jsx("span",{style:{fontSize:n.fontSize.sm,fontWeight:n.fontWeight.semibold,color:n.primaryAccent,textTransform:"uppercase"},children:"Coach fragt"})]}),e.jsx("p",{style:{fontSize:n.fontSize.xl,fontWeight:n.fontWeight.medium,color:n.textMain,lineHeight:1.5,margin:0},children:t||"Lade Frage..."})]}),R&&e.jsx("div",{style:{backgroundColor:n.errorLight,color:n.errorDark,padding:n.space[3],borderRadius:n.radius.md,marginBottom:n.space[4],fontSize:n.fontSize.sm},children:R}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:n.fontSize.base,fontWeight:n.fontWeight.medium,color:n.textSecondary,marginBottom:n.space[2]},children:"Deine Antwort"}),e.jsx(ge,{value:S,onChange:h=>f(h.target.value),placeholder:"Schreib einfach drauf los... Was f√§llt dir ein? Was f√ºhlst du dabei?",rows:5,style:{fontSize:n.fontSize.md,padding:n.space[4],borderRadius:n.radius.lg,resize:"vertical",minHeight:"120px"}})]})]}),c==="analyzing"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:n.space[8],gap:n.space[4]},children:[e.jsx(k.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:e.jsx(T,{size:48,color:n.primaryAccent})}),e.jsx("p",{style:{color:n.textSecondary,fontSize:n.fontSize.lg},children:"KI extrahiert Argumente..."})]}),c==="selection"&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:n.space[2],marginBottom:n.space[4]},children:[e.jsx(T,{size:n.iconSize.lg,color:n.primaryAccent}),e.jsx("h3",{style:{fontSize:n.fontSize.lg,fontWeight:n.fontWeight.semibold,color:n.textMain,margin:0},children:"Extrahierte Argumente"})]}),$.length===0?e.jsxs("div",{style:{textAlign:"center",padding:n.space[6],backgroundColor:n.cardBgHover,borderRadius:n.radius.lg},children:[e.jsx("p",{style:{color:n.textSecondary,marginBottom:n.space[3]},children:"Keine konkreten Argumente gefunden."}),e.jsx("p",{style:{color:n.textMuted,fontSize:n.fontSize.sm},children:"Das ist okay! Versuch es mit einer ausf√ºhrlicheren Antwort oder einer anderen Frage."})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:n.space[3]},children:$.map(h=>e.jsx(at,{item:h,onToggle:te,onWeightChange:le,onTextChange:q,b:n},h.id))}),e.jsx("p",{style:{fontSize:n.fontSize.sm,color:n.textMuted,marginTop:n.space[4],textAlign:"center"},children:"Klicke auf ein Argument um es ab-/anzuw√§hlen. Passe die Gewichtung nach Bedarf an."})]})]}),e.jsxs("div",{className:"wizard-footer",style:{padding:`${n.space[4]} ${n.space[5]}`,borderTop:`1px solid ${n.borderColor}`,display:"flex",flexWrap:"wrap",justifyContent:"space-between",gap:n.space[3],flexShrink:0,backgroundColor:n.cardBgColor},children:[c==="input"&&e.jsxs(e.Fragment,{children:[e.jsx(v,{variant:"ghost",onClick:x,children:"Abbrechen"}),e.jsxs("div",{style:{display:"flex",gap:n.space[2]},children:[e.jsxs(v,{variant:"outline",onClick:N,children:[e.jsx(Ge,{size:n.iconSize.md,style:{marginRight:n.space[1.5]}}),"√úberspringen"]}),e.jsxs(v,{variant:"solid",onClick:ee,disabled:!S.trim()||S.length<10,style:{background:S.trim().length>=10?n.headerGradient:void 0},children:[e.jsx(T,{size:n.iconSize.md,style:{marginRight:n.space[2]}}),"Auswerten"]})]})]}),c==="selection"&&e.jsxs(e.Fragment,{children:[e.jsx(v,{variant:"outline",onClick:D,style:{borderColor:n.borderColor,backgroundColor:n.cardBgHover},children:"Fertig"}),e.jsxs(v,{variant:"solid",onClick:()=>{$.filter(z=>z.selected).length>0?he():N()},style:{background:n.headerGradient},children:[$.some(h=>h.selected)?"√úbernehmen & Weiter":"N√§chste Frage",e.jsx(_e,{size:n.iconSize.md,style:{marginLeft:n.space[1]}})]})]})]})]})}),e.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }

          /* Mobile responsive: footer buttons stack on small screens */
          @media (max-width: 480px) {
            .wizard-modal {
              max-height: calc(100dvh - 16px) !important;
              border-radius: 16px !important;
            }
            .wizard-footer {
              padding: 12px 16px !important;
            }
            .wizard-footer > button,
            .wizard-footer > div {
              flex: 1 1 auto;
            }
            .wizard-footer > div {
              width: 100%;
              justify-content: stretch;
            }
            .wizard-footer > div > button {
              flex: 1;
            }
          }
        `})]}):null},E=()=>`item_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,We=[{id:"strategist",name:"Der Stratege",icon:"‚ôüÔ∏è",color:"#6366f1",bgColor:"#eef2ff",description:"Karriere, Geld, Macht"},{id:"security",name:"Der Sicherheits-Beauftragte",icon:"üõ°Ô∏è",color:"#0891b2",bgColor:"#ecfeff",description:"Risiko, Best√§ndigkeit"},{id:"feelgood",name:"Der Feel-Good Manager",icon:"üßò",color:"#10b981",bgColor:"#ecfdf5",description:"Work-Life-Balance, Kultur"},{id:"growth",name:"Der Gr√ºnder",icon:"üöÄ",color:"#f59e0b",bgColor:"#fffbeb",description:"Wachstum, Innovation"},{id:"future",name:"Dein Zukunfts-Ich",icon:"üîÆ",color:"#8b5cf6",bgColor:"#f5f3ff",description:"Langzeit, Reue-Vermeidung"}],ct=({value:s,onChange:x,onChangeEnd:r,color:l,b:i})=>{const p=l==="green",n=p?i.success:i.error,c=p?i.successDark:i.errorDark;return p?i.successLight:i.errorLight,e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:i.space[2],minWidth:"90px",flexShrink:0},children:[e.jsx("input",{type:"range",min:"1",max:"10",value:s,onChange:o=>x(parseInt(o.target.value)),onMouseUp:r,onTouchEnd:r,style:{width:"60px",height:"6px",borderRadius:i.radius.sm,background:`linear-gradient(90deg, ${n} 0%, ${n} ${(s-1)*11.1}%, ${i.borderColor} ${(s-1)*11.1}%, ${i.borderColor} 100%)`,appearance:"none",cursor:"pointer",flexShrink:0}}),e.jsx("span",{style:{minWidth:"20px",textAlign:"center",fontWeight:i.fontWeight.semibold,fontSize:i.fontSize.sm,color:c,flexShrink:0},children:s})]})},ze=({item:s,onUpdate:x,onDelete:r,onAddNew:l,onBlur:i,color:p,autoFocus:n,b:c})=>{const o=p==="green",t=o?c.successLight:c.errorLight,u=o?"#bbf7d0":"#fecaca",b=o?"#86efac":"#fca5a5",j=o?c.successDark:c.errorDark,S=H.useRef(null);return H.useEffect(()=>{const f=S.current;f&&(f.style.height="auto",f.style.height=Math.max(44,f.scrollHeight)+"px")},[s.text]),e.jsxs(k.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,x:o?-20:20},transition:{duration:.2},className:"decision-item",style:{display:"flex",flexWrap:"wrap",alignItems:"flex-start",gap:c.space[2.5],padding:c.space[3],backgroundColor:t,borderRadius:c.radius.lg,border:`1px solid ${u}`},children:[e.jsxs("div",{className:"decision-item-input-row",style:{display:"flex",alignItems:"flex-start",gap:c.space[2.5],flex:"1 1 100%",minWidth:0},children:[e.jsx("div",{style:{flexShrink:0,paddingTop:c.space[2]},children:o?e.jsx(K,{size:c.iconSize.lg,color:j}):e.jsx(G,{size:c.iconSize.lg,color:j})}),e.jsx(ge,{ref:S,value:s.text,onChange:f=>x(s.id,{text:f.target.value}),onBlur:i,autoFocus:n,placeholder:o?"Pro-Argument...":"Contra-Argument...",rows:1,style:{flex:1,minWidth:"0",backgroundColor:c.white,border:`1px solid ${b}`,borderRadius:c.radius.md,padding:`${c.space[2]} ${c.space[3]}`,fontSize:c.fontSize.base,resize:"none",minHeight:"44px",overflow:"hidden"}})]}),e.jsxs("div",{className:"decision-item-controls",style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:c.space[2],flex:"0 0 auto",marginLeft:"auto"},children:[e.jsx(ct,{value:s.weight,onChange:f=>x(s.id,{weight:f}),onChangeEnd:i,color:p,b:c}),e.jsx("button",{onClick:()=>r(s.id),style:{padding:c.space[2],backgroundColor:c.transparent,border:"none",borderRadius:c.radius.sm,cursor:"pointer",color:c.textMuted,transition:c.transition.normal,flexShrink:0},onMouseEnter:f=>{f.currentTarget.style.backgroundColor=c.errorLight,f.currentTarget.style.color=c.errorDark},onMouseLeave:f=>{f.currentTarget.style.backgroundColor=c.transparent,f.currentTarget.style.color=c.textMuted},children:e.jsx(Ue,{size:c.iconSize.md})})]})]})},dt=({proScore:s,contraScore:x,b:r})=>{const l=s+x,i=l>0?Math.round(s/l*100):50,p=100-i;return e.jsxs("div",{style:{marginTop:r.space[6]},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:r.space[2],fontSize:r.fontSize.base,fontWeight:r.fontWeight.semibold},children:[e.jsxs("span",{style:{color:r.successDark},children:["Pro: ",s," Punkte (",i,"%)"]}),e.jsxs("span",{style:{color:r.errorDark},children:["Contra: ",x," Punkte (",p,"%)"]})]}),e.jsxs("div",{style:{height:r.space[6],borderRadius:r.radius.lg,overflow:"hidden",display:"flex",backgroundColor:r.borderColorLight,boxShadow:"inset 0 2px 4px rgba(0,0,0,0.1)"},children:[e.jsx(k.div,{initial:{width:0},animate:{width:`${i}%`},transition:{duration:.5,ease:"easeOut"},style:{background:`linear-gradient(90deg, ${r.success} 0%, ${r.successDark} 100%)`,height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:r.white,fontWeight:r.fontWeight.semibold,fontSize:r.fontSize.xs,minWidth:i>10?"auto":"0"},children:i>15&&`${i}%`}),e.jsx(k.div,{initial:{width:0},animate:{width:`${p}%`},transition:{duration:.5,ease:"easeOut"},style:{background:`linear-gradient(90deg, ${r.error} 0%, ${r.errorDark} 100%)`,height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:r.white,fontWeight:r.fontWeight.semibold,fontSize:r.fontSize.xs,minWidth:p>10?"auto":"0"},children:p>15&&`${p}%`})]})]})},Ce=({suggestion:s,onAdd:x,isAdded:r,b:l})=>{const i=s.type==="pro",p=i?l.successLight:l.errorLight,n=i?"#bbf7d0":"#fecaca",c=i?"#dcfce7":"#fee2e2",o=i?l.successDark:l.errorDark,t=i?l.success:l.error;return e.jsxs(k.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},style:{display:"flex",alignItems:"center",gap:l.space[3],padding:`${l.space[3]} ${l.space[4]}`,backgroundColor:p,borderRadius:l.radius.md,border:`1px solid ${n}`},children:[e.jsx("div",{style:{width:l.space[6],height:l.space[6],borderRadius:l.radius.sm,backgroundColor:c,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:i?e.jsx(K,{size:l.iconSize.sm,color:o}):e.jsx(G,{size:l.iconSize.sm,color:o})}),e.jsx("span",{style:{flex:1,fontSize:l.fontSize.base,color:l.textSecondary,lineHeight:1.4},children:s.text}),e.jsx("button",{onClick:()=>x(s),disabled:r,style:{width:l.space[12],height:l.space[12],borderRadius:l.radius.lg,border:"none",backgroundColor:r?l.borderColor:t,color:r?l.textMuted:l.white,cursor:r?"default":"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:l.transition.normal,flexShrink:0},children:r?"‚úì":e.jsx(de,{size:l.iconSize["3xl"],color:"white",strokeWidth:2.5})})]})},gt=({isOpen:s,onClose:x,activePersona:r,isLoading:l,suggestions:i,onAddSuggestion:p,onLoadMore:n,addedSuggestions:c,b:o})=>{if(!s)return null;const t=We.find(u=>u.id===r);return e.jsxs(k.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},style:{position:"relative",marginTop:o.space[4],padding:o.space[5],backgroundColor:o.cardBgColor,borderRadius:o.radius.xl,border:`2px solid ${t?.color||"#6366f1"}`,boxShadow:o.shadow.lg},children:[e.jsx("button",{onClick:x,style:{position:"absolute",top:o.space[3],right:o.space[3],width:o.space[10],height:o.space[10],borderRadius:o.radius.md,border:"none",backgroundColor:o.borderColorLight,color:o.textSecondary,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(re,{size:o.iconSize["2xl"],strokeWidth:2.5})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:o.space[3],marginBottom:o.space[4],paddingRight:o.space[8]},children:[e.jsx("span",{style:{fontSize:o.fontSize["5xl"]},children:t?.icon}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:o.fontSize.lg,fontWeight:o.fontWeight.semibold,color:o.textMain,margin:0},children:t?.name}),e.jsx("p",{style:{fontSize:o.fontSize.sm,color:o.textSecondary,margin:0},children:t?.description})]})]}),l?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:o.space[3],padding:o.space[6]},children:[e.jsx(X,{size:o.iconSize["3xl"],color:t?.color,style:{animation:"spin 1s linear infinite"}}),e.jsxs("span",{style:{color:o.textSecondary,fontSize:o.fontSize.base},children:[t?.name," denkt nach..."]})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:o.space[2.5]},children:[e.jsx("div",{style:{marginBottom:o.space[2]},children:e.jsx("span",{style:{fontSize:o.fontSize.xs,fontWeight:o.fontWeight.semibold,color:o.successDark,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Pro-Argumente"})}),i.filter(u=>u.type==="pro").map((u,b)=>e.jsx(Ce,{suggestion:u,onAdd:p,isAdded:c.has(`${u.type}-${u.text}`),b:o},`pro-${b}`)),e.jsx("div",{style:{marginTop:o.space[3],marginBottom:o.space[2]},children:e.jsx("span",{style:{fontSize:o.fontSize.xs,fontWeight:o.fontWeight.semibold,color:o.errorDark,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Contra-Argumente"})}),i.filter(u=>u.type==="con").map((u,b)=>e.jsx(Ce,{suggestion:u,onAdd:p,isAdded:c.has(`${u.type}-${u.text}`),b:o},`con-${b}`)),i.length>0&&n&&e.jsx("button",{onClick:n,disabled:l,style:{marginTop:o.space[4],padding:`${o.space[3]} ${o.space[4]}`,backgroundColor:"transparent",border:`2px dashed ${t?.color||o.borderColor}`,borderRadius:o.radius.lg,color:t?.color||o.textSecondary,fontSize:o.fontSize.base,fontWeight:o.fontWeight.medium,cursor:l?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:o.space[2],width:"100%",transition:o.transition.normal,opacity:l?.6:1},children:l?e.jsxs(e.Fragment,{children:[e.jsx(X,{size:o.iconSize.md,style:{animation:"spin 1s linear infinite"}}),"Generiere mehr..."]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{size:o.iconSize.md}),"Mehr Inspirationen"]})})]})]})},pt=({topic:s,onSelectPersona:x,activePersona:r,isLoading:l,suggestions:i,onCloseBrainstorm:p,onAddSuggestion:n,onLoadMore:c,addedSuggestions:o,b:t})=>{const[u,b]=g.useState(!1),j=s.trim().length>0;return e.jsxs(P,{variant:"elevated",padding:"lg",style:{marginBottom:t.space[4]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",gap:t.space[2]},onClick:()=>b(!u),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t.space[3],minWidth:0},children:[e.jsx("div",{style:{width:t.space[10],height:t.space[10],borderRadius:t.radius.md,background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Oe,{size:t.iconSize.lg,color:"white"})}),e.jsxs("div",{style:{minWidth:0},children:[e.jsx("h3",{style:{fontSize:t.fontSize.lg,fontWeight:t.fontWeight.semibold,color:t.textMain,margin:0},children:"Brainstorming"}),e.jsx("p",{style:{fontSize:t.fontSize.base,color:t.textSecondary,margin:0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Frag dein inneres Team"})]})]}),u?e.jsx(Qe,{size:t.iconSize.xl,color:t.textSecondary,style:{flexShrink:0}}):e.jsx(Ve,{size:t.iconSize.xl,color:t.textSecondary,style:{flexShrink:0}})]}),e.jsx(F,{children:u&&e.jsx(k.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},style:{overflow:"hidden"},children:e.jsxs("div",{style:{marginTop:t.space[4]},children:[e.jsx("div",{style:{display:"flex",gap:t.space[2],overflowX:"auto",paddingBottom:t.space[2],marginLeft:`-${t.space[1]}`,marginRight:`-${t.space[1]}`,paddingLeft:t.space[1],paddingRight:t.space[1],WebkitOverflowScrolling:"touch",scrollbarWidth:"none",msOverflowStyle:"none"},children:We.map(S=>e.jsxs("button",{onClick:f=>{f.stopPropagation(),j&&x(S.id)},disabled:!j||l&&r===S.id,style:{display:"flex",alignItems:"center",gap:t.space[1.5],padding:`${t.space[2]} ${t.space[3]}`,borderRadius:t.radius.md,border:r===S.id?`2px solid ${S.color}`:`2px solid ${t.borderColor}`,backgroundColor:r===S.id?S.bgColor:t.cardBgColor,cursor:j?"pointer":"not-allowed",opacity:j?1:.5,transition:t.transition.normal,whiteSpace:"nowrap",flexShrink:0},children:[l&&r===S.id?e.jsx(X,{size:t.iconSize.sm,color:S.color,style:{animation:"spin 1s linear infinite"}}):e.jsx("span",{style:{fontSize:t.fontSize.lg},children:S.icon}),e.jsx("span",{style:{fontSize:t.fontSize.sm,fontWeight:t.fontWeight.medium,color:r===S.id?S.color:t.textSecondary},children:S.name.replace("Der ","").replace("Dein ","")})]},S.id))}),!j&&e.jsx("p",{style:{marginTop:t.space[3],fontSize:t.fontSize.sm,color:t.textMuted,fontStyle:"italic"},children:"Gib zuerst deine Entscheidungsfrage ein, um Vorschl√§ge zu erhalten."}),e.jsx(F,{children:r&&e.jsx(gt,{isOpen:!!r,onClose:p,activePersona:r,isLoading:l,suggestions:i,onAddSuggestion:n,onLoadMore:c,addedSuggestions:o,b:t})})]})})})]})},wt=({initialData:s,onAnalysisComplete:x,onCancel:r,isAuthenticated:l,requireAuth:i,savedDecisionId:p,onSaveDraft:n,onUpdateSession:c,onDecisionIdChange:o})=>{const t=pe(),[u,b]=g.useState(!1),[j,S]=g.useState(s?.topic||""),[f,$]=g.useState(s?.context||""),[C,L]=g.useState(s?.pros||[{id:E(),text:"",weight:5}]),[w,R]=g.useState(s?.cons||[{id:E(),text:"",weight:5}]),[A,J]=g.useState(!1),[_,M]=g.useState(null),[ee,te]=g.useState(null),[le,q]=g.useState(!1),[he,N]=g.useState(!1),D=H.useRef(null),[h,z]=g.useState({activePersona:null,isLoading:!1,suggestions:[]}),[W,B]=g.useState(new Set),O=g.useMemo(()=>C.reduce((a,d)=>a+(d.text.trim()?d.weight:0),0),[C]),Q=g.useMemo(()=>w.reduce((a,d)=>a+(d.text.trim()?d.weight:0),0),[w]),xe=C.some(a=>a.text.trim()),ue=w.some(a=>a.text.trim()),V=j.trim()&&(xe||ue),ie=g.useCallback(async()=>{if(D.current&&clearTimeout(D.current),!j.trim()||!n||!c)return;const a={topic:j,context:f,pros:C,cons:w,proScore:O,contraScore:Q};N(!0);try{if(p)await c(p,{...a,status:"draft"}),console.log("[DecisionBoard] Auto-saved (update):",p);else{const d=await n(a);d&&o&&o(d),console.log("[DecisionBoard] Auto-saved (create):",d)}}catch(d){console.error("[DecisionBoard] Auto-save failed:",d)}finally{N(!1)}},[j,f,C,w,O,Q,p,n,c,o]),ne=g.useCallback(()=>{D.current&&clearTimeout(D.current),ie()},[ie]);H.useEffect(()=>()=>{D.current&&clearTimeout(D.current)},[]);const me=g.useCallback(()=>{const a=E();L(d=>[...d,{id:a,text:"",weight:5}]),te(a)},[]),fe=g.useCallback(()=>{const a=E();R(d=>[...d,{id:a,text:"",weight:5}]),te(a)},[]),be=g.useCallback((a,d)=>{L(y=>y.map(m=>m.id===a?{...m,...d}:m))},[]),Be=g.useCallback((a,d)=>{R(y=>y.map(m=>m.id===a?{...m,...d}:m))},[]),Ie=g.useCallback(a=>{L(d=>d.filter(y=>y.id!==a))},[]),$e=g.useCallback(a=>{R(d=>d.filter(y=>y.id!==a))},[]),Re=g.useCallback(async a=>{z(d=>({...d,activePersona:a,isLoading:!0,suggestions:[]}));try{const d=window.bewerbungstrainerConfig?.geminiApiKey;if(!d)throw new Error("API-Key nicht konfiguriert");const y=f.trim()||null,m=await Se(j,a,d,y,C,w);z(U=>({...U,isLoading:!1,suggestions:m.suggestions||[]}))}catch(d){console.error("[DecisionBoard] Brainstorm error:",d),z(y=>({...y,isLoading:!1,suggestions:[]})),M(d.message||"Fehler beim Brainstorming")}},[j,f,C,w]),Ae=g.useCallback(()=>{z({activePersona:null,isLoading:!1,suggestions:[]})},[]),De=g.useCallback(a=>{const d=`${a.type}-${a.text}`;B(m=>new Set([...m,d]));const y={id:E(),text:a.text,weight:5};a.type==="pro"?L(m=>m.length===1&&!m[0].text.trim()?[y]:[...m,y]):R(m=>m.length===1&&!m[0].text.trim()?[y]:[...m,y])},[]),Te=g.useCallback(async()=>{const{activePersona:a,suggestions:d}=h;if(a){z(y=>({...y,isLoading:!0}));try{const y=window.bewerbungstrainerConfig?.geminiApiKey;if(!y)throw new Error("API-Key nicht konfiguriert");const m=d.filter(I=>I.type==="pro").map(I=>({text:I.text})),U=d.filter(I=>I.type==="con").map(I=>({text:I.text})),Z=[...C,...m],Ee=[...w,...U],Fe=f.trim()||null,He=await Se(j,a,y,Fe,Z,Ee);z(I=>({...I,isLoading:!1,suggestions:[...I.suggestions,...He.suggestions||[]]}))}catch(y){console.error("[DecisionBoard] Load more error:",y),z(m=>({...m,isLoading:!1})),M(y.message||"Fehler beim Laden weiterer Vorschl√§ge")}}},[h,j,f,C,w]),Le=g.useCallback(a=>{$(d=>d.trim()?d.trim()+`

`+a:a)},[]),Pe=g.useCallback(a=>{a.forEach(d=>{const y={id:E(),text:d.text,weight:d.weight||5};d.type==="pro"?L(m=>m.length===1&&!m[0].text.trim()?[y]:[...m,y]):R(m=>m.length===1&&!m[0].text.trim()?[y]:[...m,y])}),setTimeout(()=>ie(),100)},[ie]),Me=g.useCallback(async()=>{if(V){J(!0),M(null);try{const a=window.bewerbungstrainerConfig?.geminiApiKey;if(!a)throw new Error("API-Key nicht konfiguriert");const d=C.filter(Z=>Z.text.trim()),y=w.filter(Z=>Z.text.trim()),m={topic:j,context:f.trim()||null,pros:d,cons:y,proScore:O,contraScore:Q},U=await nt(m,a);x(m,U)}catch(a){console.error("[DecisionBoard] Analysis error:",a),M(a.message||"Fehler bei der Analyse")}finally{J(!1)}}},[j,f,C,w,O,Q,V,x]);return e.jsxs("div",{style:{padding:t.space[4],maxWidth:"1200px",margin:"0 auto"},children:[r&&e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:t.space[4]},children:e.jsxs("button",{onClick:()=>b(!0),style:{display:"flex",alignItems:"center",gap:t.space[2],padding:`${t.space[2]} ${t.space[4]}`,borderRadius:t.radius.md,border:`1px solid ${t.borderColor}`,backgroundColor:t.cardBgColor,color:t.textSecondary,cursor:"pointer",fontSize:t.fontSize.base,fontWeight:t.fontWeight.medium,transition:t.transition.normal},onMouseEnter:a=>{a.currentTarget.style.backgroundColor=t.errorLight,a.currentTarget.style.borderColor=t.error,a.currentTarget.style.color=t.errorDark},onMouseLeave:a=>{a.currentTarget.style.backgroundColor=t.cardBgColor,a.currentTarget.style.borderColor=t.borderColor,a.currentTarget.style.color=t.textSecondary},children:[e.jsx(re,{size:t.iconSize.md}),"Abbrechen"]})}),e.jsxs("div",{style:{marginBottom:t.space[6],textAlign:"center"},children:[e.jsx("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:t.space[15],height:t.space[15],borderRadius:t.radius.lg,background:t.headerGradient,marginBottom:t.space[3],boxShadow:t.coloredShadow(t.primaryAccent,"lg")},children:e.jsx(se,{size:t.iconSize["2xl"],color:t.white})}),e.jsx("h1",{style:{fontSize:t.fontSize["4xl"],fontWeight:t.fontWeight.bold,color:t.textMain,marginBottom:t.space[1.5]},children:"Der Entscheidungs-Kompass"}),e.jsx("p",{style:{fontSize:t.fontSize.base,color:t.textSecondary,maxWidth:"600px",margin:"0 auto",padding:`0 ${t.space[2]}`},children:"Analysiere deine Entscheidung objektiv. Gewichte Pro und Contra, und erhalte KI-gest√ºtzte Impulse f√ºr blinde Flecken."})]}),e.jsxs(P,{variant:"elevated",padding:"lg",style:{marginBottom:t.space[4]},children:[e.jsx(oe,{children:e.jsx(ae,{icon:ve,size:"md",children:"Deine Entscheidungsfrage"})}),e.jsxs(Y,{children:[e.jsx(et,{value:j,onChange:a=>S(a.target.value),onBlur:ne,placeholder:"z.B. Soll ich das Jobangebot annehmen?",style:{fontSize:t.fontSize.lg,padding:t.space[4],borderRadius:t.radius.lg,marginBottom:t.space[4]}}),e.jsxs("div",{style:{marginTop:t.space[2]},children:[e.jsx("label",{style:{display:"block",fontSize:t.fontSize.base,fontWeight:t.fontWeight.medium,color:t.textSecondary,marginBottom:t.space[2]},children:"Beschreibe die Situation (optional)"}),e.jsxs("div",{className:"context-input-wrapper",style:{display:"flex",flexWrap:"wrap",alignItems:"flex-end",gap:t.space[3]},children:[e.jsx(ge,{value:f,onChange:a=>$(a.target.value),onBlur:ne,placeholder:"Hintergrund, Rahmenbedingungen, Gef√ºhle, was dich besch√§ftigt...",rows:3,style:{flex:"1 1 300px",minWidth:0,fontSize:t.fontSize.md,padding:`${t.space[3]} ${t.space[4]}`,borderRadius:t.radius.lg,resize:"vertical",minHeight:"80px"}}),e.jsx("div",{style:{flexShrink:0,paddingBottom:t.space[1]},children:e.jsx(rt,{onTranscriptReady:Le})})]})]})]})]}),e.jsx(pt,{topic:j,onSelectPersona:Re,activePersona:h.activePersona,isLoading:h.isLoading,suggestions:h.suggestions,onCloseBrainstorm:Ae,onAddSuggestion:De,onLoadMore:Te,addedSuggestions:W,b:t}),e.jsx(P,{variant:"elevated",padding:"lg",style:{marginBottom:t.space[4],cursor:j.trim()?"pointer":"not-allowed",opacity:j.trim()?1:.6,transition:t.transition.normal},onClick:()=>j.trim()&&q(!0),children:e.jsxs("div",{className:"deep-dive-card-content",style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:t.space[3],flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t.space[3],flex:"1 1 auto",minWidth:"200px"},children:[e.jsx("div",{style:{width:t.space[10],height:t.space[10],borderRadius:t.radius.md,background:t.headerGradient,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(we,{size:t.iconSize.lg,color:"white"})}),e.jsxs("div",{style:{minWidth:0},children:[e.jsx("h3",{style:{fontSize:t.fontSize.lg,fontWeight:t.fontWeight.semibold,color:t.textMain,margin:0},children:"Deep Dive Interview"}),e.jsx("p",{style:{fontSize:t.fontSize.sm,color:t.textSecondary,margin:0,lineHeight:1.4},children:"Entdecke verborgene Argumente durch gezielte Coaching-Fragen"})]})]}),e.jsxs(v,{variant:"solid",size:"sm",disabled:!j.trim(),onClick:a=>{a.stopPropagation(),j.trim()&&q(!0)},style:{background:j.trim()?t.headerGradient:void 0,flexShrink:0},children:[e.jsx(T,{size:t.iconSize.md,style:{marginRight:t.space[1.5]}}),"Starten"]})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(100%, 380px), 1fr))",gap:t.space[4],marginBottom:t.space[6]},children:[e.jsxs("div",{className:"decision-card-pro",style:{backgroundColor:t.cardBgColor,borderRadius:t.radius.lg,padding:t.space[6],boxShadow:t.shadow.md},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t.space[3],marginBottom:t.space[4]},children:[e.jsx("div",{style:{width:t.space[10],height:t.space[10],borderRadius:t.radius.md,backgroundColor:t.successLight,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(K,{size:t.iconSize.lg,color:t.successDark})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:t.fontSize.xl,fontWeight:t.fontWeight.semibold,color:t.successDark,margin:0},children:"PRO"}),e.jsx("p",{style:{fontSize:t.fontSize.base,color:t.textSecondary,margin:0},children:"Was spricht daf√ºr?"})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:t.space[3]},children:[e.jsx(F,{mode:"popLayout",children:C.map(a=>e.jsx(ze,{item:a,onUpdate:be,onDelete:Ie,onAddNew:me,onBlur:ne,color:"green",autoFocus:ee===a.id,b:t},a.id))}),e.jsxs(v,{variant:"outline",onClick:me,style:{borderColor:t.success,color:t.successDark,borderStyle:"dashed"},children:[e.jsx(de,{size:t.iconSize.md,style:{marginRight:t.space[2]}}),"Argument hinzuf√ºgen"]})]})]}),e.jsxs("div",{className:"decision-card-contra",style:{backgroundColor:t.cardBgColor,borderRadius:t.radius.lg,padding:t.space[6],boxShadow:t.shadow.md},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t.space[3],marginBottom:t.space[4]},children:[e.jsx("div",{style:{width:t.space[10],height:t.space[10],borderRadius:t.radius.md,backgroundColor:t.errorLight,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(G,{size:t.iconSize.lg,color:t.errorDark})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:t.fontSize.xl,fontWeight:t.fontWeight.semibold,color:t.errorDark,margin:0},children:"CONTRA"}),e.jsx("p",{style:{fontSize:t.fontSize.base,color:t.textSecondary,margin:0},children:"Was spricht dagegen?"})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:t.space[3]},children:[e.jsx(F,{mode:"popLayout",children:w.map(a=>e.jsx(ze,{item:a,onUpdate:Be,onDelete:$e,onAddNew:fe,onBlur:ne,color:"red",autoFocus:ee===a.id,b:t},a.id))}),e.jsxs(v,{variant:"outline",onClick:fe,style:{borderColor:t.error,color:t.errorDark,borderStyle:"dashed"},children:[e.jsx(de,{size:t.iconSize.md,style:{marginRight:t.space[2]}}),"Argument hinzuf√ºgen"]})]})]})]}),(xe||ue)&&e.jsxs(P,{variant:"elevated",padding:"lg",style:{marginBottom:t.space[6]},children:[e.jsx(oe,{children:e.jsx(ae,{icon:se,size:"md",children:"Rationaler Score"})}),e.jsx(Y,{children:e.jsx(dt,{proScore:O,contraScore:Q,b:t})})]}),_&&e.jsxs(k.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{display:"flex",alignItems:"center",gap:t.space[3],padding:t.space[4],backgroundColor:t.errorLight,border:`1px solid ${t.error}33`,borderRadius:t.radius.lg,marginBottom:t.space[6],color:t.errorDark},children:[e.jsx(ye,{size:t.iconSize.lg}),e.jsx("span",{children:_})]}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(v,{onClick:Me,disabled:!V||A,variant:"solid",size:"lg",style:{padding:`${t.space[4]} ${t.space[8]}`,fontSize:t.fontSize.xl,background:V?t.headerGradient:void 0,boxShadow:V?t.coloredShadow(t.primaryAccent,"lg"):void 0},children:A?e.jsxs(e.Fragment,{children:[e.jsx(X,{size:t.iconSize.xl,style:{marginRight:t.space[2.5],animation:"spin 1s linear infinite"}}),"Analyse l√§uft..."]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{size:t.iconSize.xl,style:{marginRight:t.space[2.5]}}),"Entscheidung analysieren"]})})}),e.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }

          input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: white;
            border: 2px solid currentColor;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
          }

          input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: white;
            border: 2px solid currentColor;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
          }

          /* Mobile responsive: stack controls below textarea */
          @media (max-width: 480px) {
            .decision-item {
              flex-direction: column !important;
            }
            .decision-item-input-row {
              width: 100% !important;
              flex: 1 1 100% !important;
            }
            .decision-item-controls {
              width: 100% !important;
              justify-content: flex-start !important;
              padding-left: 32px;
            }
          }
        `}),e.jsx(F,{children:u&&e.jsx(k.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:t.zIndex.modal,padding:t.space[4]},onClick:()=>b(!1),children:e.jsxs(k.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:a=>a.stopPropagation(),style:{backgroundColor:t.cardBgColor,borderRadius:t.radius.xl,padding:t.space[6],maxWidth:"400px",width:"100%",boxShadow:t.shadow.xl},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t.space[3],marginBottom:t.space[4]},children:[e.jsx("div",{style:{width:t.space[10],height:t.space[10],borderRadius:t.radius.md,backgroundColor:t.errorLight,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ye,{size:t.iconSize.xl,color:t.error})}),e.jsx("h3",{style:{fontSize:t.fontSize.xl,fontWeight:t.fontWeight.semibold,color:t.textMain,margin:0},children:"Session abbrechen?"})]}),e.jsx("p",{style:{fontSize:t.fontSize.base,color:t.textSecondary,marginBottom:t.space[6],lineHeight:1.5},children:"Alle eingegebenen Daten werden verworfen und nicht gespeichert."}),e.jsxs("div",{style:{display:"flex",gap:t.space[3],justifyContent:"flex-end"},children:[e.jsx(v,{variant:"outline",onClick:()=>b(!1),children:"Zur√ºck"}),e.jsxs(v,{variant:"solid",onClick:()=>{b(!1),r()},style:{backgroundColor:t.error,color:t.white},children:[e.jsx(re,{size:t.iconSize.md,style:{marginRight:t.space[2]}}),"Abbrechen"]})]})]})})}),e.jsx(lt,{isOpen:le,onClose:()=>q(!1),topic:j,existingPros:C,existingCons:w,onAddItems:Pe})]})},ce=({b:s})=>e.jsxs("div",{style:{padding:s.space[6],borderRadius:s.radius.xl,backgroundColor:s.cardBgHover,border:`1px solid ${s.borderColor}`},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:s.radius.lg,backgroundColor:s.borderColor,marginBottom:s.space[4],animation:"pulse 1.5s ease-in-out infinite"}}),e.jsx("div",{style:{width:"60%",height:"24px",borderRadius:s.radius.md,backgroundColor:s.borderColor,marginBottom:s.space[3],animation:"pulse 1.5s ease-in-out infinite"}}),e.jsx("div",{style:{width:"100%",height:"16px",borderRadius:s.radius.sm,backgroundColor:s.borderColor,marginBottom:s.space[2],animation:"pulse 1.5s ease-in-out infinite"}}),e.jsx("div",{style:{width:"85%",height:"16px",borderRadius:s.radius.sm,backgroundColor:s.borderColor,animation:"pulse 1.5s ease-in-out infinite"}})]}),ke=s=>s&&s.split(/(\*\*[^*]+\*\*)/g).map((r,l)=>r.startsWith("**")&&r.endsWith("**")?e.jsx("strong",{children:r.slice(2,-2)},l):r),ht=({card:s,index:x,b:r})=>{const l={blind_spot:{bgColor:r.warningLight,borderColor:r.warning,iconBg:"#fef08a",iconColor:r.warningDark,bulletColor:r.warningDark,icon:ve},challenger:{bgColor:r.errorLight,borderColor:"#fca5a5",iconBg:r.errorLight,iconColor:r.error,bulletColor:r.error,icon:Je},intuition:{bgColor:"#f5f3ff",borderColor:"#c4b5fd",iconBg:"#ede9fe",iconColor:"#7c3aed",bulletColor:"#7c3aed",icon:Ye}},i=l[s.type]||l.blind_spot,p=i.icon,n=s.points||(s.content?[s.content]:[]);return e.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:x*.15},style:{padding:r.space[6],borderRadius:r.radius.xl,backgroundColor:i.bgColor,border:`2px solid ${i.borderColor}`,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:r.radius.lg,backgroundColor:i.iconBg,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:r.space[4]},children:e.jsx(p,{size:r.iconSize["2xl"],color:i.iconColor})}),e.jsx("h3",{style:{fontSize:r.fontSize.xl,fontWeight:r.fontWeight.bold,color:r.textMain,marginBottom:r.space[3]},children:s.title}),s.type==="challenger"&&s.argument&&e.jsxs("div",{style:{padding:`${r.space[2.5]} ${r.space[3.5]}`,backgroundColor:"rgba(255,255,255,0.6)",borderRadius:r.radius.md,marginBottom:r.space[3],borderLeft:`3px solid ${i.bulletColor}`},children:[e.jsx("span",{style:{fontSize:r.fontSize.sm,color:r.textSecondary,display:"block",marginBottom:"2px"},children:"Hinterfragtes Argument:"}),e.jsxs("span",{style:{fontSize:r.fontSize.md,fontWeight:r.fontWeight.semibold,color:r.textMain},children:['"',s.argument,'"']})]}),s.type==="intuition"&&s.question&&e.jsxs("div",{style:{padding:`${r.space[2.5]} ${r.space[3.5]}`,backgroundColor:"rgba(255,255,255,0.6)",borderRadius:r.radius.md,marginBottom:r.space[3],borderLeft:`3px solid ${i.bulletColor}`},children:[e.jsx("span",{style:{fontSize:r.fontSize.sm,color:r.textSecondary,display:"block",marginBottom:"2px"},children:"Reflexionsfrage:"}),e.jsx("span",{style:{fontSize:r.fontSize.md,fontWeight:r.fontWeight.semibold,color:r.textMain,fontStyle:"italic"},children:ke(s.question)})]}),e.jsx("ul",{style:{listStyle:"none",padding:0,margin:0,flex:1},children:n.map((c,o)=>e.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:r.space[2.5],marginBottom:r.space[2.5],fontSize:r.fontSize.md,lineHeight:1.5,color:r.textSecondary},children:[e.jsx("span",{style:{width:"6px",height:"6px",borderRadius:r.radius.full,backgroundColor:i.bulletColor,marginTop:"8px",flexShrink:0}}),e.jsx("span",{children:ke(c)})]},o))})]})},xt=({proScore:s,contraScore:x,b:r})=>{const l=s+x,i=l>0?Math.round(s/l*100):50,p=100-i,n=s>x?"pro":s<x?"contra":"neutral";return e.jsxs(P,{variant:"elevated",padding:"lg",style:{marginBottom:r.space[6]},children:[e.jsx(oe,{children:e.jsx(ae,{icon:se,size:"lg",children:"Rationaler Score"})}),e.jsxs(Y,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:r.space[3]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:r.space[2]},children:[e.jsx(K,{size:r.iconSize.lg,color:r.success}),e.jsxs("span",{style:{fontSize:r.fontSize["4xl"],fontWeight:r.fontWeight.bold,color:r.success},children:[i,"%"]}),e.jsxs("span",{style:{color:r.textSecondary,fontSize:r.fontSize.base},children:["(",s," Punkte)"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:r.space[2]},children:[e.jsxs("span",{style:{color:r.textSecondary,fontSize:r.fontSize.base},children:["(",x," Punkte)"]}),e.jsxs("span",{style:{fontSize:r.fontSize["4xl"],fontWeight:r.fontWeight.bold,color:r.error},children:[p,"%"]}),e.jsx(G,{size:r.iconSize.lg,color:r.error})]})]}),e.jsxs("div",{style:{height:"32px",borderRadius:r.radius.xl,overflow:"hidden",display:"flex",backgroundColor:r.cardBgHover,boxShadow:"inset 0 2px 4px rgba(0,0,0,0.1)"},children:[e.jsx(k.div,{initial:{width:0},animate:{width:`${i}%`},transition:{duration:.8,ease:"easeOut"},style:{background:`linear-gradient(90deg, ${r.success} 0%, ${r.successDark} 100%)`,height:"100%"}}),e.jsx(k.div,{initial:{width:0},animate:{width:`${p}%`},transition:{duration:.8,ease:"easeOut"},style:{background:`linear-gradient(90deg, ${r.error} 0%, ${r.errorDark} 100%)`,height:"100%"}})]}),e.jsxs("p",{style:{marginTop:r.space[4],textAlign:"center",fontSize:r.fontSize.md,color:r.textSecondary},children:[n==="pro"&&e.jsxs(e.Fragment,{children:["Die Zahlen sprechen ",e.jsx("strong",{style:{color:r.success},children:"f√ºr"})," deine Entscheidung."]}),n==="contra"&&e.jsxs(e.Fragment,{children:["Die Zahlen sprechen ",e.jsx("strong",{style:{color:r.error},children:"gegen"})," deine Entscheidung."]}),n==="neutral"&&e.jsxs(e.Fragment,{children:["Die Argumente sind ",e.jsx("strong",{children:"ausgeglichen"})," - hier lohnt sich ein genauerer Blick."]})]})]})]})},vt=({decisionData:s,analysisResult:x,onStartNew:r,onEditDecision:l})=>{const i=pe(),p=!x;return e.jsxs("div",{style:{padding:i.space[6],maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs(k.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4},style:{marginBottom:i.space[8]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:i.space[4]},children:[e.jsxs(v,{variant:"ghost",onClick:l,children:[e.jsx(Ze,{size:i.iconSize.md,style:{marginRight:i.space[2]}}),"Bearbeiten"]}),e.jsxs(v,{variant:"outline",onClick:r,children:[e.jsx(je,{size:i.iconSize.md,style:{marginRight:i.space[2]}}),"Neue Analyse"]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"64px",height:"64px",borderRadius:i.radius.xl,background:i.headerGradient,marginBottom:i.space[4],boxShadow:i.coloredShadow(i.primaryAccent,"lg")},children:e.jsx(T,{size:i.iconSize["3xl"],color:i.white})}),e.jsx("h1",{style:{fontSize:i.fontSize["4xl"],fontWeight:i.fontWeight.bold,color:i.textMain,marginBottom:i.space[2]},children:"Deine Entscheidungsanalyse"}),e.jsxs("p",{style:{fontSize:i.fontSize.xl,color:i.textSecondary,fontStyle:"italic"},children:['"',s?.topic,'"']})]})]}),s&&e.jsx(xt,{proScore:s.proScore,contraScore:s.contraScore,b:i}),x?.analysis_summary&&e.jsx(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},children:e.jsx(P,{variant:"gradient",padding:"lg",style:{marginBottom:i.space[6]},children:e.jsx(Y,{children:e.jsx("p",{style:{fontSize:i.fontSize.lg,lineHeight:1.7,color:i.textMain,textAlign:"center",fontStyle:"italic"},children:x.analysis_summary})})})}),e.jsxs(k.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.4,delay:.3},style:{marginBottom:i.space[8]},children:[e.jsxs("h2",{style:{fontSize:i.fontSize["2xl"],fontWeight:i.fontWeight.bold,color:i.textMain,marginBottom:i.space[5],display:"flex",alignItems:"center",gap:i.space[2.5]},children:[e.jsx(T,{size:i.iconSize.xl,color:i.primaryAccent}),"KI-Coaching Impulse"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:i.space[5]},children:p?e.jsxs(e.Fragment,{children:[e.jsx(ce,{b:i}),e.jsx(ce,{b:i}),e.jsx(ce,{b:i})]}):x?.cards?.map((n,c)=>e.jsx(ht,{card:n,index:c,b:i},n.type||c))})]}),e.jsxs(P,{variant:"elevated",padding:"lg",children:[e.jsx(oe,{children:e.jsx(ae,{icon:se,size:"md",children:"Deine Argumente"})}),e.jsx(Y,{children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:i.space[6]},children:[e.jsxs("div",{children:[e.jsxs("h4",{style:{fontSize:i.fontSize.lg,fontWeight:i.fontWeight.semibold,color:i.success,marginBottom:i.space[3],display:"flex",alignItems:"center",gap:i.space[2]},children:[e.jsx(K,{size:i.iconSize.md}),"Pro (",s?.proScore," Punkte)"]}),e.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:s?.pros?.map((n,c)=>e.jsxs("li",{style:{padding:`${i.space[2.5]} ${i.space[3.5]}`,backgroundColor:i.successLight,borderRadius:i.radius.md,marginBottom:i.space[2],display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:i.successDark},children:n.text}),e.jsx("span",{style:{backgroundColor:"#dcfce7",color:i.success,padding:`2px ${i.space[2]}`,borderRadius:i.radius.sm,fontSize:i.fontSize.sm,fontWeight:i.fontWeight.semibold},children:n.weight})]},n.id||c))})]}),e.jsxs("div",{children:[e.jsxs("h4",{style:{fontSize:i.fontSize.lg,fontWeight:i.fontWeight.semibold,color:i.error,marginBottom:i.space[3],display:"flex",alignItems:"center",gap:i.space[2]},children:[e.jsx(G,{size:i.iconSize.md}),"Contra (",s?.contraScore," Punkte)"]}),e.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:s?.cons?.map((n,c)=>e.jsxs("li",{style:{padding:`${i.space[2.5]} ${i.space[3.5]}`,backgroundColor:i.errorLight,borderRadius:i.radius.md,marginBottom:i.space[2],display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:i.errorDark},children:n.text}),e.jsx("span",{style:{backgroundColor:"#fee2e2",color:i.error,padding:`2px ${i.space[2]}`,borderRadius:i.radius.sm,fontSize:i.fontSize.sm,fontWeight:i.fontWeight.semibold},children:n.weight})]},n.id||c))})]})]})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:i.space[4],marginTop:i.space[8]},children:[e.jsxs(v,{variant:"outline",size:"lg",onClick:l,children:[e.jsx(Xe,{size:i.iconSize.md,style:{marginRight:i.space[2]}}),"Argumente anpassen"]}),e.jsxs(v,{variant:"solid",size:"lg",onClick:r,style:{background:i.headerGradient},children:[e.jsx(je,{size:i.iconSize.md,style:{marginRight:i.space[2]}}),"Neue Entscheidung"]})]}),e.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
          }
        `})]})};export{vt as D,wt as a};
