import{c as le,a as g,j as e,L as X,S as T,C as Ge,e as H,U as qe}from"./colors-uXoD1ofg.js";import{C as L,a as ne,b as oe,c as J}from"./card-yT1Kc5UP.js";import{B as v}from"./button-DQcX-0MN.js";import{I as _e}from"./input-uBKhtwx2.js";import{T as pe}from"./textarea-sJoyi7Lz.js";import{u as he}from"./useBranding-Cxdgj0iN.js";import{f as Ne,h as Oe,i as je,j as Qe}from"./gemini-CXv12nSV.js";import{A as Ve}from"./AudioRecorder-qv5LsE-9.js";import{c as F,m as k,X as se,S as ae,b as Ue}from"./index.js";import{M as Ze}from"./message-circle-NTuaj3B3.js";import{S as Xe}from"./skip-forward-DBeOEIJP.js";import{C as Je}from"./check-DLiwtlrf.js";import{T as K}from"./thumbs-up-ZbV5M-HB.js";import{L as ve}from"./lightbulb-DN4XDJmu.js";import{P as ge}from"./plus-Ccuv5nNX.js";import{C as Se}from"./circle-alert-EMpUppYH.js";import{C as Ye}from"./chevron-up-CxNv2zJD.js";import{T as et}from"./trash-2-5YY_ZL8K.js";import{A as tt}from"./arrow-left-CtCRDCiU.js";import{R as ze}from"./refresh-cw-CISYsOw3.js";import{P as it}from"./pen-line-DaHgV8u4.js";import{H as rt}from"./heart-D4AsWeKi.js";const nt=le("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);const ot=le("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);const G=le("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);const We=le("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),st=()=>`wizard_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,at=({value:o,onChange:x,type:n,b:l})=>{const i=n==="pro"?l.success:l.error;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:l.space[2],minWidth:"100px"},children:[e.jsx("input",{type:"range",min:"1",max:"10",value:o,onChange:p=>x(parseInt(p.target.value)),style:{width:"70px",height:"6px",borderRadius:l.radius.sm,background:`linear-gradient(90deg, ${i} 0%, ${i} ${(o-1)*11.1}%, ${l.borderColor} ${(o-1)*11.1}%, ${l.borderColor} 100%)`,appearance:"none",cursor:"pointer"}}),e.jsx("span",{style:{minWidth:"24px",textAlign:"center",fontWeight:l.fontWeight.semibold,fontSize:l.fontSize.sm,color:i},children:o})]})},lt=({item:o,onToggle:x,onWeightChange:n,onTextChange:l,b:i})=>{const p=o.type==="pro",r=p?i.successLight:i.errorLight,c=p?"#bbf7d0":"#fecaca",s=p?i.successDark:i.errorDark,t=H.useRef(null);return H.useEffect(()=>{const u=t.current;u&&(u.style.height="auto",u.style.height=Math.max(36,u.scrollHeight)+"px")},[o.text]),e.jsxs(k.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},style:{display:"flex",alignItems:"flex-start",gap:i.space[3],padding:i.space[4],backgroundColor:o.selected?r:i.cardBgHover,borderRadius:i.radius.lg,border:`2px solid ${o.selected?c:i.borderColor}`,transition:i.transition.normal},children:[e.jsx("div",{onClick:()=>x(o.id),style:{width:"24px",height:"24px",borderRadius:i.radius.md,border:`2px solid ${o.selected?s:i.borderColor}`,backgroundColor:o.selected?s:"transparent",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,cursor:"pointer",transition:i.transition.normal},children:o.selected&&e.jsx(Je,{size:14,color:i.white,strokeWidth:3})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:i.space[2],marginBottom:i.space[1]},children:[p?e.jsx(K,{size:i.iconSize.md,color:s}):e.jsx(G,{size:i.iconSize.md,color:s}),e.jsx("span",{style:{fontSize:i.fontSize.xs,fontWeight:i.fontWeight.semibold,color:s,textTransform:"uppercase"},children:p?"Pro":"Contra"})]}),e.jsx("textarea",{ref:t,value:o.text,onChange:u=>l(o.id,u.target.value),style:{width:"100%",fontSize:i.fontSize.md,fontWeight:i.fontWeight.medium,color:i.textMain,marginBottom:i.space[2],padding:`${i.space[2]} ${i.space[2.5]}`,border:`1px solid ${c}`,borderRadius:i.radius.md,backgroundColor:i.white,resize:"none",overflow:"hidden",minHeight:"36px",lineHeight:1.4}}),o.source_quote&&e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:i.space[1.5],fontSize:i.fontSize.sm,color:i.textMuted,fontStyle:"italic"},children:[e.jsx(ot,{size:12,style:{flexShrink:0,marginTop:"2px"}}),e.jsxs("span",{children:['"',o.source_quote,'"']})]})]}),e.jsx("div",{onClick:u=>u.stopPropagation(),children:e.jsx(at,{value:o.weight,onChange:u=>n(o.id,u),type:o.type,b:i})})]})},ct=({isOpen:o,onClose:x,topic:n,existingPros:l,existingCons:i,onAddItems:p})=>{const r=he(),[c,s]=g.useState("loading_question"),[t,u]=g.useState(""),[b,j]=g.useState(""),[S,f]=g.useState(""),[$,C]=g.useState([]),[M,w]=g.useState([]),[R,A]=g.useState(null),[Y,q]=g.useState(0);g.useEffect(()=>{o&&c==="loading_question"&&P()},[c,o]),g.useEffect(()=>{o&&(s("loading_question"),u(""),f(""),C([]),w([]),A(null),q(0))},[o]);const P=async()=>{A(null);try{const h=window.bewerbungstrainerConfig?.geminiApiKey;if(!h)throw new Error("API-Key nicht konfiguriert");const z=await Ne(n,l,i,M,h);u(z.question),j(z.question_type||""),s("input"),q(W=>W+1)}catch(h){console.error("[DeepDiveWizard] Question generation error:",h),A(h.message||"Fehler beim Generieren der Frage"),s("input")}},ee=async()=>{if(S.trim()){s("analyzing"),A(null);try{const h=window.bewerbungstrainerConfig?.geminiApiKey;if(!h)throw new Error("API-Key nicht konfiguriert");const W=((await Oe(n,t,S,h)).extracted_items||[]).map(B=>({...B,id:st(),selected:!0}));C(W),w(B=>[...B,{question:t,answer:S}]),s("selection")}catch(h){console.error("[DeepDiveWizard] Extraction error:",h),A(h.message||"Fehler beim Analysieren der Antwort"),s("input")}}},te=g.useCallback(h=>{C(z=>z.map(W=>W.id===h?{...W,selected:!W.selected}:W))},[]),ce=g.useCallback((h,z)=>{C(W=>W.map(B=>B.id===h?{...B,weight:z}:B))},[]),_=g.useCallback((h,z)=>{C(W=>W.map(B=>B.id===h?{...B,text:z}:B))},[]),xe=()=>{const h=$.filter(z=>z.selected);h.length>0&&p(h),f(""),C([]),s("loading_question")},N=()=>{w(h=>[...h,{question:t,answer:S}]),f(""),C([]),s("loading_question")},D=()=>{const h=$.filter(z=>z.selected);h.length>0&&p(h),x()};return o?e.jsxs(F,{children:[e.jsx(k.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:r.zIndex.modal,padding:r.space[4]},onClick:x,children:e.jsxs(k.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:h=>h.stopPropagation(),className:"wizard-modal",style:{backgroundColor:r.cardBgColor,borderRadius:r.radius.xl,width:"100%",maxWidth:"640px",maxHeight:"90dvh",overflow:"hidden",boxShadow:r.shadow.xl,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${r.space[4]} ${r.space[5]}`,borderBottom:`1px solid ${r.borderColor}`,background:r.headerGradient},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:r.space[3]},children:[e.jsx("div",{style:{width:r.space[10],height:r.space[10],borderRadius:r.radius.lg,backgroundColor:"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(We,{size:r.iconSize.xl,color:r.white})}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:r.fontSize.xl,fontWeight:r.fontWeight.bold,color:r.white,margin:0},children:"Deep Dive Interview"}),e.jsxs("p",{style:{fontSize:r.fontSize.sm,color:"rgba(255,255,255,0.8)",margin:0},children:["Frage ",Y," ‚Ä¢ Entdecke deine wahren Motive"]})]})]}),e.jsx("button",{onClick:x,style:{width:r.space[10],height:r.space[10],borderRadius:r.radius.md,border:"none",backgroundColor:"rgba(255,255,255,0.2)",color:r.white,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(se,{size:r.iconSize.xl})})]}),e.jsxs("div",{style:{flex:1,overflow:"auto",padding:r.space[5]},children:[c==="loading_question"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:r.space[8],gap:r.space[4]},children:[e.jsx(X,{size:48,color:r.primaryAccent,style:{animation:"spin 1s linear infinite"}}),e.jsx("p",{style:{color:r.textSecondary,fontSize:r.fontSize.lg},children:"Generiere n√§chste Frage..."})]}),c==="input"&&e.jsxs("div",{children:[e.jsxs("div",{style:{backgroundColor:`${r.primaryAccent}10`,borderRadius:r.radius.lg,padding:r.space[5],marginBottom:r.space[5],borderLeft:`4px solid ${r.primaryAccent}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:r.space[2],marginBottom:r.space[2]},children:[e.jsx(Ze,{size:r.iconSize.md,color:r.primaryAccent}),e.jsx("span",{style:{fontSize:r.fontSize.sm,fontWeight:r.fontWeight.semibold,color:r.primaryAccent,textTransform:"uppercase"},children:"Coach fragt"})]}),e.jsx("p",{style:{fontSize:r.fontSize.xl,fontWeight:r.fontWeight.medium,color:r.textMain,lineHeight:1.5,margin:0},children:t||"Lade Frage..."})]}),R&&e.jsx("div",{style:{backgroundColor:r.errorLight,color:r.errorDark,padding:r.space[3],borderRadius:r.radius.md,marginBottom:r.space[4],fontSize:r.fontSize.sm},children:R}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:r.fontSize.base,fontWeight:r.fontWeight.medium,color:r.textSecondary,marginBottom:r.space[2]},children:"Deine Antwort"}),e.jsx(pe,{value:S,onChange:h=>f(h.target.value),placeholder:"Schreib einfach drauf los... Was f√§llt dir ein? Was f√ºhlst du dabei?",rows:5,style:{fontSize:r.fontSize.md,padding:r.space[4],borderRadius:r.radius.lg,resize:"vertical",minHeight:"120px"}})]})]}),c==="analyzing"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:r.space[8],gap:r.space[4]},children:[e.jsx(k.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:e.jsx(T,{size:48,color:r.primaryAccent})}),e.jsx("p",{style:{color:r.textSecondary,fontSize:r.fontSize.lg},children:"KI extrahiert Argumente..."})]}),c==="selection"&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:r.space[2],marginBottom:r.space[4]},children:[e.jsx(T,{size:r.iconSize.lg,color:r.primaryAccent}),e.jsx("h3",{style:{fontSize:r.fontSize.lg,fontWeight:r.fontWeight.semibold,color:r.textMain,margin:0},children:"Extrahierte Argumente"})]}),$.length===0?e.jsxs("div",{style:{textAlign:"center",padding:r.space[6],backgroundColor:r.cardBgHover,borderRadius:r.radius.lg},children:[e.jsx("p",{style:{color:r.textSecondary,marginBottom:r.space[3]},children:"Keine konkreten Argumente gefunden."}),e.jsx("p",{style:{color:r.textMuted,fontSize:r.fontSize.sm},children:"Das ist okay! Versuch es mit einer ausf√ºhrlicheren Antwort oder einer anderen Frage."})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:r.space[3]},children:$.map(h=>e.jsx(lt,{item:h,onToggle:te,onWeightChange:ce,onTextChange:_,b:r},h.id))}),e.jsx("p",{style:{fontSize:r.fontSize.sm,color:r.textMuted,marginTop:r.space[4],textAlign:"center"},children:"Klicke auf ein Argument um es ab-/anzuw√§hlen. Passe die Gewichtung nach Bedarf an."})]})]}),e.jsxs("div",{className:"wizard-footer",style:{padding:`${r.space[4]} ${r.space[5]}`,borderTop:`1px solid ${r.borderColor}`,display:"flex",flexWrap:"wrap",justifyContent:"space-between",gap:r.space[3],flexShrink:0,backgroundColor:r.cardBgColor},children:[c==="input"&&e.jsxs(e.Fragment,{children:[e.jsx(v,{variant:"ghost",onClick:x,children:"Abbrechen"}),e.jsxs("div",{style:{display:"flex",gap:r.space[2]},children:[e.jsxs(v,{variant:"outline",onClick:N,children:[e.jsx(Xe,{size:r.iconSize.md,style:{marginRight:r.space[1.5]}}),"√úberspringen"]}),e.jsxs(v,{variant:"solid",onClick:ee,disabled:!S.trim()||S.length<10,style:{background:S.trim().length>=10?r.headerGradient:void 0},children:[e.jsx(T,{size:r.iconSize.md,style:{marginRight:r.space[2]}}),"Auswerten"]})]})]}),c==="selection"&&e.jsxs(e.Fragment,{children:[e.jsx(v,{variant:"outline",onClick:D,style:{borderColor:r.borderColor,backgroundColor:r.cardBgHover},children:"Fertig"}),e.jsxs(v,{variant:"solid",onClick:()=>{$.filter(z=>z.selected).length>0?xe():N()},style:{background:r.headerGradient},children:[$.some(h=>h.selected)?"√úbernehmen & Weiter":"N√§chste Frage",e.jsx(Ge,{size:r.iconSize.md,style:{marginLeft:r.space[1]}})]})]})]})]})}),e.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }

          /* Mobile responsive: footer buttons stack on small screens */
          @media (max-width: 480px) {
            .wizard-modal {
              max-height: calc(100dvh - 16px) !important;
              border-radius: 16px !important;
            }
            .wizard-footer {
              padding: 12px 16px !important;
            }
            .wizard-footer > button,
            .wizard-footer > div {
              flex: 1 1 auto;
            }
            .wizard-footer > div {
              width: 100%;
              justify-content: stretch;
            }
            .wizard-footer > div > button {
              flex: 1;
            }
          }
        `})]}):null},E=()=>`item_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,be=[{id:"strategist",name:"Der Stratege",icon:"‚ôüÔ∏è",color:"#6366f1",bgColor:"#eef2ff",description:"Karriere, Geld, Macht"},{id:"security",name:"Der Sicherheits-Beauftragte",icon:"üõ°Ô∏è",color:"#0891b2",bgColor:"#ecfeff",description:"Risiko, Best√§ndigkeit"},{id:"feelgood",name:"Der Feel-Good Manager",icon:"üßò",color:"#10b981",bgColor:"#ecfdf5",description:"Work-Life-Balance, Kultur"},{id:"growth",name:"Der Gr√ºnder",icon:"üöÄ",color:"#f59e0b",bgColor:"#fffbeb",description:"Wachstum, Innovation"},{id:"future",name:"Dein Zukunfts-Ich",icon:"üîÆ",color:"#8b5cf6",bgColor:"#f5f3ff",description:"Langzeit, Reue-Vermeidung"}],dt=({value:o,onChange:x,onChangeEnd:n,color:l,b:i})=>{const p=l==="green",r=p?i.success:i.error,c=p?i.successDark:i.errorDark;return p?i.successLight:i.errorLight,e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:i.space[2],minWidth:"90px",flexShrink:0},children:[e.jsx("input",{type:"range",min:"1",max:"10",value:o,onChange:s=>x(parseInt(s.target.value)),onMouseUp:n,onTouchEnd:n,style:{width:"60px",height:"6px",borderRadius:i.radius.sm,background:`linear-gradient(90deg, ${r} 0%, ${r} ${(o-1)*11.1}%, ${i.borderColor} ${(o-1)*11.1}%, ${i.borderColor} 100%)`,appearance:"none",cursor:"pointer",flexShrink:0}}),e.jsx("span",{style:{minWidth:"20px",textAlign:"center",fontWeight:i.fontWeight.semibold,fontSize:i.fontSize.sm,color:c,flexShrink:0},children:o})]})},Ce=({item:o,onUpdate:x,onDelete:n,onAddNew:l,onBlur:i,color:p,autoFocus:r,b:c})=>{const s=p==="green",t=s?c.successLight:c.errorLight,u=s?"#bbf7d0":"#fecaca",b=s?"#86efac":"#fca5a5",j=s?c.successDark:c.errorDark,S=H.useRef(null);return H.useEffect(()=>{const f=S.current;f&&(f.style.height="auto",f.style.height=Math.max(44,f.scrollHeight)+"px")},[o.text]),e.jsxs(k.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,x:s?-20:20},transition:{duration:.2},className:"decision-item",style:{display:"flex",flexWrap:"wrap",alignItems:"flex-start",gap:c.space[2.5],padding:c.space[3],backgroundColor:t,borderRadius:c.radius.lg,border:`1px solid ${u}`},children:[e.jsxs("div",{className:"decision-item-input-row",style:{display:"flex",alignItems:"flex-start",gap:c.space[2.5],flex:"1 1 100%",minWidth:0},children:[e.jsx("div",{style:{flexShrink:0,paddingTop:c.space[2]},children:s?e.jsx(K,{size:c.iconSize.lg,color:j}):e.jsx(G,{size:c.iconSize.lg,color:j})}),e.jsx(pe,{ref:S,value:o.text,onChange:f=>x(o.id,{text:f.target.value}),onBlur:i,autoFocus:r,placeholder:s?"Pro-Argument...":"Contra-Argument...",rows:1,style:{flex:1,minWidth:"0",backgroundColor:c.white,border:`1px solid ${b}`,borderRadius:c.radius.md,padding:`${c.space[2]} ${c.space[3]}`,fontSize:c.fontSize.base,resize:"none",minHeight:"44px",overflow:"hidden"}})]}),e.jsxs("div",{className:"decision-item-controls",style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:c.space[2],flex:"0 0 auto",marginLeft:"auto"},children:[e.jsx(dt,{value:o.weight,onChange:f=>x(o.id,{weight:f}),onChangeEnd:i,color:p,b:c}),e.jsx("button",{onClick:()=>n(o.id),style:{padding:c.space[2],backgroundColor:c.transparent,border:"none",borderRadius:c.radius.sm,cursor:"pointer",color:c.textMuted,transition:c.transition.normal,flexShrink:0},onMouseEnter:f=>{f.currentTarget.style.backgroundColor=c.errorLight,f.currentTarget.style.color=c.errorDark},onMouseLeave:f=>{f.currentTarget.style.backgroundColor=c.transparent,f.currentTarget.style.color=c.textMuted},children:e.jsx(et,{size:c.iconSize.md})})]})]})},gt=({proScore:o,contraScore:x,b:n})=>{const l=o+x,i=l>0?Math.round(o/l*100):50,p=100-i;return e.jsxs("div",{style:{marginTop:n.space[6]},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:n.space[2],fontSize:n.fontSize.base,fontWeight:n.fontWeight.semibold},children:[e.jsxs("span",{style:{color:n.successDark},children:["Pro: ",o," Punkte (",i,"%)"]}),e.jsxs("span",{style:{color:n.errorDark},children:["Contra: ",x," Punkte (",p,"%)"]})]}),e.jsxs("div",{style:{height:n.space[6],borderRadius:n.radius.lg,overflow:"hidden",display:"flex",backgroundColor:n.borderColorLight,boxShadow:"inset 0 2px 4px rgba(0,0,0,0.1)"},children:[e.jsx(k.div,{initial:{width:0},animate:{width:`${i}%`},transition:{duration:.5,ease:"easeOut"},style:{background:`linear-gradient(90deg, ${n.success} 0%, ${n.successDark} 100%)`,height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:n.white,fontWeight:n.fontWeight.semibold,fontSize:n.fontSize.xs,minWidth:i>10?"auto":"0"},children:i>15&&`${i}%`}),e.jsx(k.div,{initial:{width:0},animate:{width:`${p}%`},transition:{duration:.5,ease:"easeOut"},style:{background:`linear-gradient(90deg, ${n.error} 0%, ${n.errorDark} 100%)`,height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:n.white,fontWeight:n.fontWeight.semibold,fontSize:n.fontSize.xs,minWidth:p>10?"auto":"0"},children:p>15&&`${p}%`})]})]})},ke=({suggestion:o,onAdd:x,isAdded:n,b:l})=>{const i=o.type==="pro",p=i?l.successLight:l.errorLight,r=i?"#bbf7d0":"#fecaca",c=i?"#dcfce7":"#fee2e2",s=i?l.successDark:l.errorDark,t=i?l.success:l.error;return e.jsxs(k.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},style:{display:"flex",alignItems:"center",gap:l.space[3],padding:`${l.space[3]} ${l.space[4]}`,backgroundColor:p,borderRadius:l.radius.md,border:`1px solid ${r}`},children:[e.jsx("div",{style:{width:l.space[6],height:l.space[6],borderRadius:l.radius.sm,backgroundColor:c,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:i?e.jsx(K,{size:l.iconSize.sm,color:s}):e.jsx(G,{size:l.iconSize.sm,color:s})}),e.jsx("span",{style:{flex:1,fontSize:l.fontSize.base,color:l.textSecondary,lineHeight:1.4},children:o.text}),e.jsx("button",{onClick:()=>x(o),disabled:n,style:{width:l.space[12],height:l.space[12],borderRadius:l.radius.lg,border:"none",backgroundColor:n?l.borderColor:t,color:n?l.textMuted:l.white,cursor:n?"default":"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:l.transition.normal,flexShrink:0},children:n?"‚úì":e.jsx(ge,{size:l.iconSize["3xl"],color:"white",strokeWidth:2.5})})]})},pt=({isOpen:o,onClose:x,activePersona:n,isLoading:l,suggestions:i,onAddSuggestion:p,onLoadMore:r,addedSuggestions:c,b:s})=>{if(!o)return null;const t=be.find(u=>u.id===n);return e.jsxs(k.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},style:{position:"relative",marginTop:s.space[4],padding:s.space[5],backgroundColor:s.cardBgColor,borderRadius:s.radius.xl,border:`2px solid ${t?.color||"#6366f1"}`,boxShadow:s.shadow.lg},children:[e.jsx("button",{onClick:x,style:{position:"absolute",top:s.space[3],right:s.space[3],width:s.space[10],height:s.space[10],borderRadius:s.radius.md,border:"none",backgroundColor:s.borderColorLight,color:s.textSecondary,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(se,{size:s.iconSize["2xl"],strokeWidth:2.5})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:s.space[3],marginBottom:s.space[4],paddingRight:s.space[8]},children:[e.jsx("span",{style:{fontSize:s.fontSize["5xl"]},children:t?.icon}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:s.fontSize.lg,fontWeight:s.fontWeight.semibold,color:s.textMain,margin:0},children:t?.name}),e.jsx("p",{style:{fontSize:s.fontSize.sm,color:s.textSecondary,margin:0},children:t?.description})]})]}),l?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:s.space[3],padding:s.space[6]},children:[e.jsx(X,{size:s.iconSize["3xl"],color:t?.color,style:{animation:"spin 1s linear infinite"}}),e.jsxs("span",{style:{color:s.textSecondary,fontSize:s.fontSize.base},children:[t?.name," denkt nach..."]})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:s.space[2.5]},children:[e.jsx("div",{style:{marginBottom:s.space[2]},children:e.jsx("span",{style:{fontSize:s.fontSize.xs,fontWeight:s.fontWeight.semibold,color:s.successDark,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Pro-Argumente"})}),i.filter(u=>u.type==="pro").map((u,b)=>e.jsx(ke,{suggestion:u,onAdd:p,isAdded:c.has(`${u.type}-${u.text}`),b:s},`pro-${b}`)),e.jsx("div",{style:{marginTop:s.space[3],marginBottom:s.space[2]},children:e.jsx("span",{style:{fontSize:s.fontSize.xs,fontWeight:s.fontWeight.semibold,color:s.errorDark,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Contra-Argumente"})}),i.filter(u=>u.type==="con").map((u,b)=>e.jsx(ke,{suggestion:u,onAdd:p,isAdded:c.has(`${u.type}-${u.text}`),b:s},`con-${b}`)),i.length>0&&r&&e.jsx("button",{onClick:r,disabled:l,style:{marginTop:s.space[4],padding:`${s.space[3]} ${s.space[4]}`,backgroundColor:"transparent",border:`2px dashed ${t?.color||s.borderColor}`,borderRadius:s.radius.lg,color:t?.color||s.textSecondary,fontSize:s.fontSize.base,fontWeight:s.fontWeight.medium,cursor:l?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:s.space[2],width:"100%",transition:s.transition.normal,opacity:l?.6:1},children:l?e.jsxs(e.Fragment,{children:[e.jsx(X,{size:s.iconSize.md,style:{animation:"spin 1s linear infinite"}}),"Generiere mehr..."]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{size:s.iconSize.md}),"Mehr Inspirationen"]})})]})]})},ht=({topic:o,onSelectPersona:x,activePersona:n,isLoading:l,suggestions:i,onCloseBrainstorm:p,onAddSuggestion:r,onLoadMore:c,addedSuggestions:s,b:t})=>{const[u,b]=g.useState(!1),j=o.trim().length>0;return e.jsxs(L,{variant:"elevated",padding:"lg",style:{marginBottom:t.space[4]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",gap:t.space[2]},onClick:()=>b(!u),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t.space[3],minWidth:0},children:[e.jsx("div",{style:{width:t.space[10],height:t.space[10],borderRadius:t.radius.md,background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(qe,{size:t.iconSize.lg,color:"white"})}),e.jsxs("div",{style:{minWidth:0},children:[e.jsx("h3",{style:{fontSize:t.fontSize.lg,fontWeight:t.fontWeight.semibold,color:t.textMain,margin:0},children:"Brainstorming"}),e.jsx("p",{style:{fontSize:t.fontSize.base,color:t.textSecondary,margin:0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Frag dein inneres Team"})]})]}),u?e.jsx(Ye,{size:t.iconSize.xl,color:t.textSecondary,style:{flexShrink:0}}):e.jsx(Ue,{size:t.iconSize.xl,color:t.textSecondary,style:{flexShrink:0}})]}),e.jsx(F,{children:u&&e.jsx(k.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},style:{overflow:"hidden"},children:e.jsxs("div",{style:{marginTop:t.space[4]},children:[e.jsx("div",{style:{display:"flex",gap:t.space[2],overflowX:"auto",paddingBottom:t.space[2],marginLeft:`-${t.space[1]}`,marginRight:`-${t.space[1]}`,paddingLeft:t.space[1],paddingRight:t.space[1],WebkitOverflowScrolling:"touch",scrollbarWidth:"none",msOverflowStyle:"none"},children:be.map(S=>e.jsxs("button",{onClick:f=>{f.stopPropagation(),j&&x(S.id)},disabled:!j||l&&n===S.id,style:{display:"flex",alignItems:"center",gap:t.space[1.5],padding:`${t.space[2]} ${t.space[3]}`,borderRadius:t.radius.md,border:n===S.id?`2px solid ${S.color}`:`2px solid ${t.borderColor}`,backgroundColor:n===S.id?S.bgColor:t.cardBgColor,cursor:j?"pointer":"not-allowed",opacity:j?1:.5,transition:t.transition.normal,whiteSpace:"nowrap",flexShrink:0},children:[l&&n===S.id?e.jsx(X,{size:t.iconSize.sm,color:S.color,style:{animation:"spin 1s linear infinite"}}):e.jsx("span",{style:{fontSize:t.fontSize.lg},children:S.icon}),e.jsx("span",{style:{fontSize:t.fontSize.sm,fontWeight:t.fontWeight.medium,color:n===S.id?S.color:t.textSecondary},children:S.name.replace("Der ","").replace("Dein ","")})]},S.id))}),!j&&e.jsx("p",{style:{marginTop:t.space[3],fontSize:t.fontSize.sm,color:t.textMuted,fontStyle:"italic"},children:"Gib zuerst deine Entscheidungsfrage ein, um Vorschl√§ge zu erhalten."}),e.jsx(F,{children:n&&e.jsx(pt,{isOpen:!!n,onClose:p,activePersona:n,isLoading:l,suggestions:i,onAddSuggestion:r,onLoadMore:c,addedSuggestions:s,b:t})})]})})})]})},Et=({initialData:o,onAnalysisComplete:x,onCancel:n,isAuthenticated:l,requireAuth:i,savedDecisionId:p,onSaveDraft:r,onUpdateSession:c,onDecisionIdChange:s})=>{const t=he(),[u,b]=g.useState(!1),[j,S]=g.useState(o?.topic||""),[f,$]=g.useState(o?.context||""),[C,M]=g.useState(o?.pros||[{id:E(),text:"",weight:5}]),[w,R]=g.useState(o?.cons||[{id:E(),text:"",weight:5}]),[A,Y]=g.useState(!1),[q,P]=g.useState(null),[ee,te]=g.useState(null),[ce,_]=g.useState(!1),[xe,N]=g.useState(!1),D=H.useRef(null),[h,z]=g.useState({activePersona:null,isLoading:!1,suggestions:[]}),[W,B]=g.useState(new Set),O=g.useMemo(()=>C.reduce((a,d)=>a+(d.text.trim()?d.weight:0),0),[C]),Q=g.useMemo(()=>w.reduce((a,d)=>a+(d.text.trim()?d.weight:0),0),[w]),ue=C.some(a=>a.text.trim()),me=w.some(a=>a.text.trim()),V=j.trim()&&(ue||me),ie=g.useCallback(async()=>{if(D.current&&clearTimeout(D.current),!j.trim()||!r||!c)return;const a={topic:j,context:f,pros:C,cons:w,proScore:O,contraScore:Q};N(!0);try{if(p)await c(p,{...a,status:"draft"}),console.log("[DecisionBoard] Auto-saved (update):",p);else{const d=await r(a);d&&s&&s(d),console.log("[DecisionBoard] Auto-saved (create):",d)}}catch(d){console.error("[DecisionBoard] Auto-save failed:",d)}finally{N(!1)}},[j,f,C,w,O,Q,p,r,c,s]),re=g.useCallback(()=>{D.current&&clearTimeout(D.current),ie()},[ie]);H.useEffect(()=>()=>{D.current&&clearTimeout(D.current)},[]);const fe=g.useCallback(()=>{const a=E();M(d=>[...d,{id:a,text:"",weight:5}]),te(a)},[]),ye=g.useCallback(()=>{const a=E();R(d=>[...d,{id:a,text:"",weight:5}]),te(a)},[]),Be=g.useCallback((a,d)=>{M(y=>y.map(m=>m.id===a?{...m,...d}:m))},[]),Ie=g.useCallback((a,d)=>{R(y=>y.map(m=>m.id===a?{...m,...d}:m))},[]),$e=g.useCallback(a=>{M(d=>d.filter(y=>y.id!==a))},[]),Re=g.useCallback(a=>{R(d=>d.filter(y=>y.id!==a))},[]),Ae=g.useCallback(async a=>{z(d=>({...d,activePersona:a,isLoading:!0,suggestions:[]}));try{const d=window.bewerbungstrainerConfig?.geminiApiKey;if(!d)throw new Error("API-Key nicht konfiguriert");const y=f.trim()||null,m=await je(j,a,d,y,C,w);z(U=>({...U,isLoading:!1,suggestions:m.suggestions||[]}))}catch(d){console.error("[DecisionBoard] Brainstorm error:",d),z(y=>({...y,isLoading:!1,suggestions:[]})),P(d.message||"Fehler beim Brainstorming")}},[j,f,C,w]),De=g.useCallback(()=>{z({activePersona:null,isLoading:!1,suggestions:[]})},[]),Te=g.useCallback(a=>{const d=`${a.type}-${a.text}`;B(m=>new Set([...m,d]));const y={id:E(),text:a.text,weight:5};a.type==="pro"?M(m=>m.length===1&&!m[0].text.trim()?[y]:[...m,y]):R(m=>m.length===1&&!m[0].text.trim()?[y]:[...m,y])},[]),Me=g.useCallback(async()=>{const{activePersona:a,suggestions:d}=h;if(a){z(y=>({...y,isLoading:!0}));try{const y=window.bewerbungstrainerConfig?.geminiApiKey;if(!y)throw new Error("API-Key nicht konfiguriert");const m=d.filter(I=>I.type==="pro").map(I=>({text:I.text})),U=d.filter(I=>I.type==="con").map(I=>({text:I.text})),Z=[...C,...m],Fe=[...w,...U],He=f.trim()||null,Ke=await je(j,a,y,He,Z,Fe);z(I=>({...I,isLoading:!1,suggestions:[...I.suggestions,...Ke.suggestions||[]]}))}catch(y){console.error("[DecisionBoard] Load more error:",y),z(m=>({...m,isLoading:!1})),P(y.message||"Fehler beim Laden weiterer Vorschl√§ge")}}},[h,j,f,C,w]),Le=g.useCallback(a=>{$(d=>d.trim()?d.trim()+`

`+a:a)},[]),Pe=g.useCallback(a=>{a.forEach(d=>{const y={id:E(),text:d.text,weight:d.weight||5};d.type==="pro"?M(m=>m.length===1&&!m[0].text.trim()?[y]:[...m,y]):R(m=>m.length===1&&!m[0].text.trim()?[y]:[...m,y])}),setTimeout(()=>ie(),100)},[ie]),Ee=g.useCallback(async()=>{if(V){Y(!0),P(null);try{const a=window.bewerbungstrainerConfig?.geminiApiKey;if(!a)throw new Error("API-Key nicht konfiguriert");const d=C.filter(Z=>Z.text.trim()),y=w.filter(Z=>Z.text.trim()),m={topic:j,context:f.trim()||null,pros:d,cons:y,proScore:O,contraScore:Q},U=await Qe(m,a);x(m,U)}catch(a){console.error("[DecisionBoard] Analysis error:",a),P(a.message||"Fehler bei der Analyse")}finally{Y(!1)}}},[j,f,C,w,O,Q,V,x]);return e.jsxs("div",{style:{padding:t.space[4],maxWidth:"1200px",margin:"0 auto"},children:[n&&e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:t.space[4]},children:e.jsxs("button",{onClick:()=>b(!0),style:{display:"flex",alignItems:"center",gap:t.space[2],padding:`${t.space[2]} ${t.space[4]}`,borderRadius:t.radius.md,border:`1px solid ${t.borderColor}`,backgroundColor:t.cardBgColor,color:t.textSecondary,cursor:"pointer",fontSize:t.fontSize.base,fontWeight:t.fontWeight.medium,transition:t.transition.normal},onMouseEnter:a=>{a.currentTarget.style.backgroundColor=t.errorLight,a.currentTarget.style.borderColor=t.error,a.currentTarget.style.color=t.errorDark},onMouseLeave:a=>{a.currentTarget.style.backgroundColor=t.cardBgColor,a.currentTarget.style.borderColor=t.borderColor,a.currentTarget.style.color=t.textSecondary},children:[e.jsx(se,{size:t.iconSize.md}),"Abbrechen"]})}),e.jsxs("div",{style:{marginBottom:t.space[6],textAlign:"center"},children:[e.jsx("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:t.space[15],height:t.space[15],borderRadius:t.radius.lg,background:t.headerGradient,marginBottom:t.space[3],boxShadow:t.coloredShadow(t.primaryAccent,"lg")},children:e.jsx(ae,{size:t.iconSize["2xl"],color:t.white})}),e.jsx("h1",{style:{fontSize:t.fontSize["4xl"],fontWeight:t.fontWeight.bold,color:t.textMain,marginBottom:t.space[1.5]},children:"Der Entscheidungs-Kompass"}),e.jsx("p",{style:{fontSize:t.fontSize.base,color:t.textSecondary,maxWidth:"600px",margin:"0 auto",padding:`0 ${t.space[2]}`},children:"Analysiere deine Entscheidung objektiv. Gewichte Pro und Contra, und erhalte KI-gest√ºtzte Impulse f√ºr blinde Flecken."})]}),e.jsxs(L,{variant:"elevated",padding:"lg",style:{marginBottom:t.space[4]},children:[e.jsx(ne,{children:e.jsx(oe,{icon:ve,size:"md",children:"Deine Entscheidungsfrage"})}),e.jsxs(J,{children:[e.jsx(_e,{value:j,onChange:a=>S(a.target.value),onBlur:re,placeholder:"z.B. Soll ich das Jobangebot annehmen?",style:{fontSize:t.fontSize.lg,padding:t.space[4],borderRadius:t.radius.lg,marginBottom:t.space[4]}}),e.jsxs("div",{style:{marginTop:t.space[2]},children:[e.jsx("label",{style:{display:"block",fontSize:t.fontSize.base,fontWeight:t.fontWeight.medium,color:t.textSecondary,marginBottom:t.space[2]},children:"Beschreibe die Situation (optional)"}),e.jsxs("div",{className:"context-input-wrapper",style:{display:"flex",flexWrap:"wrap",alignItems:"flex-end",gap:t.space[3]},children:[e.jsx(pe,{value:f,onChange:a=>$(a.target.value),onBlur:re,placeholder:"Hintergrund, Rahmenbedingungen, Gef√ºhle, was dich besch√§ftigt...",rows:3,style:{flex:"1 1 300px",minWidth:0,fontSize:t.fontSize.md,padding:`${t.space[3]} ${t.space[4]}`,borderRadius:t.radius.lg,resize:"vertical",minHeight:"80px"}}),e.jsx("div",{style:{flexShrink:0,paddingBottom:t.space[1]},children:e.jsx(Ve,{onTranscriptReady:Le})})]})]})]})]}),e.jsx(ht,{topic:j,onSelectPersona:Ae,activePersona:h.activePersona,isLoading:h.isLoading,suggestions:h.suggestions,onCloseBrainstorm:De,onAddSuggestion:Te,onLoadMore:Me,addedSuggestions:W,b:t}),e.jsx(L,{variant:"elevated",padding:"lg",style:{marginBottom:t.space[4],cursor:j.trim()?"pointer":"not-allowed",opacity:j.trim()?1:.6,transition:t.transition.normal},onClick:()=>j.trim()&&_(!0),children:e.jsxs("div",{className:"deep-dive-card-content",style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:t.space[3],flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t.space[3],flex:"1 1 auto",minWidth:"200px"},children:[e.jsx("div",{style:{width:t.space[10],height:t.space[10],borderRadius:t.radius.md,background:t.headerGradient,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(We,{size:t.iconSize.lg,color:"white"})}),e.jsxs("div",{style:{minWidth:0},children:[e.jsx("h3",{style:{fontSize:t.fontSize.lg,fontWeight:t.fontWeight.semibold,color:t.textMain,margin:0},children:"Deep Dive Interview"}),e.jsx("p",{style:{fontSize:t.fontSize.sm,color:t.textSecondary,margin:0,lineHeight:1.4},children:"Entdecke verborgene Argumente durch gezielte Coaching-Fragen"})]})]}),e.jsxs(v,{variant:"solid",size:"sm",disabled:!j.trim(),onClick:a=>{a.stopPropagation(),j.trim()&&_(!0)},style:{background:j.trim()?t.headerGradient:void 0,flexShrink:0},children:[e.jsx(T,{size:t.iconSize.md,style:{marginRight:t.space[1.5]}}),"Starten"]})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(100%, 380px), 1fr))",gap:t.space[4],marginBottom:t.space[6]},children:[e.jsxs("div",{className:"decision-card-pro",style:{backgroundColor:t.cardBgColor,borderRadius:t.radius.lg,padding:t.space[6],boxShadow:t.shadow.md},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t.space[3],marginBottom:t.space[4]},children:[e.jsx("div",{style:{width:t.space[10],height:t.space[10],borderRadius:t.radius.md,backgroundColor:t.successLight,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(K,{size:t.iconSize.lg,color:t.successDark})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:t.fontSize.xl,fontWeight:t.fontWeight.semibold,color:t.successDark,margin:0},children:"PRO"}),e.jsx("p",{style:{fontSize:t.fontSize.base,color:t.textSecondary,margin:0},children:"Was spricht daf√ºr?"})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:t.space[3]},children:[e.jsx(F,{mode:"popLayout",children:C.map(a=>e.jsx(Ce,{item:a,onUpdate:Be,onDelete:$e,onAddNew:fe,onBlur:re,color:"green",autoFocus:ee===a.id,b:t},a.id))}),e.jsxs(v,{variant:"outline",onClick:fe,style:{borderColor:t.success,color:t.successDark,borderStyle:"dashed"},children:[e.jsx(ge,{size:t.iconSize.md,style:{marginRight:t.space[2]}}),"Argument hinzuf√ºgen"]})]})]}),e.jsxs("div",{className:"decision-card-contra",style:{backgroundColor:t.cardBgColor,borderRadius:t.radius.lg,padding:t.space[6],boxShadow:t.shadow.md},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t.space[3],marginBottom:t.space[4]},children:[e.jsx("div",{style:{width:t.space[10],height:t.space[10],borderRadius:t.radius.md,backgroundColor:t.errorLight,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(G,{size:t.iconSize.lg,color:t.errorDark})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:t.fontSize.xl,fontWeight:t.fontWeight.semibold,color:t.errorDark,margin:0},children:"CONTRA"}),e.jsx("p",{style:{fontSize:t.fontSize.base,color:t.textSecondary,margin:0},children:"Was spricht dagegen?"})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:t.space[3]},children:[e.jsx(F,{mode:"popLayout",children:w.map(a=>e.jsx(Ce,{item:a,onUpdate:Ie,onDelete:Re,onAddNew:ye,onBlur:re,color:"red",autoFocus:ee===a.id,b:t},a.id))}),e.jsxs(v,{variant:"outline",onClick:ye,style:{borderColor:t.error,color:t.errorDark,borderStyle:"dashed"},children:[e.jsx(ge,{size:t.iconSize.md,style:{marginRight:t.space[2]}}),"Argument hinzuf√ºgen"]})]})]})]}),(ue||me)&&e.jsxs(L,{variant:"elevated",padding:"lg",style:{marginBottom:t.space[6]},children:[e.jsx(ne,{children:e.jsx(oe,{icon:ae,size:"md",children:"Rationaler Score"})}),e.jsx(J,{children:e.jsx(gt,{proScore:O,contraScore:Q,b:t})})]}),q&&e.jsxs(k.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{display:"flex",alignItems:"center",gap:t.space[3],padding:t.space[4],backgroundColor:t.errorLight,border:`1px solid ${t.error}33`,borderRadius:t.radius.lg,marginBottom:t.space[6],color:t.errorDark},children:[e.jsx(Se,{size:t.iconSize.lg}),e.jsx("span",{children:q})]}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(v,{onClick:Ee,disabled:!V||A,variant:"solid",size:"lg",style:{padding:`${t.space[4]} ${t.space[8]}`,fontSize:t.fontSize.xl,background:V?t.headerGradient:void 0,boxShadow:V?t.coloredShadow(t.primaryAccent,"lg"):void 0},children:A?e.jsxs(e.Fragment,{children:[e.jsx(X,{size:t.iconSize.xl,style:{marginRight:t.space[2.5],animation:"spin 1s linear infinite"}}),"Analyse l√§uft..."]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{size:t.iconSize.xl,style:{marginRight:t.space[2.5]}}),"Entscheidung analysieren"]})})}),e.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }

          input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: white;
            border: 2px solid currentColor;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
          }

          input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: white;
            border: 2px solid currentColor;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
          }

          /* Mobile responsive: stack controls below textarea */
          @media (max-width: 480px) {
            .decision-item {
              flex-direction: column !important;
            }
            .decision-item-input-row {
              width: 100% !important;
              flex: 1 1 100% !important;
            }
            .decision-item-controls {
              width: 100% !important;
              justify-content: flex-start !important;
              padding-left: 32px;
            }
          }
        `}),e.jsx(F,{children:u&&e.jsx(k.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:t.zIndex.modal,padding:t.space[4]},onClick:()=>b(!1),children:e.jsxs(k.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:a=>a.stopPropagation(),style:{backgroundColor:t.cardBgColor,borderRadius:t.radius.xl,padding:t.space[6],maxWidth:"400px",width:"100%",boxShadow:t.shadow.xl},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t.space[3],marginBottom:t.space[4]},children:[e.jsx("div",{style:{width:t.space[10],height:t.space[10],borderRadius:t.radius.md,backgroundColor:t.errorLight,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Se,{size:t.iconSize.xl,color:t.error})}),e.jsx("h3",{style:{fontSize:t.fontSize.xl,fontWeight:t.fontWeight.semibold,color:t.textMain,margin:0},children:"Session abbrechen?"})]}),e.jsx("p",{style:{fontSize:t.fontSize.base,color:t.textSecondary,marginBottom:t.space[6],lineHeight:1.5},children:"Alle eingegebenen Daten werden verworfen und nicht gespeichert."}),e.jsxs("div",{style:{display:"flex",gap:t.space[3],justifyContent:"flex-end"},children:[e.jsx(v,{variant:"outline",onClick:()=>b(!1),children:"Zur√ºck"}),e.jsxs(v,{variant:"solid",onClick:()=>{b(!1),n()},style:{backgroundColor:t.error,color:t.white},children:[e.jsx(se,{size:t.iconSize.md,style:{marginRight:t.space[2]}}),"Abbrechen"]})]})]})})}),e.jsx(ct,{isOpen:ce,onClose:()=>_(!1),topic:j,existingPros:C,existingCons:w,onAddItems:Pe})]})},de=({b:o})=>e.jsxs("div",{style:{padding:o.space[6],borderRadius:o.radius.xl,backgroundColor:o.cardBgHover,border:`1px solid ${o.borderColor}`},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:o.radius.lg,backgroundColor:o.borderColor,marginBottom:o.space[4],animation:"pulse 1.5s ease-in-out infinite"}}),e.jsx("div",{style:{width:"60%",height:"24px",borderRadius:o.radius.md,backgroundColor:o.borderColor,marginBottom:o.space[3],animation:"pulse 1.5s ease-in-out infinite"}}),e.jsx("div",{style:{width:"100%",height:"16px",borderRadius:o.radius.sm,backgroundColor:o.borderColor,marginBottom:o.space[2],animation:"pulse 1.5s ease-in-out infinite"}}),e.jsx("div",{style:{width:"85%",height:"16px",borderRadius:o.radius.sm,backgroundColor:o.borderColor,animation:"pulse 1.5s ease-in-out infinite"}})]}),we=o=>o&&o.split(/(\*\*[^*]+\*\*)/g).map((n,l)=>n.startsWith("**")&&n.endsWith("**")?e.jsx("strong",{children:n.slice(2,-2)},l):n),xt=({card:o,index:x,b:n})=>{const l={blind_spot:{bgColor:n.warningLight,borderColor:n.warning,iconBg:"#fef08a",iconColor:n.warningDark,bulletColor:n.warningDark,icon:ve},challenger:{bgColor:n.errorLight,borderColor:"#fca5a5",iconBg:n.errorLight,iconColor:n.error,bulletColor:n.error,icon:nt},intuition:{bgColor:"#f5f3ff",borderColor:"#c4b5fd",iconBg:"#ede9fe",iconColor:"#7c3aed",bulletColor:"#7c3aed",icon:rt}},i=l[o.type]||l.blind_spot,p=i.icon,r=o.points||(o.content?[o.content]:[]);return e.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:x*.15},style:{padding:n.space[6],borderRadius:n.radius.xl,backgroundColor:i.bgColor,border:`2px solid ${i.borderColor}`,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:n.radius.lg,backgroundColor:i.iconBg,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:n.space[4]},children:e.jsx(p,{size:n.iconSize["2xl"],color:i.iconColor})}),e.jsx("h3",{style:{fontSize:n.fontSize.xl,fontWeight:n.fontWeight.bold,color:n.textMain,marginBottom:n.space[3]},children:o.title}),o.type==="challenger"&&o.argument&&e.jsxs("div",{style:{padding:`${n.space[2.5]} ${n.space[3.5]}`,backgroundColor:"rgba(255,255,255,0.6)",borderRadius:n.radius.md,marginBottom:n.space[3],borderLeft:`3px solid ${i.bulletColor}`},children:[e.jsx("span",{style:{fontSize:n.fontSize.sm,color:n.textSecondary,display:"block",marginBottom:"2px"},children:"Hinterfragtes Argument:"}),e.jsxs("span",{style:{fontSize:n.fontSize.md,fontWeight:n.fontWeight.semibold,color:n.textMain},children:['"',o.argument,'"']})]}),o.type==="intuition"&&o.question&&e.jsxs("div",{style:{padding:`${n.space[2.5]} ${n.space[3.5]}`,backgroundColor:"rgba(255,255,255,0.6)",borderRadius:n.radius.md,marginBottom:n.space[3],borderLeft:`3px solid ${i.bulletColor}`},children:[e.jsx("span",{style:{fontSize:n.fontSize.sm,color:n.textSecondary,display:"block",marginBottom:"2px"},children:"Reflexionsfrage:"}),e.jsx("span",{style:{fontSize:n.fontSize.md,fontWeight:n.fontWeight.semibold,color:n.textMain,fontStyle:"italic"},children:we(o.question)})]}),e.jsx("ul",{style:{listStyle:"none",padding:0,margin:0,flex:1},children:r.map((c,s)=>e.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:n.space[2.5],marginBottom:n.space[2.5],fontSize:n.fontSize.md,lineHeight:1.5,color:n.textSecondary},children:[e.jsx("span",{style:{width:"6px",height:"6px",borderRadius:n.radius.full,backgroundColor:i.bulletColor,marginTop:"8px",flexShrink:0}}),e.jsx("span",{children:we(c)})]},s))})]})},ut=({proScore:o,contraScore:x,b:n})=>{const l=o+x,i=l>0?Math.round(o/l*100):50,p=100-i,r=o>x?"pro":o<x?"contra":"neutral";return e.jsxs(L,{variant:"elevated",padding:"lg",style:{marginBottom:n.space[6]},children:[e.jsx(ne,{children:e.jsx(oe,{icon:ae,size:"lg",children:"Rationaler Score"})}),e.jsxs(J,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:n.space[3]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:n.space[2]},children:[e.jsx(K,{size:n.iconSize.lg,color:n.success}),e.jsxs("span",{style:{fontSize:n.fontSize["4xl"],fontWeight:n.fontWeight.bold,color:n.success},children:[i,"%"]}),e.jsxs("span",{style:{color:n.textSecondary,fontSize:n.fontSize.base},children:["(",o," Punkte)"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:n.space[2]},children:[e.jsxs("span",{style:{color:n.textSecondary,fontSize:n.fontSize.base},children:["(",x," Punkte)"]}),e.jsxs("span",{style:{fontSize:n.fontSize["4xl"],fontWeight:n.fontWeight.bold,color:n.error},children:[p,"%"]}),e.jsx(G,{size:n.iconSize.lg,color:n.error})]})]}),e.jsxs("div",{style:{height:"32px",borderRadius:n.radius.xl,overflow:"hidden",display:"flex",backgroundColor:n.cardBgHover,boxShadow:"inset 0 2px 4px rgba(0,0,0,0.1)"},children:[e.jsx(k.div,{initial:{width:0},animate:{width:`${i}%`},transition:{duration:.8,ease:"easeOut"},style:{background:`linear-gradient(90deg, ${n.success} 0%, ${n.successDark} 100%)`,height:"100%"}}),e.jsx(k.div,{initial:{width:0},animate:{width:`${p}%`},transition:{duration:.8,ease:"easeOut"},style:{background:`linear-gradient(90deg, ${n.error} 0%, ${n.errorDark} 100%)`,height:"100%"}})]}),e.jsxs("p",{style:{marginTop:n.space[4],textAlign:"center",fontSize:n.fontSize.md,color:n.textSecondary},children:[r==="pro"&&e.jsxs(e.Fragment,{children:["Die Zahlen sprechen ",e.jsx("strong",{style:{color:n.success},children:"f√ºr"})," deine Entscheidung."]}),r==="contra"&&e.jsxs(e.Fragment,{children:["Die Zahlen sprechen ",e.jsx("strong",{style:{color:n.error},children:"gegen"})," deine Entscheidung."]}),r==="neutral"&&e.jsxs(e.Fragment,{children:["Die Argumente sind ",e.jsx("strong",{children:"ausgeglichen"})," - hier lohnt sich ein genauerer Blick."]})]})]})]})},Ft=({decisionData:o,analysisResult:x,onStartNew:n,onEditDecision:l})=>{const i=he(),p=!x;return e.jsxs("div",{style:{padding:i.space[6],maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs(k.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4},style:{marginBottom:i.space[8]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:i.space[4]},children:[e.jsxs(v,{variant:"ghost",onClick:l,children:[e.jsx(tt,{size:i.iconSize.md,style:{marginRight:i.space[2]}}),"Bearbeiten"]}),e.jsxs(v,{variant:"outline",onClick:n,children:[e.jsx(ze,{size:i.iconSize.md,style:{marginRight:i.space[2]}}),"Neue Analyse"]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"64px",height:"64px",borderRadius:i.radius.xl,background:i.headerGradient,marginBottom:i.space[4],boxShadow:i.coloredShadow(i.primaryAccent,"lg")},children:e.jsx(T,{size:i.iconSize["3xl"],color:i.white})}),e.jsx("h1",{style:{fontSize:i.fontSize["4xl"],fontWeight:i.fontWeight.bold,color:i.textMain,marginBottom:i.space[2]},children:"Deine Entscheidungsanalyse"}),e.jsxs("p",{style:{fontSize:i.fontSize.xl,color:i.textSecondary,fontStyle:"italic"},children:['"',o?.topic,'"']})]})]}),o&&e.jsx(ut,{proScore:o.proScore,contraScore:o.contraScore,b:i}),x?.analysis_summary&&e.jsx(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},children:e.jsx(L,{variant:"gradient",padding:"lg",style:{marginBottom:i.space[6]},children:e.jsx(J,{children:e.jsx("p",{style:{fontSize:i.fontSize.lg,lineHeight:1.7,color:i.textMain,textAlign:"center",fontStyle:"italic"},children:x.analysis_summary})})})}),e.jsxs(k.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.4,delay:.3},style:{marginBottom:i.space[8]},children:[e.jsxs("h2",{style:{fontSize:i.fontSize["2xl"],fontWeight:i.fontWeight.bold,color:i.textMain,marginBottom:i.space[5],display:"flex",alignItems:"center",gap:i.space[2.5]},children:[e.jsx(T,{size:i.iconSize.xl,color:i.primaryAccent}),"KI-Coaching Impulse"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:i.space[5]},children:p?e.jsxs(e.Fragment,{children:[e.jsx(de,{b:i}),e.jsx(de,{b:i}),e.jsx(de,{b:i})]}):x?.cards?.map((r,c)=>e.jsx(xt,{card:r,index:c,b:i},r.type||c))})]}),e.jsxs(L,{variant:"elevated",padding:"lg",children:[e.jsx(ne,{children:e.jsx(oe,{icon:ae,size:"md",children:"Deine Argumente"})}),e.jsx(J,{children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:i.space[6]},children:[e.jsxs("div",{children:[e.jsxs("h4",{style:{fontSize:i.fontSize.lg,fontWeight:i.fontWeight.semibold,color:i.success,marginBottom:i.space[3],display:"flex",alignItems:"center",gap:i.space[2]},children:[e.jsx(K,{size:i.iconSize.md}),"Pro (",o?.proScore," Punkte)"]}),e.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:o?.pros?.map((r,c)=>e.jsxs("li",{style:{padding:`${i.space[2.5]} ${i.space[3.5]}`,backgroundColor:i.successLight,borderRadius:i.radius.md,marginBottom:i.space[2],display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:i.successDark},children:r.text}),e.jsx("span",{style:{backgroundColor:"#dcfce7",color:i.success,padding:`2px ${i.space[2]}`,borderRadius:i.radius.sm,fontSize:i.fontSize.sm,fontWeight:i.fontWeight.semibold},children:r.weight})]},r.id||c))})]}),e.jsxs("div",{children:[e.jsxs("h4",{style:{fontSize:i.fontSize.lg,fontWeight:i.fontWeight.semibold,color:i.error,marginBottom:i.space[3],display:"flex",alignItems:"center",gap:i.space[2]},children:[e.jsx(G,{size:i.iconSize.md}),"Contra (",o?.contraScore," Punkte)"]}),e.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:o?.cons?.map((r,c)=>e.jsxs("li",{style:{padding:`${i.space[2.5]} ${i.space[3.5]}`,backgroundColor:i.errorLight,borderRadius:i.radius.md,marginBottom:i.space[2],display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:i.errorDark},children:r.text}),e.jsx("span",{style:{backgroundColor:"#fee2e2",color:i.error,padding:`2px ${i.space[2]}`,borderRadius:i.radius.sm,fontSize:i.fontSize.sm,fontWeight:i.fontWeight.semibold},children:r.weight})]},r.id||c))})]})]})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:i.space[4],marginTop:i.space[8]},children:[e.jsxs(v,{variant:"outline",size:"lg",onClick:l,children:[e.jsx(it,{size:i.iconSize.md,style:{marginRight:i.space[2]}}),"Argumente anpassen"]}),e.jsxs(v,{variant:"solid",size:"lg",onClick:n,style:{background:i.headerGradient},children:[e.jsx(ze,{size:i.iconSize.md,style:{marginRight:i.space[2]}}),"Neue Entscheidung"]})]}),e.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
          }
        `})]})};export{Ft as D,G as T,Et as a};
