import{j as e,V,T as Le,ao as Ye,R as et,B as Oe,w as he,q as tt,b as Q,a as nt,aj as it,p as rt,ai as st,v as Ne,I as me,o as ot,z as ie,l as Pe,a1 as ye,k as at,X as ue,m as B,ap as Ae,t as ge,E as Be,aq as Ee,i as Te,h as fe,n as De,y as be,A as $e,ak as lt,a0 as He,a8 as Fe,M as dt,a9 as ct,e as pt}from"./ui-vendor-DefauSFE.js";import{a as i}from"./react-vendor-uDOJF2jQ.js";import{u as re,e as xt,F as ut,g as je,b as Z,D as xe,C as g,h as ne}from"./FeatureInfoButton-9VrXzPXx.js";import{S as gt}from"./ScenarioDashboard--jMr3pEI.js";import{D as ft}from"./DeviceSetupPage-CoNySYo_.js";import{F as ht}from"./fullscreen-loader-CCA0H6hh.js";import{u as mt}from"./useBranding-Bs7H8v8_.js";import{u as yt}from"./useMobile-YxjH166V.js";import{D as bt}from"./DeviceSettingsDialog-Wq2mEIG1.js";import{A as We}from"./MicrophoneTestDialog-BCiV2Nnn.js";import{P as jt}from"./progress-bar-B942sOX3.js";const St={video:V,user:he,briefcase:Oe,presentation:st,mic:rt,target:Le,banknote:it},vt={self_presentation:{label:"Selbstpräsentation",icon:he,color:"#3A7FA7",bgColor:"#E8F4F8"},interview:{label:"Bewerbungsgespräch",icon:Oe,color:"#059669",bgColor:"#d1fae5"},pitch:{label:"Elevator Pitch",icon:et,color:"#7c3aed",bgColor:"#ede9fe"},negotiation:{label:"Verhandlung",icon:Ye,color:"#d97706",bgColor:"#fef3c7"},custom:{label:"Training",icon:Le,color:"#64748b",bgColor:"#f1f5f9"}},kt=async()=>{const t=await fetch(`${je()}/video-training/scenarios`,{headers:{"X-WP-Nonce":Z()}});if(!t.ok)throw new Error("Fehler beim Laden der Szenarien");const n=await t.json();if(n.success&&n.data?.scenarios)return n.data.scenarios;throw new Error("Ungültige Antwort vom Server")},wt=t=>St[t.icon]||V,Ct=t=>[{text:`${t.question_count} Fragen`},{icon:Q,text:`~${Math.round(t.total_time_limit/60)} Min.`}],It=t=>e.jsx("div",{style:{marginTop:"40px",padding:"20px",background:`linear-gradient(135deg, ${t}10 0%, ${t}05 100%)`,borderRadius:"12px",border:`1px solid ${t}20`},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[e.jsx(nt,{size:20,color:t,style:{flexShrink:0,marginTop:"2px"}}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontWeight:600,color:"#0f172a",marginBottom:"4px"},children:"Wie funktioniert das Video Training?"}),e.jsxs("p",{style:{fontSize:"14px",color:"#64748b",lineHeight:1.6,margin:0},children:["1. Wähle ein Szenario und konfiguriere dein Training",e.jsx("br",{}),"2. Beantworte die generierten Fragen per Video-Aufnahme",e.jsx("br",{}),"3. Die KI analysiert dein Video und gibt detailliertes Feedback zu Auftreten, Körpersprache und Kommunikation"]})]})]})}),Ve=({onSelectScenario:t,isAuthenticated:n,requireAuth:s,setPendingScenario:x,onNavigateToHistory:f})=>{const{branding:a}=re(),d=a?.primaryAccent||a?.["--primary-accent"]||"#3A7FA7";return e.jsxs(e.Fragment,{children:[e.jsx(xt,{featureId:"videotraining",showOnMount:!0}),e.jsx(gt,{title:"Wirkungs-Analyse",subtitle:"Video-Feedback zu Auftreten und Kommunikation",headerIcon:V,headerActions:e.jsx(ut,{featureId:"videotraining",size:"sm"}),fetchScenarios:kt,moduleKey:"video_training",historyButtonLabel:"Meine Wirkungs-Analysen",onNavigateToHistory:f,onSelectScenario:t,renderCardMeta:Ct,getIconForScenario:wt,cardActionLabel:"Starten",cardActionIcon:tt,categoryField:"scenario_type",customCategoryConfig:vt,emptyStateIcon:V,emptyStateTitle:"Keine Szenarien verfügbar",searchPlaceholder:"Szenarien durchsuchen...",renderInfoBox:()=>It(d),isAuthenticated:n,requireAuth:s,setPendingScenario:x,loadingMessage:"Szenarien werden geladen..."})]})},zt=({field:t,value:n,onChange:s,error:x,focusColor:f})=>{const a=f||"#4a9ec9",d={width:"100%",padding:"12px 16px",borderRadius:"12px",border:`2px solid ${x?g.red[500]:g.slate[200]}`,fontSize:"16px",color:g.slate[900],backgroundColor:"white",outline:"none",transition:"border-color 0.2s, box-shadow 0.2s"},o={borderColor:a,boxShadow:`0 0 0 3px ${a}1a`},l=p=>{Object.assign(p.target.style,o),setTimeout(()=>{const m=p.target;if(m){const v=m.closest("div");v&&v.scrollIntoView({behavior:"smooth",block:"center"})}},300)},u=p=>{p.target.style.borderColor=x?g.red[500]:g.slate[200],p.target.style.boxShadow="none"},c=()=>{switch(t.type){case"text":return e.jsx("input",{type:"text",value:n||"",onChange:p=>s(t.key,p.target.value),placeholder:t.placeholder||"",style:d,onFocus:l,onBlur:u});case"textarea":return e.jsx("textarea",{value:n||"",onChange:p=>s(t.key,p.target.value),placeholder:t.placeholder||"",rows:4,style:{...d,resize:"vertical",minHeight:"100px"},onFocus:l,onBlur:u});case"select":return e.jsxs("select",{value:n||t.default||"",onChange:p=>s(t.key,p.target.value),style:{...d,cursor:"pointer",appearance:"none",backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 12px center",backgroundRepeat:"no-repeat",backgroundSize:"20px",paddingRight:"44px"},onFocus:l,onBlur:u,children:[!t.default&&e.jsx("option",{value:"",children:"Bitte wählen..."}),t.options?.map(p=>e.jsx("option",{value:p.value,children:p.label},p.value))]});case"number":return e.jsx("input",{type:"number",value:n||"",onChange:p=>s(t.key,p.target.value),placeholder:t.placeholder||"",min:t.validation?.min,max:t.validation?.max,style:d,onFocus:l,onBlur:u});default:return e.jsx("input",{type:"text",value:n||"",onChange:p=>s(t.key,p.target.value),placeholder:t.placeholder||"",style:d,onFocus:l,onBlur:u})}};return e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:600,color:g.slate[700]},children:[t.label,t.required&&e.jsx("span",{style:{color:g.red[500],marginLeft:"4px"},children:"*"})]}),c(),x&&e.jsxs("p",{style:{marginTop:"6px",fontSize:"13px",color:g.red[500],display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ie,{style:{width:"14px",height:"14px"}}),x]}),t.hint&&!x&&e.jsxs("p",{style:{marginTop:"6px",fontSize:"13px",color:g.slate[500],display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(me,{style:{width:"14px",height:"14px"}}),t.hint]})]})},Rt=({scenario:t,onBack:n,onNext:s})=>{const[x,f]=i.useState({}),[a,d]=i.useState({}),{branding:o}=re(),l=o?.["--header-gradient"]||xe["--header-gradient"],u=o?.["--button-gradient"]||l,c=o?.["--primary-accent"]||xe["--primary-accent"],p=o?.["--primary-accent-light"]||xe["--primary-accent-light"],m=i.useMemo(()=>{if(!t?.input_configuration)return[];try{return(Array.isArray(t.input_configuration)?t.input_configuration:[]).filter(y=>y.user_input!==!1)}catch(r){return console.error("Error parsing input_configuration:",r),[]}},[t?.input_configuration]);i.useEffect(()=>{const r={};m.forEach(y=>{y.default&&(r[y.key]=y.default)}),f(r)},[m]);const v=(r,y)=>{f(b=>({...b,[r]:y})),a[r]&&d(b=>{const w={...b};return delete w[r],w})},k=()=>{const r={};return m.forEach(y=>{const b=x[y.key];if(y.required&&(!b||typeof b=="string"&&b.trim()==="")){r[y.key]="Dieses Feld ist erforderlich";return}if(!(!b||typeof b=="string"&&b.trim()==="")&&y.validation){const{minLength:w,maxLength:S,min:F,max:R,pattern:W}=y.validation;w&&b.length<w&&(r[y.key]=`Mindestens ${w} Zeichen erforderlich`),S&&b.length>S&&(r[y.key]=`Maximal ${S} Zeichen erlaubt`),F!==void 0&&Number(b)<F&&(r[y.key]=`Mindestens ${F}`),R!==void 0&&Number(b)>R&&(r[y.key]=`Maximal ${R}`),W&&!new RegExp(W).test(b)&&(r[y.key]="Ungültiges Format")}}),d(r),Object.keys(r).length===0},E=r=>{r.preventDefault(),k()&&s(x)};return i.useEffect(()=>{m.length===0&&s({})},[m,s]),m.length===0?null:e.jsxs("div",{style:{padding:"24px",paddingBottom:"200px",maxWidth:"640px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("button",{onClick:n,style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"8px 12px",marginBottom:"16px",border:"none",background:"transparent",color:g.slate[600],fontSize:"14px",cursor:"pointer",borderRadius:"8px",transition:"background 0.2s"},onMouseEnter:r=>r.target.style.background=g.slate[100],onMouseLeave:r=>r.target.style.background="transparent",children:[e.jsx(Ne,{style:{width:"18px",height:"18px"}}),"Zurück zur Übersicht"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"14px",background:l,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(V,{style:{width:"28px",height:"28px",color:"white"}})}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"24px",fontWeight:700,color:g.slate[900],margin:0},children:t.title}),e.jsx("p",{style:{fontSize:"14px",color:g.slate[600],margin:"4px 0 0 0"},children:"Personalisiere dein Training"})]})]})]}),t.description&&e.jsx("div",{style:{padding:"16px 20px",borderRadius:"12px",backgroundColor:g.slate[100],marginBottom:"24px"},children:e.jsx("p",{style:{fontSize:"14px",color:g.slate[700],margin:0,lineHeight:1.6},children:t.description})}),e.jsxs("div",{style:{padding:"16px 20px",borderRadius:"12px",backgroundColor:p,marginBottom:"24px",display:"flex",alignItems:"flex-start",gap:"12px"},children:[e.jsx(me,{style:{width:"20px",height:"20px",color:c,flexShrink:0,marginTop:"2px"}}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"14px",fontWeight:600,color:g.slate[900],margin:"0 0 4px 0"},children:"So funktioniert es"}),e.jsxs("p",{style:{fontSize:"13px",color:g.slate[600],margin:0,lineHeight:1.5},children:["Die KI generiert ",t.question_count||5," personalisierte Fragen basierend auf deinen Angaben. Beantworte jede Frage vor der Kamera und erhalte anschließend detailliertes Feedback."]})]})]}),e.jsxs("form",{onSubmit:E,children:[m.map(r=>e.jsx(zt,{field:r,value:x[r.key],onChange:v,error:a[r.key],focusColor:c},r.key)),e.jsxs("button",{type:"submit",style:{width:"100%",padding:"16px 24px",borderRadius:"14px",border:"none",background:u,color:"white",fontSize:"16px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",transition:"transform 0.2s, box-shadow 0.2s",boxShadow:`0 4px 12px ${c}4d`,marginTop:"24px"},onMouseEnter:r=>{r.target.style.transform="translateY(-2px)",r.target.style.boxShadow=`0 6px 16px ${c}66`},onMouseLeave:r=>{r.target.style.transform="none",r.target.style.boxShadow=`0 4px 12px ${c}4d`},children:["Weiter",e.jsx(ot,{style:{width:"20px",height:"20px"}})]})]})]})},_e={error:{bg:g.red[50],border:g.red[200],text:g.red[600],icon:ie},warning:{bg:g.amber[50],border:g.amber[200],text:g.amber[600],icon:at},success:{bg:g.green[50],border:g.green[200],text:g.green[600],icon:ye},info:{bg:g.blue[50],border:g.blue[200],text:g.blue[500],icon:me},loading:{bg:g.blue[50],border:g.blue[200],text:g.blue[500],icon:Pe}},At=({variant:t="info",message:n,children:s,isToast:x=!1,onDismiss:f,className:a="",style:d={}})=>{const o=_e[t]||_e.info,l=o.icon,u=t==="loading",c={display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",borderRadius:"12px",backgroundColor:o.bg,border:`1px solid ${o.border}`,color:o.text,fontSize:"14px",fontWeight:500,...x&&{position:"fixed",bottom:"24px",left:"50%",transform:"translateX(-50%)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3,maxWidth:"90%"},...d};return e.jsxs("div",{style:c,className:a,children:[e.jsx(l,{size:20,style:{flexShrink:0,...u&&{animation:"spin 1s linear infinite"}},className:u?"animate-spin":""}),e.jsx("span",{style:{flex:1},children:s||n}),f&&e.jsx("button",{onClick:f,style:{background:"none",border:"none",padding:"4px",cursor:"pointer",color:o.text,opacity:.7,display:"flex",alignItems:"center",justifyContent:"center"},"aria-label":"Schließen",children:e.jsx(ue,{size:16})})]})},Bt=({message:t,onDismiss:n,...s})=>e.jsx(At,{variant:"error",message:t,isToast:!0,onDismiss:n,...s}),Et=()=>{const[t,n]=i.useState(!1),[s,x]=i.useState(null),{demoCode:f}=re(),a=i.useCallback(async(o,l,u)=>{x(null),n(!0);try{const c=await o();l(c)}catch(c){console.error("[useSessionStartup] Error:",c);const p=c.message||"Ein Fehler ist aufgetreten";x(p),n(!1),u?.(c)}},[]),d=i.useCallback(()=>{x(null)},[]);return{isSubmitting:t,submitError:s,demoCode:f,startSession:a,clearError:d}},Tt=({scenario:t,variables:n,onBack:s,onStart:x})=>{const{isSubmitting:f,submitError:a,demoCode:d,startSession:o,clearError:l}=Et(),u=async({selectedMicrophoneId:c,selectedCameraId:p})=>{await o(async()=>{const m=je(),v=await fetch(`${m}/video-training/sessions`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":Z()},body:JSON.stringify({scenario_id:t.id,variables:n,demo_code:d||null})});if(!v.ok){const w=await v.json().catch(()=>({}));throw new Error(w.message||"Fehler beim Erstellen der Session")}const k=await v.json(),E=k.data?.session||k.session;if(!E)throw new Error("Keine Session-ID erhalten");const r=await fetch(`${m}/video-training/sessions/${E.id}/questions`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":Z()},body:JSON.stringify({variables:n})});if(!r.ok){const w=await r.json().catch(()=>({}));throw new Error(w.message||"Fehler beim Generieren der Fragen")}const y=await r.json(),b=y.data?.questions||y.questions||[];return{session:{...E,questions:b},questions:b,scenario:t,variables:n,selectedMicrophoneId:c,selectedCameraId:p}},x)};return e.jsxs(e.Fragment,{children:[e.jsx(ft,{mode:"audio-video",scenario:t,onBack:s,onStart:u,title:t?.title,startButtonLabel:"Video-Training starten",icon:V}),a&&e.jsx(Bt,{message:a,onDismiss:l}),e.jsx(ht,{isLoading:f,message:"Fragen werden generiert...",subMessage:"Die KI erstellt personalisierte Fragen basierend auf deinen Angaben."})]})},Me=({tips:t,primaryAccent:n})=>{const[s,x]=i.useState(!1);return!t||t.length===0?null:e.jsxs("div",{style:{marginTop:"16px",background:`linear-gradient(135deg, ${n}08 0%, ${n}04 100%)`,borderRadius:"12px",border:`1px solid ${n}15`,overflow:"hidden"},children:[e.jsxs("button",{onClick:()=>x(!s),style:{width:"100%",padding:"14px 16px",background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:600,color:"#0f172a"},children:[e.jsx(be,{size:18,color:n}),"Tipps für diese Frage"]}),e.jsx(fe,{size:18,color:"#64748b",style:{transform:s?"rotate(90deg)":"none",transition:"transform 0.2s"}})]}),e.jsx($e,{children:s&&e.jsx(B.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},style:{overflow:"hidden"},children:e.jsx("div",{style:{padding:"0 16px 16px"},children:e.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:t.map((f,a)=>e.jsx("li",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px",lineHeight:1.5},children:f},a))})})})})]})},Dt=({session:t,questions:n,scenario:s,variables:x,onComplete:f,onExit:a,selectedMicrophoneId:d,selectedCameraId:o})=>{const[l,u]=i.useState(0),[c,p]=i.useState(!1),[m,v]=i.useState(!1),[k,E]=i.useState(0),[r,y]=i.useState([]),[b,w]=i.useState([]),[S,F]=i.useState(null),[R,W]=i.useState(null),[N,_]=i.useState(!1),[se,J]=i.useState(!1),[Y,P]=i.useState(null),[q,oe]=i.useState(d||null),[U,I]=i.useState(o||null),[Ge,ae]=i.useState(!1),[Se,ve]=i.useState(0),M=yt(),ee=i.useRef(null),le=i.useRef(null),$=i.useRef(null),K=i.useRef(null),de=i.useRef(null),H=i.useRef(null),ke=mt(),{primaryAccent:T,headerGradient:we}=ke,A=n[l];i.useEffect(()=>(G(),()=>{ce(),$.current&&clearInterval($.current),H.current&&cancelAnimationFrame(H.current),K.current&&K.current.close()}),[]);const qe=h=>{try{K.current&&K.current.close();const z=new(window.AudioContext||window.webkitAudioContext);K.current=z;const j=z.createAnalyser();j.fftSize=256,j.smoothingTimeConstant=.8,de.current=j,z.createMediaStreamSource(h).connect(j);const L=new Uint8Array(j.frequencyBinCount),O=()=>{if(!de.current)return;de.current.getByteFrequencyData(L);const pe=L.reduce((Ze,Je)=>Ze+Je,0)/L.length;ve(pe/255),H.current=requestAnimationFrame(O)};O()}catch(z){console.error("[VIDEO TRAINING] Audio analysis error:",z)}},Ue=()=>{H.current&&(cancelAnimationFrame(H.current),H.current=null),ve(0)},G=async(h=q,z=U)=>{try{W(null),S&&S.getTracks().forEach(O=>O.stop());const j=z?{deviceId:{exact:z},width:{ideal:1280},height:{ideal:720}}:{width:{ideal:1280},height:{ideal:720},facingMode:"user"},D=h?{deviceId:{exact:h}}:!0,L=await navigator.mediaDevices.getUserMedia({video:j,audio:D});F(L),ee.current&&(ee.current.srcObject=L)}catch(j){console.error("[VIDEO TRAINING] Camera error:",j),W("Kamera konnte nicht gestartet werden. Bitte erlaube den Zugriff auf Kamera und Mikrofon.")}},Ke=h=>{oe(h),c||G(h,U)},Xe=h=>{I(h),c||G(q,h)},ce=()=>{S&&(S.getTracks().forEach(h=>h.stop()),F(null))},Ce=()=>{if(!S){G();return}try{const h=new MediaRecorder(S,{mimeType:"video/webm;codecs=vp9,opus"});le.current=h;const z=[];h.ondataavailable=j=>{j.data.size>0&&(z.push(j.data),y(D=>[...D,j.data]))},h.onstop=()=>{},h.start(1e3),p(!0),v(!1),qe(S),w(j=>[...j,{question_index:l,start_time:k}]),$.current=setInterval(()=>{E(j=>j+1)},1e3)}catch(h){console.error("[VIDEO TRAINING] Recording error:",h),P("Fehler beim Starten der Aufnahme")}},te=()=>{le.current&&c&&(le.current.stop(),p(!1),Ue(),$.current&&(clearInterval($.current),$.current=null))},Ie=()=>{l<n.length-1&&(c&&w(h=>[...h,{question_index:l+1,start_time:k}]),u(h=>h+1))},ze=()=>{l>0&&u(h=>h-1)},Re=async()=>{te(),ce(),_(!0),P(null);try{const h=new Blob(r,{type:"video/webm"}),z=je(),j=new FormData;j.append("video",h,`video_${t.id}.webm`),j.append("video_duration",k.toString()),j.append("timeline",JSON.stringify(b));const D=await fetch(`${z}/video-training/sessions/${t.id}/video`,{method:"POST",headers:{"X-WP-Nonce":Z()},body:j});if(!D.ok){const pe=await D.text();throw console.error("[VIDEO TRAINING] Upload failed:",D.status,pe),D.status===413?new Error("Das Video ist zu groß zum Hochladen. Bitte versuche eine kürzere Aufnahme."):new Error("Fehler beim Hochladen des Videos. Status: "+D.status)}const L=await D.json();_(!1),J(!0);const O=await fetch(`${z}/video-training/sessions/${t.id}/analyze`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":Z()}});if(!O.ok)throw new Error("Fehler bei der Video-Analyse");const X=await O.json();f({session:X.data?.session||t,analysis:X.data?.analysis,categoryScores:X.data?.category_scores,overallScore:X.data?.overall_score})}catch(h){console.error("[VIDEO TRAINING] Upload/Analysis error:",h),P(h.message),_(!1),J(!1)}},Qe=()=>{te(),ce(),a()};return N||se?e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,background:"linear-gradient(135deg, #f8fafc 0%, #eff6ff 50%, #f0fdfa 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:[e.jsxs(B.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},style:{background:"#fff",borderRadius:"20px",padding:"48px",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.1)",maxWidth:"500px",width:"100%",textAlign:"center"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:`${T}15`,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},children:e.jsx(Pe,{size:40,color:T,style:{animation:"spin 1s linear infinite"}})}),e.jsx("h2",{style:{fontSize:"22px",fontWeight:700,color:"#0f172a",marginBottom:"12px"},children:N?"Video wird hochgeladen...":"KI analysiert dein Video..."}),e.jsx("p",{style:{color:"#64748b",fontSize:"15px",lineHeight:1.6},children:N?"Dein Video wird sicher übertragen. Dies kann je nach Dateigröße einen Moment dauern.":"Die KI analysiert dein Auftreten, deine Körpersprache und Kommunikation. Das dauert etwa 30-60 Sekunden."})]}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]}):e.jsxs("div",{style:{padding:M?"16px":"24px",maxWidth:"1000px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:M?"column":"row",justifyContent:"space-between",alignItems:M?"stretch":"center",gap:M?"12px":"0",marginBottom:"24px"},children:[e.jsx("h1",{style:{fontSize:M?"18px":"20px",fontWeight:600,color:"#0f172a",margin:0},children:s?.title}),e.jsx("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:e.jsxs("button",{onClick:Qe,style:{padding:M?"10px 14px":"8px 16px",borderRadius:"8px",background:"#f1f5f9",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",color:"#64748b",fontSize:"14px"},children:[e.jsx(ue,{size:16}),"Abbrechen"]})})]}),e.jsx(jt,{current:l,total:n.length,primaryAccent:T,b:ke,showCompleted:!1}),M?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"16px",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"26px",height:"26px",borderRadius:"50%",background:we,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"12px",fontWeight:600,flexShrink:0},children:l+1}),e.jsx("span",{style:{fontSize:"13px",color:"#64748b"},children:A?.category||"Frage"})]}),e.jsx("p",{style:{fontSize:"15px",fontWeight:600,color:"#0f172a",lineHeight:1.5,margin:0},children:A?.question||"Frage wird geladen..."}),A?.estimated_time&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:"#64748b",fontSize:"13px",marginTop:"12px"},children:[e.jsx(Q,{size:14}),"Empfohlene Antwortzeit: ~",Math.round(A.estimated_time/60)," Min."]}),s?.enable_tips&&A?.tips&&e.jsx(Me,{tips:A.tips,primaryAccent:T})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{position:"relative",background:"#000",borderRadius:"16px",overflow:"hidden",aspectRatio:"16/9"},children:[R?e.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#fff",padding:"16px",textAlign:"center"},children:[e.jsx(Ae,{size:40,style:{marginBottom:"12px",opacity:.6}}),e.jsx("p",{style:{marginBottom:"12px",fontSize:"14px"},children:R}),e.jsxs("button",{onClick:G,style:{padding:"10px 16px",borderRadius:"8px",background:T,color:"#fff",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},children:[e.jsx(ge,{size:16}),"Erneut versuchen"]})]}):e.jsx("video",{ref:ee,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",height:"100%",objectFit:"cover",transform:"scaleX(-1)"}}),c&&e.jsxs("div",{style:{position:"absolute",top:"12px",left:"12px",display:"flex",alignItems:"center",gap:"6px",background:"rgba(0, 0, 0, 0.6)",padding:"6px 12px",borderRadius:"6px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#ef4444",animation:"pulse 1.5s infinite"}}),e.jsx("span",{style:{color:"#fff",fontSize:"13px",fontWeight:500},children:ne(k)})]}),!c&&k>0&&e.jsxs("div",{style:{position:"absolute",top:"12px",left:"12px",display:"flex",alignItems:"center",gap:"6px",background:"rgba(0, 0, 0, 0.6)",padding:"6px 12px",borderRadius:"6px"},children:[e.jsx(Q,{size:14,color:"#fff"}),e.jsx("span",{style:{color:"#fff",fontSize:"13px"},children:ne(k)})]})]}),c&&e.jsx("div",{style:{marginTop:"16px"},children:e.jsx(We,{audioLevel:Se,isActive:!0,variant:"bars",size:"sm",accentColor:T})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginTop:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[e.jsx("button",{onClick:()=>ae(!0),style:{padding:"14px",borderRadius:"12px",background:"#f1f5f9",border:"1px solid #e2e8f0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Be,{size:20,color:"#64748b"})}),c?e.jsxs("button",{onClick:te,style:{padding:"14px 24px",borderRadius:"12px",background:"#f1f5f9",color:"#0f172a",border:"none",cursor:"pointer",fontSize:"15px",fontWeight:600,display:"flex",alignItems:"center",gap:"10px",flex:1,justifyContent:"center"},children:[e.jsx(Ee,{size:20,color:"#ef4444"}),"Aufnahme pausieren"]}):e.jsxs("button",{onClick:Ce,disabled:!S,style:{padding:"14px 24px",borderRadius:"12px",background:S?"#ef4444":"#94a3b8",color:"#fff",border:"none",cursor:S?"pointer":"not-allowed",fontSize:"15px",fontWeight:600,display:"flex",alignItems:"center",gap:"10px",flex:1,justifyContent:"center",boxShadow:S?"0 4px 14px rgba(239, 68, 68, 0.4)":"none"},children:[e.jsx(V,{size:20}),"Aufnahme starten"]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[s?.enable_navigation&&l>0&&e.jsxs("button",{onClick:ze,style:{padding:"10px 14px",borderRadius:"8px",background:"#fff",border:"1px solid #e2e8f0",cursor:"pointer",color:"#0f172a",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",fontSize:"13px",flex:1},children:[e.jsx(Te,{size:16}),"Zurück"]}),s?.enable_navigation&&l<n.length-1&&e.jsxs("button",{onClick:Ie,style:{padding:"10px 14px",borderRadius:"8px",background:T,border:"none",cursor:"pointer",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",fontSize:"13px",fontWeight:500,flex:1},children:["Nächste",e.jsx(fe,{size:16})]}),e.jsxs("button",{onClick:Re,disabled:r.length===0,style:{padding:"10px 14px",borderRadius:"8px",background:r.length===0?"#94a3b8":"#22c55e",border:"none",cursor:r.length===0?"not-allowed":"pointer",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",fontSize:"13px",fontWeight:600,flex:1,boxShadow:r.length>0?"0 4px 14px rgba(34, 197, 94, 0.3)":"none"},children:[e.jsx(De,{size:16}),"Abschließen"]})]})]})]})]}):e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{position:"relative",background:"#000",borderRadius:"16px",overflow:"hidden",aspectRatio:"16/9"},children:[R?e.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#fff",padding:"20px",textAlign:"center"},children:[e.jsx(Ae,{size:48,style:{marginBottom:"16px",opacity:.6}}),e.jsx("p",{style:{marginBottom:"16px"},children:R}),e.jsxs("button",{onClick:G,style:{padding:"10px 20px",borderRadius:"8px",background:T,color:"#fff",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(ge,{size:16}),"Erneut versuchen"]})]}):e.jsx("video",{ref:ee,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",height:"100%",objectFit:"cover",transform:"scaleX(-1)"}}),c&&e.jsxs("div",{style:{position:"absolute",top:"16px",left:"16px",display:"flex",alignItems:"center",gap:"8px",background:"rgba(0, 0, 0, 0.6)",padding:"8px 14px",borderRadius:"8px"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:"#ef4444",animation:"pulse 1.5s infinite"}}),e.jsx("span",{style:{color:"#fff",fontSize:"14px",fontWeight:500},children:ne(k)})]}),!c&&k>0&&e.jsxs("div",{style:{position:"absolute",top:"16px",left:"16px",display:"flex",alignItems:"center",gap:"8px",background:"rgba(0, 0, 0, 0.6)",padding:"8px 14px",borderRadius:"8px"},children:[e.jsx(Q,{size:16,color:"#fff"}),e.jsx("span",{style:{color:"#fff",fontSize:"14px"},children:ne(k)})]})]}),c&&e.jsx("div",{style:{marginTop:"20px"},children:e.jsx(We,{audioLevel:Se,isActive:!0,variant:"bars",size:"sm",accentColor:T})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px",marginTop:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"12px"},children:[e.jsx("button",{onClick:()=>ae(!0),style:{padding:"14px",borderRadius:"12px",background:"#f1f5f9",border:"1px solid #e2e8f0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Be,{size:20,color:"#64748b"})}),c?e.jsxs("button",{onClick:te,style:{padding:"14px 28px",borderRadius:"12px",background:"#f1f5f9",color:"#0f172a",border:"none",cursor:"pointer",fontSize:"16px",fontWeight:600,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(Ee,{size:20,color:"#ef4444"}),"Aufnahme pausieren"]}):e.jsxs("button",{onClick:Ce,disabled:!S,style:{padding:"14px 28px",borderRadius:"12px",background:S?"#ef4444":"#94a3b8",color:"#fff",border:"none",cursor:S?"pointer":"not-allowed",fontSize:"16px",fontWeight:600,display:"flex",alignItems:"center",gap:"10px",boxShadow:S?"0 4px 14px rgba(239, 68, 68, 0.4)":"none"},children:[e.jsx(V,{size:20}),"Aufnahme starten"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"12px",flexWrap:"wrap"},children:[s?.enable_navigation&&l>0&&e.jsxs("button",{onClick:ze,style:{padding:"10px 16px",borderRadius:"8px",background:"#fff",border:"1px solid #e2e8f0",cursor:"pointer",color:"#0f172a",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px"},children:[e.jsx(Te,{size:18}),"Vorherige"]}),s?.enable_navigation&&l<n.length-1&&e.jsxs("button",{onClick:Ie,style:{padding:"10px 16px",borderRadius:"8px",background:T,border:"none",cursor:"pointer",color:"#fff",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:500},children:["Nächste",e.jsx(fe,{size:18})]}),e.jsxs("button",{onClick:Re,disabled:r.length===0,style:{padding:"10px 20px",borderRadius:"8px",background:r.length===0?"#94a3b8":"#22c55e",border:"none",cursor:r.length===0?"not-allowed":"pointer",color:"#fff",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:600,boxShadow:r.length>0?"0 4px 14px rgba(34, 197, 94, 0.3)":"none"},children:[e.jsx(De,{size:18}),"Training abschließen"]})]})]})]}),e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"24px",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:we,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"13px",fontWeight:600},children:l+1}),e.jsx("span",{style:{fontSize:"14px",color:"#64748b"},children:A?.category||"Frage"})]}),e.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:"#0f172a",lineHeight:1.5,marginBottom:"16px"},children:A?.question||"Frage wird geladen..."}),A?.estimated_time&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:"#64748b",fontSize:"14px",marginBottom:"16px"},children:[e.jsx(Q,{size:16}),"Empfohlene Antwortzeit: ~",Math.round(A.estimated_time/60)," Min."]}),s?.enable_tips&&A?.tips&&e.jsx(Me,{tips:A.tips,primaryAccent:T})]})]}),Y&&e.jsxs(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},style:{marginTop:"24px",padding:"16px",background:"#fef2f2",borderRadius:"12px",border:"1px solid #fecaca",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(ie,{size:20,color:"#ef4444"}),e.jsx("p",{style:{color:"#dc2626",fontSize:"14px",flex:1},children:Y}),e.jsx("button",{onClick:()=>P(null),style:{background:"none",border:"none",cursor:"pointer",padding:"4px"},children:e.jsx(ue,{size:16,color:"#ef4444"})})]}),e.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
          }
          @keyframes spin { to { transform: rotate(360deg); } }
        `}),e.jsx(bt,{isOpen:Ge,onClose:()=>ae(!1),mode:"audio-video",selectedMicrophoneId:q,onMicrophoneChange:Ke,selectedCameraId:U,onCameraChange:Xe})]})},Ft={auftreten:ct,selbstbewusstsein:Fe,koerpersprache:he,kommunikation:dt,professionalitaet:Fe,inhalt:be},Wt=({score:t,size:n=120,strokeWidth:s=10,primaryAccent:x})=>{const f=(n-s)/2,a=f*2*Math.PI,d=a-t/100*a,o=()=>t>=80?"#22c55e":t>=60?x:t>=40?"#f59e0b":"#ef4444";return e.jsxs("div",{style:{position:"relative",width:n,height:n,margin:"0 auto"},children:[e.jsxs("svg",{width:n,height:n,style:{transform:"rotate(-90deg)"},children:[e.jsx("circle",{cx:n/2,cy:n/2,r:f,fill:"none",stroke:"#e2e8f0",strokeWidth:s}),e.jsx(B.circle,{cx:n/2,cy:n/2,r:f,fill:"none",stroke:o(),strokeWidth:s,strokeLinecap:"round",strokeDasharray:a,initial:{strokeDashoffset:a},animate:{strokeDashoffset:d},transition:{duration:1.2,ease:"easeOut"}})]}),e.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsx("span",{style:{fontSize:n/3,fontWeight:700,color:o()},children:Math.round(t)}),e.jsx("span",{style:{fontSize:n/10,color:"#64748b"},children:"von 100"})]})]})},Vt=({category:t,primaryAccent:n})=>{const[s,x]=i.useState(!1),f=Ft[t.category]||He,a=d=>d>=80?"#22c55e":d>=60?n:d>=40?"#f59e0b":"#ef4444";return e.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{background:"#fff",borderRadius:"12px",border:"1px solid #e2e8f0",overflow:"hidden",marginBottom:"12px"},children:[e.jsxs("button",{onClick:()=>x(!s),style:{width:"100%",padding:"16px",background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:`${a(t.score)}15`,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(f,{size:20,color:a(t.score)})}),e.jsxs("div",{style:{flex:1,textAlign:"left",minWidth:0,overflow:"hidden"},children:[e.jsx("h4",{style:{fontSize:"15px",fontWeight:600,color:"#0f172a",marginBottom:"2px"},children:t.label}),e.jsxs("p",{style:{fontSize:"13px",color:"#64748b",margin:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[t.feedback?.substring(0,60),"..."]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("span",{style:{fontSize:"20px",fontWeight:700,color:a(t.score)},children:Math.round(t.score)}),e.jsx(pt,{size:20,color:"#64748b",style:{transform:s?"rotate(180deg)":"none",transition:"transform 0.2s"}})]})]}),e.jsx($e,{children:s&&e.jsx(B.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},style:{overflow:"hidden"},children:e.jsxs("div",{style:{padding:"0 16px 16px",borderTop:"1px solid #e2e8f0",paddingTop:"16px"},children:[e.jsx("p",{style:{fontSize:"14px",color:"#64748b",lineHeight:1.6,marginBottom:"16px"},children:t.feedback}),t.strengths&&t.strengths.length>0&&e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("h5",{style:{fontSize:"13px",fontWeight:600,color:"#22c55e",marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(ye,{size:14}),"Stärken"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:t.strengths.map((d,o)=>e.jsx("li",{style:{fontSize:"13px",color:"#64748b",marginBottom:"4px"},children:d},o))})]}),t.improvements&&t.improvements.length>0&&e.jsxs("div",{children:[e.jsxs("h5",{style:{fontSize:"13px",fontWeight:600,color:"#f59e0b",marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(ie,{size:14}),"Verbesserungspotenzial"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:t.improvements.map((d,o)=>e.jsx("li",{style:{fontSize:"13px",color:"#64748b",marginBottom:"4px"},children:d},o))})]})]})})})]})},_t=({session:t,scenario:n,onBackToDashboard:s,onStartNew:x})=>{const{branding:f}=re(),a=f?.primaryAccent||"#3A7FA7",d=f?.headerGradient||"linear-gradient(135deg, #3A7FA7 0%, #2d6a8a 100%)",o=t?.overall_score||0,l=t?.category_scores||[],u=t?.analysis||{},c=t?.summary_feedback||"",p=m=>m>=90?"Ausgezeichnet!":m>=80?"Sehr gut!":m>=70?"Gut!":m>=60?"Solide Leistung":m>=50?"Ausbaufähig":"Weiter üben!";return e.jsxs("div",{style:{padding:"32px",maxWidth:"900px",margin:"0 auto"},children:[e.jsxs(B.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},style:{textAlign:"center",marginBottom:"40px"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:d,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.15)"},children:e.jsx(lt,{size:40,color:"#fff"})}),e.jsx("h1",{style:{fontSize:"28px",fontWeight:700,color:"#0f172a",marginBottom:"8px"},children:"Training abgeschlossen!"}),e.jsxs("p",{style:{fontSize:"16px",color:"#64748b"},children:[n?.title," - Deine Auswertung ist bereit"]})]}),e.jsxs(B.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},style:{background:"#fff",borderRadius:"20px",padding:"32px",textAlign:"center",border:"1px solid #e2e8f0",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)",marginBottom:"24px"},children:[e.jsx(Wt,{score:o,size:160,primaryAccent:a}),e.jsx("h2",{style:{fontSize:"24px",fontWeight:700,color:"#0f172a",marginTop:"20px",marginBottom:"8px"},children:p(o)}),e.jsx("p",{style:{fontSize:"15px",color:"#64748b",maxWidth:"500px",margin:"0 auto",lineHeight:1.6},children:c||"Deine Video-Analyse wurde erfolgreich abgeschlossen."})]}),l.length>0&&e.jsxs(B.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},style:{marginBottom:"24px"},children:[e.jsxs("h3",{style:{fontSize:"18px",fontWeight:600,color:"#0f172a",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(He,{size:20,color:a}),"Detaillierte Bewertung"]}),l.map((m,v)=>e.jsx(Vt,{category:m,primaryAccent:a},m.category||v))]}),u&&(u.key_strengths?.length>0||u.actionable_tips?.length>0)&&e.jsxs(B.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},style:{background:"#fff",borderRadius:"16px",padding:"24px",border:"1px solid #e2e8f0",marginBottom:"24px"},children:[u.key_strengths&&u.key_strengths.length>0&&e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("h4",{style:{fontSize:"16px",fontWeight:600,color:"#22c55e",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(ye,{size:18}),"Deine Stärken"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"24px"},children:u.key_strengths.map((m,v)=>e.jsx("li",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px",lineHeight:1.5},children:m},v))})]}),u.actionable_tips&&u.actionable_tips.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{style:{fontSize:"16px",fontWeight:600,color:a,marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(be,{size:18}),"Tipps zur Verbesserung"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"24px"},children:u.actionable_tips.map((m,v)=>e.jsx("li",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px",lineHeight:1.5},children:m},v))})]})]}),t?.video_url&&e.jsxs(B.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},style:{background:"#fff",borderRadius:"16px",padding:"24px",border:"1px solid #e2e8f0",marginBottom:"24px"},children:[e.jsxs("h4",{style:{fontSize:"16px",fontWeight:600,color:"#0f172a",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(V,{size:18,color:a}),"Deine Aufnahme"]}),e.jsx("video",{src:t.video_url,controls:!0,style:{width:"100%",maxWidth:"640px",maxHeight:"360px",borderRadius:"12px",background:"#000",objectFit:"contain"}})]}),e.jsxs(B.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},style:{display:"flex",gap:"16px",justifyContent:"center"},children:[e.jsxs("button",{onClick:s,style:{padding:"14px 28px",borderRadius:"12px",background:"#f1f5f9",color:"#0f172a",border:"none",cursor:"pointer",fontSize:"15px",fontWeight:500,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Ne,{size:18}),"Zur Übersicht"]}),e.jsxs("button",{onClick:x,style:{padding:"14px 28px",borderRadius:"12px",background:d,color:"#fff",border:"none",cursor:"pointer",fontSize:"15px",fontWeight:600,display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 14px rgba(0, 0, 0, 0.15)"},children:[e.jsx(ge,{size:18}),"Nochmal üben"]})]})]})},C={DASHBOARD:"dashboard",VARIABLES:"variables",DEVICE_SETUP:"device_setup",SESSION:"session",COMPLETE:"complete"},Xt=({isAuthenticated:t,requireAuth:n,setPendingAction:s,pendingScenario:x,clearPendingScenario:f,onNavigateToHistory:a})=>{const[d,o]=i.useState(C.DASHBOARD),[l,u]=i.useState(null),[c,p]=i.useState(null),[m,v]=i.useState([]),[k,E]=i.useState({}),[r,y]=i.useState(null),[b,w]=i.useState(null),[S,F]=i.useState(null),[R,W]=i.useState(null);i.useEffect(()=>{x&&t&&(u(x),o(C.VARIABLES),f&&f())},[x,t,f]),i.useEffect(()=>{R&&t&&(u(R),o(C.VARIABLES),W(null))},[R,t]),i.useEffect(()=>{window.scrollTo(0,0)},[d]);const N=i.useCallback(I=>{u(I),o(C.VARIABLES)},[]),_=i.useCallback(()=>{u(null),p(null),v([]),E({}),y(null),w(null),F(null),o(C.DASHBOARD)},[]),se=i.useCallback(I=>{E(I),o(C.DEVICE_SETUP)},[]),J=i.useCallback(()=>{o(C.VARIABLES)},[]),Y=i.useCallback(I=>{p(I.session),v(I.questions),E(I.variables),w(I.selectedMicrophoneId),F(I.selectedCameraId),o(C.SESSION)},[]),P=i.useCallback(I=>{y(I.session),o(C.COMPLETE)},[]),q=i.useCallback(()=>{_()},[_]),oe=i.useCallback(()=>{p(null),v([]),y(null),w(null),F(null),o(C.VARIABLES)},[]),U=()=>{switch(d){case C.DASHBOARD:return e.jsx(Ve,{onSelectScenario:N,isAuthenticated:t,requireAuth:n,setPendingScenario:W,onNavigateToHistory:a});case C.VARIABLES:return e.jsx(Rt,{scenario:l,onBack:_,onNext:se});case C.DEVICE_SETUP:return e.jsx(Tt,{scenario:l,variables:k,onBack:J,onStart:Y});case C.SESSION:return e.jsx(Dt,{session:c,questions:m,scenario:l,variables:k,onComplete:P,onExit:q,selectedMicrophoneId:b,selectedCameraId:S});case C.COMPLETE:return e.jsx(_t,{session:r,scenario:l,onBackToDashboard:_,onStartNew:oe});default:return e.jsx(Ve,{onSelectScenario:N,isAuthenticated:t,requireAuth:n,setPendingScenario:W,onNavigateToHistory:a})}};return e.jsx("div",{style:{minHeight:"100%"},children:U()})};export{Xt as V,Ve as a,Dt as b,_t as c};
