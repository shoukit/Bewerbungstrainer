import{j as t,Q as S,a as v,I as w,r as z,b as $,l as k}from"./ui-vendor-DceLfMgS.js";import{a as c,d as _}from"./react-vendor-uDOJF2jQ.js";import{u as R}from"./useBranding-vyTCBMMQ.js";import{C as a}from"./colors-BoNy0q8t.js";import{D as C}from"./DynamicFormField-DnQbAYY6.js";import"./designTokens-DbcSlXo4.js";const M=({scenario:s,onBack:f,onNext:p})=>{const[o,g]=c.useState({}),[x,u]=c.useState({}),e=R(),h=r=>{if(!r)return r;let i=r;return Object.entries(o).forEach(([n,d])=>{const j=new RegExp(`\\{\\{${n}\\}\\}`,"g");i=i.replace(j,d||"")}),i},l=_.useMemo(()=>s?.variables_schema?s.variables_schema.filter(r=>r.user_input!==!1):[],[s?.variables_schema]);c.useEffect(()=>{if(s?.variables_schema){const r={};s.variables_schema.forEach(i=>{i.default&&(r[i.key]=i.default)}),g(r)}},[s?.variables_schema]);const m=(r,i)=>{g(n=>({...n,[r]:i})),x[r]&&u(n=>{const d={...n};return delete d[r],d})},y=()=>{const r={};return l.forEach(i=>{const n=o[i.key];i.required&&(!n||n.toString().trim()==="")&&(r[i.key]=`${i.label} ist ein Pflichtfeld`)}),u(r),Object.keys(r).length===0},b=r=>{r.preventDefault(),y()&&p(o)};return c.useEffect(()=>{if(l.length===0){const r={};s?.variables_schema?.forEach(i=>{i.default&&(r[i.key]=i.default)}),p(r)}},[l,s,p]),l.length===0?null:t.jsxs("div",{style:{padding:e.space[6],paddingBottom:"200px",maxWidth:"640px",margin:"0 auto"},children:[t.jsxs("div",{style:{marginBottom:e.space[8]},children:[t.jsxs("button",{onClick:f,style:{display:"inline-flex",alignItems:"center",gap:e.space[2],padding:`${e.space[2]} ${e.space[3]}`,marginBottom:e.space[4],border:"none",background:"transparent",color:a.slate[600],fontSize:e.fontSize.sm,cursor:"pointer",borderRadius:e.radius.md,transition:`background ${e.transition.normal}`},onMouseEnter:r=>r.target.style.background=a.slate[100],onMouseLeave:r=>r.target.style.background="transparent",children:[t.jsx(S,{style:{width:"18px",height:"18px"}}),"Zurück zur Übersicht"]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:e.space[4]},children:[t.jsx("div",{style:{width:"56px",height:"56px",borderRadius:e.radius.xl,background:e.headerGradient,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(v,{style:{width:"28px",height:"28px",color:e.headerText}})}),t.jsxs("div",{children:[t.jsx("h1",{style:{fontSize:e.fontSize.xl,fontWeight:700,color:a.slate[900],margin:0},children:s.title}),t.jsx("p",{style:{fontSize:e.fontSize.sm,color:a.slate[600],margin:`${e.space[1]} 0 0 0`},children:"Personalisiere dein Rollenspiel"})]})]})]}),s.long_description&&t.jsx("div",{style:{padding:`${e.space[5]} ${e.space[6]}`,borderRadius:e.radius.xl,backgroundColor:"white",border:`1px solid ${a.slate[200]}`,marginBottom:e.space[6]},children:t.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:e.space[3.5]},children:[t.jsx("div",{style:{width:"40px",height:"40px",borderRadius:e.radius.lg,background:e.headerGradient,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:t.jsx(w,{style:{width:"20px",height:"20px",color:"white"}})}),t.jsxs("div",{children:[t.jsx("h3",{style:{fontSize:e.fontSize.base,fontWeight:600,color:a.slate[900],margin:`0 0 ${e.space[2]} 0`},children:"Deine Aufgabe"}),t.jsx("p",{style:{fontSize:e.fontSize.sm,lineHeight:"1.6",color:a.slate[700],margin:0,whiteSpace:"pre-wrap"},children:s.long_description?.replace(/\/n/g,`
`)})]})]})}),!s.long_description&&s.description&&t.jsx("div",{style:{padding:`${e.space[4]} ${e.space[5]}`,borderRadius:e.radius.lg,backgroundColor:a.slate[100],marginBottom:e.space[6]},children:t.jsx("p",{style:{fontSize:e.fontSize.sm,color:a.slate[700],margin:0,lineHeight:1.6},children:s.description})}),s.interviewer_profile&&t.jsxs("div",{style:{padding:`${e.space[4]} ${e.space[5]}`,borderRadius:e.radius.lg,border:`1px solid ${a.slate[200]}`,marginBottom:e.space[6],display:"flex",alignItems:"center",gap:e.space[4]},children:[s.interviewer_profile.image_url?t.jsx("img",{src:s.interviewer_profile.image_url,alt:h(s.interviewer_profile.name),style:{width:"48px",height:"48px",borderRadius:e.radius.full,objectFit:"cover"}}):t.jsx("div",{style:{width:"48px",height:"48px",borderRadius:e.radius.full,background:e.primaryAccentLight,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(z,{style:{width:"24px",height:"24px",color:e.primaryAccent}})}),t.jsxs("div",{children:[t.jsxs("p",{style:{fontSize:e.fontSize.sm,fontWeight:600,color:a.slate[900],margin:0},children:["Dein Gesprächspartner: ",h(s.interviewer_profile.name)]}),s.interviewer_profile.role&&t.jsx("p",{style:{fontSize:e.fontSize.sm,color:a.slate[600],margin:`${e.space[.5]} 0 0 0`},children:h(s.interviewer_profile.role)})]})]}),t.jsxs("form",{onSubmit:b,children:[l.map(r=>t.jsx(C,{field:r,value:o[r.key],onChange:m,error:x[r.key],focusColor:e.primaryAccent},r.key)),t.jsxs("div",{style:{padding:`${e.space[4]} ${e.space[5]}`,borderRadius:e.radius.lg,backgroundColor:e.primaryAccentLight,marginTop:e.space[6],marginBottom:e.space[6],display:"flex",gap:e.space[5],flexWrap:"wrap"},children:[t.jsxs("div",{children:[t.jsxs("span",{style:{fontSize:e.fontSize.xs,color:a.slate[500],display:"block"},children:[t.jsx($,{style:{width:"12px",height:"12px",display:"inline",marginRight:e.space[1]}}),"Dauer"]}),t.jsx("span",{style:{fontSize:e.fontSize.base,fontWeight:600,color:a.slate[900]},children:"ca. 10 Min"})]}),t.jsxs("div",{children:[t.jsx("span",{style:{fontSize:e.fontSize.xs,color:a.slate[500],display:"block"},children:"Typ"}),t.jsx("span",{style:{fontSize:e.fontSize.base,fontWeight:600,color:a.slate[900]},children:"Live-Gespräch"})]})]}),t.jsxs("button",{type:"submit",style:{width:"100%",padding:`${e.space[4]} ${e.space[6]}`,borderRadius:e.radius.xl,border:"none",background:e.buttonGradient,color:"white",fontSize:e.fontSize.base,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:e.space[2.5],transition:`transform ${e.transition.normal}, box-shadow ${e.transition.normal}`,boxShadow:`0 4px 12px ${e.primaryAccent}4d`},onMouseEnter:r=>{r.target.style.transform="translateY(-2px)",r.target.style.boxShadow=`0 6px 16px ${e.primaryAccent}66`},onMouseLeave:r=>{r.target.style.transform="none",r.target.style.boxShadow=`0 4px 12px ${e.primaryAccent}4d`},children:["Weiter",t.jsx(k,{style:{width:"20px",height:"20px"}})]})]})]})};export{M as default};
