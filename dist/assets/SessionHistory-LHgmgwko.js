import{j as e,O as V,l as M,z as me,v as yt,Q as we,b as ye,Y as jt,_ as Ue,m as A,V as ze,M as fe,$ as lt,F as vt,a0 as ue,a1 as Te,y as ve,e as wt,A as St,p as Ve,a2 as Nt,a3 as kt,a4 as Ie,a5 as It,a6 as Gt,a7 as Vt,w as Ct,a8 as ot,a9 as Kt,h as le,T as Le,S as Ce,aa as ct,ab as dt,C as De,ac as qt,s as Ht,ad as Yt,a as qe,H as xt,g as pt,t as ht,ae as Xt}from"./ui-vendor-B9DEMv6g.js";import{a as d}from"./react-vendor-uDOJF2jQ.js";import{B as H,C as $}from"./Button-BHvYxNT_.js";import"./select-native-BMh_kGEB.js";import{u as He,D as Ke,g as je,c as re,j as Y,i as ge,k as oe,w as q}from"./FeatureInfoButton-DsfjgKw4.js";import{D as Jt,a as Zt,b as Qt,c as es,d as ts,e as ss}from"./dialog-Dg1K-ctH.js";import{b as is,p as ns,d as as,e as rs,h as ls,i as os,j as cs,g as ds}from"./index.js";import{u as Se}from"./useMobile-YxjH166V.js";import{R as xs}from"./RoleplaySessionReport-DtnsuCsK.js";import{g as ps,B as hs}from"./BriefingWorkbook-CWOSsrO3.js";import{D as ms,a as us}from"./DecisionBoardResult-Coacccm7.js";import{I as gs,a as fs}from"./IkigaiResults-C9SKfRXC.js";import{u as bs}from"./useBranding-CjHnMPMs.js";import"./utils-BEHD0UYf.js";import"./index-CklPxmEV.js";import"./input-B9TvIUbd.js";import"./textarea-Bk12bbFh.js";import"./AudioRecorder-B5vZ1Zkz.js";import"./button-CGU79vEo.js";import"./card-Ct7yzV_G.js";const ce=({isOpen:t,onClose:n,onConfirm:a,title:b="L√∂schen best√§tigen",description:x="Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:i=!1,confirmLabel:p="L√∂schen",cancelLabel:h="Abbrechen"})=>{const{branding:y}=He(),u=y?.["--primary-accent"]||Ke["--primary-accent"];return e.jsx(Jt,{open:t,onOpenChange:n,children:e.jsxs(Zt,{style:{maxWidth:"400px"},children:[e.jsxs(Qt,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(V,{style:{width:"20px",height:"20px",color:"#fff"}})}),e.jsx(es,{children:b})]}),e.jsx(ts,{children:x})]}),e.jsxs(ss,{style:{marginTop:"16px"},children:[e.jsx("button",{onClick:n,disabled:i,style:{minWidth:"100px",height:"40px",padding:"8px 20px",borderRadius:"8px",border:`2px solid ${u}`,backgroundColor:"white",color:u,fontSize:"14px",fontWeight:500,cursor:i?"not-allowed":"pointer",opacity:i?.5:1,transition:"all 0.2s"},children:h}),e.jsx("button",{onClick:a,disabled:i,style:{minWidth:"100px",height:"40px",padding:"8px 20px",borderRadius:"8px",border:"none",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"#fff",fontSize:"14px",fontWeight:500,cursor:i?"not-allowed":"pointer",opacity:i?.5:1,transition:"all 0.2s",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:i?e.jsxs(e.Fragment,{children:[e.jsx(M,{style:{width:"16px",height:"16px",animation:"spin 1s linear infinite"}}),p,"..."]}):p})]})]})})},ys={auftreten:Kt,selbstbewusstsein:ot,koerpersprache:Ct,kommunikation:fe,professionalitaet:ot,inhalt:ve},js=t=>t>=90?"Ausgezeichnet!":t>=80?"Sehr gut!":t>=70?"Gut!":t>=60?"Solide Leistung":t>=50?"Ausbauf√§hig":"Weiter √ºben!",vs=t=>t?new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",ws=t=>t==="video"?"Wirkungs-Analyse":t==="roleplay"?"Live-Simulation":"Szenario-Training",Ss=({score:t,size:n=120,isHeader:a=!1})=>{const b=Math.min(100,Math.max(0,t||0)),x=(n-12)/2,i=x*2*Math.PI,p=i-b/100*i,h=Y(t);return e.jsxs("div",{className:"relative",style:{width:n,height:n},children:[e.jsxs("svg",{width:n,height:n,style:{transform:"rotate(-90deg)"},children:[e.jsx("circle",{cx:n/2,cy:n/2,r:x,fill:"none",stroke:a?"rgba(255,255,255,0.3)":"#e2e8f0",strokeWidth:10}),e.jsx(A.circle,{cx:n/2,cy:n/2,r:x,fill:"none",stroke:h,strokeWidth:10,strokeLinecap:"round",strokeDasharray:i,initial:{strokeDashoffset:i},animate:{strokeDashoffset:p},transition:{duration:1,ease:"easeOut"}})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("span",{style:{fontSize:n/3.5,fontWeight:700,color:h},children:Math.round(t)}),e.jsx("span",{className:`${a?"text-white":"text-slate-500"}`,style:{fontSize:n/10},children:"von 100"})]})]})},Ns=({audioUrl:t,durationHint:n})=>{const a=d.useRef(null),[b,x]=d.useState(!1),[i,p]=d.useState(0),[h,y]=d.useState(n||0),[u,c]=d.useState(!0),[I,k]=d.useState(null);d.useEffect(()=>{if(!t)return;c(!0),k(null),y(n||0);const l=new Audio;a.current=l;const E=()=>{const z=l.duration;z&&isFinite(z)&&z>0&&y(z),c(!1)},T=()=>{const z=l.duration;z&&isFinite(z)&&z>0&&y(z)},C=()=>{c(!1);const z=l.duration;z&&isFinite(z)&&z>0&&y(z)};return l.addEventListener("loadedmetadata",E),l.addEventListener("durationchange",T),l.addEventListener("canplaythrough",C),l.addEventListener("timeupdate",()=>p(l.currentTime)),l.addEventListener("play",()=>x(!0)),l.addEventListener("pause",()=>x(!1)),l.addEventListener("ended",()=>x(!1)),l.addEventListener("error",()=>{k("Audio nicht verf√ºgbar"),c(!1)}),l.src=t,l.load(),()=>{l.pause(),l.removeEventListener("loadedmetadata",E),l.removeEventListener("durationchange",T),l.removeEventListener("canplaythrough",C),l.src=""}},[t,n]);const w=()=>{a.current&&(b?a.current.pause():a.current.play())},v=l=>{const E=l.currentTarget.getBoundingClientRect(),T=(l.clientX-E.left)/E.width;a.current&&(a.current.currentTime=T*h)},L=l=>{a.current&&(a.current.currentTime=Math.max(0,Math.min(a.current.currentTime+l,h)))};if(I)return e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg text-slate-500 text-[13px] flex items-center gap-2",children:[e.jsx(me,{size:16})," ",I]});if(!t)return null;const D=h>0?i/h*100:0;return e.jsxs($,{className:"p-5",children:[e.jsx("div",{onClick:v,className:"h-2 bg-slate-200 rounded cursor-pointer mb-4",children:e.jsx("div",{className:"h-full bg-primary rounded transition-all duration-100",style:{width:`${D}%`}})}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("button",{onClick:()=>L(-10),className:"p-2 bg-transparent border-none cursor-pointer text-slate-400 hover:text-slate-600",children:e.jsx(Nt,{size:20})}),e.jsx("button",{onClick:w,disabled:u,className:`w-12 h-12 rounded-full bg-primary border-none flex items-center justify-center text-white ${u?"cursor-wait opacity-70":"cursor-pointer"}`,children:u?e.jsx(M,{size:22,className:"animate-spin"}):b?e.jsx(kt,{size:22,fill:"white"}):e.jsx(Ie,{size:22,fill:"white",className:"ml-0.5"})}),e.jsx("button",{onClick:()=>L(10),className:"p-2 bg-transparent border-none cursor-pointer text-slate-400 hover:text-slate-600",children:e.jsx(It,{size:20})})]}),e.jsxs("div",{className:"text-center mt-2 text-[13px] text-slate-500",children:[ge(i)," / ",ge(h)]})]})},ks=({sessionId:t,conversationId:n})=>{const a=d.useRef(null),[b,x]=d.useState(!1),[i,p]=d.useState(!1),[h,y]=d.useState(0),[u,c]=d.useState(0),[I,k]=d.useState(null),[w,v]=d.useState(!0);d.useEffect(()=>{if(!n){v(!1),k("Keine Audio-Aufnahme verf√ºgbar");return}const T=os(t);return v(!0),k(null),fetch(T,{headers:{"X-WP-Nonce":re()},credentials:"same-origin"}).then(C=>{if(!C.ok)throw new Error(`HTTP ${C.status}`);return C.blob()}).then(C=>{const z=URL.createObjectURL(C),S=new Audio(z);a.current=S,S._objectUrl=z,S.addEventListener("loadedmetadata",()=>{c(S.duration),v(!1)}),S.addEventListener("timeupdate",()=>y(S.currentTime)),S.addEventListener("play",()=>x(!0)),S.addEventListener("pause",()=>x(!1)),S.addEventListener("ended",()=>x(!1)),S.addEventListener("error",()=>{k("Audio konnte nicht abgespielt werden."),v(!1)})}).catch(()=>{k("Audio nicht verf√ºgbar."),v(!1)}),()=>{a.current&&(a.current.pause(),a.current._objectUrl&&URL.revokeObjectURL(a.current._objectUrl),a.current=null)}},[t,n]);const L=()=>{a.current&&(b?a.current.pause():a.current.play())},D=()=>{a.current&&(a.current.muted=!i,p(!i))},l=T=>{a.current&&(a.current.currentTime=Math.max(0,Math.min(a.current.currentTime+T,u)))},E=T=>{const C=T.currentTarget.getBoundingClientRect(),z=(T.clientX-C.left)/C.width;a.current&&(a.current.currentTime=z*u)};return w?e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6 text-center",children:[e.jsx(M,{size:24,className:"text-primary animate-spin mx-auto"}),e.jsx("p",{className:"text-[13px] text-slate-500 mt-2",children:"Audio wird geladen..."})]}):I?e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6 text-center",children:[e.jsx(me,{size:24,className:"text-slate-400 mx-auto"}),e.jsx("p",{className:"text-[13px] text-slate-500 mt-2",children:I})]}):e.jsxs($,{className:"p-5",children:[e.jsxs("h3",{className:"text-[15px] font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(Ve,{size:18,className:"text-primary"})," Gespr√§chsaufnahme"]}),e.jsx("div",{onClick:E,className:"h-2 bg-slate-200 rounded cursor-pointer mb-4",children:e.jsx("div",{className:"h-full bg-primary rounded transition-all duration-100",style:{width:`${h/u*100||0}%`}})}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("button",{onClick:()=>l(-10),className:"p-2 bg-transparent border-none cursor-pointer text-slate-400 hover:text-slate-600",children:e.jsx(Nt,{size:20})}),e.jsx("button",{onClick:L,className:"w-12 h-12 rounded-full bg-primary border-none cursor-pointer flex items-center justify-center text-white",children:b?e.jsx(kt,{size:22,fill:"white"}):e.jsx(Ie,{size:22,fill:"white",className:"ml-0.5"})}),e.jsx("button",{onClick:()=>l(10),className:"p-2 bg-transparent border-none cursor-pointer text-slate-400 hover:text-slate-600",children:e.jsx(It,{size:20})}),e.jsx("button",{onClick:D,className:"p-2 bg-transparent border-none cursor-pointer text-slate-400 hover:text-slate-600 ml-auto",children:i?e.jsx(Gt,{size:20}):e.jsx(Vt,{size:20})})]}),e.jsxs("div",{className:"text-center mt-2 text-[13px] text-slate-500",children:[ge(h)," / ",ge(u)]})]})},Is=({entry:t})=>{const n=t.role==="user";return e.jsxs("div",{className:"flex gap-3 mb-4",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex-shrink-0 flex items-center justify-center ${n?"bg-primary":"bg-slate-200"}`,children:e.jsx(Ct,{size:16,className:n?"text-white":"text-slate-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`text-xs font-semibold mb-1 ${n?"text-primary":"text-slate-400"}`,children:n?"Du":"Interviewer"}),e.jsx("p",{className:"text-sm text-slate-900 leading-relaxed m-0",children:t.text||t.message})]})]})},Cs=({answer:t,index:n})=>{const[a,b]=d.useState(!1),x=t.feedback?typeof t.feedback=="string"?JSON.parse(t.feedback):t.feedback:null,i=t.audio_analysis?typeof t.audio_analysis=="string"?JSON.parse(t.audio_analysis):t.audio_analysis:null,p=t.transcript==="[Keine Sprache erkannt]"||i?.speech_rate==="keine_sprache";return e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.05},children:e.jsxs($,{className:"mb-4 overflow-hidden p-0",children:[e.jsxs("button",{onClick:()=>b(!a),className:"w-full p-4 bg-transparent border-none cursor-pointer flex items-center gap-3 text-left",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-primary/10 flex items-center justify-center text-primary font-bold text-sm flex-shrink-0",children:n+1}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h4",{className:"text-sm font-semibold text-slate-900 m-0 truncate",children:t.question_text||`Frage ${n+1}`})}),t.overall_score!=null&&e.jsx("span",{className:"text-base font-bold",style:{color:p?"#94a3b8":Y(t.overall_score*10)},children:p?"‚Äì":`${Math.round(t.overall_score*10)}%`}),e.jsx(wt,{size:18,className:`text-slate-400 transition-transform ${a?"rotate-180":""}`})]}),e.jsx(St,{children:a&&e.jsx(A.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"px-5 pb-5 pt-4 border-t border-slate-100",children:[t.question_text&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"text-[13px] font-semibold text-slate-900 mb-2 flex items-center gap-1.5",children:[e.jsx(fe,{size:14,className:"text-primary"})," Frage / Situation"]}),e.jsx("p",{className:"text-sm text-slate-900 leading-relaxed bg-primary/5 p-3 rounded-lg m-0 border border-primary/10",children:t.question_text})]}),t.audio_url&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"text-[13px] font-semibold text-slate-900 mb-2 flex items-center gap-1.5",children:[e.jsx(Ve,{size:14,className:"text-primary"})," Deine Aufnahme"]}),e.jsx(Ns,{audioUrl:t.audio_url,durationHint:t.audio_duration_seconds})]}),t.transcript&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"text-[13px] font-semibold text-slate-900 mb-2 flex items-center gap-1.5",children:[e.jsx(vt,{size:14,className:"text-primary"})," Transkript"]}),e.jsxs("p",{className:`text-[13px] leading-relaxed bg-slate-50 p-3 rounded-lg m-0 italic break-words ${p?"text-slate-400":"text-slate-600"}`,children:['"',t.transcript,'"']})]}),x?.scores&&!p&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"text-[13px] font-semibold text-slate-900 mb-2.5 flex items-center gap-1.5",children:[e.jsx(ue,{size:14,className:"text-primary"})," Bewertung"]}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mb-2",children:[{key:"content",label:"Inhalt"},{key:"structure",label:"Struktur"},{key:"relevance",label:"Relevanz"},{key:"delivery",label:"Pr√§sentation"}].map(({key:h,label:y})=>{const u=x.scores[h],c=u!=null?u*10:null;return e.jsxs("div",{className:"p-2.5 bg-slate-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-base font-bold",style:{color:c!=null?Y(c):"#94a3b8"},children:c!=null?Math.round(c):"-"}),e.jsx("div",{className:"text-[10px] text-slate-500 mt-0.5",children:y})]},h)})}),(()=>{const h=x.scores.overall,y=h!=null?h*10:null;return e.jsxs("div",{className:"p-3 bg-primary/10 rounded-lg text-center border border-primary/20 flex items-center justify-center gap-3",children:[e.jsx("div",{className:"text-[10px] text-slate-500",children:"Gesamt"}),e.jsx("div",{className:"text-xl font-bold",style:{color:y!=null?Y(y):"#94a3b8"},children:y!=null?Math.round(y):"-"})]})})()]}),x?.summary&&e.jsx("p",{className:"text-[13px] text-slate-600 leading-snug mb-3",children:x.summary}),x?.strengths?.length>0&&!p&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("h6",{className:"text-xs font-semibold text-green-600 mb-1.5 flex items-center gap-1",children:[e.jsx(Te,{size:12})," St√§rken"]}),e.jsx("ul",{className:"m-0 pl-4 text-slate-600 text-xs",children:x.strengths.map((h,y)=>e.jsx("li",{className:"mb-1",children:h},y))})]}),x?.improvements?.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("h6",{className:"text-xs font-semibold text-amber-600 mb-1.5 flex items-center gap-1",children:[e.jsx(me,{size:12})," Verbesserungspotenzial"]}),e.jsx("ul",{className:"m-0 pl-4 text-slate-600 text-xs",children:x.improvements.map((h,y)=>e.jsx("li",{className:"mb-1",children:h},y))})]}),x?.tips?.length>0&&!p&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("h6",{className:"text-xs font-semibold text-primary mb-1.5 flex items-center gap-1",children:[e.jsx(ve,{size:12})," Tipps"]}),e.jsx("ul",{className:"m-0 pl-4 text-slate-600 text-xs",children:x.tips.map((h,y)=>e.jsx("li",{className:"mb-1",children:h},y))})]}),i&&!p&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100",children:[e.jsxs("h5",{className:"text-[13px] font-semibold text-slate-900 mb-3 flex items-center gap-1.5",children:[e.jsx(Ve,{size:14,className:"text-primary"})," Sprechanalyse"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2.5",children:[i.speech_rate&&e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-[11px] text-slate-500 mb-1",children:"Sprechtempo"}),e.jsx("div",{className:"text-sm font-semibold text-slate-900 capitalize",children:i.speech_rate==="optimal"?"‚úì Optimal":i.speech_rate==="zu_schnell"?"‚ö° Zu schnell":i.speech_rate==="zu_langsam"?"üê¢ Zu langsam":i.speech_rate})]}),i.filler_words&&e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-[11px] text-slate-500 mb-1",children:"F√ºllw√∂rter"}),e.jsxs("div",{className:`text-sm font-semibold ${i.filler_words.count<=2?"text-green-600":i.filler_words.count<=5?"text-amber-600":"text-red-600"}`,children:[i.filler_words.count||0," erkannt"]}),i.filler_words.words?.length>0&&e.jsx("div",{className:"text-[11px] text-slate-500 mt-1",children:i.filler_words.words.slice(0,5).join(", ")})]}),i.confidence_score!=null&&e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-[11px] text-slate-500 mb-1",children:"Selbstsicherheit"}),e.jsxs("div",{className:"text-sm font-semibold",style:{color:Y(i.confidence_score)},children:[i.confidence_score,"%"]})]}),i.clarity_score!=null&&e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-[11px] text-slate-500 mb-1",children:"Klarheit"}),e.jsxs("div",{className:"text-sm font-semibold",style:{color:Y(i.clarity_score)},children:[i.clarity_score,"%"]})]})]}),i.notes&&e.jsx("p",{className:"text-xs text-slate-500 mt-2.5 italic",children:i.notes})]})]})})})]})})},Ds=({isOpen:t,onClose:n,onConfirm:a,isDeleting:b})=>t?e.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black/50",onClick:n,children:e.jsxs(A.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-2xl p-6 max-w-[400px] w-[90%] shadow-2xl",onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-100 flex items-center justify-center",children:e.jsx(V,{size:24,className:"text-red-500"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 m-0",children:"Session l√∂schen?"})]}),e.jsx("p",{className:"text-sm text-slate-600 leading-relaxed mb-6",children:"M√∂chtest du diese Session wirklich l√∂schen? Alle Antworten und Feedback werden unwiderruflich entfernt."}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(H,{variant:"secondary",onClick:n,disabled:b,children:"Abbrechen"}),e.jsx(H,{variant:"danger",onClick:a,disabled:b,icon:b?e.jsx(M,{size:16,className:"animate-spin"}):e.jsx(V,{size:16}),children:b?"L√∂schen...":"L√∂schen"})]})]})}):null,zs=({category:t})=>{const[n,a]=d.useState(!1),b=ys[t.category]||ue,x=Y(t.score);return e.jsxs($,{className:"mb-2.5 overflow-hidden p-0",children:[e.jsxs("button",{onClick:()=>a(!n),className:"w-full p-3.5 bg-transparent border-none cursor-pointer flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center",style:{backgroundColor:`${x}15`},children:e.jsx(b,{size:18,style:{color:x}})}),e.jsx("div",{className:"flex-1 text-left",children:e.jsx("h4",{className:"text-sm font-semibold text-slate-900 m-0",children:t.label})}),e.jsxs("span",{className:"text-base font-bold",style:{color:x},children:[Math.round(t.score),"%"]}),e.jsx(wt,{size:18,className:`text-slate-400 transition-transform ${n?"rotate-180":""}`})]}),e.jsx(St,{children:n&&e.jsx(A.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"px-4 pb-4 pt-3 border-t border-slate-100",children:[t.feedback&&e.jsx("p",{className:"text-[13px] text-slate-600 leading-snug mb-2.5",children:t.feedback}),t.strengths?.length>0&&e.jsxs("div",{className:"mb-2.5",children:[e.jsxs("h6",{className:"text-xs font-semibold text-green-600 mb-1 flex items-center gap-1",children:[e.jsx(Te,{size:12})," St√§rken"]}),e.jsx("ul",{className:"m-0 pl-4 text-xs text-slate-600",children:t.strengths.map((i,p)=>e.jsx("li",{children:i},p))})]}),t.improvements?.length>0&&e.jsxs("div",{children:[e.jsxs("h6",{className:"text-xs font-semibold text-amber-600 mb-1 flex items-center gap-1",children:[e.jsx(ve,{size:12})," Tipps"]}),e.jsx("ul",{className:"m-0 pl-4 text-xs text-slate-600",children:t.improvements.map((i,p)=>e.jsx("li",{children:i},p))})]})]})})})]})},Es=({session:t,type:n,scenario:a,onBack:b,onContinueSession:x,onRepeatSession:i,onDeleteSession:p})=>{const h=Se(),[y,u]=d.useState(!1);d.useEffect(()=>{const r=()=>{const f=window.innerWidth;u(f>=768&&f<1200)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]);const[c,I]=d.useState([]),[k,w]=d.useState(!0),[v,L]=d.useState(null),[D,l]=d.useState(!1),[E,T]=d.useState(!1),[C,z]=d.useState(!1),[S,de]=d.useState(null),[ee,be]=d.useState(a),W=n==="video",F=n==="simulator",P=n==="roleplay",xe=(()=>{const r=t?.questions||t?.questions_json;if(!r)return!1;try{const f=typeof r=="string"?JSON.parse(r):r;return Array.isArray(f)&&f.length>0}catch{return!1}})(),g=(()=>{if(!F||!xe)return!1;const r=t?.total_questions||0,f=t?.completed_questions||0;return r>0&&f<r})(),U=async()=>{if(p){T(!0);try{await p(t,n)}catch(r){console.error("Failed to delete session:",r),T(!1),l(!1)}}},K=async()=>{if(!(C||!t?.id)){z(!0);try{let r;if(F)r=`${je()}/simulator/sessions/${t.id}/export-pdf`;else if(W)r=`${je()}/video-training/sessions/${t.id}/export-pdf`;else if(P)r=`${je()}/sessions/${t.id}/export-pdf`;else throw new Error("Unsupported session type for PDF export");const f=await fetch(r,{method:"POST",headers:{"X-WP-Nonce":re(),"Content-Type":"application/json"},credentials:"same-origin"}),_=await f.json();if(!f.ok)throw new Error(_.error||`HTTP ${f.status}`);if(!_.success||!_.pdf_base64)throw new Error(_.error||"PDF generation failed");const ne=atob(_.pdf_base64),Ne=new Array(ne.length);for(let ae=0;ae<ne.length;ae++)Ne[ae]=ne.charCodeAt(ae);const pe=new Uint8Array(Ne),Be=new Blob([pe],{type:_.content_type||"application/pdf"}),ke=window.URL.createObjectURL(Be),Z=document.createElement("a");Z.href=ke,Z.download=_.filename||"Training.pdf",document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),window.URL.revokeObjectURL(ke)}catch(r){console.error("Failed to download PDF:",r)}finally{z(!1)}}};d.useEffect(()=>{F&&t?.id?Oe():P&&t?.id?Ee():w(!1)},[t?.id,n]);const Oe=async()=>{try{w(!0);const f=await(await fetch(`${je()}/simulator/sessions/${t.id}/answers`,{headers:{"X-WP-Nonce":re()}})).json();f.success&&f.data?.answers?I(f.data.answers):Array.isArray(f.data)&&I(f.data)}catch(r){console.error("Failed to load answers:",r),L("Fehler beim Laden der Antworten")}finally{w(!1)}},Ee=async()=>{try{w(!0);const r=await is(t.id);if(de({...t,...r,feedback:rs(r.feedback_json||t.feedback_json),audioAnalysis:as(r.audio_analysis_json||t.audio_analysis_json),transcript:ns(r.transcript||t.transcript)}),!a&&r.scenario_id)try{const f=await ls(r.scenario_id);be(f)}catch(f){console.warn("Could not load scenario:",f)}}catch(r){console.error("Failed to load roleplay data:",r),L("Fehler beim Laden der Gespr√§chsdaten")}finally{w(!1)}},X=t?.summary_feedback_json?typeof t.summary_feedback_json=="string"?JSON.parse(t.summary_feedback_json):t.summary_feedback_json:null,B=t?.category_scores||[],J=t?.analysis||{},ie=(()=>{let r=0;return P&&S?.feedback?.rating?.overall?r=S.feedback.rating.overall:r=t?.overall_score||X?.overall_score||0,(F||P)&&r<=10?r*10:r})();return k?e.jsx("div",{className:"w-full min-h-[60vh] flex items-center justify-center p-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx(M,{size:48,className:"text-primary animate-spin mx-auto"}),e.jsx("p",{className:"text-slate-500 mt-4",children:"Analyse wird geladen..."})]})}):v?e.jsx("div",{className:"min-h-[400px] flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-[400px] p-6",children:[e.jsx(me,{size:48,className:"text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Fehler beim Laden"}),e.jsx("p",{className:"text-slate-600 mb-6",children:v}),e.jsx(H,{variant:"secondary",onClick:b,children:"Zur√ºck"})]})}):e.jsxs("div",{className:"min-h-screen bg-slate-50 overflow-hidden max-w-full",children:[e.jsx("div",{className:`sticky top-0 z-40 ${h?"px-4 py-5":"px-8 py-6"}`,style:{background:"var(--header-gradient, linear-gradient(135deg, #3A7FA7 0%, #4A9BC7 100%))"},children:e.jsxs("div",{className:"max-w-[1400px] mx-auto",children:[b&&e.jsxs("button",{onClick:b,className:"flex items-center gap-1.5 bg-white/15 border-none rounded-lg px-3 py-2 cursor-pointer text-white text-[13px] mb-4 hover:bg-white/25 transition-colors",children:[e.jsx(yt,{size:16}),"Zur√ºck zur √úbersicht"]}),e.jsxs("div",{className:"flex items-center gap-6",children:[!h&&e.jsx(Ss,{score:ie,size:100,isHeader:!0}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap mb-2",children:[e.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide px-2.5 py-1 rounded-full bg-white/20 text-white",children:ws(n)}),e.jsx("span",{className:"text-xs font-medium px-2.5 py-1 rounded-full bg-white/90",style:{color:Y(ie)},children:js(ie)})]}),e.jsx("h1",{className:`font-bold text-white m-0 mb-2 ${h?"text-xl":"text-2xl"}`,children:(P?ee?.title:a?.title)||t?.scenario_title||t?.position||"Training"}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("span",{className:"flex items-center gap-1.5 text-[13px] text-white/80",children:[e.jsx(we,{size:14}),vs(t?.created_at)]}),t?.duration&&e.jsxs("span",{className:"flex items-center gap-1.5 text-[13px] text-white/80",children:[e.jsx(ye,{size:14}),ge(t.duration)]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:K,disabled:C,title:"Als PDF herunterladen",className:`flex items-center justify-center bg-white/20 border border-white/30 rounded-lg px-3 py-2.5 text-white outline-none transition-colors hover:bg-white/30 ${C?"cursor-wait opacity-70":"cursor-pointer"}`,children:C?e.jsx(M,{size:16,className:"animate-spin"}):e.jsx(jt,{size:16})}),!h&&i&&e.jsxs("button",{onClick:()=>i(t,a),className:"flex items-center gap-2 bg-white/20 border border-white/30 rounded-lg px-5 py-2.5 cursor-pointer text-white text-sm font-medium outline-none hover:bg-white/30 transition-colors",children:[e.jsx(Ue,{size:16}),"Erneut √ºben"]}),p&&e.jsx("button",{onClick:()=>l(!0),className:`flex items-center gap-2 bg-red-500/20 border border-red-500/40 rounded-lg cursor-pointer text-white text-sm font-medium outline-none hover:bg-red-500/30 transition-colors ${h?"px-3 py-2.5":"px-4 py-2.5"}`,children:e.jsx(V,{size:16})})]})]})]})}),e.jsx("div",{className:`overflow-hidden ${h?"p-4":"px-8 py-6"}`,children:e.jsxs("div",{className:"grid gap-6 overflow-hidden",style:{gridTemplateColumns:h||y?"1fr":"1fr 400px"},children:[e.jsxs("div",{className:"min-w-0 overflow-hidden",children:[W&&t?.video_url&&e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs($,{className:"mb-5 p-5",children:[e.jsxs("h3",{className:"text-[15px] font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[e.jsx(ze,{size:18,className:"text-primary"})," Deine Aufnahme"]}),e.jsx("video",{src:t.video_url,controls:!0,className:"w-full max-w-[640px] max-h-[360px] rounded-xl bg-black object-contain"})]})}),F&&c.length>0&&e.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[e.jsxs("h3",{className:"text-base font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(fe,{size:18,className:"text-primary"})," Deine Antworten (",c.length,")"]}),c.map((r,f)=>e.jsx(Cs,{answer:r,index:f},r.id||f)),g&&(x||i)&&e.jsxs("div",{className:"flex gap-3 justify-center flex-wrap mt-6 p-5 bg-slate-50 rounded-xl border border-dashed border-slate-300",children:[e.jsx("p",{className:"w-full text-center text-slate-600 text-sm mb-3",children:"Diese Session ist noch nicht abgeschlossen."}),x&&e.jsx(H,{onClick:()=>x(t,a),icon:e.jsx(lt,{size:18}),children:"Fortsetzen"}),i&&e.jsx(H,{variant:"secondary",onClick:()=>i(t,a),icon:e.jsx(Ue,{size:18}),children:"Erneut starten"})]})]}),F&&c.length===0&&e.jsxs("div",{className:"text-center py-12 px-6 bg-slate-50 rounded-2xl",children:[e.jsx(me,{size:48,className:"text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Keine Antworten vorhanden"}),e.jsx("p",{className:"text-slate-500 mb-6",children:xe?"Diese Session wurde nicht abgeschlossen. Du kannst sie fortsetzen oder erneut starten.":"Diese Session wurde verlassen, bevor Fragen generiert wurden."}),g&&(x||i)&&e.jsxs("div",{className:"flex gap-3 justify-center flex-wrap",children:[x&&e.jsx(H,{onClick:()=>x(t,a),icon:e.jsx(lt,{size:18}),children:"Fortsetzen"}),i&&e.jsx(H,{variant:"secondary",onClick:()=>i(t,a),icon:e.jsx(Ue,{size:18}),children:"Erneut starten"})]})]}),P&&S&&e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-5",children:e.jsx(ks,{sessionId:t.id,conversationId:S.conversation_id})}),P&&S?.transcript?.length>0&&e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs($,{className:"p-5",children:[e.jsxs("h3",{className:"text-[15px] font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(vt,{size:18,className:"text-primary"})," Gespr√§chsverlauf"]}),e.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:S.transcript.map((r,f)=>e.jsx(Is,{entry:r},f))})]})})]}),e.jsxs("div",{className:"min-w-0 overflow-hidden",children:[W&&B.length>0&&e.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-5",children:[e.jsxs("h3",{className:"text-[15px] font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[e.jsx(ue,{size:16,className:"text-primary"})," Detaillierte Bewertung"]}),B.map((r,f)=>e.jsx(zs,{category:r},r.category||f))]}),W&&(J.key_strengths?.length>0||J.actionable_tips?.length>0)&&e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsxs($,{className:"mb-5 p-5",children:[J.key_strengths?.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-green-600 mb-2.5 flex items-center gap-1.5",children:[e.jsx(Te,{size:16})," Deine St√§rken"]}),e.jsx("ul",{className:"m-0 pl-5",children:J.key_strengths.map((r,f)=>e.jsx("li",{className:"text-[13px] text-slate-600 mb-1.5 leading-snug",children:r},f))})]}),J.actionable_tips?.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-primary mb-2.5 flex items-center gap-1.5",children:[e.jsx(ve,{size:16})," Tipps zur Verbesserung"]}),e.jsx("ul",{className:"m-0 pl-5",children:J.actionable_tips.map((r,f)=>e.jsx("li",{className:"text-[13px] text-slate-600 mb-1.5 leading-snug",children:r},f))})]})]})}),W&&t?.summary_feedback&&e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-2.5",children:"Zusammenfassung"}),e.jsx("p",{className:"text-[13px] text-slate-600 leading-relaxed m-0",children:t.summary_feedback})]})}),F&&X&&e.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[X.summary&&e.jsxs($,{className:"mb-5 p-5",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-2.5",children:"Zusammenfassung"}),e.jsx("p",{className:"text-[13px] text-slate-600 leading-relaxed m-0",children:X.summary})]}),X.scores&&e.jsxs($,{className:"mb-5 p-5",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Bewertung"}),e.jsx("div",{className:"grid grid-cols-2 gap-2.5",children:Object.entries(X.scores).map(([r,f])=>{const _=f!=null?f*10:null;return e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-xl font-bold",style:{color:Y(_)},children:_!=null?Math.round(_):"-"}),e.jsx("div",{className:"text-[11px] text-slate-500 capitalize",children:r})]},r)})})]}),X.key_takeaways?.length>0&&e.jsxs("div",{className:"bg-green-50 rounded-2xl p-5",children:[e.jsxs("h4",{className:"text-sm font-semibold text-green-600 mb-2.5 flex items-center gap-1.5",children:[e.jsx(ve,{size:16})," Wichtigste Erkenntnisse"]}),e.jsx("ul",{className:"m-0 pl-5 text-[13px] text-slate-900 leading-snug",children:X.key_takeaways.map((r,f)=>e.jsx("li",{className:"mb-1.5",children:r},f))})]})]}),P&&S?.feedback&&e.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[S.feedback.rating&&e.jsxs($,{className:"mb-5 p-5",children:[e.jsxs("h4",{className:"text-[15px] font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(ue,{size:16,className:"text-primary"})," Bewertungskriterien"]}),e.jsx("div",{className:"flex flex-col gap-2.5",children:Object.entries(S.feedback.rating).filter(([r])=>r!=="overall").map(([r,f])=>{const _=f*10;return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"flex-1 text-[13px] font-medium text-slate-900 capitalize",children:r.replace(/_/g," ")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 h-1.5 bg-slate-200 rounded",children:e.jsx("div",{className:"h-full rounded",style:{width:`${_}%`,backgroundColor:Y(_)}})}),e.jsx("span",{className:"text-sm font-semibold min-w-[45px]",style:{color:Y(_)},children:Math.round(_)})]})]},r)})})]}),S.feedback.strengths?.length>0&&e.jsxs($,{className:"mb-5 p-5",children:[e.jsxs("h4",{className:"text-sm font-semibold text-green-600 mb-3 flex items-center gap-1.5",children:[e.jsx(Te,{size:16})," Deine St√§rken"]}),e.jsx("ul",{className:"m-0 pl-5",children:S.feedback.strengths.map((r,f)=>e.jsx("li",{className:"text-[13px] text-slate-600 mb-2 leading-snug",children:r},f))})]}),S.feedback.improvements?.length>0&&e.jsxs($,{className:"mb-5 p-5",children:[e.jsxs("h4",{className:"text-sm font-semibold text-amber-600 mb-3 flex items-center gap-1.5",children:[e.jsx(ve,{size:16})," Verbesserungspotenzial"]}),e.jsx("ul",{className:"m-0 pl-5",children:S.feedback.improvements.map((r,f)=>e.jsx("li",{className:"text-[13px] text-slate-600 mb-2 leading-snug",children:r},f))})]}),S.feedback.summary&&e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-2.5",children:"Zusammenfassung"}),e.jsx("p",{className:"text-[13px] text-slate-600 leading-relaxed m-0",children:S.feedback.summary})]})]}),P&&!S?.feedback&&e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6 text-center",children:[e.jsx(me,{size:32,className:"text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-slate-500 m-0",children:"Keine Analyse verf√ºgbar f√ºr dieses Gespr√§ch."})]})]})]})}),e.jsx(Ds,{isOpen:D,onClose:()=>l(!1),onConfirm:U,isDeleting:E})]})},_s=({briefing:t,onClick:n,onDelete:a,headerGradient:b,headerText:x,primaryAccent:i})=>{const[p,h]=d.useState(!1),[y,u]=d.useState(!1),c=Se(900),I=ps(t.template_icon),k=v=>{v.stopPropagation(),u(!0)},w=async()=>{h(!0);try{await a(t.id),u(!1)}catch(v){console.error("Error deleting briefing:",v)}finally{h(!1)}};return c?e.jsxs(A.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileTap:{scale:.98},children:[e.jsxs("div",{onClick:n,style:{background:"#fff",borderRadius:"16px",padding:"16px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:`linear-gradient(135deg, ${i}15, ${i}30)`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(I,{style:{width:"22px",height:"22px",color:i}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"15px",fontWeight:600,color:"#0f172a",marginBottom:"4px",lineHeight:"1.3",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.title||"Briefing"}),e.jsx("div",{style:{fontSize:"13px",color:"#64748b"},children:oe(t.created_at)})]}),e.jsx("button",{onClick:k,disabled:p,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},title:"L√∂schen",children:p?e.jsx(M,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(V,{size:18})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px",paddingTop:"12px",borderTop:"1px solid #f1f5f9"},children:[e.jsx("span",{style:{backgroundColor:`${i}15`,color:i,padding:"4px 10px",borderRadius:"10px",fontSize:"12px",fontWeight:500,maxWidth:"70%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.template_title}),e.jsx(le,{size:22,style:{color:"#94a3b8",flexShrink:0}})]})]}),e.jsx(ce,{isOpen:y,onClose:()=>u(!1),onConfirm:w,title:"Briefing l√∂schen",description:"M√∂chtest du dieses Briefing wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:p})]}):e.jsxs(A.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsx("div",{onClick:n,style:{background:"#fff",borderRadius:"16px",padding:"20px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",transition:"all 0.2s"},onMouseEnter:v=>{v.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.08)",v.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:v=>{v.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)",v.currentTarget.style.borderColor="#e2e8f0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:`linear-gradient(135deg, ${i}15, ${i}30)`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(I,{style:{width:"24px",height:"24px",color:i}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#0f172a",marginBottom:"4px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.title||"Briefing"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap",fontSize:"13px",color:"#64748b"},children:[e.jsx("span",{style:{backgroundColor:`${i}15`,color:i,padding:"2px 8px",borderRadius:"10px",fontSize:"12px",fontWeight:500},children:t.template_title}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(we,{size:14}),oe(t.created_at)]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[e.jsx("button",{onClick:k,disabled:p,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"L√∂schen",children:p?e.jsx(M,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(V,{size:18})}),e.jsx(le,{size:20,style:{color:"#94a3b8"}})]})]})}),e.jsx(ce,{isOpen:y,onClose:()=>u(!1),onConfirm:w,title:"Briefing l√∂schen",description:"M√∂chtest du dieses Briefing wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:p})]})},se={SIMULATOR:"simulator",ROLEPLAY:"roleplay",VIDEO:"video"},As=({session:t,type:n,scenario:a,onClick:b,onContinueSession:x,onDeleteSession:i,headerGradient:p,headerText:h,primaryAccent:y})=>{const[u,c]=d.useState(!1),[I,k]=d.useState(!1),w=Se(900),v=()=>{let g=null;if(n===se.SIMULATOR)g=t.overall_score||t.average_score;else if(n===se.VIDEO)g=t.overall_score;else if(t.feedback_json)try{let U=t.feedback_json;if(typeof U=="string"){let K=U.trim();K.startsWith("```json")?K=K.replace(/```json\s*/g,"").replace(/```\s*$/g,""):K.startsWith("```")&&(K=K.replace(/```\s*/g,"").replace(/```\s*$/g,"")),U=JSON.parse(K)}g=U.rating?.overall||null}catch{g=null}return g==null||isNaN(g)||g===0?null:g},L=()=>n===se.SIMULATOR||n===se.VIDEO?t.status:t.feedback_json?"completed":"pending",D=v(),E=L()==="completed",T=t.total_questions>0&&(t.completed_questions||0)<t.total_questions,C=n===se.SIMULATOR&&T,z=()=>{if(!C)return null;const g=t.completed_questions||0,U=t.total_questions||0;return`${g}/${U} Fragen`},S=g=>{g.stopPropagation(),x&&x(t,a)},de=g=>{g.stopPropagation(),k(!0)},ee=async()=>{c(!0);try{await i(t,n),k(!1)}catch(g){console.error("Error deleting session:",g)}finally{c(!1)}},W=(()=>{if(D==null||isNaN(D))return null;if(n===se.SIMULATOR||n===se.ROLEPLAY){const g=D<=10?D*10:D;return isNaN(g)?null:g}return isNaN(D)?null:D})(),F=g=>{if(!g&&g!==0)return{background:"#f1f5f9",color:"#64748b"};const U=parseFloat(g);return U>=80?{background:"#dcfce7",color:"#166534"}:U>=60?{background:"#fef9c3",color:"#854d0e"}:{background:"#fee2e2",color:"#991b1b"}},xe=(()=>{switch(n){case se.SIMULATOR:return Le;case se.VIDEO:return ze;default:return fe}})();return w?e.jsxs(A.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileTap:{scale:.98},children:[e.jsxs("div",{onClick:b,style:{background:"#fff",borderRadius:"16px",padding:"16px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:p,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(xe,{style:{width:"22px",height:"22px",color:h}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"15px",fontWeight:600,color:"#0f172a",marginBottom:"4px",lineHeight:"1.3"},children:a?.title||t.scenario_title||`Session #${t.id}`}),e.jsx("div",{style:{fontSize:"13px",color:"#64748b"},children:oe(t.created_at)})]}),i&&e.jsx("button",{onClick:de,disabled:u,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},title:"L√∂schen",children:u?e.jsx(M,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(V,{size:18})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px",paddingTop:"12px",borderTop:"1px solid #f1f5f9"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[!E&&!C&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"20px",background:"#fef3c7",color:"#92400e",fontSize:"12px",fontWeight:500},children:[e.jsx(ye,{size:12}),"In Bearbeitung"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",borderRadius:"20px",fontSize:"13px",fontWeight:600,...F(W)},children:[e.jsx(ue,{size:13}),W!==null?`${Math.round(W)}%`:"-- %"]}),(t.duration||t.video_duration_seconds)&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:"#64748b"},children:[e.jsx(ye,{size:12}),ge(t.duration||t.video_duration_seconds)]}),C&&e.jsx("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"20px",background:"#dbeafe",color:"#1e40af",fontSize:"12px",fontWeight:500},children:z()})]}),C&&x?e.jsxs("button",{onClick:S,style:{display:"flex",alignItems:"center",gap:"6px",padding:"10px 16px",borderRadius:"10px",border:"none",background:y||"#3B82F6",color:"#fff",fontSize:"13px",fontWeight:600,cursor:"pointer",boxShadow:`0 2px 8px ${y||"#3B82F6"}40`,flexShrink:0},children:[e.jsx(Ie,{size:14}),"Fortsetzen"]}):e.jsx(le,{size:22,style:{color:"#94a3b8",flexShrink:0}})]})]}),e.jsx(ce,{isOpen:I,onClose:()=>k(!1),onConfirm:ee,title:"Session l√∂schen",description:"M√∂chtest du diese Session wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:u})]}):e.jsxs(A.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsx("div",{onClick:b,style:{background:"#fff",borderRadius:"16px",padding:"20px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",transition:"all 0.2s"},onMouseEnter:g=>{g.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.08)",g.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:g=>{g.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)",g.currentTarget.style.borderColor="#e2e8f0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:p,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(xe,{style:{width:"24px",height:"24px",color:h}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#0f172a",marginBottom:"4px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:a?.title||t.scenario_title||`Session #${t.id}`}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap",fontSize:"13px",color:"#64748b"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(we,{size:14}),oe(t.created_at)]}),t.duration||t.video_duration_seconds?e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ye,{size:14}),ge(t.duration||t.video_duration_seconds)]}):null]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexShrink:0},children:[C&&x&&e.jsxs("button",{onClick:S,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",borderRadius:"10px",border:"none",background:y||"#3B82F6",color:"#fff",fontSize:"13px",fontWeight:600,cursor:"pointer",boxShadow:`0 2px 8px ${y||"#3B82F6"}40`,transition:"all 0.2s"},onMouseEnter:g=>{g.currentTarget.style.transform="scale(1.02)",g.currentTarget.style.boxShadow=`0 4px 12px ${y||"#3B82F6"}50`},onMouseLeave:g=>{g.currentTarget.style.transform="scale(1)",g.currentTarget.style.boxShadow=`0 2px 8px ${y||"#3B82F6"}40`},children:[e.jsx(Ie,{size:14}),"Fortsetzen"]}),C&&e.jsx("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"20px",background:"#dbeafe",color:"#1e40af",fontSize:"12px",fontWeight:500},children:z()}),!E&&!C&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"20px",background:"#fef3c7",color:"#92400e",fontSize:"12px",fontWeight:500},children:[e.jsx(ye,{size:12}),"In Bearbeitung"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"6px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:600,...F(W)},children:[e.jsx(ue,{size:14}),W!==null?`${Math.round(W)}%`:"-- %"]}),i&&e.jsx("button",{onClick:de,disabled:u,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"color 0.2s"},onMouseEnter:g=>{g.currentTarget.style.color="#ef4444"},onMouseLeave:g=>{g.currentTarget.style.color="#94a3b8"},title:"L√∂schen",children:u?e.jsx(M,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(V,{size:18})}),e.jsx(le,{size:20,style:{color:"#94a3b8"}})]})]})}),e.jsx(ce,{isOpen:I,onClose:()=>k(!1),onConfirm:ee,title:"Session l√∂schen",description:"M√∂chtest du diese Session wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:u})]})},mt=({proScore:t,contraScore:n})=>{const a=t+n,b=a>0?Math.round(t/a*100):50;return e.jsxs("div",{style:{height:"6px",borderRadius:"3px",overflow:"hidden",display:"flex",backgroundColor:"#f1f5f9",width:"100%",maxWidth:"120px"},children:[e.jsx("div",{style:{background:"linear-gradient(90deg, #22c55e 0%, #16a34a 100%)",width:`${b}%`,height:"100%"}}),e.jsx("div",{style:{background:"linear-gradient(90deg, #ef4444 0%, #dc2626 100%)",width:`${100-b}%`,height:"100%"}})]})},Rs=({decision:t,onClick:n,onDelete:a,headerGradient:b,headerText:x,primaryAccent:i})=>{const[p,h]=d.useState(!1),[y,u]=d.useState(!1),c=Se(900),I=(t.pros||[]).reduce((l,E)=>l+(E.text?.trim()?E.weight||5:0),0),k=(t.cons||[]).reduce((l,E)=>l+(E.text?.trim()?E.weight||5:0),0),w=(t.pros||[]).filter(l=>l.text?.trim()).length,v=(t.cons||[]).filter(l=>l.text?.trim()).length,L=l=>{l.stopPropagation(),u(!0)},D=async()=>{h(!0);try{await a(t.id),u(!1)}catch(l){console.error("Error deleting decision:",l)}finally{h(!1)}};return c?e.jsxs(A.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileTap:{scale:.98},children:[e.jsxs("div",{onClick:n,style:{background:"#fff",borderRadius:"16px",padding:"16px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf615, #8b5cf630)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Ce,{style:{width:"22px",height:"22px",color:"#8b5cf6"}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"15px",fontWeight:600,color:"#0f172a",marginBottom:"4px",lineHeight:"1.3",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.topic||"Entscheidung"}),e.jsx("div",{style:{fontSize:"13px",color:"#64748b"},children:oe(t.created_at)})]}),e.jsx("button",{onClick:L,disabled:p,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},title:"L√∂schen",children:p?e.jsx(M,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(V,{size:18})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",paddingTop:"12px",borderTop:"1px solid #f1f5f9"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ct,{size:14,color:"#16a34a"}),e.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:"#16a34a"},children:w})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(dt,{size:14,color:"#dc2626"}),e.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:"#dc2626"},children:v})]}),e.jsx(mt,{proScore:I,contraScore:k})]}),e.jsx(le,{size:22,style:{color:"#94a3b8",flexShrink:0}})]})]}),e.jsx(ce,{isOpen:y,onClose:()=>u(!1),onConfirm:D,title:"Entscheidung l√∂schen",description:"M√∂chtest du diese Entscheidung wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:p})]}):e.jsxs(A.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsx("div",{onClick:n,style:{background:"#fff",borderRadius:"16px",padding:"20px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",transition:"all 0.2s"},onMouseEnter:l=>{l.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.08)",l.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:l=>{l.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)",l.currentTarget.style.borderColor="#e2e8f0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf615, #8b5cf630)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Ce,{style:{width:"24px",height:"24px",color:"#8b5cf6"}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#0f172a",marginBottom:"6px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.topic||"Entscheidung"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap",fontSize:"13px",color:"#64748b"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ct,{size:14,color:"#16a34a"}),e.jsxs("span",{style:{fontWeight:500,color:"#16a34a"},children:[w," Pro"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(dt,{size:14,color:"#dc2626"}),e.jsxs("span",{style:{fontWeight:500,color:"#dc2626"},children:[v," Contra"]})]})]}),e.jsx(mt,{proScore:I,contraScore:k}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(we,{size:14}),oe(t.created_at)]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[e.jsx("button",{onClick:L,disabled:p,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"L√∂schen",children:p?e.jsx(M,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(V,{size:18})}),e.jsx(le,{size:20,style:{color:"#94a3b8"}})]})]})}),e.jsx(ce,{isOpen:y,onClose:()=>u(!1),onConfirm:D,title:"Entscheidung l√∂schen",description:"M√∂chtest du diese Entscheidung wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:p})]})},Ts={love:{icon:Yt,color:"#E11D48",label:"Liebe"},talent:{icon:ue,color:"#F59E0B",label:"Talent"},need:{icon:Ht,color:"#10B981",label:"Welt"},market:{icon:qt,color:"#6366F1",label:"Markt"}},ut=({dimensions:t})=>e.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:Object.entries(Ts).map(([n,a])=>{const b=t?.[n]||[],x=b.length>0,i=a.icon;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:500,backgroundColor:x?`${a.color}15`:"#f1f5f9",color:x?a.color:"#94a3b8",border:x?`1px solid ${a.color}30`:"1px solid #e2e8f0"},children:[e.jsx(i,{size:12}),e.jsx("span",{children:b.length})]},n)})}),Ls=({ikigai:t,onDelete:n,onNavigate:a,headerGradient:b,headerText:x,primaryAccent:i})=>{const[p,h]=d.useState(!1),[y,u]=d.useState(!1),c=Se(900),I={love:t.love_tags||[],talent:t.talent_tags||[],need:t.need_tags||[],market:t.market_tags||[]},k=Object.values(I).filter(l=>l.length>0).length,w=t.status==="completed",v=t.paths?.[0]?.role_title||(w?"Ikigai-Analyse abgeschlossen":"Ikigai-Analyse"),L=l=>{l.stopPropagation(),u(!0)},D=async()=>{h(!0);try{await n(t.id),u(!1)}catch(l){console.error("Error deleting ikigai:",l)}finally{h(!1)}};return c?e.jsxs(A.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileTap:{scale:.98},children:[e.jsxs("div",{onClick:a,style:{background:"#fff",borderRadius:"16px",padding:"16px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:w?"linear-gradient(135deg, #E11D48, #F59E0B, #10B981, #6366F1)":"linear-gradient(135deg, #6366F115, #6366F130)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(De,{style:{width:"22px",height:"22px",color:w?"white":"#6366F1"}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"15px",fontWeight:600,color:"#0f172a",marginBottom:"4px",lineHeight:"1.3",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:v}),e.jsx("div",{style:{fontSize:"13px",color:"#64748b"},children:oe(t.created_at)})]}),e.jsx("button",{onClick:L,disabled:p,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},title:"L√∂schen",children:p?e.jsx(M,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(V,{size:18})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",paddingTop:"12px",borderTop:"1px solid #f1f5f9"},children:[e.jsx(ut,{dimensions:I}),e.jsx(le,{size:22,style:{color:"#94a3b8",flexShrink:0}})]})]}),e.jsx(ce,{isOpen:y,onClose:()=>u(!1),onConfirm:D,title:"Ikigai-Analyse l√∂schen",description:"M√∂chtest du diese Ikigai-Analyse wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:p})]}):e.jsxs(A.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsx("div",{onClick:a,style:{background:"#fff",borderRadius:"16px",padding:"20px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",transition:"all 0.2s"},onMouseEnter:l=>{l.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.08)",l.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:l=>{l.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)",l.currentTarget.style.borderColor="#e2e8f0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:w?"linear-gradient(135deg, #E11D48, #F59E0B, #10B981, #6366F1)":"linear-gradient(135deg, #6366F115, #6366F130)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(De,{style:{width:"24px",height:"24px",color:w?"white":"#6366F1"}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#0f172a",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:v}),w&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:"10px",fontSize:"11px",fontWeight:600,background:"linear-gradient(135deg, #22c55e, #16a34a)",color:"white"},children:"Abgeschlossen"}),!w&&k>0&&e.jsxs("span",{style:{padding:"2px 8px",borderRadius:"10px",fontSize:"11px",fontWeight:600,background:"#f59e0b20",color:"#f59e0b"},children:[k,"/4 Dimensionen"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap",fontSize:"13px",color:"#64748b"},children:[e.jsx(ut,{dimensions:I}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(we,{size:14}),oe(t.created_at)]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[e.jsx("button",{onClick:L,disabled:p,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"L√∂schen",children:p?e.jsx(M,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(V,{size:18})}),e.jsx(le,{size:20,style:{color:"#94a3b8"}})]})]})}),e.jsx(ce,{isOpen:y,onClose:()=>u(!1),onConfirm:D,title:"Ikigai-Analyse l√∂schen",description:"M√∂chtest du diese Ikigai-Analyse wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:p})]})},Os=t=>t?new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",Bs=t=>t>=90?"Ausgezeichnet!":t>=80?"Sehr gut!":t>=70?"Gut!":t>=60?"Solide Leistung":t>=50?"Ausbauf√§hig":"In Arbeit",gt={ikigai:{label:"Ikigai-Kompass",icon:De},decision:{label:"Entscheidungs-Board",icon:Ce},briefing:{label:"Smart Briefing",icon:qe},simulator:{label:"Szenario-Training",icon:Le},video:{label:"Wirkungs-Analyse",icon:ze},roleplay:{label:"Live-Simulation",icon:fe}},Ws=({score:t,size:n=80,primaryAccent:a})=>{const b=Math.min(100,Math.max(0,t||0)),x=(n-10)/2,i=x*2*Math.PI,p=i-b/100*i;return e.jsxs("div",{style:{position:"relative",width:n,height:n},children:[e.jsxs("svg",{width:n,height:n,style:{transform:"rotate(-90deg)"},children:[e.jsx("circle",{cx:n/2,cy:n/2,r:x,fill:"none",stroke:"rgba(255,255,255,0.25)",strokeWidth:8}),e.jsx(A.circle,{cx:n/2,cy:n/2,r:x,fill:"none",stroke:"#fff",strokeWidth:8,strokeLinecap:"round",strokeDasharray:i,initial:{strokeDashoffset:i},animate:{strokeDashoffset:p},transition:{duration:1.2,ease:"easeOut"}})]}),e.jsx("div",{style:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:e.jsx(A.span,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{delay:.3,duration:.4},style:{fontSize:n/3,fontWeight:700,color:"#fff",lineHeight:1},children:Math.round(t)})})]})},ft=({type:t,title:n,subtitle:a,score:b,status:x,createdAt:i,duration:p,onBack:h,onDelete:y,onDownload:u,isDeleting:c=!1,isDownloading:I=!1,extraActions:k})=>{bs();const w=Se(768),{branding:v}=He(),L=v?.["--header-gradient"]||Ke["--header-gradient"],D=v?.["--primary-accent"]||Ke["--primary-accent"],l=gt[t]||gt.simulator,E=l.icon,T=b!=null&&b>0;return e.jsx("div",{style:{background:L,padding:w?"20px 16px":"24px 32px",position:"sticky",top:0,zIndex:40},children:e.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[h&&e.jsxs("button",{onClick:h,style:{display:"flex",alignItems:"center",gap:"6px",background:"rgba(255,255,255,0.15)",border:"none",borderRadius:"8px",padding:"8px 12px",cursor:"pointer",color:"#fff",fontSize:"13px",marginBottom:"16px"},children:[e.jsx(yt,{size:16}),"Zur√ºck zur √úbersicht"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px"},children:[!w&&T&&e.jsx(Ws,{score:b,size:80,primaryAccent:D}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap",marginBottom:"8px"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px",padding:"4px 10px",borderRadius:"20px",background:"rgba(255,255,255,0.2)",color:"#fff"},children:[e.jsx(E,{size:14}),l.label]}),T&&e.jsx("span",{style:{fontSize:"12px",fontWeight:500,padding:"4px 10px",borderRadius:"20px",background:"rgba(255,255,255,0.9)",color:Y(b,D)},children:Bs(b)}),x==="in_progress"&&e.jsx("span",{style:{fontSize:"12px",fontWeight:500,padding:"4px 10px",borderRadius:"20px",background:"rgba(255,255,255,0.9)",color:"#f59e0b"},children:"In Bearbeitung"})]}),e.jsx("h1",{style:{fontSize:w?"20px":"24px",fontWeight:700,color:"#fff",margin:0,marginBottom:a?"4px":"8px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:n}),a&&e.jsx("p",{style:{fontSize:"14px",color:"rgba(255,255,255,0.8)",margin:0,marginBottom:"8px"},children:a}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[i&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"rgba(255,255,255,0.8)"},children:[e.jsx(we,{size:14}),Os(i)]}),p&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"rgba(255,255,255,0.8)"},children:[e.jsx(ye,{size:14}),Math.floor(p/60),":",String(p%60).padStart(2,"0")," Min."]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexShrink:0},children:[u&&e.jsxs("button",{onClick:u,disabled:I,title:"Als PDF herunterladen",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:w?"10px":"10px 16px",background:"rgba(255,255,255,0.15)",border:"none",borderRadius:"8px",cursor:I?"wait":"pointer",color:"#fff",fontSize:"13px",fontWeight:500,opacity:I?.7:1},children:[e.jsx(jt,{size:16}),!w&&"PDF"]}),k,y&&e.jsxs("button",{onClick:y,disabled:c,title:"L√∂schen",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:w?"10px":"10px 16px",background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"8px",cursor:c?"wait":"pointer",color:"#fff",fontSize:"13px",fontWeight:500,opacity:c?.7:1},children:[e.jsx(V,{size:16}),!w&&"L√∂schen"]})]})]})]})})},bt={love:{key:"love",label:"Liebe",icon:"‚ù§Ô∏è",color:"#E11D48",question:"Vergiss mal Geld und Karriere. Bei welchen T√§tigkeiten vergisst du die Zeit?",placeholder:"Erz√§hle mir, was du wirklich liebst zu tun...",description:"Was du liebst"},talent:{key:"talent",label:"Talent",icon:"‚≠ê",color:"#F59E0B",question:"Worin bist du richtig gut? Was f√§llt dir leicht, w√§hrend andere damit k√§mpfen?",placeholder:"Beschreibe deine St√§rken und F√§higkeiten...",description:"Worin du gut bist"},need:{key:"need",label:"Welt",icon:"üåç",color:"#10B981",question:"Welche Probleme der Welt w√ºrdest du gerne l√∂sen? Wo siehst du Bedarf?",placeholder:"Welchen Beitrag m√∂chtest du leisten...",description:"Was die Welt braucht"},market:{key:"market",label:"Markt",icon:"üí∞",color:"#6366F1",question:"Wof√ºr werden Menschen in deinem Bereich bezahlt? Was ist gefragt?",placeholder:"Welche Berufe oder M√§rkte interessieren dich...",description:"Wof√ºr du bezahlt wirst"}},o={SIMULATOR:"simulator",ROLEPLAY:"roleplay",VIDEO:"video",BRIEFINGS:"briefings",DECISIONS:"decisions",IKIGAI:"ikigai"},Ge=[{id:o.BRIEFINGS,label:"Smart Briefings",icon:qe},{id:o.DECISIONS,label:"Entscheidungs-Kompass",icon:Ce},{id:o.IKIGAI,label:"Ikigai-Kompass",icon:De},{id:o.SIMULATOR,label:"Szenario-Training",icon:Le},{id:o.VIDEO,label:"Wirkungs-Analyse",icon:ze},{id:o.ROLEPLAY,label:"Live-Simulationen",icon:fe}],ai=o,ri=({onBack:t,onSelectSession:n,isAuthenticated:a,onLoginClick:b,onContinueSession:x,onRepeatSession:i,initialTab:p,onNavigateToModule:h})=>{const{branding:y,demoCode:u}=He(),[c,I]=d.useState(p||o.BRIEFINGS);d.useEffect(()=>{p&&I(p)},[p]);const[k,w]=d.useState(null),[v,L]=d.useState(null);d.useEffect(()=>{window.scrollTo(0,0)},[c,k]);const[D,l]=d.useState([]),[E,T]=d.useState([]),[C,z]=d.useState([]),[S,de]=d.useState([]),[ee,be]=d.useState([]),[W,F]=d.useState([]),[P,xe]=d.useState([]),[g,U]=d.useState([]),[K,Oe]=d.useState([]),[Ee,X]=d.useState(null),[B,J]=d.useState(null),[_e,ie]=d.useState(null),[r,f]=d.useState(null),[_,ne]=d.useState({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),[Ne,pe]=d.useState(null),[Be,ke]=d.useState(!1),[Z,ae]=d.useState(!0),[Ye,Xe]=d.useState(null);d.useEffect(()=>{a?Ae():ae(!1)},[a]);const Ae=async()=>{ae(!0),Xe(null);try{const s=je(),m=u?`&demo_code=${encodeURIComponent(u)}`:"",[j,N,O,G,Q,te,he,Pt,Ut]=await Promise.all([cs({limit:50,...u&&{demo_code:u}}).catch(()=>({data:[]})),fetch(`${s}/simulator/sessions?limit=50${m}`,{headers:{"X-WP-Nonce":re()}}).then(R=>R.json()).catch(()=>({data:[]})),fetch(`${s}/video-training/sessions?limit=50${m}`,{headers:{"X-WP-Nonce":re()}}).then(R=>R.json()).catch(()=>({data:[]})),q.request(`/smartbriefing/briefings?limit=50${u?`&demo_code=${encodeURIComponent(u)}`:""}`,{method:"GET"}).catch(()=>({success:!1,data:{briefings:[]}})),q.getDecisions().catch(()=>({success:!1,data:{decisions:[]}})),q.getIkigais().catch(()=>({success:!1,data:{ikigais:[]}})),ds().catch(()=>[]),fetch(`${s}/simulator/scenarios`,{headers:{"X-WP-Nonce":re()}}).then(R=>R.json()).catch(()=>({data:[]})),fetch(`${s}/video-training/scenarios`,{headers:{"X-WP-Nonce":re()}}).then(R=>R.json()).catch(()=>({data:[]}))]),$e=(R,Re="sessions")=>Array.isArray(R?.data)?R.data:Array.isArray(R?.data?.[Re])?R.data[Re]:Array.isArray(R?.[Re])?R[Re]:Array.isArray(R)?R:[],Pe=R=>Array.isArray(R?.data?.scenarios)?R.data.scenarios:Array.isArray(R?.data)?R.data:Array.isArray(R)?R:[];l($e(j)),T($e(N)),z($e(O)),de(G?.data?.briefings||[]),be(Q?.data?.decisions||[]),F(te?.data?.ikigais||[]),xe(Pe(he)),U(Pe(Pt)),Oe(Pe(Ut))}catch(s){console.error("Failed to load sessions:",s),Xe(s.message||"Fehler beim Laden der Daten")}finally{ae(!1)}},Je=d.useMemo(()=>{const s={};return P.forEach(m=>{s[m.id]=m}),s},[P]),Ze=d.useMemo(()=>{const s={};return g.forEach(m=>{s[m.id]=m}),s},[g]),Qe=d.useMemo(()=>{const s={};return K.forEach(m=>{s[m.id]=m}),s},[K]),Dt=()=>{switch(c){case o.SIMULATOR:return E;case o.VIDEO:return C;case o.BRIEFINGS:return S;case o.DECISIONS:return ee;case o.IKIGAI:return W;default:return D}},zt=()=>{switch(c){case o.SIMULATOR:return Ze;case o.VIDEO:return Qe;default:return Je}},et=D.length+E.length+C.length+S.length+ee.length,tt=async s=>{(await q.request(`/smartbriefing/briefings/${s}`,{method:"DELETE"})).success&&de(j=>j.filter(N=>N.id!==s))},Et=s=>{X(s)},_t=()=>{X(null)},st=async s=>{(await q.deleteDecision(s)).success&&be(j=>j.filter(N=>N.id!==s))},it=async s=>{await q.deleteIkigai(s)&&F(j=>j.filter(N=>N.id!==s))},At=s=>{J(s)},nt=()=>{J(null),ie(null)},Rt=s=>{f(s),ne({love:{input:s.love_input||"",tags:s.love_tags||[]},talent:{input:s.talent_input||"",tags:s.talent_tags||[]},need:{input:s.need_input||"",tags:s.need_tags||[]},market:{input:s.market_input||"",tags:s.market_tags||[]}}),s.status==="completed"&&s.paths?pe({summary:s.summary,paths:s.paths}):pe(null)},We=()=>{f(null),ne({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),pe(null)},Tt=async(s,m,j)=>{if(ne(N=>({...N,[s]:{input:m,tags:j}})),r?.id)try{await q.updateIkigai(r.id,{[`${s}_input`]:m,[`${s}_tags`]:j})}catch(N){console.error("[Ikigai] Failed to save dimension:",N)}},Lt=async(s,m)=>{try{return(await q.extractIkigaiKeywords(s,m))?.keywords||[]}catch(j){return console.error("[Ikigai] Failed to extract keywords:",j),[]}},Ot=(s,m)=>{ne(j=>{const N=j[s].tags.filter(O=>O!==m);return{...j,[s]:{...j[s],tags:N}}})},Bt=async()=>{if(Object.values(_).every(m=>m.tags&&m.tags.length>0)){ke(!0);try{const m=await q.synthesizeIkigaiPaths({love_tags:_.love.tags,talent_tags:_.talent.tags,need_tags:_.need.tags,market_tags:_.market.tags});m&&(pe(m),r?.id&&(await q.updateIkigai(r.id,{summary:m.summary,paths:m.paths,status:"completed"}),F(j=>j.map(N=>N.id===r.id?{...N,summary:m.summary,paths:m.paths,status:"completed"}:N))))}catch(m){console.error("[Ikigai] Failed to synthesize paths:",m)}finally{ke(!1)}}},Wt=Object.values(_).every(s=>s.tags&&s.tags.length>0),Mt=s=>{be(m=>m.map(j=>j.id===s.id?s:j)),J(s)},Ft=s=>{w(s),L(c)},Me=()=>{w(null),L(null)},Fe=async(s,m)=>{const j=je();try{let N,O;switch(m){case o.SIMULATOR:N=`${j}/simulator/sessions/${s.id}`,O=()=>T(te=>te.filter(he=>he.id!==s.id));break;case o.ROLEPLAY:N=`${j}/sessions/${s.id}`,O=()=>l(te=>te.filter(he=>he.id!==s.id));break;case o.VIDEO:N=`${j}/video-training/sessions/${s.id}`,O=()=>z(te=>te.filter(he=>he.id!==s.id));break;default:throw new Error("Unknown session type")}const Q=await(await fetch(N,{method:"DELETE",headers:{"X-WP-Nonce":re()}})).json();if(Q.success)O(),k&&Me();else throw new Error(Q.message||"Delete failed")}catch(N){throw console.error("Failed to delete session:",N),N}},at=(s,m)=>(m===o.SIMULATOR?Ze:m===o.VIDEO?Qe:Je)[s?.scenario_id];if(Ee)return e.jsx(hs,{briefing:Ee,onBack:_t,onDelete:tt});if(B){const s={topic:B.topic||"",context:B.context||"",pros:B.pros||[],cons:B.cons||[],proScore:B.pro_score||0,contraScore:B.contra_score||0},m=async(O,G)=>{try{const Q={topic:O.topic,context:O.context||null,pros:O.pros,cons:O.cons,pro_score:O.proScore,contra_score:O.contraScore,analysis:G,status:"completed"};await q.updateDecision(B.id,Q);const te={...B,...Q};Mt(te),ie({data:O,result:G})}catch(Q){console.error("[SessionHistory] Failed to update decision:",Q)}},j=async O=>B.id,N=async(O,G)=>{try{await q.updateDecision(O,{topic:G.topic,context:G.context||null,pros:G.pros,cons:G.cons,pro_score:G.proScore,contra_score:G.contraScore,status:G.status||"draft"})}catch(Q){console.error("[SessionHistory] Failed to update decision:",Q)}};return e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx(ft,{type:"decision",title:B.topic||"Entscheidung",status:B.status,createdAt:B.created_at,onBack:nt,onDelete:()=>{window.confirm("M√∂chtest du diese Entscheidungs-Analyse wirklich l√∂schen?")&&(st(B.id),nt())}}),e.jsx("div",{className:"p-6 max-w-[900px] mx-auto",children:_e?e.jsx(ms,{decisionData:_e.data,analysisResult:_e.result,onStartNew:()=>{ie(null),J(null)},onEditDecision:()=>{ie(null)}}):e.jsx(us,{initialData:s,onAnalysisComplete:m,isAuthenticated:a,savedDecisionId:B.id,onSaveDraft:j,onUpdateSession:N,onDecisionIdChange:()=>{}})})]})}if(r)return e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx(ft,{type:"ikigai",title:"Ikigai-Analyse",subtitle:r.status==="completed"?"Berufliche Orientierung":"In Bearbeitung",status:r.status,createdAt:r.created_at,onBack:We,onDelete:()=>{window.confirm("M√∂chtest du diese Ikigai-Analyse wirklich l√∂schen?")&&(it(r.id),We())}}),e.jsx("div",{className:"p-6 max-w-[900px] mx-auto",children:Ne?e.jsx(gs,{dimensions:_,synthesisResult:Ne,onStartNew:We,onEdit:()=>pe(null),DIMENSIONS:bt}):e.jsx(fs,{dimensions:_,DIMENSIONS:bt,onExtractKeywords:Lt,onUpdateDimension:Tt,onRemoveTag:Ot,allDimensionsFilled:Wt,onSynthesize:Bt,isSynthesizing:Be})})]});if(k){if(v===o.ROLEPLAY){const j=at(k,v);return e.jsx(xs,{session:k,scenario:j,onBack:Me,onRepeat:()=>i?.(k,j,"roleplay"),onDelete:N=>Fe(N,o.ROLEPLAY)})}const m={[o.SIMULATOR]:"simulator",[o.VIDEO]:"video"}[v]||"simulator";return e.jsx(Es,{session:k,type:v,scenario:at(k,v),onBack:Me,onContinueSession:x,onRepeatSession:(j,N)=>i?.(j,N,m),onDeleteSession:Fe})}if(!a)return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-brand-gradient flex items-center justify-center",children:e.jsx(xt,{className:"w-7 h-7 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold text-slate-900",children:"Meine Sessions"})]}),e.jsx("p",{className:"text-lg text-slate-500 max-w-[600px] mx-auto",children:"Hier findest du deine gespeicherten √úbungen und Fortschritte"})]}),e.jsxs($,{className:"max-w-[500px] mx-auto mt-16 p-10 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl bg-brand-gradient flex items-center justify-center mx-auto mb-5",children:e.jsx(pt,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-3",children:"Anmeldung erforderlich"}),e.jsx("p",{className:"text-slate-500 mb-6 leading-relaxed",children:"Um deine gespeicherten Sessions zu sehen, musst du dich zuerst anmelden."}),e.jsx(H,{onClick:b,size:"lg",icon:e.jsx(pt,{className:"w-5 h-5"}),children:"Jetzt anmelden"})]})]});if(Z)return e.jsx("div",{className:"min-h-[60vh] flex items-center justify-center p-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx(M,{className:"w-12 h-12 text-primary animate-spin mx-auto"}),e.jsx("p",{className:"text-slate-500 mt-4",children:"Sessions werden geladen..."})]})});if(Ye)return e.jsx("div",{className:"min-h-[400px] flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-[400px] p-6",children:[e.jsx(me,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Fehler beim Laden"}),e.jsx("p",{className:"text-slate-500 mb-6",children:Ye}),e.jsx(H,{onClick:Ae,children:"Erneut versuchen"})]})});const rt=Dt(),$t=zt();return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8 text-center relative",children:[e.jsxs("div",{className:"inline-flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-brand-gradient flex items-center justify-center",children:e.jsx(xt,{className:"w-7 h-7 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold text-slate-900",children:"Meine Sessions"})]}),e.jsxs("p",{className:"text-lg text-slate-500 max-w-[600px] mx-auto",children:[et," ",et===1?"√úbung":"√úbungen"," gespeichert"]}),e.jsx("button",{onClick:Ae,disabled:Z,className:"absolute top-0 right-0 p-2.5 rounded-lg border border-slate-200 bg-white text-slate-500 shadow-sm flex items-center justify-center md:hidden disabled:opacity-50",children:e.jsx(ht,{className:`w-5 h-5 ${Z?"animate-spin":""}`})})]}),e.jsx("div",{className:"hidden lg:flex flex-wrap gap-2 mx-6 mb-6 bg-slate-100 p-1.5 rounded-[14px]",children:Ge.map(s=>{const m=s.icon,j=c===s.id,N=s.id===o.SIMULATOR?E.length:s.id===o.VIDEO?C.length:s.id===o.BRIEFINGS?S.length:s.id===o.DECISIONS?ee.length:s.id===o.IKIGAI?W.length:D.length;return e.jsxs("button",{onClick:()=>I(s.id),className:`flex-1 min-w-fit py-3 px-4 rounded-[10px] border-none text-sm cursor-pointer flex items-center justify-center gap-2 transition-all ${j?"bg-white text-slate-900 font-semibold shadow-md":"bg-transparent text-slate-500 font-medium hover:bg-white/50"}`,children:[e.jsx(m,{size:18}),e.jsx("span",{children:s.label}),e.jsx("span",{className:`py-0.5 px-2 rounded-[10px] text-xs font-semibold min-w-[24px] text-center ${j?"bg-primary text-white":"bg-slate-200 text-slate-500"}`,children:N})]},s.id)})}),e.jsxs("div",{className:"lg:hidden mx-4 mb-4",children:[e.jsx("div",{className:"flex gap-2 justify-center mb-3",children:Ge.map(s=>{const m=s.icon,j=c===s.id,N=s.id===o.SIMULATOR?E.length:s.id===o.VIDEO?C.length:s.id===o.BRIEFINGS?S.length:s.id===o.DECISIONS?ee.length:s.id===o.IKIGAI?W.length:D.length;return e.jsxs("button",{onClick:()=>I(s.id),className:`flex-1 max-w-[80px] py-3 px-2 rounded-xl border-2 cursor-pointer flex flex-col items-center justify-center gap-1 transition-all ${j?"bg-white shadow-md border-primary":"bg-slate-100 border-transparent"}`,children:[e.jsx(m,{size:20,className:j?"text-primary":"text-slate-500"}),e.jsx("span",{className:`py-0.5 px-1.5 rounded-lg text-[11px] font-semibold min-w-[20px] text-center ${j?"bg-primary text-white":"bg-slate-200 text-slate-500"}`,children:N})]},s.id)})}),e.jsx("div",{className:"text-center text-[15px] font-semibold text-slate-900 py-2 px-4 bg-white rounded-[10px] shadow-sm",children:Ge.find(s=>s.id===c)?.label})]}),e.jsxs("div",{className:"hidden sm:flex justify-center lg:justify-end flex-wrap gap-3 mx-6 mb-6",children:[e.jsxs(H,{variant:"outline",onClick:Ae,disabled:Z,children:[e.jsx(ht,{className:`w-4 h-4 mr-2 ${Z?"animate-spin":""}`}),"Aktualisieren"]}),h&&e.jsxs(H,{onClick:()=>{const s={[o.BRIEFINGS]:"smart_briefing",[o.DECISIONS]:"decision_board",[o.IKIGAI]:"ikigai",[o.SIMULATOR]:"simulator",[o.VIDEO]:"video_training",[o.ROLEPLAY]:"dashboard"};h(s[c]||"overview")},children:[e.jsx(Xt,{className:"w-4 h-4 mr-2"}),c===o.BRIEFINGS?"Neues Briefing":c===o.DECISIONS?"Neue Entscheidungs-Analyse":c===o.IKIGAI?"Neue Ikigai-Analyse":c===o.SIMULATOR?"Neues Szenario-Training":c===o.VIDEO?"Neue Wirkungs-Analyse":"Neue Live-Simulation"]})]}),e.jsx("div",{className:"mx-4 sm:mx-6",children:rt.length===0?e.jsxs($,{className:"text-center py-16 px-6",children:[c===o.SIMULATOR&&e.jsx(Le,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),c===o.ROLEPLAY&&e.jsx(fe,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),c===o.VIDEO&&e.jsx(ze,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),c===o.BRIEFINGS&&e.jsx(qe,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),c===o.DECISIONS&&e.jsx(Ce,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),c===o.IKIGAI&&e.jsx(De,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),e.jsxs("h3",{className:"text-xl font-semibold text-slate-600 mb-2",children:["Noch keine ",c===o.SIMULATOR?"Szenario-Trainings":c===o.VIDEO?"Wirkungs-Analysen":c===o.BRIEFINGS?"Smart Briefings":c===o.DECISIONS?"Entscheidungs-Analysen":c===o.IKIGAI?"Ikigai-Analysen":"Live-Simulationen"]}),e.jsx("p",{className:"text-slate-500 mb-6",children:c===o.BRIEFINGS?"Erstelle dein erstes Briefing, um dich optimal vorzubereiten.":c===o.DECISIONS?"Nutze den Entscheidungs-Kompass, um deine erste Entscheidung zu analysieren.":c===o.IKIGAI?"Entdecke deinen idealen Karrierepfad mit dem Ikigai-Kompass.":"Starte dein erstes Training, um hier deine Fortschritte zu sehen."}),e.jsxs(H,{onClick:t,children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),c===o.BRIEFINGS?"Briefing erstellen":c===o.DECISIONS?"Entscheidung analysieren":c===o.IKIGAI?"Ikigai entdecken":"Training starten"]})]}):e.jsx(A.div,{className:"flex flex-col gap-3",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},children:c===o.BRIEFINGS?S.map(s=>e.jsx(_s,{briefing:s,onClick:()=>Et(s),onDelete:tt},s.id)):c===o.DECISIONS?ee.map(s=>e.jsx(Rs,{decision:s,onClick:()=>At(s),onDelete:st},s.id)):c===o.IKIGAI?W.map(s=>e.jsx(Ls,{ikigai:s,onDelete:it,onNavigate:()=>Rt(s)},s.id)):rt.map(s=>{const m=$t[s.scenario_id];return e.jsx(As,{session:s,type:c,scenario:m,onClick:()=>Ft(s),onContinueSession:x,onDeleteSession:Fe},s.id)})})})]})};export{ai as SESSION_TABS,ri as default};
