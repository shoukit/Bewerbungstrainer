import{j as e,p as U,q as Rt,b as re,a as We,T as ae,an as It,s as Bt,ao as $t,B as lt,Q as Fe,W as Ze,e as Le,aj as _e,a6 as ct,o as dt,Y as pe,I as ye,M as me,ad as At,af as pt,k as ut,x as V,y as Ke,J as xt,h as Ve,a8 as Mt,l as Ue,a9 as _t,aa as Qe,ab as Tt,n as rt,X as Et,i as Wt,ap as Pe,r as be,$ as Ge,a1 as Ft,aq as Lt,A as Dt,m as qt,w as Ot}from"./ui-vendor-BAEfSb-X.js";import{a as u,d as Je}from"./react-vendor-uDOJF2jQ.js";import{g as Nt,b as Ht,C as p,u as Te,D as ue,j as Ee,w as te,m as Vt}from"./designTokens-LSOQEIoP.js";import{S as Pt}from"./ScenarioDashboard-khg2dnvk.js";import{F as Gt,a as Zt}from"./index.js";import{u as Se}from"./useBranding-CRmuKfX5.js";import{u as Kt}from"./useMobile-YxjH166V.js";import{M as ht,a as gt,A as Ut}from"./MicrophoneTestDialog-Bxd46hzl.js";import{P as Qt}from"./progress-bar-C-jl1BET.js";import{D as Jt}from"./DeviceSettingsDialog-DsCyxatN.js";import{F as ft}from"./fullscreen-loader-CDncfBzO.js";import{D as Yt}from"./DynamicFormField-GSaBss9o.js";import"./ScenarioCard-Da4NRxEW.js";import"./dialog-Bc6rUSl2.js";import"./utils-BEHD0UYf.js";import"./DeviceSetupPage-BoApRe_d.js";const st="[SIMULATOR_DASHBOARD]",Xt={briefcase:lt,banknote:$t,user:Bt,presentation:It,target:ae,mic:U},er=async()=>{const r=await fetch(`${Nt()}/simulator/scenarios`,{headers:{"X-WP-Nonce":Ht()},credentials:"same-origin"});if(!r.ok)throw new Error("Fehler beim Laden der Szenarien");const a=await r.json();if(a.success&&a.data?.scenarios)return a.data.scenarios;throw new Error("Keine Szenarien gefunden")},tr=r=>Xt[r.icon]||lt,rr=r=>[{text:`${r.question_count_min}-${r.question_count_max} Fragen`},{icon:re,text:`${Math.round(r.time_limit_per_question/60)} Min/Frage`}],nt=({onSelectScenario:r,isAuthenticated:a,requireAuth:f,setPendingScenario:o,onNavigateToHistory:s})=>(u.useEffect(()=>(console.log(`${st} ðŸ”µ MOUNT`),()=>{console.log(`${st} ðŸ”´ UNMOUNT`)}),[]),e.jsxs(e.Fragment,{children:[e.jsx(Gt,{featureId:"simulator",showOnMount:!0}),e.jsx(Pt,{title:"Szenario-Training",subtitle:"Trainiere wichtige Karriere-Skills mit KI-Feedback",headerIcon:We,headerActions:e.jsx(Zt,{featureId:"simulator",size:"sm"}),fetchScenarios:er,moduleKey:"simulator",historyButtonLabel:"Meine Szenario-Trainings",onNavigateToHistory:s,onSelectScenario:r,renderCardMeta:rr,getIconForScenario:tr,cardActionLabel:"Starten",cardActionIcon:Rt,categoryField:"category",emptyStateIcon:U,emptyStateTitle:"Keine Trainingsszenarien verfÃ¼gbar.",searchPlaceholder:"Szenarien durchsuchen...",isAuthenticated:a,requireAuth:f,setPendingScenario:o,loadingMessage:"Szenarien werden geladen..."})]})),sr=({field:r,value:a,onChange:f,error:o,focusColor:s,branding:c})=>{const m=s||"#4a9ec9",w={width:"100%",padding:`${c.space[3]} ${c.space[4]}`,borderRadius:c.radius.lg,border:`2px solid ${o?p.red[500]:p.slate[200]}`,fontSize:c.fontSize.base,color:p.slate[900],backgroundColor:"white",outline:"none",transition:c.transition.normal},S={borderColor:m,boxShadow:`0 0 0 3px ${m}1a`},x=i=>{Object.assign(i.target.style,S),setTimeout(()=>{const B=i.target;if(B){const C=B.closest("div");C&&C.scrollIntoView({behavior:"smooth",block:"center"})}},300)},d=i=>{i.target.style.borderColor=o?p.red[500]:p.slate[200],i.target.style.boxShadow="none"},n=()=>{switch(r.type){case"text":return e.jsx("input",{type:"text",value:a||"",onChange:i=>f(r.key,i.target.value),placeholder:r.placeholder||"",style:w,onFocus:x,onBlur:d});case"textarea":return e.jsx("textarea",{value:a||"",onChange:i=>f(r.key,i.target.value),placeholder:r.placeholder||"",rows:4,style:{...w,resize:"vertical",minHeight:"100px"},onFocus:x,onBlur:d});case"select":return e.jsxs("select",{value:a||r.default||"",onChange:i=>f(r.key,i.target.value),style:{...w,cursor:"pointer",appearance:"none",backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 12px center",backgroundRepeat:"no-repeat",backgroundSize:"20px",paddingRight:"44px"},onFocus:x,onBlur:d,children:[e.jsx("option",{value:"",children:"Bitte wÃ¤hlen..."}),r.options?.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))]});case"number":return e.jsx("input",{type:"number",value:a||"",onChange:i=>f(r.key,i.target.value),placeholder:r.placeholder||"",min:r.validation?.min,max:r.validation?.max,style:w,onFocus:x,onBlur:d});default:return e.jsx("input",{type:"text",value:a||"",onChange:i=>f(r.key,i.target.value),placeholder:r.placeholder||"",style:w,onFocus:x,onBlur:d})}};return e.jsxs("div",{style:{marginBottom:c.space[5]},children:[e.jsxs("label",{style:{display:"block",marginBottom:c.space[2],fontSize:c.fontSize.sm,fontWeight:600,color:p.slate[700]},children:[r.label,r.required&&e.jsx("span",{style:{color:p.red[500],marginLeft:c.space[1]},children:"*"})]}),n(),o&&e.jsxs("p",{style:{marginTop:c.space[1.5],fontSize:c.fontSize.xs,color:p.red[500],display:"flex",alignItems:"center",gap:c.space[1]},children:[e.jsx(pe,{style:{width:"14px",height:"14px"}}),o]}),r.hint&&!o&&e.jsxs("p",{style:{marginTop:c.space[1.5],fontSize:c.fontSize.xs,color:p.slate[500],display:"flex",alignItems:"center",gap:c.space[1]},children:[e.jsx(ye,{style:{width:"14px",height:"14px"}}),r.hint]})]})},nr=({scenario:r,onBack:a,onNext:f})=>{const[o,s]=u.useState({}),[c,m]=u.useState({}),[w,S]=u.useState([]),[x,d]=u.useState(!1),n=Se(),i=Je.useMemo(()=>{if(!r?.input_configuration)return[];try{const h=typeof r.input_configuration=="string"?JSON.parse(r.input_configuration):r.input_configuration;return Array.isArray(h)?h.filter(t=>t.user_input!==!1):[]}catch(h){return console.error("Error parsing input_configuration:",h),[]}},[r?.input_configuration]);u.useEffect(()=>{const h={};i.forEach(t=>{t.default&&(h[t.key]=t.default)}),s(h)},[i]);const B=(h,t)=>{s(l=>({...l,[h]:t})),c[h]&&m(l=>{const b={...l};return delete b[h],b})},C=()=>{S(h=>[...h,{key:"",value:""}])},v=(h,t,l)=>{S(b=>{const $=[...b];return $[h]={...$[h],[t]:l},$})},T=h=>{S(t=>t.filter((l,b)=>b!==h))},E=()=>{const h={};return i.forEach(t=>{const l=o[t.key];if(t.required&&(!l||l.trim()==="")){h[t.key]="Dieses Feld ist erforderlich";return}if(!(!l||l.trim()==="")&&t.validation){const{minLength:b,maxLength:$,min:W,max:F,pattern:A}=t.validation;b&&l.length<b&&(h[t.key]=`Mindestens ${b} Zeichen erforderlich`),$&&l.length>$&&(h[t.key]=`Maximal ${$} Zeichen erlaubt`),W!==void 0&&Number(l)<W&&(h[t.key]=`Mindestens ${W}`),F!==void 0&&Number(l)>F&&(h[t.key]=`Maximal ${F}`),A&&!new RegExp(A).test(l)&&(h[t.key]="UngÃ¼ltiges Format")}}),m(h),Object.keys(h).length===0},I=h=>{if(h.preventDefault(),!E())return;const t={...o};w.forEach(l=>{l.key&&l.value&&(t[l.key]=l.value)}),f(t)};return u.useEffect(()=>{i.length===0&&f({})},[i,f]),i.length===0?null:e.jsxs("div",{style:{padding:n.space[6],paddingBottom:"200px",maxWidth:"640px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:n.space[8]},children:[e.jsxs("button",{onClick:a,style:{display:"inline-flex",alignItems:"center",gap:n.space[2],padding:`${n.space[2]} ${n.space[3]}`,marginBottom:n.space[4],border:"none",background:"transparent",color:p.slate[600],fontSize:n.fontSize.sm,cursor:"pointer",borderRadius:n.radius.md,transition:n.transition.normal},onMouseEnter:h=>h.target.style.background=p.slate[100],onMouseLeave:h=>h.target.style.background="transparent",children:[e.jsx(Fe,{style:{width:"18px",height:"18px"}}),"ZurÃ¼ck zur Ãœbersicht"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:n.space[4]},children:[e.jsx("div",{style:{width:"56px",height:"56px",borderRadius:n.radius.xl,background:n.headerGradient,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(We,{style:{width:"28px",height:"28px",color:"white"}})}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:n.fontSize["2xl"],fontWeight:700,color:p.slate[900],margin:0},children:r.title}),e.jsx("p",{style:{fontSize:n.fontSize.sm,color:p.slate[600],margin:`${n.space[1]} 0 0 0`},children:"Personalisiere dein Training"})]})]})]}),e.jsx("div",{style:{padding:`${n.space[4]} ${n.space[5]}`,borderRadius:n.radius.lg,backgroundColor:p.slate[100],marginBottom:n.space[6]},children:e.jsx("p",{style:{fontSize:n.fontSize.sm,color:p.slate[700],margin:0,lineHeight:1.6},children:r.description})}),e.jsxs("form",{onSubmit:I,children:[i.map(h=>e.jsx(sr,{field:h,value:o[h.key],onChange:B,error:c[h.key],focusColor:n.primaryAccent,branding:n},h.key)),r?.allow_custom_variables&&e.jsxs("div",{style:{marginTop:n.space[5],marginBottom:n.space[5],paddingTop:n.space[5],borderTop:`1px solid ${p.slate[200]}`},children:[e.jsxs("button",{type:"button",onClick:()=>d(!x),style:{display:"flex",alignItems:"flex-start",gap:n.space[2],padding:"0",border:"none",background:"none",color:p.slate[500],fontSize:n.fontSize.sm,fontWeight:500,cursor:"pointer",marginBottom:x?n.space[4]:"0",textAlign:"left"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:n.space[2],flexShrink:0},children:[x?e.jsx(Ze,{size:18}):e.jsx(Le,{size:18}),e.jsx(_e,{size:16})]}),e.jsx("span",{style:{lineHeight:"1.4"},children:"ZusÃ¤tzliche Variablen hinzufÃ¼gen (optional)"})]}),x&&e.jsxs("div",{style:{backgroundColor:p.slate[50],borderRadius:n.radius.lg,padding:n.space[4]},children:[e.jsx("p",{style:{fontSize:n.fontSize.sm,color:p.slate[500],margin:`0 0 ${n.space[3]} 0`},children:"FÃ¼ge eigene Variablen hinzu, die in das Training einflieÃŸen sollen."}),w.length>0&&e.jsx("div",{style:{marginBottom:n.space[3]},children:w.map((h,t)=>e.jsxs("div",{style:{backgroundColor:"white",border:`1px solid ${p.slate[200]}`,borderRadius:n.radius.md,padding:n.space[3],marginBottom:n.space[3]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:n.space[2]},children:[e.jsx("input",{type:"text",value:h.key||"",onChange:l=>v(t,"key",l.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"_")),placeholder:"variable_name",style:{padding:`${n.space[2]} ${n.space[3]}`,borderRadius:n.radius.md,border:`1px solid ${p.slate[200]}`,fontSize:n.fontSize.sm,fontFamily:"monospace",backgroundColor:p.slate[50],flex:1,marginRight:n.space[2]}}),e.jsx("button",{type:"button",onClick:()=>T(t),style:{padding:n.space[2],border:"none",backgroundColor:"transparent",cursor:"pointer",color:p.red[500],display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ct,{size:16})})]}),e.jsx("textarea",{value:h.value||"",onChange:l=>v(t,"value",l.target.value),placeholder:"Wert der Variable...",rows:2,style:{width:"100%",padding:`${n.space[2]} ${n.space[3]}`,borderRadius:n.radius.md,border:`1px solid ${p.slate[200]}`,fontSize:n.fontSize.sm,resize:"vertical"}})]},t))}),e.jsxs("button",{type:"button",onClick:C,style:{display:"flex",alignItems:"center",gap:n.space[2],padding:`${n.space[2]} ${n.space[3]}`,border:`1px dashed ${p.slate[300]}`,borderRadius:n.radius.md,backgroundColor:"white",color:p.slate[600],fontSize:n.fontSize.sm,cursor:"pointer",width:"100%",justifyContent:"center"},children:[e.jsx(_e,{size:16}),"Variable hinzufÃ¼gen"]})]})]}),e.jsxs("div",{style:{padding:`${n.space[4]} ${n.space[5]}`,borderRadius:n.radius.lg,backgroundColor:n.primaryAccentLight,marginTop:n.space[6],marginBottom:n.space[6],display:"flex",gap:n.space[5],flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:n.fontSize.xs,color:p.slate[500],display:"block"},children:"Fragen"}),e.jsxs("span",{style:{fontSize:n.fontSize.base,fontWeight:600,color:p.slate[900]},children:[r.question_count_min,"-",r.question_count_max]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:n.fontSize.xs,color:p.slate[500],display:"block"},children:"Zeit pro Frage"}),e.jsxs("span",{style:{fontSize:n.fontSize.base,fontWeight:600,color:p.slate[900]},children:[Math.round(r.time_limit_per_question/60)," Min"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:n.fontSize.xs,color:p.slate[500],display:"block"},children:"Wiederholen"}),e.jsx("span",{style:{fontSize:n.fontSize.base,fontWeight:600,color:p.slate[900]},children:r.allow_retry?"Erlaubt":"Nicht erlaubt"})]})]}),e.jsxs("button",{type:"submit",style:{width:"100%",padding:`${n.space[4]} ${n.space[6]}`,borderRadius:n.radius.xl,border:"none",background:n.buttonGradient,color:"white",fontSize:n.fontSize.base,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:n.space[2.5],transition:n.transition.normal,boxShadow:`0 4px 12px ${n.primaryAccent}4d`},onMouseEnter:h=>{h.target.style.transform="translateY(-2px)",h.target.style.boxShadow=`0 6px 16px ${n.primaryAccent}66`},onMouseLeave:h=>{h.target.style.transform="none",h.target.style.boxShadow=`0 4px 12px ${n.primaryAccent}4d`},children:["Weiter",e.jsx(dt,{style:{width:"20px",height:"20px"}})]})]})]})},Ae=({score:r,label:a,size:f="normal",primaryAccent:o,branding:s})=>{const c=r!=null?r*10:null,w=(x=>x>=80?s.success:x>=60?o:x>=40?s.warning:s.error)(c),S=f==="large";return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:s.space[1]},children:[e.jsx("div",{style:{width:S?"80px":"56px",height:S?"80px":"56px",borderRadius:s.radius.full,backgroundColor:`${w}15`,border:`3px solid ${w}`,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{fontSize:S?s.fontSize["5xl"]:s.fontSize["2xl"],fontWeight:s.fontWeight.bold,color:w},children:c!=null?Math.round(c):"-"})}),e.jsx("span",{style:{fontSize:S?s.fontSize.base:s.fontSize.xs,color:s.textSecondary,fontWeight:s.fontWeight.medium},children:a})]})},de=({title:r,icon:a,children:f,defaultOpen:o=!0,primaryAccent:s,branding:c})=>{const[m,w]=u.useState(o);return e.jsxs("div",{style:{borderRadius:c.radius.lg,border:`1px solid ${c.borderColor}`,backgroundColor:c.cardBg,overflow:"hidden",marginBottom:c.space[4]},children:[e.jsxs("button",{onClick:()=>w(!m),style:{width:"100%",padding:`${c.space[4]} ${c.space[5]}`,display:"flex",alignItems:"center",justifyContent:"space-between",border:"none",backgroundColor:"transparent",cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:c.space[3]},children:[e.jsx(a,{style:{width:c.iconSize.lg,height:c.iconSize.lg,color:s}}),e.jsx("span",{style:{fontSize:c.fontSize.md,fontWeight:c.fontWeight.semibold,color:c.textMain},children:r})]}),m?e.jsx(Ze,{style:{width:c.iconSize.lg,height:c.iconSize.lg,color:c.textMuted}}):e.jsx(Le,{style:{width:c.iconSize.lg,height:c.iconSize.lg,color:c.textMuted}})]}),m&&e.jsx("div",{style:{padding:`0 ${c.space[5]} ${c.space[5]} ${c.space[5]}`,borderTop:`1px solid ${c.cardBgHover}`,paddingTop:c.space[4]},children:f})]})},Ne=({text:r,type:a,primaryAccent:f,primaryAccentLight:o,branding:s})=>{const c={strength:{icon:pt,color:s.success,bg:s.successLight},improvement:{icon:ut,color:s.warning,bg:s.warningLight},tip:{icon:V,color:f,bg:o}},{icon:m,color:w,bg:S}=c[a]||c.tip;return e.jsxs("div",{style:{display:"flex",gap:s.space[3],padding:s.space[3],borderRadius:s.radius.md,backgroundColor:S,marginBottom:s.space[2]},children:[e.jsx(m,{style:{width:s.iconSize.md,height:s.iconSize.md,color:w,flexShrink:0,marginTop:"2px"}}),e.jsx("span",{style:{fontSize:s.fontSize.base,color:s.textSecondary,lineHeight:1.5},children:r})]})},or=({metrics:r,branding:a})=>{if(!r)return null;const o=(c=>{switch(c){case"optimal":return{label:"Optimal",color:a.success};case"zu_schnell":return{label:"Zu schnell",color:a.warning};case"zu_langsam":return{label:"Zu langsam",color:a.warning};default:return{label:c||"N/A",color:a.textMuted}}})(r.speech_rate),s=c=>{switch(c){case"niedrig":return a.success;case"mittel":return a.warning;case"hoch":return a.error;default:return a.textMuted}};return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:a.space[4]},children:[e.jsxs("div",{style:{padding:a.space[4],borderRadius:a.radius.md,backgroundColor:a.cardBgHover},children:[e.jsx("span",{style:{fontSize:a.fontSize.xs,color:a.textMuted,display:"block",marginBottom:a.space[1]},children:"Sprechtempo"}),e.jsx("span",{style:{fontSize:a.fontSize.lg,fontWeight:a.fontWeight.semibold,color:o.color},children:o.label})]}),r.filler_words&&e.jsxs("div",{style:{padding:a.space[4],borderRadius:a.radius.md,backgroundColor:a.cardBgHover},children:[e.jsx("span",{style:{fontSize:a.fontSize.xs,color:a.textMuted,display:"block",marginBottom:a.space[1]},children:"FÃ¼llwÃ¶rter"}),e.jsxs("span",{style:{fontSize:a.fontSize.lg,fontWeight:600,color:s(r.filler_words.severity)},children:[r.filler_words.count||0,r.filler_words.words?.length>0&&e.jsxs("span",{style:{fontSize:"12px",fontWeight:400,marginLeft:"8px"},children:["(",r.filler_words.words.slice(0,3).join(", "),")"]})]})]}),r.confidence_score!==void 0&&e.jsxs("div",{style:{padding:"16px",borderRadius:"10px",backgroundColor:a.cardBgHover},children:[e.jsx("span",{style:{fontSize:"12px",color:a.textMuted,display:"block",marginBottom:"4px"},children:"Selbstbewusstsein"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{flex:1,height:"8px",backgroundColor:a.borderColor,borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${r.confidence_score}%`,height:"100%",backgroundColor:r.confidence_score>=70?a.success:a.warning,borderRadius:"4px"}})}),e.jsxs("span",{style:{fontSize:"14px",fontWeight:600,color:a.textSecondary},children:[r.confidence_score,"%"]})]})]}),r.clarity_score!==void 0&&e.jsxs("div",{style:{padding:"16px",borderRadius:"10px",backgroundColor:a.cardBgHover},children:[e.jsx("span",{style:{fontSize:"12px",color:a.textMuted,display:"block",marginBottom:"4px"},children:"Klarheit"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{flex:1,height:"8px",backgroundColor:a.borderColor,borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${r.clarity_score}%`,height:"100%",backgroundColor:r.clarity_score>=70?a.success:a.warning,borderRadius:"4px"}})}),e.jsxs("span",{style:{fontSize:"14px",fontWeight:600,color:a.textSecondary},children:[r.clarity_score,"%"]})]})]}),r.notes&&e.jsxs("div",{style:{gridColumn:"1 / -1",padding:"12px 16px",borderRadius:"10px",backgroundColor:a.primaryAccentLight,fontSize:"14px",color:a.textSecondary,lineHeight:1.5},children:["ðŸ’¡ ",r.notes]})]})},ir=({audioUrl:r,primaryAccent:a,branding:f})=>{const o=u.useRef(null),[s,c]=u.useState(!1),[m,w]=u.useState(0),[S,x]=u.useState(0),[d,n]=u.useState(!0),[i,B]=u.useState(null);u.useEffect(()=>{if(!r)return;n(!0),B(null);const I=new Audio;o.current=I;const h=()=>{const l=I.duration;l&&isFinite(l)&&l>0&&x(l),n(!1)},t=()=>{n(!1);const l=I.duration;l&&isFinite(l)&&l>0&&x(l)};return I.addEventListener("loadedmetadata",h),I.addEventListener("canplaythrough",t),I.addEventListener("timeupdate",()=>w(I.currentTime)),I.addEventListener("play",()=>c(!0)),I.addEventListener("pause",()=>c(!1)),I.addEventListener("ended",()=>c(!1)),I.addEventListener("error",()=>{B("Audio nicht verfÃ¼gbar"),n(!1)}),I.src=r,I.load(),()=>{I.pause(),I.src=""}},[r]);const C=()=>{o.current&&(s?o.current.pause():o.current.play())},v=I=>{const h=I.currentTarget.getBoundingClientRect(),t=(I.clientX-h.left)/h.width;o.current&&S>0&&(o.current.currentTime=t*S)},T=I=>{o.current&&(o.current.currentTime=Math.max(0,Math.min(o.current.currentTime+I,S)))};if(!r)return null;if(i)return e.jsxs("div",{style:{padding:"12px 16px",background:f.cardBgHover,borderRadius:"10px",color:f.textMuted,fontSize:"13px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(pe,{size:16})," ",i]});const E=S>0?m/S*100:0;return e.jsxs("div",{style:{background:f.cardBgHover,borderRadius:"12px",padding:"16px"},children:[e.jsx("div",{onClick:v,style:{height:"6px",background:f.borderColor,borderRadius:"3px",cursor:"pointer",marginBottom:"12px"},children:e.jsx("div",{style:{width:`${E}%`,height:"100%",background:a,borderRadius:"3px",transition:"width 0.1s"}})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},children:[e.jsx("button",{onClick:()=>T(-10),style:{background:"none",border:"none",cursor:"pointer",padding:"6px",color:f.textMuted,display:"flex",alignItems:"center"},children:e.jsx(Mt,{size:20})}),e.jsx("button",{onClick:C,disabled:d,style:{width:"44px",height:"44px",borderRadius:"50%",background:a,border:"none",cursor:d?"wait":"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#ffffff",opacity:d?.7:1},children:d?e.jsx(Ue,{size:20,color:"#ffffff",style:{animation:"spin 1s linear infinite"}}):s?e.jsx(_t,{size:20,color:"#ffffff",fill:"#ffffff"}):e.jsx(Qe,{size:20,color:"#ffffff",fill:"#ffffff",style:{marginLeft:"2px"}})}),e.jsx("button",{onClick:()=>T(10),style:{background:"none",border:"none",cursor:"pointer",padding:"6px",color:f.textMuted,display:"flex",alignItems:"center"},children:e.jsx(Tt,{size:20})})]}),e.jsxs("div",{style:{textAlign:"center",marginTop:"8px",fontSize:"12px",color:f.textMuted},children:[Ee(m)," / ",Ee(S)]}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]})},ar=({transcript:r,feedback:a,audioMetrics:f,audioUrl:o,onRetry:s,onNext:c,onComplete:m,isLastQuestion:w,hideButtons:S=!1})=>{const{branding:x}=Te(),d=Se(),n=x?.["--button-gradient"]||x?.["--header-gradient"]||ue["--header-gradient"],i=x?.["--primary-accent"]||ue["--primary-accent"],B=x?.["--primary-accent-light"]||ue["--primary-accent-light"],C=typeof a=="string"?JSON.parse(a):a;return e.jsxs("div",{style:{backgroundColor:d.cardBgHover,borderRadius:d.radius.xl,padding:d.space[6]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"20px",marginBottom:"24px",padding:d.space[5],backgroundColor:d.cardBg,borderRadius:d.radius.lg},children:[e.jsx(Ae,{score:C?.scores?.overall,label:"Gesamt",size:"large",primaryAccent:i,branding:d}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:d.textMain,margin:"0 0 8px 0"},children:"Feedback zu deiner Antwort"}),e.jsx("p",{style:{fontSize:"14px",color:d.textSecondary,margin:0,lineHeight:1.5},children:C?.summary||"Deine Antwort wurde analysiert."})]})]}),C?.scores&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"32px",padding:"16px",marginBottom:"16px",backgroundColor:d.cardBg,borderRadius:"12px"},children:[e.jsx(Ae,{score:C.scores.content,label:"Inhalt",primaryAccent:i,branding:d}),e.jsx(Ae,{score:C.scores.structure,label:"Struktur",primaryAccent:i,branding:d}),e.jsx(Ae,{score:C.scores.relevance,label:"Relevanz",primaryAccent:i,branding:d})]}),e.jsx(de,{title:"Transkript",icon:me,defaultOpen:!0,primaryAccent:i,branding:d,children:e.jsxs("div",{style:{padding:"16px",borderRadius:"10px",backgroundColor:d.cardBgHover,fontStyle:"italic",color:d.textSecondary,lineHeight:1.6,fontSize:"14px"},children:['"',r||"Keine Transkription verfÃ¼gbar.",'"']})}),o&&e.jsx(de,{title:"Deine Aufnahme",icon:At,defaultOpen:!0,primaryAccent:i,branding:d,children:e.jsx(ir,{audioUrl:o,primaryAccent:i,branding:d})}),C?.strengths?.length>0&&e.jsx(de,{title:"StÃ¤rken",icon:pt,defaultOpen:!0,primaryAccent:i,branding:d,children:C.strengths.map((v,T)=>e.jsx(Ne,{text:v,type:"strength",primaryAccent:i,primaryAccentLight:B,branding:d},T))}),C?.improvements?.length>0&&e.jsx(de,{title:"Verbesserungen",icon:ut,defaultOpen:!0,primaryAccent:i,branding:d,children:C.improvements.map((v,T)=>e.jsx(Ne,{text:v,type:"improvement",primaryAccent:i,primaryAccentLight:B,branding:d},T))}),C?.tips?.length>0&&e.jsx(de,{title:"Tipps",icon:V,defaultOpen:!1,primaryAccent:i,branding:d,children:C.tips.map((v,T)=>e.jsx(Ne,{text:v,type:"tip",primaryAccent:i,primaryAccentLight:B,branding:d},T))}),f&&e.jsx(de,{title:"Sprechanalyse",icon:U,defaultOpen:!1,primaryAccent:i,branding:d,children:e.jsx(or,{metrics:f,branding:d})}),!S&&e.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"24px",justifyContent:"flex-end",flexWrap:"wrap"},children:[s&&e.jsxs("button",{onClick:s,style:{display:"flex",alignItems:"center",gap:"8px",padding:"14px 24px",borderRadius:"12px",border:`2px solid ${d.borderColor}`,backgroundColor:d.cardBg,color:d.textSecondary,fontSize:"15px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:v=>{v.target.style.borderColor=i,v.target.style.color=i},onMouseLeave:v=>{v.target.style.borderColor=d.borderColor,v.target.style.color=d.textSecondary},children:[e.jsx(Ke,{style:{width:"18px",height:"18px"}}),"Nochmal versuchen"]}),e.jsx("button",{onClick:w?m:c,style:{display:"flex",alignItems:"center",gap:"8px",padding:"14px 24px",borderRadius:"12px",border:"none",background:n,color:"white",fontSize:"15px",fontWeight:600,cursor:"pointer",boxShadow:`0 4px 12px ${i}4d`,transition:"all 0.2s"},onMouseEnter:v=>{v.target.style.transform="translateY(-2px)",v.target.style.boxShadow=`0 6px 16px ${i}66`},onMouseLeave:v=>{v.target.style.transform="none",v.target.style.boxShadow=`0 4px 12px ${i}4d`},children:w?e.jsxs(e.Fragment,{children:[e.jsx(xt,{style:{width:"18px",height:"18px"}}),"Training abschlieÃŸen"]}):e.jsxs(e.Fragment,{children:["NÃ¤chste Frage",e.jsx(Ve,{style:{width:"18px",height:"18px"}})]})})]})]})},ot={target:ae,clock:re,mic:U,"message-square":me,lightbulb:V,brain:Pe,info:ye,settings:Ge,check:be,Target:ae,Clock:re,Mic:U,MessageSquare:me,Lightbulb:V,Brain:Pe},lr=({tips:r,primaryAccent:a,tipsLabel:f,branding:o})=>{const[s,c]=u.useState(!0);return!r||r.length===0?null:e.jsxs("div",{style:{background:o.cardBg,borderRadius:o.radius.xl,border:`1px solid ${o.borderColor}`,overflow:"hidden"},children:[e.jsxs("button",{onClick:()=>c(!s),style:{width:"100%",padding:`${o.space[4]} ${o.space[6]}`,background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:o.space[2],fontSize:o.fontSize.base,fontWeight:o.fontWeight.semibold,color:o.textMain},children:[e.jsx(V,{size:o.iconSize.md,color:a}),f||"Tipps fÃ¼r diese Frage"]}),e.jsx(Le,{size:o.iconSize.md,color:o.textMuted,style:{transform:s?"rotate(180deg)":"none",transition:o.transition.normal}})]}),e.jsx(Dt,{children:s&&e.jsx(qt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},style:{overflow:"hidden"},children:e.jsx("div",{style:{padding:`0 ${o.space[6]} ${o.space[6]}`},children:r.map((m,w)=>e.jsxs("div",{style:{display:"flex",gap:o.space[3],padding:`${o.space[3]} ${o.space[4]}`,borderRadius:o.radius.md,backgroundColor:o.warningLight,marginBottom:w<r.length-1?o.space[2]:0},children:[e.jsx(V,{style:{width:o.iconSize.sm,height:o.iconSize.sm,color:o.warning,flexShrink:0,marginTop:"2px"}}),e.jsx("p",{style:{fontSize:o.fontSize.base,color:o.textSecondary,margin:0,lineHeight:1.5},children:m.replace(/^Tipp \d+:\s*/i,"")})]},w))})})})]})},cr=({seconds:r,maxSeconds:a,isRecording:f,branding:o})=>{const s=a>0?r/a*100:0,c=s>75,m=s>90;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:o.space[3],padding:`${o.space[3]} ${o.space[4]}`,borderRadius:o.radius.lg,backgroundColor:m?o.errorLight:c?o.warningLight:o.cardBgHover},children:[e.jsx(re,{style:{width:o.iconSize.lg,height:o.iconSize.lg,color:m?o.error:c?o.warning:o.textSecondary}}),e.jsx("span",{style:{fontSize:o.fontSize.xl,fontWeight:o.fontWeight.semibold,fontFamily:"monospace",color:m?o.error:c?o.warning:o.textSecondary},children:Ee(r)}),e.jsxs("span",{style:{fontSize:o.fontSize.base,color:o.textMuted},children:["/ ",Ee(a)]})]})},it=({onRecordingComplete:r,timeLimit:a,disabled:f,deviceId:o,themedGradient:s,primaryAccent:c,isSubmitting:m,labels:w,onOpenSettings:S,branding:x,isMobile:d,onStreamChange:n})=>{const[i,B]=u.useState("idle"),[C,v]=u.useState(0),[T,E]=u.useState(0),[I,h]=u.useState(!1),t=u.useRef(null),l=u.useRef([]),b=u.useRef(null),$=u.useRef(null),W=u.useRef(null),F=u.useRef(null),A=u.useRef(null),P=u.useRef(0),N=u.useRef(!1);u.useEffect(()=>()=>{Y()},[]),u.useEffect(()=>{i==="recording"&&C>=a&&M()},[C,a,i]);const Y=()=>{b.current&&clearInterval(b.current),F.current&&cancelAnimationFrame(F.current),$.current&&($.current.close(),$.current=null),A.current&&(A.current.getTracks().forEach(z=>z.stop()),A.current=null,n&&n(null))},g=async()=>{try{h(!1),l.current=[],v(0);let z;const H={audio:o?{deviceId:{exact:o}}:!0};try{z=await navigator.mediaDevices.getUserMedia(H)}catch(L){throw console.error("[SIMULATOR] Selected device unavailable:",L),L.name==="OverconstrainedError"||L.name==="NotFoundError"?(h(!1),new Error("Das ausgewÃ¤hlte Mikrofon ist nicht verfÃ¼gbar. Bitte wÃ¤hle ein anderes Mikrofon in den Einstellungen.")):L}A.current=z,n&&n(z),$.current=new(window.AudioContext||window.webkitAudioContext),W.current=$.current.createAnalyser(),$.current.createMediaStreamSource(z).connect(W.current),W.current.fftSize=256;const Q=()=>{if(W.current&&N.current){const L=new Uint8Array(W.current.frequencyBinCount);W.current.getByteFrequencyData(L);const J=L.reduce((we,De)=>we+De)/L.length;E(J/255)}F.current=requestAnimationFrame(Q)};N.current=!0,Q();const je=MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":MediaRecorder.isTypeSupported("audio/webm")?"audio/webm":"audio/mp4";t.current=new MediaRecorder(z,{mimeType:je}),t.current.ondataavailable=L=>{L.data.size>0&&l.current.push(L.data)},t.current.onstop=()=>{const L=new Blob(l.current,{type:je});r(L,P.current)},t.current.start(1e3),B("recording"),b.current=setInterval(()=>{v(L=>L+1)},1e3)}catch(z){console.error("Error starting recording:",z),(z.name==="NotAllowedError"||z.name==="PermissionDeniedError")&&h(!0)}},y=()=>{t.current&&t.current.state==="recording"&&(t.current.pause(),B("paused"),N.current=!1,b.current&&(clearInterval(b.current),b.current=null),E(0))},k=()=>{t.current&&t.current.state==="paused"&&(t.current.resume(),B("recording"),N.current=!0,b.current=setInterval(()=>{v(z=>z+1)},1e3))},M=()=>{P.current=C,N.current=!1,b.current&&(clearInterval(b.current),b.current=null),F.current&&(cancelAnimationFrame(F.current),F.current=null),$.current&&($.current.close(),$.current=null),t.current&&t.current.state!=="inactive"&&t.current.stop(),A.current&&(A.current.getTracks().forEach(z=>z.stop()),A.current=null),B("idle"),E(0),v(0)},j=()=>{i==="idle"?g():i==="recording"?y():i==="paused"&&k()};return I?e.jsxs("div",{style:{padding:"24px",borderRadius:"16px",backgroundColor:x.errorLight,textAlign:"center"},children:[e.jsx(Ft,{style:{width:"48px",height:"48px",color:x.error,marginBottom:"12px"}}),e.jsx("p",{style:{color:x.error,fontWeight:600,margin:0},children:"Mikrofonzugriff verweigert"}),e.jsx("p",{style:{color:x.textSecondary,fontSize:"14px",marginTop:"8px"},children:"Bitte erlaube den Zugriff auf dein Mikrofon in den Browser-Einstellungen."})]}):e.jsxs("div",{style:{padding:"24px",borderRadius:"16px",backgroundColor:x.cardBg,border:`1px solid ${x.borderColor}`,position:"relative"},children:[d&&e.jsx("button",{onClick:S,style:{position:"absolute",top:"12px",right:"12px",padding:"10px",borderRadius:"10px",background:x.cardBgHover,border:`1px solid ${x.borderColor}`,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ge,{size:18,color:x.textMuted})}),e.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"24px"},children:e.jsx(cr,{seconds:C,maxSeconds:a,isRecording:i==="recording",branding:x})}),i==="recording"&&e.jsx("div",{style:{marginBottom:"24px"},children:e.jsx(Ut,{audioLevel:T,isActive:!0,variant:"bars",size:"sm",accentColor:c})}),i==="paused"&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"8px",height:"60px",marginBottom:"24px",color:x.warning},children:[e.jsx(U,{size:24}),e.jsx("span",{style:{fontSize:"16px",fontWeight:600},children:"Aufnahme pausiert"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"12px"},children:[!d&&e.jsx("button",{onClick:S,style:{padding:"14px",borderRadius:"12px",background:x.cardBgHover,border:`1px solid ${x.borderColor}`,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ge,{size:20,color:x.textMuted})}),e.jsxs("button",{onClick:j,disabled:f||m,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",padding:d?"14px 20px":"14px 28px",borderRadius:"12px",border:"none",flex:d?1:"none",background:i==="idle"?f||m?x.borderColor:x.error:i==="recording"?x.warning:x.success,color:"white",fontSize:d?"15px":"16px",fontWeight:600,cursor:f||m?"not-allowed":"pointer",boxShadow:f||m?"none":"0 4px 14px rgba(0, 0, 0, 0.2)"},children:[i==="idle"&&e.jsxs(e.Fragment,{children:[e.jsx(U,{style:{width:"20px",height:"20px"}}),"Aufnahme starten"]}),i==="recording"&&e.jsxs(e.Fragment,{children:[e.jsx(Lt,{style:{width:"18px",height:"18px"}}),"Pausieren"]}),i==="paused"&&e.jsxs(e.Fragment,{children:[e.jsx(Qe,{style:{width:"18px",height:"18px"}}),"Fortsetzen"]})]}),(i==="recording"||i==="paused")&&e.jsxs("button",{onClick:M,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:d?"14px 16px":"14px 24px",borderRadius:"12px",border:"none",flex:d?1:"none",backgroundColor:x.cardBgHover,color:x.textMain,fontSize:d?"15px":"16px",fontWeight:600,cursor:"pointer"},children:[e.jsx(be,{style:{width:"18px",height:"18px",color:x.success}}),w?.submitButton||"Antwort abgeben"]})]}),i==="idle"&&!m&&e.jsx("p",{style:{textAlign:"center",marginTop:"16px",color:x.textMuted,fontSize:"14px"},children:w?.submitHint||"Klicke auf den Button, um deine Antwort aufzunehmen"}),m&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"24px"},children:[e.jsx(Ue,{style:{width:"32px",height:"32px",color:c,animation:"spin 1s linear infinite"}}),e.jsx("p",{style:{marginTop:"12px",color:x.textSecondary,fontSize:"14px"},children:w?.analyzing||"Antwort wird analysiert..."})]}),e.jsx("style",{children:`
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.8; } }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
      `})]})},dr=({scenario:r,variables:a,questions:f,onStart:o,onBack:s,selectedMicrophoneId:c,onMicrophoneChange:m,onMicrophoneTest:w,themedGradient:S,primaryAccent:x,primaryAccentLight:d,isLoading:n,branding:i})=>{const B=r?.mode==="SIMULATION",C=B?"Situationen":"Fragen",v=B?"Zeit pro Situation":"Zeit pro Frage",T=[{icon:ae,title:"Strukturiert antworten",description:"Nutze die STAR-Methode (Situation, Task, Action, Result) fÃ¼r Beispiele aus deiner Erfahrung."},{icon:re,title:"Zeit im Blick behalten",description:`Du hast ${Math.round((r.time_limit_per_question||120)/60)} Minuten pro ${B?"Situation":"Frage"}. ${B?"Reagiere":"Antworte"} prÃ¤zise, aber ausfÃ¼hrlich genug.`},{icon:U,title:"Klar und deutlich sprechen",description:"Sprich in normalem Tempo. Kurze Pausen zum Nachdenken sind vÃ¶llig in Ordnung."},{icon:me,title:"Konkrete Beispiele nennen",description:"Belege deine Aussagen mit konkreten Beispielen und Zahlen wo mÃ¶glich."}],E=r.tips&&Array.isArray(r.tips)&&r.tips.length>0?r.tips.map((l,b)=>typeof l=="string"?{icon:V,title:`Tipp ${b+1}`,description:l}:{icon:ot[l.icon]||ot[l.icon?.toLowerCase()]||V,title:l.title||`Tipp ${b+1}`,description:l.text||l.description||""}):T,I=Je.useMemo(()=>{if(!r?.input_configuration)return{};try{const l=typeof r.input_configuration=="string"?JSON.parse(r.input_configuration):r.input_configuration;return Array.isArray(l)?l.reduce((b,$)=>($.key&&$.label&&(b[$.key]=$.label),b),{}):{}}catch{return{}}},[r?.input_configuration]),h=a?Object.entries(a).filter(([l,b])=>b&&b.trim&&b.trim()!=="").map(([l,b])=>({label:I[l]||l.replace(/_/g," ").replace(/\b\w/g,$=>$.toUpperCase()),value:b})):[],t=l=>{if(!l||!a)return l;let b=l;return Object.entries(a).forEach(([$,W])=>{W&&(b=b.replace(new RegExp(`\\$\\{${$}\\}`,"g"),W),b=b.replace(new RegExp(`\\{${$}\\}`,"g"),W))}),b};return e.jsxs("div",{style:{padding:"24px",maxWidth:"800px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("button",{onClick:s,style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"8px 12px",marginBottom:"16px",border:"none",background:"transparent",color:i.textSecondary,fontSize:"14px",cursor:"pointer",borderRadius:"8px"},children:[e.jsx(Fe,{style:{width:"18px",height:"18px"}}),"ZurÃ¼ck"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",background:S,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(V,{style:{width:"32px",height:"32px",color:"white"}})}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"28px",fontWeight:700,color:i.textMain,margin:0},children:"Vorbereitung"}),e.jsxs("p",{style:{fontSize:"16px",color:i.textSecondary,margin:"4px 0 0 0"},children:[r.title,f.length>0?` â€¢ ${f.length} ${C}`:""]})]})]})]}),r.long_description&&e.jsx("div",{style:{padding:"20px 24px",borderRadius:"16px",backgroundColor:i.cardBg,border:`1px solid ${i.borderColor}`,marginBottom:"24px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"14px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:S,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(ye,{style:{width:"20px",height:"20px",color:"white"}})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:i.textMain,margin:"0 0 8px 0"},children:"Deine Aufgabe"}),e.jsx("p",{style:{fontSize:"15px",lineHeight:"1.6",color:i.textSecondary,margin:0,whiteSpace:"pre-wrap"},children:t(r.long_description?.replace(/\/n/g,`
`))})]})]})}),h.length>0&&e.jsxs("div",{style:{padding:"20px",borderRadius:"16px",backgroundColor:d,marginBottom:"24px"},children:[e.jsx("h3",{style:{fontSize:"14px",fontWeight:600,color:x,margin:"0 0 12px 0",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Dein Profil"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"16px"},children:h.map((l,b)=>e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:i.textMuted,display:"block"},children:l.label}),e.jsx("span",{style:{fontSize:"15px",fontWeight:500,color:i.textMain},children:l.value})]},b))})]}),e.jsxs("div",{style:{padding:"24px",borderRadius:"16px",backgroundColor:i.cardBg,border:`1px solid ${i.borderColor}`,marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"16px"},children:[e.jsx(U,{style:{width:"22px",height:"22px",color:x}}),e.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:i.textMain,margin:0},children:"Mikrofon testen"})]}),e.jsx(gt,{selectedDeviceId:c,onDeviceChange:m,onTestClick:w})]}),e.jsxs("button",{onClick:o,disabled:n,style:{width:"100%",padding:"18px 28px",borderRadius:"14px",border:"none",background:n?i.borderColor:S,color:"white",fontSize:"18px",fontWeight:600,cursor:n?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",boxShadow:n?"none":`0 4px 12px ${x}4d`,marginBottom:"24px",opacity:n?.7:1},children:[e.jsx(Qe,{style:{width:"24px",height:"24px"}}),"GesprÃ¤ch starten"]}),e.jsxs("div",{style:{padding:"24px",borderRadius:"16px",backgroundColor:i.cardBg,border:`1px solid ${i.borderColor}`,marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"20px"},children:[e.jsx(V,{style:{width:"22px",height:"22px",color:i.warning}}),e.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:i.textMain,margin:0},children:"Tipps fÃ¼r dein GesprÃ¤ch"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:E.map((l,b)=>e.jsxs("div",{style:{display:"flex",gap:"16px",padding:"16px",borderRadius:"12px",backgroundColor:i.cardBgHover},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",backgroundColor:d,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(l.icon,{style:{width:"22px",height:"22px",color:x}})}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"15px",fontWeight:600,color:i.textMain,margin:"0 0 4px 0"},children:l.title}),e.jsx("p",{style:{fontSize:"14px",color:i.textSecondary,margin:0,lineHeight:1.5},children:l.description})]})]},b))})]}),e.jsxs("div",{style:{padding:"16px 20px",borderRadius:"12px",backgroundColor:i.cardBgHover,display:"flex",gap:"24px",flexWrap:"wrap"},children:[f.length>0&&e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:i.textMuted,display:"block"},children:C}),e.jsx("span",{style:{fontSize:"18px",fontWeight:600,color:i.textMain},children:f.length})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:i.textMuted,display:"block"},children:v}),e.jsxs("span",{style:{fontSize:"18px",fontWeight:600,color:i.textMain},children:[Math.round((r.time_limit_per_question||120)/60)," Min"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:i.textMuted,display:"block"},children:"Wiederholen"}),e.jsx("span",{style:{fontSize:"18px",fontWeight:600,color:i.textMain},children:r.allow_retry?"Erlaubt":"Nicht erlaubt"})]})]})]})},pr=({session:r,questions:a,scenario:f,variables:o,preloadedQuestions:s,onSessionCreated:c,onComplete:m,onExit:w,startFromQuestion:S=0,initialMicrophoneId:x})=>{const d=Kt(),[n,i]=u.useState(r),[B,C]=u.useState(a||[]),[v,T]=u.useState(!1),[E,I]=u.useState(null),{demoCode:h}=Te(),t=f?.mode==="SIMULATION",l={questionLabel:t?"Situation / Aussage des GegenÃ¼bers:":"Interviewfrage:",questionFallback:t?"Situation":"Frage",questionLoading:t?"Situation wird geladen...":"Frage wird geladen...",answerPlaceholder:t?"Deine Reaktion...":"Deine Antwort...",submitButton:t?"Reaktion abgeben":"Antwort abgeben",submitHint:t?"Klicke auf den Button, um deine Reaktion aufzunehmen":"Klicke auf den Button, um deine Antwort aufzunehmen",analyzing:t?"Reaktion wird analysiert...":"Antwort wird analysiert...",questionCounter:(R,q)=>t?`Situation ${R} von ${q}`:`Frage ${R} von ${q}`,questionsCount:R=>t?`${R} Situationen`:`${R} Fragen`,answeredCount:(R,q)=>t?`${R} von ${q} Situationen`:`${R} von ${q} Fragen`,tipsLabel:t?"Tipps fÃ¼r diese Situation":"Tipps fÃ¼r diese Frage",nextButton:t?"NÃ¤chste Situation":"NÃ¤chste Frage",timePerQuestion:t?"Zeit pro Situation":"Zeit pro Frage",questionsLabel:t?"Situationen":"Fragen",recommendedTime:t?"Empfohlene Reaktionszeit":"Empfohlene Antwortzeit"},b=S>0;s&&s.length>0;const $=b?Array.from({length:S},(R,q)=>q):[],[W,F]=u.useState(b?"interview":"preparation"),[A,P]=u.useState(S||n?.current_question_index||0),[N,Y]=u.useState(null),[g,y]=u.useState(!1),[k,M]=u.useState(!1),[j,z]=u.useState(null),[H,X]=u.useState([]),[Q,je]=u.useState($),L="karriereheld_selected_microphone",[J,we]=u.useState(()=>{if(x)return x;try{return localStorage.getItem(L)||null}catch{return null}}),[De,ke]=u.useState(!1),[mt,xe]=u.useState(!1),ve=u.useRef(null),ze=u.useCallback(()=>{ve.current&&(ve.current.getTracks().forEach(R=>R.stop()),ve.current=null)},[]),Ye=u.useCallback(R=>{ve.current=R},[]);u.useEffect(()=>()=>{ze()},[ze]),u.useEffect(()=>{if(J)try{localStorage.setItem(L,J)}catch{}},[J]);const[yt,Ce]=u.useState(!1),[bt,Re]=u.useState(!1),[se,Xe]=u.useState(!1),[he,Ie]=u.useState(null),[Z,et]=u.useState(!1),{branding:Be}=Te(),_=Se(),St=Be?.["--header-gradient"]||ue["--header-gradient"],ne=Be?.["--button-gradient"]||St,le=Be?.["--primary-accent"]||ue["--primary-accent"],jt=Be?.["--primary-accent-light"]||ue["--primary-accent-light"],D=B[A],ee=A===B.length-1,ge=A===0,tt=async(R,q)=>{if(q<2){z("Die Aufnahme ist zu kurz. Bitte sprechen Sie mindestens 2 Sekunden.");return}if(R.size<5e3){console.warn("[SimulatorSession] Audio too small:",R.size,"bytes"),z("Die Aufnahme enthÃ¤lt keine verwertbaren Audiodaten. Bitte sprechen Sie wÃ¤hrend der Aufnahme und versuchen Sie es erneut.");return}M(!0),z(null);try{const O=await te.submitSimulatorAnswer(n.id,R,A,D.question,D.category,q);if(!O.success)throw new Error(O.message||"Fehler beim Analysieren der Antwort");if(Y(O.data),y(!0),X(K=>[...K.filter(oe=>oe.questionIndex!==A),{questionIndex:A,feedback:O.data}]),je(K=>K.includes(A)?K:[...K,A]),t&&!Z){Xe(!0),Ie(null);const K=Q.includes(A);try{const oe=await te.generateNextTurn(n.id);if(oe.success){const ce=oe.data.next_question;oe.data.is_finished?(Ie(ce),C(K?ie=>{const fe=[...ie];return fe[A+1]=ce,fe.slice(0,A+2)}:ie=>[...ie,ce]),et(!0)):(Ie(ce),K?(C(ie=>{const fe=[...ie];return fe[A+1]=ce,fe.slice(0,A+2)}),et(!1)):C(ie=>[...ie,ce]))}}catch(oe){console.error("Error generating next turn:",oe)}finally{Xe(!1)}}}catch(O){console.error("Error submitting answer:",O),z(O.message||"Ein Fehler ist aufgetreten")}finally{M(!1)}},qe=()=>{Y(null),y(!1),z(null)},Oe=()=>{if(Y(null),y(!1),z(null),t){if(he){P(R=>R+1),Ie(null);return}if(Z){$e();return}}else ee||P(R=>R+1)},wt=()=>{Y(null),y(!1),z(null),ge||P(R=>R-1)},kt=()=>{Ce(!0)},$e=async()=>{Ce(!1),xe(!1),ke(!1),ze();try{const R=await te.completeSimulatorSession(n.id);R.success?m(R.data):m({session:{...n,status:"completed"}})}catch(R){console.error("Error completing session:",R),m({session:{...n,status:"completed"}})}},vt=()=>{Re(!0)},zt=()=>{Re(!1),xe(!1),ke(!1),ze(),w()},Ct=async()=>{if(n&&B.length>0){F("interview");return}T(!0),I(null);try{const R=await te.createSimulatorSession({scenario_id:f.id,variables:o,demo_code:h||null,questions:s||null});if(!R.success)throw new Error(R.message||"Fehler beim Erstellen der Session");const q=R.data.session;let O;if(s&&s.length>0)O=s,await te.updateSimulatorSessionQuestions(q.id,O);else{const K=await te.generateSimulatorQuestions(q.id);if(!K.success)throw new Error(K.message||"Fehler beim Generieren der Fragen");O=K.data.questions}i({...q,questions_json:O}),C(O),c&&c({session:{...q,questions_json:O},questions:O,selectedMicrophoneId:J}),F("interview")}catch(R){console.error("Error creating session:",R),I(R.message||"Ein Fehler ist aufgetreten")}finally{T(!1)}};return W==="preparation"?e.jsxs(e.Fragment,{children:[e.jsx(dr,{scenario:f,variables:o,questions:B,onStart:Ct,onBack:w,selectedMicrophoneId:J,onMicrophoneChange:we,onMicrophoneTest:()=>ke(!0),themedGradient:ne,primaryAccent:le,primaryAccentLight:jt,isLoading:v,branding:_}),e.jsx(ht,{isOpen:De,onClose:()=>ke(!1),deviceId:J}),E&&e.jsx("div",{style:{position:"fixed",bottom:"24px",left:"50%",transform:"translateX(-50%)",padding:"12px 24px",borderRadius:"12px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",fontSize:"14px",fontWeight:500,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",zIndex:100},children:E}),e.jsx(ft,{isLoading:v,message:t?"Situationen werden generiert...":"Fragen werden generiert...",subMessage:"Die KI erstellt personalisierte Inhalte basierend auf deinen Angaben."})]}):e.jsxs("div",{style:{padding:d?"16px":"24px",maxWidth:"1000px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",justifyContent:"space-between",alignItems:d?"stretch":"center",gap:d?"12px":"0",marginBottom:"24px"},children:[e.jsx("h1",{style:{fontSize:d?"18px":"20px",fontWeight:600,color:"#0f172a",margin:0},children:f?.title}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",justifyContent:d?"space-between":"flex-end"},children:[!(g&&(t&&Z&&!he||!t&&ee))&&e.jsxs("button",{onClick:kt,style:{padding:d?"10px 14px":"8px 16px",borderRadius:"8px",background:"#22c55e",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",color:"white",fontSize:"14px",fontWeight:600,boxShadow:"0 2px 8px rgba(34, 197, 94, 0.3)",flex:d?1:"none",justifyContent:"center"},children:[e.jsx(rt,{size:16}),d?"Beenden":"Training beenden"]}),e.jsxs("button",{onClick:vt,style:{padding:d?"10px 14px":"8px 16px",borderRadius:"8px",background:"#f1f5f9",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",color:"#64748b",fontSize:"14px",flex:d?1:"none",justifyContent:"center"},children:[e.jsx(Et,{size:16}),"Abbrechen"]})]})]}),yt&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>Ce(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",maxWidth:"420px",width:"90%",boxShadow:"0 20px 50px rgba(0, 0, 0, 0.2)"},onClick:R=>R.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#dcfce7",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rt,{size:24,color:"#22c55e"})}),e.jsx("h3",{style:{fontSize:"18px",fontWeight:600,color:"#0f172a",margin:0},children:"Training beenden?"})]}),Q.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{style:{fontSize:"14px",color:"#64748b",lineHeight:1.6,marginBottom:"8px"},children:["Du hast ",e.jsx("strong",{children:l.answeredCount(Q.length,B.length)})," beantwortet."]}),e.jsxs("p",{style:{fontSize:"14px",color:"#64748b",lineHeight:1.6,marginBottom:"24px"},children:["MÃ¶chtest du das Training jetzt mit den bisherigen Antworten abschlieÃŸen oder weitere ",l.questionsLabel," beantworten?"]})]}):e.jsxs("p",{style:{fontSize:"14px",color:"#64748b",lineHeight:1.6,marginBottom:"24px"},children:["Du hast noch keine ",l.questionsLabel," beantwortet. MÃ¶chtest du das Training wirklich beenden?"]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>Ce(!1),style:{padding:"10px 20px",borderRadius:"10px",border:"1px solid #e2e8f0",background:"white",color:"#64748b",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"Weiter trainieren"}),e.jsx("button",{onClick:$e,style:{padding:"10px 20px",borderRadius:"10px",border:"none",background:"#22c55e",color:"white",fontSize:"14px",fontWeight:600,cursor:"pointer",boxShadow:"0 2px 8px rgba(34, 197, 94, 0.3)"},children:"Training beenden"})]})]})}),bt&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>Re(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",maxWidth:"420px",width:"90%",boxShadow:"0 20px 50px rgba(0, 0, 0, 0.2)"},onClick:R=>R.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(pe,{size:24,color:"#ef4444"})}),e.jsx("h3",{style:{fontSize:"18px",fontWeight:600,color:"#0f172a",margin:0},children:"Training abbrechen?"})]}),e.jsxs("p",{style:{fontSize:"14px",color:"#64748b",lineHeight:1.6,marginBottom:"24px"},children:[e.jsx("strong",{children:"Achtung:"})," Wenn du das Training abbrichst, werden alle deine bisherigen Antworten",Q.length>0?` (${Q.length} ${l.questionsLabel})`:""," ",e.jsx("strong",{children:"nicht gespeichert"})," und gehen verloren."]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>Re(!1),style:{padding:"10px 20px",borderRadius:"10px",border:"1px solid #e2e8f0",background:"white",color:"#64748b",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"ZurÃ¼ck"}),e.jsx("button",{onClick:zt,style:{padding:"10px 20px",borderRadius:"10px",border:"none",background:"#ef4444",color:"white",fontSize:"14px",fontWeight:600,cursor:"pointer",boxShadow:"0 2px 8px rgba(239, 68, 68, 0.3)"},children:"Abbrechen"})]})]})}),!g&&!t&&e.jsxs("div",{style:{display:"flex",gap:d?"8px":"12px",justifyContent:"center",marginBottom:"16px"},children:[e.jsxs("button",{onClick:wt,disabled:ge,style:{display:"flex",alignItems:"center",gap:"6px",padding:d?"10px 14px":"12px 20px",borderRadius:"10px",border:`2px solid ${_.borderColor}`,backgroundColor:_.cardBg,color:ge?_.textMuted:_.textSecondary,fontSize:d?"13px":"14px",fontWeight:600,cursor:ge?"not-allowed":"pointer",opacity:ge?.5:1,flex:d?1:"none",justifyContent:"center"},children:[e.jsx(Wt,{size:16}),"ZurÃ¼ck"]}),e.jsxs("button",{onClick:Oe,disabled:ee,style:{display:"flex",alignItems:"center",gap:"6px",padding:d?"10px 14px":"12px 20px",borderRadius:"10px",border:`2px solid ${_.borderColor}`,backgroundColor:_.cardBg,color:ee?_.textMuted:_.textSecondary,fontSize:d?"13px":"14px",fontWeight:600,cursor:ee?"not-allowed":"pointer",opacity:ee?.5:1,flex:d?1:"none",justifyContent:"center"},children:[d?"Ãœberspringen":"Frage Ã¼berspringen",e.jsx(Ve,{size:16})]})]}),e.jsx(Qt,{current:A,total:B.length,answeredQuestions:Q,primaryAccent:le,b:_,labels:l}),g?e.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"16px",justifyContent:"flex-end"},children:[f.allow_retry&&e.jsxs("button",{onClick:qe,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",borderRadius:"10px",border:`2px solid ${_.borderColor}`,backgroundColor:_.cardBg,color:_.textSecondary,fontSize:"14px",fontWeight:600,cursor:"pointer"},children:[e.jsx(Ke,{size:16}),"Nochmal versuchen"]}),e.jsxs("button",{onClick:t?Z&&!he?$e:Oe:ee?$e:Oe,disabled:t&&se&&!Z,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",borderRadius:"10px",border:"none",background:t&&se&&!Z?_.textMuted:ne,color:"white",fontSize:"14px",fontWeight:600,cursor:t&&se&&!Z?"wait":"pointer",boxShadow:t&&se&&!Z?"none":`0 4px 12px ${le}4d`,opacity:t&&se&&!Z?.7:1},children:[t&&se&&!Z?e.jsxs(e.Fragment,{children:[e.jsx(Ue,{size:16,className:"animate-spin",style:{animation:"spin 1s linear infinite"}}),"GesprÃ¤chspartner tippt..."]}):t?Z&&!he?"Training abschlieÃŸen":l.nextButton:ee?"Training abschlieÃŸen":l.nextButton,!se&&!(t?Z&&!he:ee)&&e.jsx(Ve,{size:16})]})]}),e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"20px",border:"1px solid #e2e8f0",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:ne,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"13px",fontWeight:600},children:A+1}),e.jsx("span",{style:{fontSize:"14px",color:"#64748b"},children:D?.category||l.questionFallback})]}),e.jsx("p",{style:{fontSize:"16px",fontWeight:500,color:"#0f172a",margin:0,lineHeight:1.5},children:D?.question||l.questionLoading})]}),e.jsx(ar,{transcript:N.transcript,feedback:N.feedback,audioMetrics:N.audio_analysis,audioUrl:N.audio_url,hideButtons:!0})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:d?"16px":"24px"},children:[d?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"16px",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"26px",height:"26px",borderRadius:"50%",background:ne,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"12px",fontWeight:600,flexShrink:0},children:A+1}),e.jsx("span",{style:{fontSize:"13px",color:"#64748b"},children:D?.category||l.questionFallback})]}),e.jsx("p",{style:{fontSize:"15px",fontWeight:600,color:"#0f172a",lineHeight:1.5,margin:0},children:D?.question||l.questionLoading}),D?.estimated_answer_time&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:"#64748b",fontSize:"13px",marginTop:"12px"},children:[e.jsx(re,{size:14}),l.recommendedTime,": ca. ",Math.round(D.estimated_answer_time/60)," Min"]})]}),e.jsx(it,{onRecordingComplete:tt,timeLimit:f.time_limit_per_question||120,disabled:!1,deviceId:J,themedGradient:ne,primaryAccent:le,isSubmitting:k,labels:l,onOpenSettings:()=>xe(!0),branding:_,isMobile:!0,onStreamChange:Ye}),j&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"16px",borderRadius:"12px",backgroundColor:_.errorLight},children:[e.jsx(pe,{style:{width:"24px",height:"24px",color:_.error}}),e.jsx("p",{style:{marginTop:"8px",color:_.error,fontWeight:500,fontSize:"14px",textAlign:"center"},children:j}),e.jsx("button",{onClick:qe,style:{marginTop:"12px",padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:_.error,color:"white",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"Erneut versuchen"})]})]}):e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[e.jsxs("div",{children:[e.jsx(it,{onRecordingComplete:tt,timeLimit:f.time_limit_per_question||120,disabled:!1,deviceId:J,themedGradient:ne,primaryAccent:le,isSubmitting:k,labels:l,onOpenSettings:()=>xe(!0),branding:_,isMobile:!1,onStreamChange:Ye}),j&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",marginTop:"16px",borderRadius:"12px",backgroundColor:_.errorLight},children:[e.jsx(pe,{style:{width:"24px",height:"24px",color:_.error}}),e.jsx("p",{style:{marginTop:"8px",color:_.error,fontWeight:500,fontSize:"14px",textAlign:"center"},children:j}),e.jsx("button",{onClick:qe,style:{marginTop:"12px",padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:_.error,color:"white",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"Erneut versuchen"})]})]}),e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"24px",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:ne,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"13px",fontWeight:600},children:A+1}),e.jsx("span",{style:{fontSize:"14px",color:"#64748b"},children:D?.category||l.questionFallback})]}),e.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:"#0f172a",lineHeight:1.5,marginBottom:"16px"},children:D?.question||l.questionLoading}),D?.estimated_answer_time&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:"#64748b",fontSize:"14px"},children:[e.jsx(re,{size:16}),l.recommendedTime,": ca. ",Math.round(D.estimated_answer_time/60)," Min"]})]})]}),D?.tips&&D.tips.length>0&&e.jsx(lr,{tips:D.tips,primaryAccent:le,tipsLabel:l.tipsLabel,branding:_})]}),e.jsx(Jt,{isOpen:mt,onClose:()=>xe(!1),mode:"audio",selectedMicrophoneId:J,onMicrophoneChange:we})]})},Me=({score:r,label:a,primaryAccent:f,b:o})=>{const s=r!=null?r*10:null,c=Vt(s,f);return e.jsxs("div",{style:{textAlign:"center",padding:o.space[4],backgroundColor:p.slate[100],borderRadius:o.radius.lg},children:[e.jsx("div",{style:{fontSize:o.fontSize["4xl"],fontWeight:700,color:c,marginBottom:"4px"},children:s!=null?Math.round(s):"-"}),e.jsx("div",{style:{fontSize:o.fontSize.sm,color:p.slate[600]},children:a})]})},He=({icon:r,value:a,label:f,primaryAccent:o,b:s})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:s.space[3],padding:`${s.space[3]} ${s.space[4]}`,backgroundColor:p.slate[100],borderRadius:s.radius.md},children:[e.jsx(r,{style:{width:"20px",height:"20px",color:o}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:s.fontSize.xl,fontWeight:600,color:p.slate[900]},children:a}),e.jsx("div",{style:{fontSize:s.fontSize.xs,color:p.slate[500]},children:f})]})]}),ur=({session:r,scenario:a,onBackToDashboard:f,onStartNew:o})=>{const s=Se(),c=r.summary_feedback||r.summary_feedback_json,m=c?typeof c=="string"?JSON.parse(c):c:null,w=r.overall_score||m?.overall_score||0,S=w<=10?w*10:w,d=(n=>n>=90?{text:"Ausgezeichnet!",emoji:"ðŸŒŸ"}:n>=80?{text:"Sehr gut!",emoji:"ðŸŽ‰"}:n>=70?{text:"Gut!",emoji:"ðŸ‘"}:n>=60?{text:"Solide Leistung",emoji:"ðŸ‘"}:n>=50?{text:"AusbaufÃ¤hig",emoji:"ðŸ’ª"}:{text:"Weiter Ã¼ben!",emoji:"ðŸ“š"})(S);return e.jsxs("div",{style:{padding:s.space[6],maxWidth:"640px",margin:"0 auto"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:s.headerGradient,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",boxShadow:`0 8px 24px ${s.primaryAccent}4d`},children:e.jsx(xt,{style:{width:"40px",height:"40px",color:"white"}})}),e.jsxs("h1",{style:{fontSize:s.fontSize["5xl"],fontWeight:700,color:p.slate[900],margin:"0 0 8px 0"},children:["Training abgeschlossen! ",d.emoji]}),e.jsxs("p",{style:{fontSize:s.fontSize.lg,color:p.slate[600],margin:0},children:[a?.title||"Skill Training"," - ",d.text]})]}),e.jsxs("div",{style:{padding:s.space[6],borderRadius:s.radius.xl,backgroundColor:"white",border:`1px solid ${p.slate[200]}`,textAlign:"center",marginBottom:s.space[6]},children:[e.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",border:`6px solid ${s.primaryAccent}`,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",backgroundColor:s.primaryAccentLight},children:e.jsx("span",{style:{fontSize:s.fontSize["5xl"],fontWeight:700,color:s.primaryAccent},children:S?Math.round(S):"-"})}),e.jsx("p",{style:{fontSize:s.fontSize.base,color:p.slate[500],margin:0},children:S?"Gesamtbewertung (von 100)":"Keine Fragen beantwortet"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:s.space[3],marginBottom:s.space[6]},children:[e.jsx(He,{icon:be,value:`${r.completed_questions??0}/${r.total_questions||"-"}`,label:"Fragen",primaryAccent:s.primaryAccent,b:s}),e.jsx(He,{icon:ae,value:m?.average_content_score?Math.round(m.average_content_score*10):"-",label:"Ã˜ Inhalt",primaryAccent:s.primaryAccent,b:s}),e.jsx(He,{icon:Ot,value:m?.average_delivery_score?Math.round(m.average_delivery_score*10):"-",label:"Ã˜ PrÃ¤sentation",primaryAccent:s.primaryAccent,b:s})]}),m?.scores&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:s.space[3],marginBottom:s.space[6]},children:[e.jsx(Me,{score:m.scores.content,label:"Inhalt",primaryAccent:s.primaryAccent,b:s}),e.jsx(Me,{score:m.scores.structure,label:"Struktur",primaryAccent:s.primaryAccent,b:s}),e.jsx(Me,{score:m.scores.relevance,label:"Relevanz",primaryAccent:s.primaryAccent,b:s}),e.jsx(Me,{score:m.scores.delivery,label:"PrÃ¤sentation",primaryAccent:s.primaryAccent,b:s})]}),m?.summary&&e.jsxs("div",{style:{padding:s.space[5],borderRadius:s.radius.lg,backgroundColor:p.slate[100],marginBottom:s.space[6]},children:[e.jsx("h3",{style:{fontSize:s.fontSize.base,fontWeight:600,color:p.slate[700],margin:"0 0 8px 0"},children:"Zusammenfassung"}),e.jsx("p",{style:{fontSize:s.fontSize.base,color:p.slate[600],margin:0,lineHeight:1.6},children:m.summary})]}),m?.key_takeaways?.length>0&&e.jsxs("div",{style:{padding:s.space[5],borderRadius:s.radius.lg,backgroundColor:p.green[100],marginBottom:s.space[6]},children:[e.jsx("h3",{style:{fontSize:s.fontSize.base,fontWeight:600,color:p.green[500],margin:"0 0 12px 0"},children:"ðŸ’¡ Die wichtigsten Erkenntnisse"}),e.jsx("ul",{style:{margin:0,paddingLeft:s.space[5],color:p.slate[700],fontSize:s.fontSize.base,lineHeight:1.6},children:m.key_takeaways.map((n,i)=>e.jsx("li",{style:{marginBottom:"8px"},children:n},i))})]}),e.jsxs("div",{style:{display:"flex",gap:s.space[3],marginTop:"32px"},children:[e.jsxs("button",{onClick:f,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:s.space[2],padding:`${s.space[3.5]} ${s.space[6]}`,borderRadius:s.radius.lg,border:`2px solid ${p.slate[300]}`,backgroundColor:"white",color:p.slate[700],fontSize:s.fontSize.base,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:n=>{n.target.style.borderColor=s.primaryAccent,n.target.style.color=s.primaryAccent},onMouseLeave:n=>{n.target.style.borderColor=p.slate[300],n.target.style.color=p.slate[700]},children:[e.jsx(Fe,{style:{width:"18px",height:"18px"}}),"Zur Ãœbersicht"]}),e.jsxs("button",{onClick:o,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:s.space[2],padding:`${s.space[3.5]} ${s.space[6]}`,borderRadius:s.radius.lg,border:"none",background:s.buttonGradient,color:"white",fontSize:s.fontSize.base,fontWeight:600,cursor:"pointer",boxShadow:`0 4px 12px ${s.primaryAccent}4d`,transition:"all 0.2s"},onMouseEnter:n=>{n.target.style.transform="translateY(-2px)",n.target.style.boxShadow=`0 6px 16px ${s.primaryAccent}66`},onMouseLeave:n=>{n.target.style.transform="none",n.target.style.boxShadow=`0 4px 12px ${s.primaryAccent}4d`},children:[e.jsx(Ke,{style:{width:"18px",height:"18px"}}),"Nochmal Ã¼ben"]})]})]})},G={DASHBOARD:"dashboard",VARIABLES:"variables",SESSION:"session",COMPLETE:"complete"},$r=({isAuthenticated:r,requireAuth:a,setPendingAction:f,pendingContinueSession:o,clearPendingContinueSession:s,pendingRepeatSession:c,clearPendingRepeatSession:m,onNavigateToHistory:w})=>{const[S,x]=u.useState(G.DASHBOARD),[d,n]=u.useState(null),[i,B]=u.useState(null),[C,v]=u.useState([]),[T,E]=u.useState({}),[I,h]=u.useState(null),[t,l]=u.useState(null),[b,$]=u.useState(null),[W,F]=u.useState(0);u.useEffect(()=>{b&&r&&(n(b),x(G.VARIABLES),$(null))},[b,r]),u.useEffect(()=>{if(o&&r){const{session:j,scenario:z}=o,H=j.questions||j.questions_json,X=typeof H=="string"?JSON.parse(H):H||[],Q=j.completed_questions||j.answered_count||0;n(z||{id:j.scenario_id,title:j.scenario_title}),B(j),v(X),E({}),F(Q),x(G.SESSION),s&&s()}},[o,r,s]),u.useEffect(()=>{if(c&&r){const{session:j,scenario:z}=c,H=j.questions||j.questions_json,X=typeof H=="string"?JSON.parse(H):H||[];n(z||{id:j.scenario_id,title:j.scenario_title}),v(X),E({}),F(0),x(G.SESSION),m&&m()}},[c,r,m]),u.useEffect(()=>{window.scrollTo(0,0)},[S]);const A=u.useCallback(j=>{n(j),x(G.VARIABLES)},[]),P=u.useCallback(()=>{n(null),B(null),v([]),E({}),h(null),F(0),l(null),x(G.DASHBOARD)},[]),N=u.useCallback(j=>{E(j),x(G.SESSION)},[]),Y=u.useCallback(j=>{B(j.session),v(j.questions),j.selectedMicrophoneId&&l(j.selectedMicrophoneId)},[]),g=u.useCallback(j=>{h(j.session),x(G.COMPLETE)},[]),y=u.useCallback(()=>{P()},[P]),k=u.useCallback(()=>{B(null),v([]),h(null),F(0),l(null),x(G.VARIABLES)},[]),M=()=>{switch(S){case G.DASHBOARD:return e.jsx(nt,{onSelectScenario:A,isAuthenticated:r,requireAuth:a,setPendingScenario:$,onNavigateToHistory:w});case G.VARIABLES:return e.jsx(nr,{scenario:d,onBack:P,onNext:N});case G.SESSION:return e.jsx(pr,{session:i,questions:C,scenario:d,variables:T,preloadedQuestions:C.length>0?C:null,onSessionCreated:Y,onComplete:g,onExit:y,startFromQuestion:W,initialMicrophoneId:t});case G.COMPLETE:return e.jsx(ur,{session:I,scenario:d,onBackToDashboard:P,onStartNew:k});default:return e.jsx(nt,{onSelectScenario:A,isAuthenticated:r,requireAuth:a,setPendingScenario:$,onNavigateToHistory:w})}};return e.jsx("div",{style:{minHeight:"100%"},children:M()})},at={target:ae,clock:re,mic:U,"message-square":me,lightbulb:V,brain:Pe,info:ye,check:be,sparkles:We},xr=[{icon:ae,title:"Strukturiert antworten",description:"Nutze die STAR-Methode (Situation, Task, Action, Result) fÃ¼r Beispiele."},{icon:re,title:"Zeit im Blick",description:"Antworte prÃ¤zise, aber ausfÃ¼hrlich genug."},{icon:U,title:"Klar sprechen",description:"Sprich in normalem Tempo. Pausen sind vÃ¶llig in Ordnung."}],Ar=({scenario:r,onBack:a,onStart:f,preloadedQuestions:o})=>{const[s,c]=u.useState({}),[m,w]=u.useState({}),[S,x]=u.useState(!1),[d,n]=u.useState(null),[i,B]=u.useState(null),[C,v]=u.useState(!1),[T,E]=u.useState([]),[I,h]=u.useState(!1),t=Se(),{demoCode:l}=Te(),b=Je.useMemo(()=>{if(!r?.input_configuration)return[];try{const g=typeof r.input_configuration=="string"?JSON.parse(r.input_configuration):r.input_configuration;return Array.isArray(g)?g.filter(y=>y.user_input!==!1):[]}catch(g){return console.error("Error parsing input_configuration:",g),[]}},[r?.input_configuration]);u.useEffect(()=>{const g={};b.forEach(y=>{y.default&&(g[y.key]=y.default)}),c(g)},[b]);const $=(g,y)=>{if(!g)return g;let k=g;return Object.entries(y||{}).forEach(([M,j])=>{j&&(k=k.replace(new RegExp(`\\$\\{${M}\\}`,"g"),j),k=k.replace(new RegExp(`\\{${M}\\}`,"g"),j))}),k},W=(g,y)=>{c(k=>({...k,[g]:y})),m[g]&&w(k=>{const M={...k};return delete M[g],M})},F=()=>{E(g=>[...g,{key:"",value:""}])},A=(g,y,k)=>{E(M=>{const j=[...M];return j[g]={...j[g],[y]:k},j})},P=g=>{E(y=>y.filter((k,M)=>M!==g))},N=()=>{const g={};return b.forEach(y=>{const k=s[y.key];if(y.required&&(!k||k.trim()==="")){g[y.key]="Dieses Feld ist erforderlich";return}if(!(!k||k.trim()==="")&&y.validation){const{minLength:M,maxLength:j,min:z,max:H,pattern:X}=y.validation;M&&k.length<M&&(g[y.key]=`Mindestens ${M} Zeichen erforderlich`),j&&k.length>j&&(g[y.key]=`Maximal ${j} Zeichen erlaubt`),z!==void 0&&Number(k)<z&&(g[y.key]=`Mindestens ${z}`),H!==void 0&&Number(k)>H&&(g[y.key]=`Maximal ${H}`),X&&!new RegExp(X).test(k)&&(g[y.key]="UngÃ¼ltiges Format")}}),w(g),Object.keys(g).length===0},Y=async g=>{if(g.preventDefault(),n(null),!!N()){x(!0);try{const y={...s};T.forEach(z=>{z.key&&z.value&&(y[z.key]=z.value)});const k=await te.createSimulatorSession({scenario_id:r.id,variables:y,demo_code:l||null,questions:o||null});if(!k.success)throw new Error(k.message||"Fehler beim Erstellen der Session");const M=k.data.session;let j;if(o&&o.length>0)j=o,await te.updateSimulatorSessionQuestions(M.id,j);else{const z=await te.generateSimulatorQuestions(M.id);if(!z.success)throw new Error(z.message||"Fehler beim Generieren der Fragen");j=z.data.questions}f({session:{...M,questions_json:j},questions:j,scenario:r,variables:y,selectedMicrophoneId:i})}catch(y){console.error("Error starting session:",y),n(y.message||"Ein Fehler ist aufgetreten")}finally{x(!1)}}};return e.jsxs("div",{style:{padding:t.space[6],paddingBottom:"200px",maxWidth:"640px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("button",{onClick:a,style:{display:"inline-flex",alignItems:"center",gap:t.space[2],padding:`${t.space[2]} ${t.space[3]}`,marginBottom:t.space[4],border:"none",background:"transparent",color:p.slate[600],fontSize:t.fontSize.base,cursor:"pointer",borderRadius:t.radius.sm,transition:t.transition.normal},onMouseEnter:g=>g.target.style.background=p.slate[100],onMouseLeave:g=>g.target.style.background="transparent",children:[e.jsx(Fe,{style:{width:"18px",height:"18px"}}),"ZurÃ¼ck zur Ãœbersicht"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t.space[4]},children:[e.jsx("div",{style:{width:"56px",height:"56px",borderRadius:t.radius.lg,background:t.headerGradient,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(We,{style:{width:"28px",height:"28px",color:"white"}})}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:t.fontSize["4xl"],fontWeight:700,color:p.slate[900],margin:0},children:r.title}),e.jsx("p",{style:{fontSize:t.fontSize.base,color:p.slate[600],margin:"4px 0 0 0"},children:"Konfiguriere dein Training"})]})]})]}),e.jsx("div",{style:{padding:`${t.space[4]} ${t.space[5]}`,borderRadius:t.radius.lg,backgroundColor:p.slate[100],marginBottom:t.space[6]},children:e.jsx("p",{style:{fontSize:t.fontSize.base,color:p.slate[700],margin:0,lineHeight:1.6},children:r.description})}),r.long_description&&e.jsx("div",{style:{padding:`${t.space[5]} ${t.space[6]}`,borderRadius:t.radius.lg,backgroundColor:"white",border:`1px solid ${p.slate[200]}`,marginBottom:t.space[6]},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"14px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:t.radius.md,background:t.headerGradient,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(ye,{style:{width:"20px",height:"20px",color:"white"}})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:t.fontSize.md,fontWeight:600,color:p.slate[900],margin:`0 0 ${t.space[2]} 0`},children:"Deine Aufgabe"}),e.jsx("p",{style:{fontSize:t.fontSize.base,lineHeight:"1.6",color:p.slate[700],margin:0,whiteSpace:"pre-wrap"},children:$(r.long_description?.replace(/\/n/g,`
`),s)})]})]})}),(()=>{const g=r.tips&&Array.isArray(r.tips)&&r.tips.length>0?r.tips.map((y,k)=>typeof y=="string"?{icon:V,title:`Tipp ${k+1}`,description:y}:{icon:at[y.icon]||at[y.icon?.toLowerCase()]||V,title:y.title||`Tipp ${k+1}`,description:y.text||y.description||""}):xr;return e.jsxs("div",{style:{padding:`${t.space[5]} ${t.space[6]}`,borderRadius:t.radius.lg,backgroundColor:"white",border:`1px solid ${p.slate[200]}`,marginBottom:t.space[6]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t.space[2.5],marginBottom:t.space[4]},children:[e.jsx(V,{style:{width:"20px",height:"20px",color:t.primaryAccent}}),e.jsx("h3",{style:{fontSize:t.fontSize.lg,fontWeight:600,color:p.slate[900],margin:0},children:"Tipps fÃ¼r dein Training"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:t.space[3]},children:g.map((y,k)=>{const M=y.icon;return e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:t.space[3],padding:`${t.space[3]} ${t.space[4]}`,borderRadius:t.radius.md,backgroundColor:p.slate[50]},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:t.radius.sm,background:t.headerGradient,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(M,{style:{width:"16px",height:"16px",color:"white"}})}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontWeight:600,color:p.slate[900],fontSize:t.fontSize.base,margin:"0 0 2px 0"},children:y.title}),e.jsx("p",{style:{fontSize:t.fontSize.sm,color:p.slate[600],lineHeight:1.5,margin:0},children:y.description})]})]},k)})})]})})(),e.jsxs("form",{onSubmit:Y,children:[b.length>0?b.map(g=>e.jsx(Yt,{field:g,value:s[g.key],onChange:W,error:m[g.key],focusColor:t.primaryAccent},g.key)):e.jsxs("div",{style:{padding:t.space[6],textAlign:"center",color:p.slate[500]},children:[e.jsx(be,{style:{width:"32px",height:"32px",marginBottom:t.space[3],opacity:.5}}),e.jsx("p",{style:{margin:0},children:"Keine zusÃ¤tzliche Konfiguration erforderlich."})]}),r?.allow_custom_variables&&e.jsxs("div",{style:{marginTop:t.space[5],marginBottom:t.space[5],paddingTop:t.space[5],borderTop:`1px solid ${p.slate[200]}`},children:[e.jsxs("button",{type:"button",onClick:()=>h(!I),style:{display:"flex",alignItems:"flex-start",gap:t.space[2],padding:"0",border:"none",background:"none",color:p.slate[500],fontSize:t.fontSize.sm,fontWeight:500,cursor:"pointer",marginBottom:I?t.space[4]:"0",textAlign:"left"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:t.space[2],flexShrink:0},children:[I?e.jsx(Ze,{size:18}):e.jsx(Le,{size:18}),e.jsx(_e,{size:16})]}),e.jsx("span",{style:{lineHeight:"1.4"},children:"ZusÃ¤tzliche Variablen hinzufÃ¼gen (optional)"})]}),I&&e.jsxs("div",{style:{backgroundColor:p.slate[50],borderRadius:t.radius.lg,padding:t.space[4]},children:[e.jsx("p",{style:{fontSize:t.fontSize.sm,color:p.slate[500],margin:`0 0 ${t.space[3]} 0`},children:"FÃ¼ge eigene Variablen hinzu, die in die Fragen-Generierung und Feedback einflieÃŸen sollen."}),T.length>0&&e.jsx("div",{style:{marginBottom:t.space[3]},children:T.map((g,y)=>e.jsxs("div",{style:{backgroundColor:"white",border:`1px solid ${p.slate[200]}`,borderRadius:t.radius.md,padding:t.space[3],marginBottom:t.space[3]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:t.space[2]},children:[e.jsx("input",{type:"text",value:g.key||"",onChange:k=>A(y,"key",k.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"_")),placeholder:"variable_name",style:{padding:`${t.space[2]} ${t.space[3]}`,borderRadius:t.radius.md,border:`1px solid ${p.slate[200]}`,fontSize:t.fontSize.sm,fontFamily:"monospace",backgroundColor:p.slate[50],flex:1,marginRight:t.space[2]}}),e.jsx("button",{type:"button",onClick:()=>P(y),style:{padding:t.space[2],border:"none",backgroundColor:"transparent",cursor:"pointer",color:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ct,{size:18})})]}),e.jsx("textarea",{value:g.value||"",onChange:k=>A(y,"value",k.target.value),placeholder:"Wert eingeben... (mehrzeilig mÃ¶glich)",rows:3,style:{width:"100%",padding:`${t.space[2]} ${t.space[3]}`,borderRadius:t.radius.md,border:`1px solid ${p.slate[200]}`,fontSize:t.fontSize.sm,resize:"vertical",minHeight:"80px",boxSizing:"border-box"}})]},y))}),e.jsxs("button",{type:"button",onClick:F,style:{display:"flex",alignItems:"center",gap:t.space[1.5],padding:`${t.space[2]} ${t.space[3]}`,border:`1px dashed ${p.slate[300]}`,borderRadius:t.radius.md,background:"transparent",color:p.slate[600],fontSize:t.fontSize.sm,cursor:"pointer",width:"100%",justifyContent:"center"},children:[e.jsx(_e,{size:16}),"Variable hinzufÃ¼gen"]})]})]}),e.jsxs("div",{style:{padding:`${t.space[4]} ${t.space[5]}`,borderRadius:t.radius.lg,backgroundColor:t.primaryAccentLight,marginTop:t.space[6],marginBottom:t.space[6],display:"flex",gap:t.space[5],flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:t.fontSize.xs,color:p.slate[500],display:"block"},children:"Fragen"}),e.jsxs("span",{style:{fontSize:t.fontSize.lg,fontWeight:600,color:p.slate[900]},children:[r.question_count_min,"-",r.question_count_max]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:t.fontSize.xs,color:p.slate[500],display:"block"},children:"Zeit pro Frage"}),e.jsxs("span",{style:{fontSize:t.fontSize.lg,fontWeight:600,color:p.slate[900]},children:[Math.round(r.time_limit_per_question/60)," Min"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:t.fontSize.xs,color:p.slate[500],display:"block"},children:"Wiederholen"}),e.jsx("span",{style:{fontSize:t.fontSize.lg,fontWeight:600,color:p.slate[900]},children:r.allow_retry?"Erlaubt":"Nicht erlaubt"})]})]}),e.jsxs("div",{style:{padding:t.space[6],borderRadius:t.radius.xl,backgroundColor:"white",border:`1px solid ${p.slate[200]}`,marginBottom:t.space[6]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t.space[2.5],marginBottom:t.space[4]},children:[e.jsx(U,{style:{width:"22px",height:"22px",color:t.primaryAccent}}),e.jsx("h3",{style:{fontSize:t.fontSize.lg,fontWeight:600,color:p.slate[900],margin:0},children:"Mikrofon auswÃ¤hlen"})]}),e.jsx(gt,{selectedDeviceId:i,onDeviceChange:B,onTestClick:()=>v(!0)})]}),d&&e.jsxs("div",{style:{padding:`${t.space[3]} ${t.space[4]}`,borderRadius:t.radius.lg,backgroundColor:p.red[100],color:p.red[500],marginBottom:t.space[5],display:"flex",alignItems:"center",gap:t.space[2]},children:[e.jsx(pe,{style:{width:"18px",height:"18px"}}),d]}),e.jsxs("button",{type:"submit",disabled:S,style:{width:"100%",padding:`${t.space[4]} ${t.space[6]}`,borderRadius:t.radius.lg,border:"none",background:S?p.slate[300]:t.buttonGradient,color:"white",fontSize:t.fontSize.lg,fontWeight:600,cursor:S?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:t.space[2.5],transition:t.transition.normal,boxShadow:S?"none":`0 4px 12px ${t.primaryAccent}4d`},onMouseEnter:g=>{S||(g.target.style.transform="translateY(-2px)",g.target.style.boxShadow=`0 6px 16px ${t.primaryAccent}66`)},onMouseLeave:g=>{g.target.style.transform="none",g.target.style.boxShadow=S?"none":`0 4px 12px ${t.primaryAccent}4d`},children:["Training starten",e.jsx(dt,{style:{width:"20px",height:"20px"}})]})]}),e.jsx(ht,{isOpen:C,onClose:()=>v(!1),deviceId:i}),e.jsx(ft,{isLoading:S,message:"Fragen werden generiert...",subMessage:"Die KI erstellt personalisierte Fragen basierend auf deinen Angaben."})]})};export{ar as ImmediateFeedback,ur as SessionComplete,$r as SimulatorApp,nt as SimulatorDashboard,pr as SimulatorSession,Ar as SimulatorWizard};
