import{j as e,c as v,m as h,ae as V,a0 as J,U as Q,B as X,e as Y,af as ee,f as te,H as se,h as O,a as T,g as ae}from"./ui-vendor-BPmrRjpn.js";import{a}from"./react-vendor-uDOJF2jQ.js";import{B as A}from"./select-native-DRUSZasO.js";import{w as y,k as ie,q as L,C as d}from"./FeatureInfoButton-C-pllNNf.js";import"./dialog-ClMCq6FL.js";import{C as ne}from"./card-CnaoFFkT.js";import{F as E,u as re}from"./useScrollToTop-Dq0GrOj9.js";import{M as le,a as oe}from"./MicrophoneTestDialog-BMYyyjuu.js";import{a as ce,I as de}from"./IkigaiResults-CUdGCfv-.js";import"./utils-BEHD0UYf.js";import"./index-CklPxmEV.js";import"./useMobile-YxjH166V.js";import"./button-BoRGn9H8.js";import"./AudioRecorder-mfAI3dp7.js";import"./index.js";import"./DeviceSettingsDialog-oL48EOzx.js";import"./DeviceSetupPage-CC-lJTFm.js";const me=[{key:"love",label:"Was du liebst",icon:V,color:d.rose[500],description:"Deine Leidenschaften und Interessen"},{key:"talent",label:"Was du kannst",icon:J,color:d.amber[500],description:"Deine FÃ¤higkeiten und StÃ¤rken"},{key:"need",label:"Was die Welt braucht",icon:Q,color:d.emerald[500],description:"Wie du anderen helfen kannst"},{key:"market",label:"WofÃ¼r du bezahlt werden kannst",icon:X,color:d.blue[500],description:"Deine beruflichen MÃ¶glichkeiten"}],ue=({onStartNew:p,onContinueSession:M,onNavigateToHistory:N,isAuthenticated:m,requireAuth:f,setPendingAction:r,selectedMicrophoneId:x,onMicrophoneChange:j,onTestMicrophone:F})=>{const[g,w]=a.useState([]),[R,I]=a.useState(!1),k=L(d.purple[500],d.purple[400]);a.useEffect(()=>{m&&D()},[m]);const D=async()=>{I(!0);try{const s=await y.getIkigais();if(s?.data?.ikigais){const o=s.data.ikigais.sort((S,C)=>new Date(C.created_at)-new Date(S.created_at)).slice(0,5);w(o)}}catch(s){console.error("[IkigaiDashboard] Failed to load sessions:",s)}finally{I(!1)}},l=a.useCallback(()=>{if(!m){r&&r({type:"ikigai_start"}),f&&f(()=>{p()});return}p()},[m,f,r,p]),b=s=>new Date(s).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}),z=s=>s.status==="completed"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-700",children:[e.jsx(T,{className:"w-3 h-3"}),"Abgeschlossen"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-700",children:[e.jsx(ae,{className:"w-3 h-3"}),"In Bearbeitung"]});return e.jsxs(e.Fragment,{children:[e.jsx(ie,{featureId:"ikigai",showOnMount:!0}),e.jsxs("div",{className:"min-h-full",children:[e.jsx(E,{featureId:"ikigai",icon:v,title:"Ikigai-Kompass",subtitle:"Finde deine berufliche Bestimmung",gradient:k,historyLabel:"Meine Ikigai",onNavigateToHistory:N,showHistoryButton:m&&g.length>0}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl mx-auto mb-6 flex items-center justify-center",style:{background:k},children:e.jsx(v,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Entdecke dein Ikigai"}),e.jsx("p",{className:"text-slate-600 max-w-2xl mx-auto leading-relaxed",children:'Ikigai ist ein japanisches Konzept fÃ¼r den "Grund des Seins" â€“ die perfekte Schnittmenge aus dem, was du liebst, was du kannst, was die Welt braucht und wofÃ¼r du bezahlt werden kannst. Finde deinen einzigartigen Karrierepfad.'})]}),e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-10",children:me.map((s,o)=>e.jsxs(h.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1+o*.05},className:"bg-white rounded-xl p-4 border border-slate-200 text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl mx-auto mb-3 flex items-center justify-center",style:{backgroundColor:`${s.color}15`},children:e.jsx(s.icon,{className:"w-6 h-6",style:{color:s.color}})}),e.jsx("h3",{className:"font-semibold text-slate-800 text-sm mb-1",children:s.label}),e.jsx("p",{className:"text-xs text-slate-500",children:s.description})]},s.key))}),e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},className:"mb-8",children:e.jsxs(ne,{className:"p-5 bg-white border border-slate-200 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center gap-2.5 mb-4",children:[e.jsx(Y,{className:"w-[22px] h-[22px] text-purple-500"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Mikrofon testen"})]}),e.jsx(le,{selectedDeviceId:x,onDeviceChange:j,onTestClick:F})]})}),e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-center mb-12",children:[e.jsxs(A,{onClick:l,size:"lg",className:"px-8 py-4 text-lg font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all",style:{background:k,color:"white"},children:[e.jsx(ee,{className:"w-5 h-5 mr-2"}),"Neues Ikigai starten",e.jsx(te,{className:"w-5 h-5 ml-2"})]}),!m&&e.jsx("p",{className:"text-sm text-slate-500 mt-3",children:"Anmeldung erforderlich zum Starten"})]}),m&&g.length>0&&e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5 text-slate-400"}),"Letzte Ikigai-Analysen"]}),g.length>=5&&e.jsxs(A,{variant:"ghost",size:"sm",onClick:N,className:"text-slate-600 hover:text-slate-800",children:["Alle anzeigen",e.jsx(O,{className:"w-4 h-4 ml-1"})]})]}),e.jsx("div",{className:"space-y-3",children:g.map((s,o)=>e.jsx(h.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5+o*.05},className:"bg-white rounded-xl p-4 border border-slate-200 hover:border-purple-300 hover:shadow-md transition-all cursor-pointer group",onClick:()=>M(s),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{background:`${d.purple[500]}15`},children:e.jsx(v,{className:"w-5 h-5",style:{color:d.purple[500]}})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:s.summary?s.summary.substring(0,50)+(s.summary.length>50?"...":""):"Ikigai-Analyse"}),e.jsx("p",{className:"text-sm text-slate-500",children:b(s.created_at)})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[z(s),e.jsx(O,{className:"w-5 h-5 text-slate-400 group-hover:text-purple-500 transition-colors"})]})]})},s.id))})]}),e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-12 bg-gradient-to-br from-purple-50 to-violet-50 rounded-2xl p-6 border border-purple-100",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5 text-purple-500"}),"So funktioniert's"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500 text-white flex items-center justify-center font-bold text-sm flex-shrink-0",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:"Dimensionen ausfÃ¼llen"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Beantworte Fragen zu den vier Ikigai-Bereichen"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500 text-white flex items-center justify-center font-bold text-sm flex-shrink-0",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:"KI-Analyse"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Die KI extrahiert SchlÃ¼sselwÃ¶rter aus deinen Antworten"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500 text-white flex items-center justify-center font-bold text-sm flex-shrink-0",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:"Karrierepfade"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Erhalte personalisierte BerufsvorschlÃ¤ge"})]})]})]})]})]})]})]})},W={love:{key:"love",label:"Leidenschaft",title:"Deine Leidenschaft",icon:"â¤ï¸",color:"#E11D48",question:"Stell dir vor, Geld spielt keine Rolle: Womit wÃ¼rdest du deinen Tag verbringen? Bei welchem Thema vergisst du vÃ¶llig die Zeit?",placeholder:"Schreib einfach drauf los: Hobbys, Themen, TÃ¤tigkeiten...",description:"Was treibt dich an?"},talent:{key:"talent",label:"StÃ¤rken",title:"Deine StÃ¤rken",icon:"â­",color:"#F59E0B",question:'WofÃ¼r bitten dich Freunde oder Kollegen oft um Rat? Was erledigst du "mit links", wÃ¤hrend andere daran verzweifeln?',placeholder:"Z.B. Organisieren, ZuhÃ¶ren, Coden, Designen...",description:"Was fÃ¤llt dir leicht?"},need:{key:"need",label:"Mission",title:"Deine Mission",icon:"ðŸŒ",color:"#10B981",question:"Welches Problem in der Gesellschaft oder Wirtschaft nervt dich? Wo wÃ¼rdest du gerne mitanpacken, um Dinge zu verbessern?",placeholder:"Z.B. Nachhaltigkeit, Bildung, bessere Software, Pflege...",description:"Welchen Beitrag leistest du?"},market:{key:"market",label:"Markt",title:"Der Markt",icon:"ðŸ’°",color:"#6366F1",question:"Welche deiner FÃ¤higkeiten sind bares Geld wert? FÃ¼r welche Jobs oder Dienstleistungen existiert ein echtes Budget?",placeholder:"Z.B. Projektmanagement, Beratung, Handwerk...",description:"WofÃ¼r wirst du bezahlt?"}};Object.values(W).map(p=>p.color);const c={DASHBOARD:"dashboard",COMPASS:"compass",RESULTS:"results"},Me=({isAuthenticated:p,requireAuth:M,setPendingAction:N,onNavigateToHistory:m})=>{const[f,r]=a.useState(c.DASHBOARD),[x,j]=a.useState(null),[F,g]=a.useState(!1),[w,R]=a.useState(null),[I,k]=a.useState(!1),D=L(d.purple[500],d.purple[400]),[l,b]=a.useState({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),[z,s]=a.useState(null),o=a.useRef(!1);re({dependencies:[f]});const S=Object.values(l).every(t=>t.tags&&t.tags.length>0),C=a.useCallback(()=>{b({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),s(null),j(null),o.current=!1,r(c.COMPASS)},[]),H=a.useCallback(async t=>{try{j(t.id),o.current=!0,b({love:{input:t.love_input||"",tags:t.love_tags||[]},talent:{input:t.talent_input||"",tags:t.talent_tags||[]},need:{input:t.need_input||"",tags:t.need_tags||[]},market:{input:t.market_input||"",tags:t.market_tags||[]}}),t.status==="completed"&&t.paths?(s({summary:t.summary,paths:t.paths}),r(c.RESULTS)):r(c.COMPASS)}catch(i){console.error("[Ikigai] Failed to load session:",i)}},[]),_=a.useCallback(()=>{r(c.DASHBOARD)},[]),B=a.useCallback(async()=>{if(x)return x;try{const t=await y.createIkigai();if(t?.id)return j(t.id),o.current=!0,console.log("[Ikigai] Session created with ID:",t.id),t.id}catch(t){console.error("[Ikigai] Failed to create session:",t)}return null},[x]),P=a.useCallback(async(t,i,n)=>{b(u=>({...u,[t]:{input:i,tags:n}}));try{const u=await B();u&&(await y.updateIkigai(u,{[`${t}_input`]:i,[`${t}_tags`]:n}),console.log(`[Ikigai] Dimension ${t} saved`))}catch(u){console.error("[Ikigai] Failed to save dimension:",u)}},[B]),G=a.useCallback(async(t,i)=>{try{const n=await y.extractIkigaiKeywords(t,i);return n?.keywords?n.keywords:[]}catch(n){return console.error("[Ikigai] Failed to extract keywords:",n),[]}},[]),K=a.useCallback(async()=>{if(S){g(!0);try{const t=await y.synthesizeIkigaiPaths({love_tags:l.love.tags,talent_tags:l.talent.tags,need_tags:l.need.tags,market_tags:l.market.tags});if(t){s(t);const i=x||await B();i&&await y.updateIkigai(i,{summary:t.summary,paths:t.paths,status:"completed"}),r(c.RESULTS)}}catch(t){console.error("[Ikigai] Failed to synthesize paths:",t)}finally{g(!1)}}},[S,l,x,B]),U=a.useCallback((t,i)=>{b(n=>{const u=n[t].tags.filter(q=>q!==i);return{...n,[t]:{...n[t],tags:u}}})},[]),Z=a.useCallback(()=>{s(null),r(c.COMPASS)},[]),$=()=>{switch(f){case c.DASHBOARD:return e.jsx(ue,{onStartNew:C,onContinueSession:H,onNavigateToHistory:m,isAuthenticated:p,requireAuth:M,setPendingAction:N,selectedMicrophoneId:w,onMicrophoneChange:R,onTestMicrophone:()=>k(!0)});case c.RESULTS:return e.jsxs(e.Fragment,{children:[e.jsx(E,{featureId:"ikigai",icon:v,title:"Ikigai-Kompass",subtitle:"Deine Ergebnisse",gradient:D,showBackButton:!0,onBack:_}),e.jsx(de,{dimensions:l,synthesisResult:z,onStartNew:C,onEdit:Z,DIMENSIONS:W})]});case c.COMPASS:default:return e.jsxs(e.Fragment,{children:[e.jsx(E,{featureId:"ikigai",icon:v,title:"Ikigai-Kompass",subtitle:"Finde deine berufliche Bestimmung",gradient:D,showBackButton:!0,onBack:_}),e.jsx(ce,{dimensions:l,DIMENSIONS:W,onExtractKeywords:G,onUpdateDimension:P,onRemoveTag:U,allDimensionsFilled:S,onSynthesize:K,isSynthesizing:F,selectedMicrophoneId:w,onMicrophoneChange:R})]})}};return e.jsxs("div",{className:"min-h-full",children:[$(),e.jsx(oe,{isOpen:I,onClose:()=>k(!1),deviceId:w})]})};export{Me as default};
