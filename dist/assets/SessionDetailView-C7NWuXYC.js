import{a as t,j as e,L as _}from"./colors-uXoD1ofg.js";import{B as u}from"./button-DQcX-0MN.js";import{e as b,d as S,b as N,h as k}from"./roleplay-feedback-adapter-iPFERy0V.js";import{R as v}from"./RoleplaySessionReport-DzghpIku.js";import{C as w}from"./circle-alert-EMpUppYH.js";import"./designTokens-DbcSlXo4.js";import"./gemini-CXv12nSV.js";import"./audio-BZs8f3gH.js";import"./useBranding-Cxdgj0iN.js";import"./useMobile-CWVpMrbN.js";import"./formatting-B67Bmjxp.js";import"./arrow-left-CtCRDCiU.js";import"./calendar-D_hT1Fz4.js";import"./index.js";import"./download-770bHVxi.js";import"./play-q3i8YB9n.js";import"./trash-2-5YY_ZL8K.js";import"./bot-Dk2VNoZg.js";import"./user-C299kFlx.js";import"./volume-2-DsiN52jK.js";import"./skip-back-CY8RiVmy.js";import"./skip-forward-DBeOEIJP.js";import"./award-fyGeNNIF.js";import"./circle-check-ZmDrGT7a.js";import"./lightbulb-DN4XDJmu.js";import"./star-fNCV08Od.js";function Y({session:o,onBack:n,onRepeatSession:c}){const[i,x]=t.useState(o),[r,f]=t.useState(null),[j,l]=t.useState(!0),[m,d]=t.useState(null),h=t.useMemo(()=>b(i?.feedback_json),[i?.feedback_json]),y=t.useMemo(()=>S(i?.audio_analysis_json),[i?.audio_analysis_json]);t.useEffect(()=>{p()},[o?.id]);const p=async()=>{try{l(!0),d(null);const s=await N(o.id);if(x(a=>({...s,feedback_json:s.feedback_json||a?.feedback_json,audio_analysis_json:s.audio_analysis_json||a?.audio_analysis_json,transcript:s.transcript||a?.transcript,conversation_id:s.conversation_id||a?.conversation_id})),s.scenario_id)try{const a=await k(s.scenario_id);f(a)}catch(a){console.warn("Could not load scenario:",a)}}catch(s){console.error("Failed to load session:",s),d(s.message||"Fehler beim Laden der Session")}finally{l(!1)}};return j?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_,{className:"w-12 h-12 text-ocean-blue-600 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Gesprächsanalyse wird geladen..."})]})}):m?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[e.jsx(w,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Fehler beim Laden"}),e.jsx("p",{className:"text-slate-600 mb-4",children:m}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx(u,{variant:"outline",onClick:n,children:"Zurück"}),e.jsx(u,{onClick:p,children:"Erneut versuchen"})]})]})}):e.jsx(v,{session:i,scenario:r,feedback:h,audioAnalysis:y,onBack:n,onRepeat:r&&c?()=>c(i,r,"roleplay"):void 0})}export{Y as default};
