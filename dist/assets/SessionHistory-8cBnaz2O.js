import{j as e,l as H,Y as ge,Q as wt,a4 as ve,b as be,a5 as It,y as qe,a6 as V,m as D,V as De,M as ue,a7 as xt,F as zt,w as he,r as Oe,x as Se,e as Ct,A as Bt,p as Xe,a8 as Wt,a9 as Rt,aa as Be,ab as Dt,ac as Yt,ad as Xt,s as Mt,v as gt,ae as Jt,h as oe,T as $e,S as We,af as ht,ag as ft,C as Re,ah as Zt,N as Qt,ai as ei,a as Je,H as ut,g as yt,O as mt,aj as ti}from"./ui-vendor-BAEfSb-X.js";import{a as g}from"./react-vendor-uDOJF2jQ.js";import{B as Le}from"./button-C27wFDRr.js";import{D as ii,a as ni,b as si,c as ri,d as oi,e as ai}from"./dialog-Bc6rUSl2.js";import{d as li,p as di,e as ci,h as pi,i as xi,j as gi,k as hi,g as fi}from"./index.js";import{g as je,b as re,m as q,j as fe,u as Ze,D as ke,n as ae,w as K}from"./designTokens-LSOQEIoP.js";import{u as Qe}from"./useBranding-CRmuKfX5.js";import{u as we}from"./useMobile-YxjH166V.js";import{R as ui}from"./RoleplaySessionReport-DHBQwzZ9.js";import{g as yi,B as mi}from"./BriefingWorkbook-DD-984qs.js";import{D as bi,a as ji}from"./DecisionBoardResult-DnLgolFW.js";import{I as Si,a as ki}from"./IkigaiResults-jZsWqaCh.js";import"./utils-BEHD0UYf.js";import"./card-CRd_k1Xo.js";import"./input-B2p07toF.js";import"./textarea-AQGmZicy.js";import"./AudioRecorder-LFdSK1H4.js";const vi={auftreten:Jt,selbstbewusstsein:gt,koerpersprache:Mt,kommunikation:ue,professionalitaet:gt,inhalt:Se},wi=(t,a)=>{const o=t;return o>=90?"Ausgezeichnet!":o>=80?"Sehr gut!":o>=70?"Gut!":o>=60?"Solide Leistung":o>=50?"Ausbauf√§hig":"Weiter √ºben!"},Ii=t=>t?new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",zi=t=>t==="video"?"Wirkungs-Analyse":t==="roleplay"?"Live-Simulation":"Szenario-Training",Ci=({score:t,size:a=120,primaryAccent:o,isHeader:r=!1,branding:l})=>{const p=Math.min(100,Math.max(0,t||0)),d=(a-12)/2,n=d*2*Math.PI,y=n-p/100*n,h=q(t,o);return e.jsxs("div",{style:{position:"relative",width:a,height:a},children:[e.jsxs("svg",{width:a,height:a,style:{transform:"rotate(-90deg)"},children:[e.jsx("circle",{cx:a/2,cy:a/2,r:d,fill:"none",stroke:r?"rgba(255,255,255,0.3)":l.borderColor,strokeWidth:10}),e.jsx(D.circle,{cx:a/2,cy:a/2,r:d,fill:"none",stroke:h,strokeWidth:10,strokeLinecap:"round",strokeDasharray:n,initial:{strokeDashoffset:n},animate:{strokeDashoffset:y},transition:{duration:1,ease:"easeOut"}})]}),e.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsx("span",{style:{fontSize:a/3.5,fontWeight:700,color:h},children:Math.round(t)}),e.jsx("span",{style:{fontSize:a/10,color:r?"#ffffff":l.textMuted},children:"von 100"})]})]})},Bi=({audioUrl:t,primaryAccent:a,durationHint:o,branding:r})=>{const l=g.useRef(null),[p,d]=g.useState(!1),[n,y]=g.useState(0),[h,z]=g.useState(o||0),[i,f]=g.useState(!0),[v,w]=g.useState(null);g.useEffect(()=>{if(!t)return;f(!0),w(null),z(o||0);const I=new Audio;l.current=I;const T=()=>{const W=I.duration;W&&isFinite(W)&&W>0&&z(W),f(!1)},A=()=>{const W=I.duration;W&&isFinite(W)&&W>0&&z(W)},O=()=>{f(!1);const W=I.duration;W&&isFinite(W)&&W>0&&z(W)};return I.addEventListener("loadedmetadata",T),I.addEventListener("durationchange",A),I.addEventListener("canplaythrough",O),I.addEventListener("timeupdate",()=>y(I.currentTime)),I.addEventListener("play",()=>d(!0)),I.addEventListener("pause",()=>d(!1)),I.addEventListener("ended",()=>d(!1)),I.addEventListener("error",()=>{w("Audio nicht verf√ºgbar"),f(!1)}),I.src=t,I.load(),()=>{I.pause(),I.removeEventListener("loadedmetadata",T),I.removeEventListener("durationchange",A),I.removeEventListener("canplaythrough",O),I.src=""}},[t,o]);const m=()=>{l.current&&(p?l.current.pause():l.current.play())},C=I=>{const T=I.currentTarget.getBoundingClientRect(),A=(I.clientX-T.left)/T.width;l.current&&(l.current.currentTime=A*h)},b=I=>{l.current&&(l.current.currentTime=Math.max(0,Math.min(l.current.currentTime+I,h)))};if(v)return e.jsxs("div",{style:{padding:"12px",background:r.cardBgHover,borderRadius:"10px",color:r.textMuted,fontSize:"13px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(ge,{size:16})," ",v]});if(!t)return null;const L=h>0?n/h*100:0;return e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"20px",border:`1px solid ${r.borderColor}`},children:[e.jsx("div",{onClick:C,style:{height:"8px",background:r.borderColor,borderRadius:"4px",cursor:"pointer",marginBottom:"16px"},children:e.jsx("div",{style:{width:`${L}%`,height:"100%",background:a||"#0d9488",borderRadius:"4px",transition:"width 0.1s"}})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px"},children:[e.jsx("button",{onClick:()=>b(-10),style:{background:"none",border:"none",cursor:"pointer",padding:"8px",color:r.textMuted},children:e.jsx(Wt,{size:20})}),e.jsx("button",{onClick:m,disabled:i,style:{width:"48px",height:"48px",borderRadius:"50%",background:a||"#0d9488",border:"none",cursor:i?"wait":"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#ffffff",opacity:i?.7:1},children:i?e.jsx(H,{size:22,color:"#ffffff",style:{animation:"spin 1s linear infinite"}}):p?e.jsx(Rt,{size:22,color:"#ffffff",fill:"#ffffff",strokeWidth:2}):e.jsx(Be,{size:22,color:"#ffffff",fill:"#ffffff",strokeWidth:2,style:{marginLeft:"2px"}})}),e.jsx("button",{onClick:()=>b(10),style:{background:"none",border:"none",cursor:"pointer",padding:"8px",color:r.textMuted},children:e.jsx(Dt,{size:20})})]}),e.jsxs("div",{style:{textAlign:"center",marginTop:"8px",fontSize:"13px",color:r.textMuted},children:[fe(n)," / ",fe(h)]}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]})},Wi=({sessionId:t,conversationId:a,primaryAccent:o,branding:r})=>{const l=g.useRef(null),[p,d]=g.useState(!1),[n,y]=g.useState(!1),[h,z]=g.useState(0),[i,f]=g.useState(0),[v,w]=g.useState(null),[m,C]=g.useState(!0);g.useEffect(()=>{if(!a){C(!1),w("Keine Audio-Aufnahme verf√ºgbar");return}const A=gi(t);return C(!0),w(null),fetch(A,{headers:{"X-WP-Nonce":re()},credentials:"same-origin"}).then(O=>{if(!O.ok)throw new Error(`HTTP ${O.status}`);return O.blob()}).then(O=>{const W=URL.createObjectURL(O),$=new Audio(W);l.current=$,$._objectUrl=W,$.addEventListener("loadedmetadata",()=>{f($.duration),C(!1)}),$.addEventListener("timeupdate",()=>z($.currentTime)),$.addEventListener("play",()=>d(!0)),$.addEventListener("pause",()=>d(!1)),$.addEventListener("ended",()=>d(!1)),$.addEventListener("error",()=>{w("Audio konnte nicht abgespielt werden."),C(!1)})}).catch(()=>{w("Audio nicht verf√ºgbar."),C(!1)}),()=>{l.current&&(l.current.pause(),l.current._objectUrl&&URL.revokeObjectURL(l.current._objectUrl),l.current=null)}},[t,a]);const b=()=>{l.current&&(p?l.current.pause():l.current.play())},L=()=>{l.current&&(l.current.muted=!n,y(!n))},I=A=>{l.current&&(l.current.currentTime=Math.max(0,Math.min(l.current.currentTime+A,i)))},T=A=>{const O=A.currentTarget.getBoundingClientRect(),W=(A.clientX-O.left)/O.width;l.current&&(l.current.currentTime=W*i)};return m?e.jsxs("div",{style:{background:r.cardBgHover,borderRadius:"16px",padding:"24px",textAlign:"center"},children:[e.jsx(H,{size:24,color:o,style:{animation:"spin 1s linear infinite",margin:"0 auto"}}),e.jsx("p",{style:{fontSize:"13px",color:r.textMuted,marginTop:"8px"},children:"Audio wird geladen..."})]}):v?e.jsxs("div",{style:{background:r.cardBgHover,borderRadius:"16px",padding:"24px",textAlign:"center"},children:[e.jsx(ge,{size:24,color:r.textMuted,style:{margin:"0 auto"}}),e.jsx("p",{style:{fontSize:"13px",color:r.textMuted,marginTop:"8px"},children:v})]}):e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"20px",border:`1px solid ${r.borderColor}`},children:[e.jsxs("h3",{style:{fontSize:"15px",fontWeight:600,color:r.textMain,marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Xe,{size:18,color:o})," Gespr√§chsaufnahme"]}),e.jsx("div",{onClick:T,style:{height:"8px",background:r.borderColor,borderRadius:"4px",cursor:"pointer",marginBottom:"16px"},children:e.jsx("div",{style:{width:`${h/i*100||0}%`,height:"100%",background:o,borderRadius:"4px",transition:"width 0.1s"}})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px"},children:[e.jsx("button",{onClick:()=>I(-10),style:{background:"none",border:"none",cursor:"pointer",padding:"8px",color:r.textMuted},children:e.jsx(Wt,{size:20})}),e.jsx("button",{onClick:b,style:{width:"48px",height:"48px",borderRadius:"50%",background:o,border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff"},children:p?e.jsx(Rt,{size:22,color:"#ffffff",fill:"#ffffff",strokeWidth:2}):e.jsx(Be,{size:22,color:"#ffffff",fill:"#ffffff",strokeWidth:2,style:{marginLeft:"2px"}})}),e.jsx("button",{onClick:()=>I(10),style:{background:"none",border:"none",cursor:"pointer",padding:"8px",color:r.textMuted},children:e.jsx(Dt,{size:20})}),e.jsx("button",{onClick:L,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",color:r.textMuted,marginLeft:"auto"},children:n?e.jsx(Yt,{size:20}):e.jsx(Xt,{size:20})})]}),e.jsxs("div",{style:{textAlign:"center",marginTop:"8px",fontSize:"13px",color:r.textMuted},children:[fe(h)," / ",fe(i)]})]})},Ri=({entry:t,index:a,primaryAccent:o,branding:r})=>{const l=t.role==="user";return e.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",flexShrink:0,background:l?o:r.disabledBg,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Mt,{size:16,color:l?"#fff":r.textSecondary})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:600,color:l?o:r.textMuted,marginBottom:"4px"},children:l?"Du":"Interviewer"}),e.jsx("p",{style:{fontSize:"14px",color:r.textMain,lineHeight:1.6,margin:0},children:t.text||t.message})]})]})},Di=({answer:t,index:a,primaryAccent:o,branding:r})=>{const[l,p]=g.useState(!1),d=t.feedback?typeof t.feedback=="string"?JSON.parse(t.feedback):t.feedback:null,n=t.audio_analysis?typeof t.audio_analysis=="string"?JSON.parse(t.audio_analysis):t.audio_analysis:null,y=t.transcript==="[Keine Sprache erkannt]"||n?.speech_rate==="keine_sprache";return e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.05},style:{background:"#fff",borderRadius:"16px",border:`1px solid ${r.borderColor}`,overflow:"hidden",marginBottom:"16px"},children:[e.jsxs("button",{onClick:()=>p(!l),style:{width:"100%",padding:"16px 20px",background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",textAlign:"left",overflow:"hidden"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"8px",background:`${o}15`,display:"flex",alignItems:"center",justifyContent:"center",color:o,fontWeight:700,fontSize:"14px",flexShrink:0},children:a+1}),e.jsx("div",{style:{flex:1,minWidth:0,overflow:"hidden"},children:e.jsx("h4",{style:{fontSize:"14px",fontWeight:600,color:r.textMain,margin:0,lineHeight:1.4,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.question_text||`Frage ${a+1}`})}),t.overall_score!==null&&t.overall_score!==void 0&&e.jsx("span",{style:{fontSize:"16px",fontWeight:700,color:y?r.textMuted:q(t.overall_score*10,o)},children:y?"‚Äì":`${Math.round(t.overall_score*10)}%`}),e.jsx(Ct,{size:18,color:r.textMuted,style:{transform:l?"rotate(180deg)":"none",transition:"transform 0.2s"}})]}),e.jsx(Bt,{children:l&&e.jsx(D.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},style:{overflow:"hidden"},children:e.jsxs("div",{style:{padding:"0 20px 20px",borderTop:`1px solid ${r.borderColor}`,paddingTop:"16px"},children:[t.question_text&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("h5",{style:{fontSize:"13px",fontWeight:600,color:r.textMain,marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(ue,{size:14,color:o})," Frage / Situation"]}),e.jsx("p",{style:{fontSize:"14px",color:r.textMain,lineHeight:1.6,background:`${o}08`,padding:"12px 16px",borderRadius:"10px",margin:0,border:`1px solid ${o}20`},children:t.question_text})]}),t.audio_url&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("h5",{style:{fontSize:"13px",fontWeight:600,color:r.textMain,marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Xe,{size:14,color:o})," Deine Aufnahme"]}),e.jsx(Bi,{audioUrl:t.audio_url,primaryAccent:o,durationHint:t.audio_duration_seconds,branding:r})]}),t.transcript&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("h5",{style:{fontSize:"13px",fontWeight:600,color:r.textMain,marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(zt,{size:14,color:o})," Transkript"]}),e.jsxs("p",{style:{fontSize:"13px",color:y?r.textMuted:r.textSecondary,lineHeight:1.6,background:r.cardBgHover,padding:"12px 16px",borderRadius:"10px",margin:0,fontStyle:"italic",wordBreak:"break-word",overflowWrap:"break-word"},children:['"',t.transcript,'"']})]}),d?.scores&&!y&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("h5",{style:{fontSize:"13px",fontWeight:600,color:r.textMain,marginBottom:"10px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(he,{size:14,color:o})," Bewertung"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"8px",marginBottom:"8px"},children:[{key:"content",label:"Inhalt"},{key:"structure",label:"Struktur"},{key:"relevance",label:"Relevanz"},{key:"delivery",label:"Pr√§sentation"}].map(({key:h,label:z})=>{const i=d.scores[h],f=i!=null?i*10:null;return e.jsxs("div",{style:{padding:"10px 8px",background:r.cardBgHover,borderRadius:"8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:700,color:f!=null?q(f,o):r.textMuted},children:f!=null?Math.round(f):"-"}),e.jsx("div",{style:{fontSize:"10px",color:r.textMuted,marginTop:"2px"},children:z})]},h)})}),(()=>{const h=d.scores.overall,z=h!=null?h*10:null;return e.jsxs("div",{style:{padding:"12px 16px",background:`${o}15`,borderRadius:"8px",textAlign:"center",border:`1px solid ${o}30`,display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},children:[e.jsx("div",{style:{fontSize:"10px",color:r.textMuted},children:"Gesamt"}),e.jsx("div",{style:{fontSize:"20px",fontWeight:700,color:z!=null?q(z,o):r.textMuted},children:z!=null?Math.round(z):"-"})]})})()]}),d?.summary&&e.jsx("p",{style:{fontSize:"13px",color:r.textSecondary,lineHeight:1.5,marginBottom:"12px"},children:d.summary}),d?.strengths?.length>0&&!y&&e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("h6",{style:{fontSize:"12px",fontWeight:600,color:r.success,marginBottom:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Oe,{size:12})," St√§rken"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"18px",color:r.textSecondary,fontSize:"12px"},children:d.strengths.map((h,z)=>e.jsx("li",{style:{marginBottom:"4px"},children:h},z))})]}),d?.improvements?.length>0&&e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("h6",{style:{fontSize:"12px",fontWeight:600,color:r.warning,marginBottom:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ge,{size:12})," Verbesserungspotenzial"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"18px",color:r.textSecondary,fontSize:"12px"},children:d.improvements.map((h,z)=>e.jsx("li",{style:{marginBottom:"4px"},children:h},z))})]}),d?.tips?.length>0&&!y&&e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("h6",{style:{fontSize:"12px",fontWeight:600,color:o,marginBottom:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Se,{size:12})," Tipps"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"18px",color:r.textSecondary,fontSize:"12px"},children:d.tips.map((h,z)=>e.jsx("li",{style:{marginBottom:"4px"},children:h},z))})]}),n&&!y&&e.jsxs("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:`1px solid ${r.borderColor}`},children:[e.jsxs("h5",{style:{fontSize:"13px",fontWeight:600,color:r.textMain,marginBottom:"12px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Xe,{size:14,color:o})," Sprechanalyse"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px"},children:[n.speech_rate&&e.jsxs("div",{style:{padding:"12px",background:r.cardBgHover,borderRadius:"10px"},children:[e.jsx("div",{style:{fontSize:"11px",color:r.textMuted,marginBottom:"4px"},children:"Sprechtempo"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:r.textMain,textTransform:"capitalize"},children:n.speech_rate==="optimal"?"‚úì Optimal":n.speech_rate==="zu_schnell"?"‚ö° Zu schnell":n.speech_rate==="zu_langsam"?"üê¢ Zu langsam":n.speech_rate})]}),n.filler_words&&e.jsxs("div",{style:{padding:"12px",background:r.cardBgHover,borderRadius:"10px"},children:[e.jsx("div",{style:{fontSize:"11px",color:r.textMuted,marginBottom:"4px"},children:"F√ºllw√∂rter"}),e.jsxs("div",{style:{fontSize:"14px",fontWeight:600,color:n.filler_words.count<=2?r.success:n.filler_words.count<=5?r.warning:r.error},children:[n.filler_words.count||0," erkannt"]}),n.filler_words.words?.length>0&&e.jsx("div",{style:{fontSize:"11px",color:r.textMuted,marginTop:"4px"},children:n.filler_words.words.slice(0,5).join(", ")})]}),n.confidence_score!=null&&e.jsxs("div",{style:{padding:"12px",background:r.cardBgHover,borderRadius:"10px"},children:[e.jsx("div",{style:{fontSize:"11px",color:r.textMuted,marginBottom:"4px"},children:"Selbstsicherheit"}),e.jsxs("div",{style:{fontSize:"14px",fontWeight:600,color:q(n.confidence_score,o)},children:[n.confidence_score,"%"]})]}),n.clarity_score!=null&&e.jsxs("div",{style:{padding:"12px",background:r.cardBgHover,borderRadius:"10px"},children:[e.jsx("div",{style:{fontSize:"11px",color:r.textMuted,marginBottom:"4px"},children:"Klarheit"}),e.jsxs("div",{style:{fontSize:"14px",fontWeight:600,color:q(n.clarity_score,o)},children:[n.clarity_score,"%"]})]})]}),n.notes&&e.jsx("p",{style:{fontSize:"12px",color:r.textMuted,marginTop:"10px",fontStyle:"italic"},children:n.notes})]})]})})})]})},Mi=({isOpen:t,onClose:a,onConfirm:o,isDeleting:r,primaryAccent:l,branding:p})=>t?e.jsx("div",{style:{position:"fixed",inset:0,zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:a,children:e.jsxs(D.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},onClick:d=>d.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:p.errorLight,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(V,{size:24,color:p.error})}),e.jsx("div",{children:e.jsx("h3",{style:{fontSize:"18px",fontWeight:600,color:p.textMain,margin:0},children:"Session l√∂schen?"})})]}),e.jsx("p",{style:{fontSize:"14px",color:p.textSecondary,lineHeight:1.6,marginBottom:"24px"},children:"M√∂chtest du diese Session wirklich l√∂schen? Alle Antworten und Feedback werden unwiderruflich entfernt."}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:a,disabled:r,style:{padding:"10px 20px",borderRadius:"10px",border:`1px solid ${p.disabledBg}`,backgroundColor:"white",color:p.textMain,fontSize:"14px",fontWeight:500,cursor:r?"not-allowed":"pointer",opacity:r?.5:1,outline:"none",WebkitAppearance:"none"},children:"Abbrechen"}),e.jsx("button",{onClick:o,disabled:r,style:{padding:"10px 20px",borderRadius:"10px",border:"none",backgroundColor:p.error,color:"white",fontSize:"14px",fontWeight:500,cursor:r?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:r?.7:1,outline:"none",WebkitAppearance:"none"},children:r?e.jsxs(e.Fragment,{children:[e.jsx(H,{size:16,style:{animation:"spin 1s linear infinite"}}),"L√∂schen..."]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{size:16}),"L√∂schen"]})})]})]})}):null,Ei=({category:t,primaryAccent:a,branding:o})=>{const[r,l]=g.useState(!1),p=vi[t.category]||he,d=q(t.score,a);return e.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:`1px solid ${o.borderColor}`,overflow:"hidden",marginBottom:"10px"},children:[e.jsxs("button",{onClick:()=>l(!r),style:{width:"100%",padding:"14px 16px",background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"8px",background:`${d}15`,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(p,{size:18,color:d})}),e.jsx("div",{style:{flex:1,textAlign:"left"},children:e.jsx("h4",{style:{fontSize:"14px",fontWeight:600,color:o.textMain,margin:0},children:t.label})}),e.jsxs("span",{style:{fontSize:"16px",fontWeight:700,color:d},children:[Math.round(t.score),"%"]}),e.jsx(Ct,{size:18,color:o.textMuted,style:{transform:r?"rotate(180deg)":"none",transition:"transform 0.2s"}})]}),e.jsx(Bt,{children:r&&e.jsx(D.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},style:{overflow:"hidden"},children:e.jsxs("div",{style:{padding:"0 16px 16px",borderTop:`1px solid ${o.borderColor}`,paddingTop:"12px"},children:[t.feedback&&e.jsx("p",{style:{fontSize:"13px",color:o.textSecondary,lineHeight:1.5,marginBottom:"10px"},children:t.feedback}),t.strengths?.length>0&&e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsxs("h6",{style:{fontSize:"12px",fontWeight:600,color:o.success,marginBottom:"4px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Oe,{size:12})," St√§rken"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"18px",fontSize:"12px",color:o.textSecondary},children:t.strengths.map((n,y)=>e.jsx("li",{children:n},y))})]}),t.improvements?.length>0&&e.jsxs("div",{children:[e.jsxs("h6",{style:{fontSize:"12px",fontWeight:600,color:o.warning,marginBottom:"4px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Se,{size:12})," Tipps"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"18px",fontSize:"12px",color:o.textSecondary},children:t.improvements.map((n,y)=>e.jsx("li",{children:n},y))})]})]})})})]})},Ti=({session:t,type:a,scenario:o,onBack:r,onContinueSession:l,onRepeatSession:p,onDeleteSession:d})=>{const n=Qe(),y=we(),[h,z]=g.useState(!1);g.useEffect(()=>{const c=()=>{const S=window.innerWidth;z(S>=768&&S<1200)};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]);const i=n.headerGradient,f=n.primaryAccent,[v,w]=g.useState([]),[m,C]=g.useState(!0),[b,L]=g.useState(null),[I,T]=g.useState(!1),[A,O]=g.useState(!1),[W,$]=g.useState(!1),[_,Y]=g.useState(null),[Z,Ie]=g.useState(o),U=a==="video",u=a==="simulator",M=a==="roleplay",P=(()=>{const c=t?.questions||t?.questions_json;if(!c)return!1;try{const S=typeof c=="string"?JSON.parse(c):c;return Array.isArray(S)&&S.length>0}catch{return!1}})(),ze=(()=>{if(!u||!P)return!1;const c=t?.total_questions||0,S=t?.completed_questions||0;return c>0&&S<c})(),Fe=async()=>{if(d){O(!0);try{await d(t,a)}catch(c){console.error("Failed to delete session:",c),O(!1),T(!1)}}},Me=async()=>{if(!(W||!t?.id)){$(!0);try{let c;if(u)c=`${je()}/simulator/sessions/${t.id}/export-pdf`;else if(U)c=`${je()}/video-training/sessions/${t.id}/export-pdf`;else if(M)c=`${je()}/sessions/${t.id}/export-pdf`;else throw new Error("Unsupported session type for PDF export");const S=await fetch(c,{method:"POST",headers:{"X-WP-Nonce":re(),"Content-Type":"application/json"},credentials:"same-origin"}),R=await S.json();if(!S.ok)throw console.error("[PDF] Server error response:",R),new Error(R.error||`HTTP ${S.status}`);if(!R.success||!R.pdf_base64)throw console.error("[PDF] Invalid response data:",R),new Error(R.error||"PDF generation failed");const ye=atob(R.pdf_base64),X=new Array(ye.length);for(let ce=0;ce<ye.length;ce++)X[ce]=ye.charCodeAt(ce);const me=new Uint8Array(X),Te=new Blob([me],{type:R.content_type||"application/pdf"}),se=window.URL.createObjectURL(Te),de=document.createElement("a");de.href=se,de.download=R.filename||"Training.pdf",document.body.appendChild(de),de.click(),document.body.removeChild(de),window.URL.revokeObjectURL(se)}catch(c){console.error("Failed to download PDF:",c)}finally{$(!1)}}};g.useEffect(()=>{u&&t?.id?Ne():M&&t?.id?Ee():C(!1)},[t?.id,a]);const Ne=async()=>{try{C(!0);const S=await(await fetch(`${je()}/simulator/sessions/${t.id}/answers`,{headers:{"X-WP-Nonce":re()}})).json();S.success&&S.data?.answers?w(S.data.answers):Array.isArray(S.data)&&w(S.data)}catch(c){console.error("Failed to load answers:",c),L("Fehler beim Laden der Antworten")}finally{C(!1)}},Ee=async()=>{try{C(!0);const c=await li(t.id);if(Y({...t,...c,feedback:pi(c.feedback_json||t.feedback_json),audioAnalysis:ci(c.audio_analysis_json||t.audio_analysis_json),transcript:di(c.transcript||t.transcript)}),!o&&c.scenario_id)try{const S=await xi(c.scenario_id);Ie(S)}catch(S){console.warn("Could not load scenario:",S)}}catch(c){console.error("Failed to load roleplay data:",c),L("Fehler beim Laden der Gespr√§chsdaten")}finally{C(!1)}},Q=t?.summary_feedback_json?typeof t.summary_feedback_json=="string"?JSON.parse(t.summary_feedback_json):t.summary_feedback_json:null,Ce=t?.category_scores||[],ee=t?.analysis||{},ne=(()=>{let c=0;return M&&_?.feedback?.rating?.overall?c=_.feedback.rating.overall:c=t?.overall_score||Q?.overall_score||0,(u||M)&&c<=10?c*10:c})();return m?e.jsxs("div",{style:{width:"100%",minHeight:"60vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"40px"},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(H,{size:48,color:f,style:{animation:"spin 1s linear infinite",display:"block",margin:"0 auto"}}),e.jsx("p",{style:{color:n.textMuted,marginTop:"16px"},children:"Analyse wird geladen..."})]}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]}):b?e.jsx("div",{style:{minHeight:"400px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{textAlign:"center",maxWidth:"400px",padding:"24px"},children:[e.jsx(ge,{size:48,color:n.error,style:{margin:"0 auto 16px"}}),e.jsx("h2",{style:{fontSize:"20px",fontWeight:700,color:n.textMain,marginBottom:"8px"},children:"Fehler beim Laden"}),e.jsx("p",{style:{color:n.textSecondary,marginBottom:"24px"},children:b}),e.jsx("button",{onClick:r,style:{padding:"12px 24px",borderRadius:"10px",background:n.cardBgHover,border:"none",cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Zur√ºck"})]})}):e.jsxs("div",{style:{minHeight:"100vh",background:n.pageBg,overflow:"hidden",maxWidth:"100vw"},children:[e.jsx("div",{style:{background:i,padding:y?"20px 16px":"24px 32px",position:"sticky",top:0,zIndex:40},children:e.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[r&&e.jsxs("button",{onClick:r,style:{display:"flex",alignItems:"center",gap:"6px",background:"rgba(255,255,255,0.15)",border:"none",borderRadius:"8px",padding:"8px 12px",cursor:"pointer",color:"#fff",fontSize:"13px",marginBottom:"16px"},children:[e.jsx(wt,{size:16}),"Zur√ºck zur √úbersicht"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px"},children:[!y&&e.jsx(Ci,{score:ne,size:100,primaryAccent:f,isHeader:!0,branding:n}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px",padding:"4px 10px",borderRadius:"20px",background:"rgba(255,255,255,0.2)",color:"#fff"},children:zi(a)}),e.jsx("span",{style:{fontSize:"12px",fontWeight:500,padding:"4px 10px",borderRadius:"20px",background:"rgba(255,255,255,0.9)",color:q(ne,f)},children:wi(ne)})]}),e.jsx("h1",{style:{fontSize:y?"20px":"24px",fontWeight:700,color:"#fff",margin:0,marginBottom:"8px"},children:(M?Z?.title:o?.title)||t?.scenario_title||t?.position||"Training"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"rgba(255,255,255,0.8)"},children:[e.jsx(ve,{size:14}),Ii(t?.created_at)]}),t?.duration&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"rgba(255,255,255,0.8)"},children:[e.jsx(be,{size:14}),fe(t.duration)]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:Me,disabled:W,title:"Als PDF herunterladen",style:{display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"10px",padding:"10px 12px",cursor:W?"wait":"pointer",color:"#fff",fontSize:"14px",fontWeight:500,outline:"none",WebkitAppearance:"none",opacity:W?.7:1},children:W?e.jsx(H,{size:16,style:{animation:"spin 1s linear infinite"}}):e.jsx(It,{size:16})}),!y&&p&&e.jsxs("button",{onClick:()=>p(t,o),style:{display:"flex",alignItems:"center",gap:"8px",background:"rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"10px",padding:"10px 20px",cursor:"pointer",color:"#fff",fontSize:"14px",fontWeight:500,outline:"none",WebkitAppearance:"none"},children:[e.jsx(qe,{size:16}),"Erneut √ºben"]}),d&&e.jsx("button",{onClick:()=>T(!0),style:{display:"flex",alignItems:"center",gap:"8px",background:"rgba(239,68,68,0.2)",border:"1px solid rgba(239,68,68,0.4)",borderRadius:"10px",padding:y?"10px 12px":"10px 16px",cursor:"pointer",color:"#fff",fontSize:"14px",fontWeight:500,outline:"none",WebkitAppearance:"none"},children:e.jsx(V,{size:16})})]})]})]})}),e.jsx("div",{style:{padding:y?"16px":"24px 32px",overflow:"hidden"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:y||h?"1fr":"1fr 400px",gap:"24px",overflow:"hidden"},children:[e.jsxs("div",{style:{minWidth:0,overflow:"hidden"},children:[U&&t?.video_url&&e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},style:{background:"#fff",borderRadius:"16px",padding:"20px",border:`1px solid ${n.borderColor}`,marginBottom:"20px"},children:[e.jsxs("h3",{style:{fontSize:"15px",fontWeight:600,color:n.textMain,marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(De,{size:18,color:f})," Deine Aufnahme"]}),e.jsx("video",{src:t.video_url,controls:!0,style:{width:"100%",maxWidth:"640px",maxHeight:"360px",borderRadius:"12px",background:"#000",objectFit:"contain"}})]}),u&&v.length>0&&e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[e.jsxs("h3",{style:{fontSize:"16px",fontWeight:600,color:n.textMain,marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(ue,{size:18,color:f})," Deine Antworten (",v.length,")"]}),v.map((c,S)=>e.jsx(Di,{answer:c,index:S,primaryAccent:f,branding:n},c.id||S)),ze&&(l||p)&&e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap",marginTop:"24px",padding:"20px",background:n.cardBgHover,borderRadius:"12px",border:`1px dashed ${n.disabledBg}`},children:[e.jsx("p",{style:{width:"100%",textAlign:"center",color:n.textSecondary,fontSize:"14px",marginBottom:"12px"},children:"Diese Session ist noch nicht abgeschlossen."}),l&&e.jsxs("button",{onClick:()=>l(t,o),style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"12px 24px",borderRadius:"12px",border:"none",background:f,color:"white",fontSize:"14px",fontWeight:600,cursor:"pointer",boxShadow:`0 4px 12px ${f}4d`},children:[e.jsx(xt,{size:18}),"Fortsetzen"]}),p&&e.jsxs("button",{onClick:()=>p(t,o),style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"12px 24px",borderRadius:"12px",border:`2px solid ${n.disabledBg}`,background:"white",color:n.textMain,fontSize:"14px",fontWeight:600,cursor:"pointer"},children:[e.jsx(qe,{size:18}),"Erneut starten"]})]})]}),u&&v.length===0&&e.jsxs("div",{style:{textAlign:"center",padding:"48px 24px",background:n.cardBgHover,borderRadius:"16px"},children:[e.jsx(ge,{size:48,color:n.textMuted,style:{margin:"0 auto 16px"}}),e.jsx("h3",{style:{fontSize:"18px",fontWeight:600,color:n.textMain,marginBottom:"8px"},children:"Keine Antworten vorhanden"}),e.jsx("p",{style:{color:n.textMuted,marginBottom:P?"24px":"0"},children:P?"Diese Session wurde nicht abgeschlossen. Du kannst sie fortsetzen oder erneut starten.":"Diese Session wurde verlassen, bevor Fragen generiert wurden."}),ze&&(l||p)&&e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap",marginTop:"24px"},children:[l&&e.jsxs("button",{onClick:()=>l(t,o),style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"12px 24px",borderRadius:"12px",border:"none",background:f,color:"white",fontSize:"14px",fontWeight:600,cursor:"pointer",boxShadow:`0 4px 12px ${f}4d`},children:[e.jsx(xt,{size:18}),"Fortsetzen"]}),p&&e.jsxs("button",{onClick:()=>p(t,o),style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"12px 24px",borderRadius:"12px",border:`2px solid ${n.disabledBg}`,background:"white",color:n.textMain,fontSize:"14px",fontWeight:600,cursor:"pointer"},children:[e.jsx(qe,{size:18}),"Erneut starten"]})]})]}),M&&_&&e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},style:{marginBottom:"20px"},children:e.jsx(Wi,{sessionId:t.id,conversationId:_.conversation_id,primaryAccent:f,branding:n})}),M&&_?.transcript?.length>0&&e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},style:{background:"#fff",borderRadius:"16px",padding:"20px",border:`1px solid ${n.borderColor}`},children:[e.jsxs("h3",{style:{fontSize:"15px",fontWeight:600,color:n.textMain,marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(zt,{size:18,color:f})," Gespr√§chsverlauf"]}),e.jsx("div",{style:{maxHeight:"500px",overflowY:"auto"},children:_.transcript.map((c,S)=>e.jsx(Ri,{entry:c,index:S,primaryAccent:f,branding:n},S))})]})]}),e.jsxs("div",{style:{minWidth:0,overflow:"hidden"},children:[U&&Ce.length>0&&e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},style:{marginBottom:"20px"},children:[e.jsxs("h3",{style:{fontSize:"15px",fontWeight:600,color:n.textMain,marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(he,{size:16,color:f})," Detaillierte Bewertung"]}),Ce.map((c,S)=>e.jsx(Ei,{category:c,primaryAccent:f,branding:n},c.category||S))]}),U&&(ee.key_strengths?.length>0||ee.actionable_tips?.length>0)&&e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{background:"#fff",borderRadius:"16px",padding:"20px",border:`1px solid ${n.borderColor}`,marginBottom:"20px"},children:[ee.key_strengths?.length>0&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("h4",{style:{fontSize:"14px",fontWeight:600,color:n.success,marginBottom:"10px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Oe,{size:16})," Deine St√§rken"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:ee.key_strengths.map((c,S)=>e.jsx("li",{style:{fontSize:"13px",color:n.textSecondary,marginBottom:"6px",lineHeight:1.4},children:c},S))})]}),ee.actionable_tips?.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{style:{fontSize:"14px",fontWeight:600,color:f,marginBottom:"10px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Se,{size:16})," Tipps zur Verbesserung"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:ee.actionable_tips.map((c,S)=>e.jsx("li",{style:{fontSize:"13px",color:n.textSecondary,marginBottom:"6px",lineHeight:1.4},children:c},S))})]})]}),U&&t?.summary_feedback&&e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},style:{background:n.cardBgHover,borderRadius:"16px",padding:"20px"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:600,color:n.textMain,marginBottom:"10px"},children:"Zusammenfassung"}),e.jsx("p",{style:{fontSize:"13px",color:n.textSecondary,lineHeight:1.6,margin:0},children:t.summary_feedback})]}),u&&Q&&e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[Q.summary&&e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"20px",border:`1px solid ${n.borderColor}`,marginBottom:"20px"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:600,color:n.textMain,marginBottom:"10px"},children:"Zusammenfassung"}),e.jsx("p",{style:{fontSize:"13px",color:n.textSecondary,lineHeight:1.6,margin:0},children:Q.summary})]}),Q.scores&&e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"20px",border:`1px solid ${n.borderColor}`,marginBottom:"20px"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:600,color:n.textMain,marginBottom:"12px"},children:"Bewertung"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px"},children:Object.entries(Q.scores).map(([c,S])=>{const R=S!=null?S*10:null;return e.jsxs("div",{style:{padding:"12px",background:n.cardBgHover,borderRadius:"10px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:700,color:q(R,f)},children:R!=null?Math.round(R):"-"}),e.jsx("div",{style:{fontSize:"11px",color:n.textMuted,textTransform:"capitalize"},children:c})]},c)})})]}),Q.key_takeaways?.length>0&&e.jsxs("div",{style:{background:n.successLight,borderRadius:"16px",padding:"20px"},children:[e.jsxs("h4",{style:{fontSize:"14px",fontWeight:600,color:n.success,marginBottom:"10px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Se,{size:16})," Wichtigste Erkenntnisse"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"13px",color:n.textMain,lineHeight:1.5},children:Q.key_takeaways.map((c,S)=>e.jsx("li",{style:{marginBottom:"6px"},children:c},S))})]})]}),M&&_?.feedback&&e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[_.feedback.rating&&e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"20px",border:`1px solid ${n.borderColor}`,marginBottom:"20px"},children:[e.jsxs("h4",{style:{fontSize:"15px",fontWeight:600,color:n.textMain,marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(he,{size:16,color:f})," Bewertungskriterien"]}),e.jsx("div",{style:{display:"grid",gap:"10px"},children:Object.entries(_.feedback.rating).filter(([c])=>c!=="overall").map(([c,S])=>{const R=S*10;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:n.cardBgHover,borderRadius:"10px"},children:[e.jsx("div",{style:{flex:1,fontSize:"13px",fontWeight:500,color:n.textMain,textTransform:"capitalize"},children:c.replace(/_/g," ")}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"80px",height:"6px",background:n.borderColor,borderRadius:"3px"},children:e.jsx("div",{style:{width:`${R}%`,height:"100%",background:q(R,f),borderRadius:"3px"}})}),e.jsx("span",{style:{fontSize:"14px",fontWeight:600,color:q(R,f),minWidth:"45px"},children:Math.round(R)})]})]},c)})})]}),_.feedback.strengths?.length>0&&e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"20px",border:`1px solid ${n.borderColor}`,marginBottom:"20px"},children:[e.jsxs("h4",{style:{fontSize:"14px",fontWeight:600,color:n.success,marginBottom:"12px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Oe,{size:16})," Deine St√§rken"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:_.feedback.strengths.map((c,S)=>e.jsx("li",{style:{fontSize:"13px",color:n.textSecondary,marginBottom:"8px",lineHeight:1.5},children:c},S))})]}),_.feedback.improvements?.length>0&&e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"20px",border:`1px solid ${n.borderColor}`,marginBottom:"20px"},children:[e.jsxs("h4",{style:{fontSize:"14px",fontWeight:600,color:n.warning,marginBottom:"12px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Se,{size:16})," Verbesserungspotenzial"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:_.feedback.improvements.map((c,S)=>e.jsx("li",{style:{fontSize:"13px",color:n.textSecondary,marginBottom:"8px",lineHeight:1.5},children:c},S))})]}),_.feedback.summary&&e.jsxs("div",{style:{background:n.cardBgHover,borderRadius:"16px",padding:"20px"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:600,color:n.textMain,marginBottom:"10px"},children:"Zusammenfassung"}),e.jsx("p",{style:{fontSize:"13px",color:n.textSecondary,lineHeight:1.6,margin:0},children:_.feedback.summary})]})]}),M&&!_?.feedback&&e.jsxs("div",{style:{background:n.cardBgHover,borderRadius:"16px",padding:"24px",textAlign:"center"},children:[e.jsx(ge,{size:32,color:n.textMuted,style:{margin:"0 auto 12px"}}),e.jsx("p",{style:{fontSize:"14px",color:n.textMuted,margin:0},children:"Keine Analyse verf√ºgbar f√ºr dieses Gespr√§ch."})]})]})]})}),e.jsx(Mi,{isOpen:I,onClose:()=>T(!1),onConfirm:Fe,isDeleting:A,primaryAccent:f,branding:n})]})},le=({isOpen:t,onClose:a,onConfirm:o,title:r="L√∂schen best√§tigen",description:l="Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:p=!1,confirmLabel:d="L√∂schen",cancelLabel:n="Abbrechen"})=>{const{branding:y}=Ze(),h=y?.["--primary-accent"]||ke["--primary-accent"];return e.jsx(ii,{open:t,onOpenChange:a,children:e.jsxs(ni,{style:{maxWidth:"400px"},children:[e.jsxs(si,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(V,{style:{width:"20px",height:"20px",color:"#fff"}})}),e.jsx(ri,{children:r})]}),e.jsx(oi,{children:l})]}),e.jsxs(ai,{style:{marginTop:"16px"},children:[e.jsx("button",{onClick:a,disabled:p,style:{minWidth:"100px",height:"40px",padding:"8px 20px",borderRadius:"8px",border:`2px solid ${h}`,backgroundColor:"white",color:h,fontSize:"14px",fontWeight:500,cursor:p?"not-allowed":"pointer",opacity:p?.5:1,transition:"all 0.2s"},children:n}),e.jsx("button",{onClick:o,disabled:p,style:{minWidth:"100px",height:"40px",padding:"8px 20px",borderRadius:"8px",border:"none",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"#fff",fontSize:"14px",fontWeight:500,cursor:p?"not-allowed":"pointer",opacity:p?.5:1,transition:"all 0.2s",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:p?e.jsxs(e.Fragment,{children:[e.jsx(H,{style:{width:"16px",height:"16px",animation:"spin 1s linear infinite"}}),d,"..."]}):d})]})]})})},_i=({briefing:t,onClick:a,onDelete:o,headerGradient:r,headerText:l,primaryAccent:p})=>{const[d,n]=g.useState(!1),[y,h]=g.useState(!1),z=we(900),i=yi(t.template_icon),f=w=>{w.stopPropagation(),h(!0)},v=async()=>{n(!0);try{await o(t.id),h(!1)}catch(w){console.error("Error deleting briefing:",w)}finally{n(!1)}};return z?e.jsxs(D.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileTap:{scale:.98},children:[e.jsxs("div",{onClick:a,style:{background:"#fff",borderRadius:"16px",padding:"16px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:`linear-gradient(135deg, ${p}15, ${p}30)`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(i,{style:{width:"22px",height:"22px",color:p}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"15px",fontWeight:600,color:"#0f172a",marginBottom:"4px",lineHeight:"1.3",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.title||"Briefing"}),e.jsx("div",{style:{fontSize:"13px",color:"#64748b"},children:ae(t.created_at)})]}),e.jsx("button",{onClick:f,disabled:d,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},title:"L√∂schen",children:d?e.jsx(H,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(V,{size:18})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px",paddingTop:"12px",borderTop:"1px solid #f1f5f9"},children:[e.jsx("span",{style:{backgroundColor:`${p}15`,color:p,padding:"4px 10px",borderRadius:"10px",fontSize:"12px",fontWeight:500,maxWidth:"70%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.template_title}),e.jsx(oe,{size:22,style:{color:"#94a3b8",flexShrink:0}})]})]}),e.jsx(le,{isOpen:y,onClose:()=>h(!1),onConfirm:v,title:"Briefing l√∂schen",description:"M√∂chtest du dieses Briefing wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:d})]}):e.jsxs(D.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsx("div",{onClick:a,style:{background:"#fff",borderRadius:"16px",padding:"20px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",transition:"all 0.2s"},onMouseEnter:w=>{w.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.08)",w.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:w=>{w.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)",w.currentTarget.style.borderColor="#e2e8f0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:`linear-gradient(135deg, ${p}15, ${p}30)`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(i,{style:{width:"24px",height:"24px",color:p}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#0f172a",marginBottom:"4px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.title||"Briefing"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap",fontSize:"13px",color:"#64748b"},children:[e.jsx("span",{style:{backgroundColor:`${p}15`,color:p,padding:"2px 8px",borderRadius:"10px",fontSize:"12px",fontWeight:500},children:t.template_title}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ve,{size:14}),ae(t.created_at)]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[e.jsx("button",{onClick:f,disabled:d,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"L√∂schen",children:d?e.jsx(H,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(V,{size:18})}),e.jsx(oe,{size:20,style:{color:"#94a3b8"}})]})]})}),e.jsx(le,{isOpen:y,onClose:()=>h(!1),onConfirm:v,title:"Briefing l√∂schen",description:"M√∂chtest du dieses Briefing wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:d})]})},ie={SIMULATOR:"simulator",ROLEPLAY:"roleplay",VIDEO:"video"},Ai=({session:t,type:a,scenario:o,onClick:r,onContinueSession:l,onDeleteSession:p,headerGradient:d,headerText:n,primaryAccent:y})=>{const[h,z]=g.useState(!1),[i,f]=g.useState(!1),v=we(900),w=()=>{let u=null;if(a===ie.SIMULATOR)u=t.overall_score||t.average_score;else if(a===ie.VIDEO)u=t.overall_score;else if(t.feedback_json)try{let M=t.feedback_json;if(typeof M=="string"){let P=M.trim();P.startsWith("```json")?P=P.replace(/```json\s*/g,"").replace(/```\s*$/g,""):P.startsWith("```")&&(P=P.replace(/```\s*/g,"").replace(/```\s*$/g,"")),M=JSON.parse(P)}u=M.rating?.overall||null}catch{u=null}return u==null||isNaN(u)||u===0?null:u},m=()=>a===ie.SIMULATOR||a===ie.VIDEO?t.status:t.feedback_json?"completed":"pending",C=w(),L=m()==="completed",I=t.total_questions>0&&(t.completed_questions||0)<t.total_questions,T=a===ie.SIMULATOR&&I,A=()=>{if(!T)return null;const u=t.completed_questions||0,M=t.total_questions||0;return`${u}/${M} Fragen`},O=u=>{u.stopPropagation(),l&&l(t,o)},W=u=>{u.stopPropagation(),f(!0)},$=async()=>{z(!0);try{await p(t,a),f(!1)}catch(u){console.error("Error deleting session:",u)}finally{z(!1)}},Y=(()=>{if(C==null||isNaN(C))return null;if(a===ie.SIMULATOR||a===ie.ROLEPLAY){const u=C<=10?C*10:C;return isNaN(u)?null:u}return isNaN(C)?null:C})(),Z=u=>{if(!u&&u!==0)return{background:"#f1f5f9",color:"#64748b"};const M=parseFloat(u);return M>=80?{background:"#dcfce7",color:"#166534"}:M>=60?{background:"#fef9c3",color:"#854d0e"}:{background:"#fee2e2",color:"#991b1b"}},U=(()=>{switch(a){case ie.SIMULATOR:return $e;case ie.VIDEO:return De;default:return ue}})();return v?e.jsxs(D.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileTap:{scale:.98},children:[e.jsxs("div",{onClick:r,style:{background:"#fff",borderRadius:"16px",padding:"16px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:d,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(U,{style:{width:"22px",height:"22px",color:n}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"15px",fontWeight:600,color:"#0f172a",marginBottom:"4px",lineHeight:"1.3"},children:o?.title||t.scenario_title||`Session #${t.id}`}),e.jsx("div",{style:{fontSize:"13px",color:"#64748b"},children:ae(t.created_at)})]}),p&&e.jsx("button",{onClick:W,disabled:h,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},title:"L√∂schen",children:h?e.jsx(H,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(V,{size:18})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px",paddingTop:"12px",borderTop:"1px solid #f1f5f9"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[!L&&!T&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"20px",background:"#fef3c7",color:"#92400e",fontSize:"12px",fontWeight:500},children:[e.jsx(be,{size:12}),"In Bearbeitung"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",borderRadius:"20px",fontSize:"13px",fontWeight:600,...Z(Y)},children:[e.jsx(he,{size:13}),Y!==null?`${Math.round(Y)}%`:"-- %"]}),(t.duration||t.video_duration_seconds)&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:"#64748b"},children:[e.jsx(be,{size:12}),fe(t.duration||t.video_duration_seconds)]}),T&&e.jsx("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"20px",background:"#dbeafe",color:"#1e40af",fontSize:"12px",fontWeight:500},children:A()})]}),T&&l?e.jsxs("button",{onClick:O,style:{display:"flex",alignItems:"center",gap:"6px",padding:"10px 16px",borderRadius:"10px",border:"none",background:y||"#3B82F6",color:"#fff",fontSize:"13px",fontWeight:600,cursor:"pointer",boxShadow:`0 2px 8px ${y||"#3B82F6"}40`,flexShrink:0},children:[e.jsx(Be,{size:14}),"Fortsetzen"]}):e.jsx(oe,{size:22,style:{color:"#94a3b8",flexShrink:0}})]})]}),e.jsx(le,{isOpen:i,onClose:()=>f(!1),onConfirm:$,title:"Session l√∂schen",description:"M√∂chtest du diese Session wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:h})]}):e.jsxs(D.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsx("div",{onClick:r,style:{background:"#fff",borderRadius:"16px",padding:"20px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",transition:"all 0.2s"},onMouseEnter:u=>{u.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.08)",u.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:u=>{u.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)",u.currentTarget.style.borderColor="#e2e8f0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:d,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(U,{style:{width:"24px",height:"24px",color:n}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#0f172a",marginBottom:"4px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:o?.title||t.scenario_title||`Session #${t.id}`}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap",fontSize:"13px",color:"#64748b"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ve,{size:14}),ae(t.created_at)]}),t.duration||t.video_duration_seconds?e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(be,{size:14}),fe(t.duration||t.video_duration_seconds)]}):null]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexShrink:0},children:[T&&l&&e.jsxs("button",{onClick:O,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",borderRadius:"10px",border:"none",background:y||"#3B82F6",color:"#fff",fontSize:"13px",fontWeight:600,cursor:"pointer",boxShadow:`0 2px 8px ${y||"#3B82F6"}40`,transition:"all 0.2s"},onMouseEnter:u=>{u.currentTarget.style.transform="scale(1.02)",u.currentTarget.style.boxShadow=`0 4px 12px ${y||"#3B82F6"}50`},onMouseLeave:u=>{u.currentTarget.style.transform="scale(1)",u.currentTarget.style.boxShadow=`0 2px 8px ${y||"#3B82F6"}40`},children:[e.jsx(Be,{size:14}),"Fortsetzen"]}),T&&e.jsx("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"20px",background:"#dbeafe",color:"#1e40af",fontSize:"12px",fontWeight:500},children:A()}),!L&&!T&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"20px",background:"#fef3c7",color:"#92400e",fontSize:"12px",fontWeight:500},children:[e.jsx(be,{size:12}),"In Bearbeitung"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"6px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:600,...Z(Y)},children:[e.jsx(he,{size:14}),Y!==null?`${Math.round(Y)}%`:"-- %"]}),p&&e.jsx("button",{onClick:W,disabled:h,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"color 0.2s"},onMouseEnter:u=>{u.currentTarget.style.color="#ef4444"},onMouseLeave:u=>{u.currentTarget.style.color="#94a3b8"},title:"L√∂schen",children:h?e.jsx(H,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(V,{size:18})}),e.jsx(oe,{size:20,style:{color:"#94a3b8"}})]})]})}),e.jsx(le,{isOpen:i,onClose:()=>f(!1),onConfirm:$,title:"Session l√∂schen",description:"M√∂chtest du diese Session wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:h})]})},bt=({proScore:t,contraScore:a})=>{const o=t+a,r=o>0?Math.round(t/o*100):50;return e.jsxs("div",{style:{height:"6px",borderRadius:"3px",overflow:"hidden",display:"flex",backgroundColor:"#f1f5f9",width:"100%",maxWidth:"120px"},children:[e.jsx("div",{style:{background:"linear-gradient(90deg, #22c55e 0%, #16a34a 100%)",width:`${r}%`,height:"100%"}}),e.jsx("div",{style:{background:"linear-gradient(90deg, #ef4444 0%, #dc2626 100%)",width:`${100-r}%`,height:"100%"}})]})},Li=({decision:t,onClick:a,onDelete:o,headerGradient:r,headerText:l,primaryAccent:p})=>{const[d,n]=g.useState(!1),[y,h]=g.useState(!1),z=we(900),i=(t.pros||[]).reduce((b,L)=>b+(L.text?.trim()?L.weight||5:0),0),f=(t.cons||[]).reduce((b,L)=>b+(L.text?.trim()?L.weight||5:0),0),v=(t.pros||[]).filter(b=>b.text?.trim()).length,w=(t.cons||[]).filter(b=>b.text?.trim()).length,m=b=>{b.stopPropagation(),h(!0)},C=async()=>{n(!0);try{await o(t.id),h(!1)}catch(b){console.error("Error deleting decision:",b)}finally{n(!1)}};return z?e.jsxs(D.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileTap:{scale:.98},children:[e.jsxs("div",{onClick:a,style:{background:"#fff",borderRadius:"16px",padding:"16px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf615, #8b5cf630)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(We,{style:{width:"22px",height:"22px",color:"#8b5cf6"}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"15px",fontWeight:600,color:"#0f172a",marginBottom:"4px",lineHeight:"1.3",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.topic||"Entscheidung"}),e.jsx("div",{style:{fontSize:"13px",color:"#64748b"},children:ae(t.created_at)})]}),e.jsx("button",{onClick:m,disabled:d,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},title:"L√∂schen",children:d?e.jsx(H,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(V,{size:18})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",paddingTop:"12px",borderTop:"1px solid #f1f5f9"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ht,{size:14,color:"#16a34a"}),e.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:"#16a34a"},children:v})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ft,{size:14,color:"#dc2626"}),e.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:"#dc2626"},children:w})]}),e.jsx(bt,{proScore:i,contraScore:f})]}),e.jsx(oe,{size:22,style:{color:"#94a3b8",flexShrink:0}})]})]}),e.jsx(le,{isOpen:y,onClose:()=>h(!1),onConfirm:C,title:"Entscheidung l√∂schen",description:"M√∂chtest du diese Entscheidung wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:d})]}):e.jsxs(D.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsx("div",{onClick:a,style:{background:"#fff",borderRadius:"16px",padding:"20px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",transition:"all 0.2s"},onMouseEnter:b=>{b.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.08)",b.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:b=>{b.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)",b.currentTarget.style.borderColor="#e2e8f0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf615, #8b5cf630)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(We,{style:{width:"24px",height:"24px",color:"#8b5cf6"}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#0f172a",marginBottom:"6px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.topic||"Entscheidung"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap",fontSize:"13px",color:"#64748b"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ht,{size:14,color:"#16a34a"}),e.jsxs("span",{style:{fontWeight:500,color:"#16a34a"},children:[v," Pro"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ft,{size:14,color:"#dc2626"}),e.jsxs("span",{style:{fontWeight:500,color:"#dc2626"},children:[w," Contra"]})]})]}),e.jsx(bt,{proScore:i,contraScore:f}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ve,{size:14}),ae(t.created_at)]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[e.jsx("button",{onClick:m,disabled:d,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"L√∂schen",children:d?e.jsx(H,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(V,{size:18})}),e.jsx(oe,{size:20,style:{color:"#94a3b8"}})]})]})}),e.jsx(le,{isOpen:y,onClose:()=>h(!1),onConfirm:C,title:"Entscheidung l√∂schen",description:"M√∂chtest du diese Entscheidung wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:d})]})},Oi={love:{icon:ei,color:"#E11D48",label:"Liebe"},talent:{icon:he,color:"#F59E0B",label:"Talent"},need:{icon:Qt,color:"#10B981",label:"Welt"},market:{icon:Zt,color:"#6366F1",label:"Markt"}},jt=({dimensions:t})=>e.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:Object.entries(Oi).map(([a,o])=>{const r=t?.[a]||[],l=r.length>0,p=o.icon;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:500,backgroundColor:l?`${o.color}15`:"#f1f5f9",color:l?o.color:"#94a3b8",border:l?`1px solid ${o.color}30`:"1px solid #e2e8f0"},children:[e.jsx(p,{size:12}),e.jsx("span",{children:r.length})]},a)})}),$i=({ikigai:t,onDelete:a,onNavigate:o,headerGradient:r,headerText:l,primaryAccent:p})=>{const[d,n]=g.useState(!1),[y,h]=g.useState(!1),z=we(900),i={love:t.love_tags||[],talent:t.talent_tags||[],need:t.need_tags||[],market:t.market_tags||[]},f=Object.values(i).filter(b=>b.length>0).length,v=t.status==="completed",w=t.paths?.[0]?.role_title||(v?"Ikigai-Analyse abgeschlossen":"Ikigai-Analyse"),m=b=>{b.stopPropagation(),h(!0)},C=async()=>{n(!0);try{await a(t.id),h(!1)}catch(b){console.error("Error deleting ikigai:",b)}finally{n(!1)}};return z?e.jsxs(D.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileTap:{scale:.98},children:[e.jsxs("div",{onClick:o,style:{background:"#fff",borderRadius:"16px",padding:"16px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:v?"linear-gradient(135deg, #E11D48, #F59E0B, #10B981, #6366F1)":"linear-gradient(135deg, #6366F115, #6366F130)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Re,{style:{width:"22px",height:"22px",color:v?"white":"#6366F1"}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"15px",fontWeight:600,color:"#0f172a",marginBottom:"4px",lineHeight:"1.3",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:w}),e.jsx("div",{style:{fontSize:"13px",color:"#64748b"},children:ae(t.created_at)})]}),e.jsx("button",{onClick:m,disabled:d,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},title:"L√∂schen",children:d?e.jsx(H,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(V,{size:18})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",paddingTop:"12px",borderTop:"1px solid #f1f5f9"},children:[e.jsx(jt,{dimensions:i}),e.jsx(oe,{size:22,style:{color:"#94a3b8",flexShrink:0}})]})]}),e.jsx(le,{isOpen:y,onClose:()=>h(!1),onConfirm:C,title:"Ikigai-Analyse l√∂schen",description:"M√∂chtest du diese Ikigai-Analyse wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:d})]}):e.jsxs(D.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsx("div",{onClick:o,style:{background:"#fff",borderRadius:"16px",padding:"20px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",transition:"all 0.2s"},onMouseEnter:b=>{b.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.08)",b.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:b=>{b.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)",b.currentTarget.style.borderColor="#e2e8f0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:v?"linear-gradient(135deg, #E11D48, #F59E0B, #10B981, #6366F1)":"linear-gradient(135deg, #6366F115, #6366F130)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Re,{style:{width:"24px",height:"24px",color:v?"white":"#6366F1"}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#0f172a",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:w}),v&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:"10px",fontSize:"11px",fontWeight:600,background:"linear-gradient(135deg, #22c55e, #16a34a)",color:"white"},children:"Abgeschlossen"}),!v&&f>0&&e.jsxs("span",{style:{padding:"2px 8px",borderRadius:"10px",fontSize:"11px",fontWeight:600,background:"#f59e0b20",color:"#f59e0b"},children:[f,"/4 Dimensionen"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap",fontSize:"13px",color:"#64748b"},children:[e.jsx(jt,{dimensions:i}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ve,{size:14}),ae(t.created_at)]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[e.jsx("button",{onClick:m,disabled:d,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"L√∂schen",children:d?e.jsx(H,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(V,{size:18})}),e.jsx(oe,{size:20,style:{color:"#94a3b8"}})]})]})}),e.jsx(le,{isOpen:y,onClose:()=>h(!1),onConfirm:C,title:"Ikigai-Analyse l√∂schen",description:"M√∂chtest du diese Ikigai-Analyse wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:d})]})},Fi=t=>t?new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",Ni=t=>t>=90?"Ausgezeichnet!":t>=80?"Sehr gut!":t>=70?"Gut!":t>=60?"Solide Leistung":t>=50?"Ausbauf√§hig":"In Arbeit",St={ikigai:{label:"Ikigai-Kompass",icon:Re},decision:{label:"Entscheidungs-Board",icon:We},briefing:{label:"Smart Briefing",icon:Je},simulator:{label:"Szenario-Training",icon:$e},video:{label:"Wirkungs-Analyse",icon:De},roleplay:{label:"Live-Simulation",icon:ue}},Pi=({score:t,size:a=80,primaryAccent:o})=>{const r=Math.min(100,Math.max(0,t||0)),l=(a-10)/2,p=l*2*Math.PI,d=p-r/100*p;return e.jsxs("div",{style:{position:"relative",width:a,height:a},children:[e.jsxs("svg",{width:a,height:a,style:{transform:"rotate(-90deg)"},children:[e.jsx("circle",{cx:a/2,cy:a/2,r:l,fill:"none",stroke:"rgba(255,255,255,0.25)",strokeWidth:8}),e.jsx(D.circle,{cx:a/2,cy:a/2,r:l,fill:"none",stroke:"#fff",strokeWidth:8,strokeLinecap:"round",strokeDasharray:p,initial:{strokeDashoffset:p},animate:{strokeDashoffset:d},transition:{duration:1.2,ease:"easeOut"}})]}),e.jsx("div",{style:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:e.jsx(D.span,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{delay:.3,duration:.4},style:{fontSize:a/3,fontWeight:700,color:"#fff",lineHeight:1},children:Math.round(t)})})]})},kt=({type:t,title:a,subtitle:o,score:r,status:l,createdAt:p,duration:d,onBack:n,onDelete:y,onDownload:h,isDeleting:z=!1,isDownloading:i=!1,extraActions:f})=>{Qe();const v=we(768),{branding:w}=Ze(),m=w?.["--header-gradient"]||ke["--header-gradient"],C=w?.["--primary-accent"]||ke["--primary-accent"],b=St[t]||St.simulator,L=b.icon,I=r!=null&&r>0;return e.jsx("div",{style:{background:m,padding:v?"20px 16px":"24px 32px",position:"sticky",top:0,zIndex:40},children:e.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[n&&e.jsxs("button",{onClick:n,style:{display:"flex",alignItems:"center",gap:"6px",background:"rgba(255,255,255,0.15)",border:"none",borderRadius:"8px",padding:"8px 12px",cursor:"pointer",color:"#fff",fontSize:"13px",marginBottom:"16px"},children:[e.jsx(wt,{size:16}),"Zur√ºck zur √úbersicht"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px"},children:[!v&&I&&e.jsx(Pi,{score:r,size:80,primaryAccent:C}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap",marginBottom:"8px"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px",padding:"4px 10px",borderRadius:"20px",background:"rgba(255,255,255,0.2)",color:"#fff"},children:[e.jsx(L,{size:14}),b.label]}),I&&e.jsx("span",{style:{fontSize:"12px",fontWeight:500,padding:"4px 10px",borderRadius:"20px",background:"rgba(255,255,255,0.9)",color:q(r,C)},children:Ni(r)}),l==="in_progress"&&e.jsx("span",{style:{fontSize:"12px",fontWeight:500,padding:"4px 10px",borderRadius:"20px",background:"rgba(255,255,255,0.9)",color:"#f59e0b"},children:"In Bearbeitung"})]}),e.jsx("h1",{style:{fontSize:v?"20px":"24px",fontWeight:700,color:"#fff",margin:0,marginBottom:o?"4px":"8px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:a}),o&&e.jsx("p",{style:{fontSize:"14px",color:"rgba(255,255,255,0.8)",margin:0,marginBottom:"8px"},children:o}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[p&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"rgba(255,255,255,0.8)"},children:[e.jsx(ve,{size:14}),Fi(p)]}),d&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"rgba(255,255,255,0.8)"},children:[e.jsx(be,{size:14}),Math.floor(d/60),":",String(d%60).padStart(2,"0")," Min."]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexShrink:0},children:[h&&e.jsxs("button",{onClick:h,disabled:i,title:"Als PDF herunterladen",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:v?"10px":"10px 16px",background:"rgba(255,255,255,0.15)",border:"none",borderRadius:"8px",cursor:i?"wait":"pointer",color:"#fff",fontSize:"13px",fontWeight:500,opacity:i?.7:1},children:[e.jsx(It,{size:16}),!v&&"PDF"]}),f,y&&e.jsxs("button",{onClick:y,disabled:z,title:"L√∂schen",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:v?"10px":"10px 16px",background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"8px",cursor:z?"wait":"pointer",color:"#fff",fontSize:"13px",fontWeight:500,opacity:z?.7:1},children:[e.jsx(V,{size:16}),!v&&"L√∂schen"]})]})]})]})})},vt={love:{key:"love",label:"Liebe",icon:"‚ù§Ô∏è",color:"#E11D48",question:"Vergiss mal Geld und Karriere. Bei welchen T√§tigkeiten vergisst du die Zeit?",placeholder:"Erz√§hle mir, was du wirklich liebst zu tun...",description:"Was du liebst"},talent:{key:"talent",label:"Talent",icon:"‚≠ê",color:"#F59E0B",question:"Worin bist du richtig gut? Was f√§llt dir leicht, w√§hrend andere damit k√§mpfen?",placeholder:"Beschreibe deine St√§rken und F√§higkeiten...",description:"Worin du gut bist"},need:{key:"need",label:"Welt",icon:"üåç",color:"#10B981",question:"Welche Probleme der Welt w√ºrdest du gerne l√∂sen? Wo siehst du Bedarf?",placeholder:"Welchen Beitrag m√∂chtest du leisten...",description:"Was die Welt braucht"},market:{key:"market",label:"Markt",icon:"üí∞",color:"#6366F1",question:"Wof√ºr werden Menschen in deinem Bereich bezahlt? Was ist gefragt?",placeholder:"Welche Berufe oder M√§rkte interessieren dich...",description:"Wof√ºr du bezahlt wirst"}},x={SIMULATOR:"simulator",ROLEPLAY:"roleplay",VIDEO:"video",BRIEFINGS:"briefings",DECISIONS:"decisions",IKIGAI:"ikigai"},Ye=[{id:x.BRIEFINGS,label:"Smart Briefings",icon:Je},{id:x.DECISIONS,label:"Entscheidungs-Kompass",icon:We},{id:x.IKIGAI,label:"Ikigai-Kompass",icon:Re},{id:x.SIMULATOR,label:"Szenario-Training",icon:$e},{id:x.VIDEO,label:"Wirkungs-Analyse",icon:De},{id:x.ROLEPLAY,label:"Live-Simulationen",icon:ue}],an=x,ln=({onBack:t,onSelectSession:a,isAuthenticated:o,onLoginClick:r,onContinueSession:l,onRepeatSession:p,initialTab:d,onNavigateToModule:n})=>{const{branding:y,demoCode:h,isDemoUser:z}=Ze(),i=Qe(),f=y?.["--header-gradient"]||ke["--header-gradient"],v=y?.["--header-text"]||ke["--header-text"],w=y?.["--primary-accent"]||ke["--primary-accent"],[m,C]=g.useState(d||x.BRIEFINGS);g.useEffect(()=>{d&&C(d)},[d]);const[b,L]=g.useState(null),[I,T]=g.useState(null);g.useEffect(()=>{window.scrollTo(0,0)},[m,b]);const[A,O]=g.useState([]),[W,$]=g.useState([]),[_,Y]=g.useState([]),[Z,Ie]=g.useState([]),[U,u]=g.useState([]),[M,P]=g.useState([]),[ze,Fe]=g.useState([]),[Me,Ne]=g.useState([]),[Ee,Q]=g.useState([]),[Ce,ee]=g.useState(null),[N,ne]=g.useState(null),[c,S]=g.useState(null),[R,ye]=g.useState(null),[X,me]=g.useState({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),[Te,se]=g.useState(null),[de,ce]=g.useState(!1),[pe,Pe]=g.useState(!0),[et,tt]=g.useState(null);g.useEffect(()=>{o?_e():Pe(!1)},[o]);const _e=async()=>{Pe(!0),tt(null);try{const s=je(),j=h?`&demo_code=${encodeURIComponent(h)}`:"",[k,B,F,G,J,te,xe,Kt,qt]=await Promise.all([hi({limit:50,...h&&{demo_code:h}}).catch(()=>({data:[]})),fetch(`${s}/simulator/sessions?limit=50${j}`,{headers:{"X-WP-Nonce":re()}}).then(E=>E.json()).catch(()=>({data:[]})),fetch(`${s}/video-training/sessions?limit=50${j}`,{headers:{"X-WP-Nonce":re()}}).then(E=>E.json()).catch(()=>({data:[]})),K.request(`/smartbriefing/briefings?limit=50${h?`&demo_code=${encodeURIComponent(h)}`:""}`,{method:"GET"}).catch(()=>({success:!1,data:{briefings:[]}})),K.getDecisions().catch(()=>({success:!1,data:{decisions:[]}})),K.getIkigais().catch(()=>({success:!1,data:{ikigais:[]}})),fi().catch(()=>[]),fetch(`${s}/simulator/scenarios`,{headers:{"X-WP-Nonce":re()}}).then(E=>E.json()).catch(()=>({data:[]})),fetch(`${s}/video-training/scenarios`,{headers:{"X-WP-Nonce":re()}}).then(E=>E.json()).catch(()=>({data:[]}))]),Ve=(E,Ae="sessions")=>Array.isArray(E?.data)?E.data:Array.isArray(E?.data?.[Ae])?E.data[Ae]:Array.isArray(E?.[Ae])?E[Ae]:Array.isArray(E)?E:[],Ke=E=>Array.isArray(E?.data?.scenarios)?E.data.scenarios:Array.isArray(E?.data)?E.data:Array.isArray(E)?E:[];O(Ve(k)),$(Ve(B)),Y(Ve(F)),Ie(G?.data?.briefings||[]),u(J?.data?.decisions||[]),P(te?.data?.ikigais||[]),Fe(Ke(xe)),Ne(Ke(Kt)),Q(Ke(qt))}catch(s){console.error("Failed to load sessions:",s),tt(s.message||"Fehler beim Laden der Daten")}finally{Pe(!1)}},it=g.useMemo(()=>{const s={};return ze.forEach(j=>{s[j.id]=j}),s},[ze]),nt=g.useMemo(()=>{const s={};return Me.forEach(j=>{s[j.id]=j}),s},[Me]),st=g.useMemo(()=>{const s={};return Ee.forEach(j=>{s[j.id]=j}),s},[Ee]),Et=()=>{switch(m){case x.SIMULATOR:return W;case x.VIDEO:return _;case x.BRIEFINGS:return Z;case x.DECISIONS:return U;case x.IKIGAI:return M;default:return A}},Tt=()=>{switch(m){case x.SIMULATOR:return nt;case x.VIDEO:return st;default:return it}},rt=A.length+W.length+_.length+Z.length+U.length,ot=async s=>{(await K.request(`/smartbriefing/briefings/${s}`,{method:"DELETE"})).success&&Ie(k=>k.filter(B=>B.id!==s))},_t=s=>{ee(s)},At=()=>{ee(null)},at=async s=>{(await K.deleteDecision(s)).success&&u(k=>k.filter(B=>B.id!==s))},lt=async s=>{await K.deleteIkigai(s)&&P(k=>k.filter(B=>B.id!==s))},Lt=s=>{ne(s)},dt=()=>{ne(null),S(null)},Ot=s=>{ye(s),me({love:{input:s.love_input||"",tags:s.love_tags||[]},talent:{input:s.talent_input||"",tags:s.talent_tags||[]},need:{input:s.need_input||"",tags:s.need_tags||[]},market:{input:s.market_input||"",tags:s.market_tags||[]}}),s.status==="completed"&&s.paths?se({summary:s.summary,paths:s.paths}):se(null)},He=()=>{ye(null),me({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),se(null)},$t=async(s,j,k)=>{if(me(B=>({...B,[s]:{input:j,tags:k}})),R?.id)try{await K.updateIkigai(R.id,{[`${s}_input`]:j,[`${s}_tags`]:k})}catch(B){console.error("[Ikigai] Failed to save dimension:",B)}},Ft=async(s,j)=>{try{return(await K.extractIkigaiKeywords(s,j))?.keywords||[]}catch(k){return console.error("[Ikigai] Failed to extract keywords:",k),[]}},Nt=(s,j)=>{me(k=>{const B=k[s].tags.filter(F=>F!==j);return{...k,[s]:{...k[s],tags:B}}})},Pt=async()=>{if(Object.values(X).every(j=>j.tags&&j.tags.length>0)){ce(!0);try{const j=await K.synthesizeIkigaiPaths({love_tags:X.love.tags,talent_tags:X.talent.tags,need_tags:X.need.tags,market_tags:X.market.tags});j&&(se(j),R?.id&&(await K.updateIkigai(R.id,{summary:j.summary,paths:j.paths,status:"completed"}),P(k=>k.map(B=>B.id===R.id?{...B,summary:j.summary,paths:j.paths,status:"completed"}:B))))}catch(j){console.error("[Ikigai] Failed to synthesize paths:",j)}finally{ce(!1)}}},Ht=Object.values(X).every(s=>s.tags&&s.tags.length>0),Ut=s=>{u(j=>j.map(k=>k.id===s.id?s:k)),ne(s)},Gt=s=>{L(s),T(m)},Ue=()=>{L(null),T(null)},Ge=async(s,j)=>{const k=je();try{let B,F;switch(j){case x.SIMULATOR:B=`${k}/simulator/sessions/${s.id}`,F=()=>$(te=>te.filter(xe=>xe.id!==s.id));break;case x.ROLEPLAY:B=`${k}/sessions/${s.id}`,F=()=>O(te=>te.filter(xe=>xe.id!==s.id));break;case x.VIDEO:B=`${k}/video-training/sessions/${s.id}`,F=()=>Y(te=>te.filter(xe=>xe.id!==s.id));break;default:throw new Error("Unknown session type")}const J=await(await fetch(B,{method:"DELETE",headers:{"X-WP-Nonce":re()}})).json();if(J.success)F(),b&&Ue();else throw new Error(J.message||"Delete failed")}catch(B){throw console.error("Failed to delete session:",B),B}},ct=(s,j)=>(j===x.SIMULATOR?nt:j===x.VIDEO?st:it)[s?.scenario_id];if(Ce)return e.jsx(mi,{briefing:Ce,onBack:At,onDelete:ot});if(N){const s={topic:N.topic||"",context:N.context||"",pros:N.pros||[],cons:N.cons||[],proScore:N.pro_score||0,contraScore:N.contra_score||0},j=async(F,G)=>{try{const J={topic:F.topic,context:F.context||null,pros:F.pros,cons:F.cons,pro_score:F.proScore,contra_score:F.contraScore,analysis:G,status:"completed"};await K.updateDecision(N.id,J);const te={...N,...J};Ut(te),S({data:F,result:G})}catch(J){console.error("[SessionHistory] Failed to update decision:",J)}},k=async F=>N.id,B=async(F,G)=>{try{await K.updateDecision(F,{topic:G.topic,context:G.context||null,pros:G.pros,cons:G.cons,pro_score:G.proScore,contra_score:G.contraScore,status:G.status||"draft"})}catch(J){console.error("[SessionHistory] Failed to update decision:",J)}};return e.jsxs("div",{style:{minHeight:"100vh",background:i.pageBg},children:[e.jsx(kt,{type:"decision",title:N.topic||"Entscheidung",status:N.status,createdAt:N.created_at,onBack:dt,onDelete:()=>{window.confirm("M√∂chtest du diese Entscheidungs-Analyse wirklich l√∂schen?")&&(at(N.id),dt())}}),e.jsx("div",{style:{padding:"24px",maxWidth:"900px",margin:"0 auto"},children:c?e.jsx(bi,{decisionData:c.data,analysisResult:c.result,onStartNew:()=>{S(null),ne(null)},onEditDecision:()=>{S(null)}}):e.jsx(ji,{initialData:s,onAnalysisComplete:j,isAuthenticated:o,savedDecisionId:N.id,onSaveDraft:k,onUpdateSession:B,onDecisionIdChange:()=>{}})})]})}if(R)return e.jsxs("div",{style:{minHeight:"100vh",background:i.pageBg},children:[e.jsx(kt,{type:"ikigai",title:"Ikigai-Analyse",subtitle:R.status==="completed"?"Berufliche Orientierung":"In Bearbeitung",status:R.status,createdAt:R.created_at,onBack:He,onDelete:()=>{window.confirm("M√∂chtest du diese Ikigai-Analyse wirklich l√∂schen?")&&(lt(R.id),He())}}),e.jsx("div",{style:{padding:"24px",maxWidth:"900px",margin:"0 auto"},children:Te?e.jsx(Si,{dimensions:X,synthesisResult:Te,onStartNew:He,onEdit:()=>se(null),DIMENSIONS:vt}):e.jsx(ki,{dimensions:X,DIMENSIONS:vt,onExtractKeywords:Ft,onUpdateDimension:$t,onRemoveTag:Nt,allDimensionsFilled:Ht,onSynthesize:Pt,isSynthesizing:de})})]});if(b){if(I===x.ROLEPLAY){const k=ct(b,I);return e.jsx(ui,{session:b,scenario:k,onBack:Ue,onRepeat:()=>p?.(b,k,"roleplay"),onDelete:B=>Ge(B,x.ROLEPLAY)})}const j={[x.SIMULATOR]:"simulator",[x.VIDEO]:"video"}[I]||"simulator";return e.jsx(Ti,{session:b,type:I,scenario:ct(b,I),onBack:Ue,onContinueSession:l,onRepeatSession:(k,B)=>p?.(k,B,j),onDeleteSession:Ge})}if(!o)return e.jsxs("div",{style:{padding:i.space[6]},children:[e.jsxs("div",{style:{marginBottom:i.space[8],textAlign:"center"},children:[e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:i.space[3],marginBottom:i.space[3]},children:[e.jsx("div",{style:{width:i.space[12],height:i.space[12],borderRadius:i.radius.lg,background:f,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ut,{style:{width:i.iconSize["2xl"],height:i.iconSize["2xl"],color:v}})}),e.jsx("h1",{style:{fontSize:i.fontSize["5xl"],fontWeight:i.fontWeight.bold,color:i.textMain,margin:0},children:"Meine Sessions"})]}),e.jsx("p",{style:{fontSize:i.fontSize.lg,color:i.textSecondary,maxWidth:"600px",margin:"0 auto"},children:"Hier findest du deine gespeicherten √úbungen und Fortschritte"})]}),e.jsxs("div",{style:{maxWidth:"500px",margin:`${i.space[15]} auto`,textAlign:"center",padding:i.space[10],backgroundColor:i.cardBg,borderRadius:i.radius["2xl"],boxShadow:i.shadow.md},children:[e.jsx("div",{style:{width:i.space[16],height:i.space[16],borderRadius:i.radius.xl,background:f,display:"flex",alignItems:"center",justifyContent:"center",margin:`0 auto ${i.space[5]}`},children:e.jsx(yt,{style:{width:i.iconSize["3xl"],height:i.iconSize["3xl"],color:v}})}),e.jsx("h2",{style:{fontSize:i.fontSize["3xl"],fontWeight:i.fontWeight.bold,color:i.textMain,marginBottom:i.space[3]},children:"Anmeldung erforderlich"}),e.jsx("p",{style:{fontSize:i.fontSize.md,color:i.textMuted,marginBottom:i.space[6],lineHeight:1.6},children:"Um deine gespeicherten Sessions zu sehen, musst du dich zuerst anmelden."}),e.jsxs("button",{onClick:r,style:{padding:`${i.space[3.5]} ${i.space[8]}`,borderRadius:i.radius.lg,border:"none",background:f,color:v,fontSize:i.fontSize.lg,fontWeight:i.fontWeight.semibold,cursor:"pointer",display:"inline-flex",alignItems:"center",gap:i.space[2.5],boxShadow:i.coloredShadow(w,"md")},children:[e.jsx(yt,{style:{width:i.iconSize.lg,height:i.iconSize.lg}}),"Jetzt anmelden"]})]})]});if(pe)return e.jsxs("div",{style:{minHeight:"60vh",display:"flex",alignItems:"center",justifyContent:"center",padding:i.space[10]},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(H,{style:{width:i.iconSize["4xl"],height:i.iconSize["4xl"],color:w,animation:"spin 1s linear infinite",margin:"0 auto"}}),e.jsx("p",{style:{color:i.textMuted,marginTop:i.space[4]},children:"Sessions werden geladen..."})]}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]});if(et)return e.jsx("div",{style:{minHeight:"400px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{textAlign:"center",maxWidth:"400px",padding:i.space[6]},children:[e.jsx(ge,{style:{width:i.iconSize["4xl"],height:i.iconSize["4xl"],color:i.error,margin:`0 auto ${i.space[4]}`}}),e.jsx("h2",{style:{fontSize:i.fontSize["2xl"],fontWeight:i.fontWeight.bold,color:i.textMain,marginBottom:i.space[2]},children:"Fehler beim Laden"}),e.jsx("p",{style:{color:i.textMuted,marginBottom:i.space[6]},children:et}),e.jsx(Le,{onClick:_e,children:"Erneut versuchen"})]})});const pt=Et(),Vt=Tt();return e.jsxs("div",{style:{padding:i.space[6]},children:[e.jsxs("div",{style:{marginBottom:i.space[8],textAlign:"center",position:"relative"},children:[e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:i.space[3],marginBottom:i.space[3]},children:[e.jsx("div",{style:{width:i.space[12],height:i.space[12],borderRadius:i.radius.lg,background:f,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ut,{style:{width:i.iconSize["2xl"],height:i.iconSize["2xl"],color:v}})}),e.jsx("h1",{style:{fontSize:i.fontSize["5xl"],fontWeight:i.fontWeight.bold,color:i.textMain,margin:0},children:"Meine Sessions"})]}),e.jsxs("p",{style:{fontSize:i.fontSize.lg,color:i.textSecondary,maxWidth:"600px",margin:"0 auto"},children:[rt," ",rt===1?"√úbung":"√úbungen"," gespeichert"]})]}),e.jsx("style",{children:`
        .session-tabs-desktop {
          margin: 0 24px 24px;
          display: flex;
          flex-wrap: wrap;
          gap: 8px;
          background: #f1f5f9;
          padding: 6px;
          border-radius: 14px;
        }
        .session-tab-btn-desktop {
          flex: 1 1 auto;
          min-width: fit-content;
          padding: 12px 16px;
          border-radius: 10px;
          border: none;
          font-size: 14px;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          transition: all 0.2s;
        }
        .session-tabs-mobile {
          margin: 0 16px 16px;
        }
        .session-tabs-mobile-icons {
          display: flex;
          gap: 8px;
          justify-content: center;
          margin-bottom: 12px;
        }
        .session-tab-btn-mobile {
          flex: 1;
          max-width: 80px;
          padding: 12px 8px;
          border-radius: 12px;
          border: none;
          cursor: pointer;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          gap: 4px;
          transition: all 0.2s;
        }
        .session-tab-mobile-label {
          text-align: center;
          font-size: 15px;
          font-weight: 600;
          color: #0f172a;
          padding: 8px 16px;
          background: #fff;
          border-radius: 10px;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }
        .mobile-refresh-btn {
          display: none;
        }
        .desktop-actions {
          margin: 0 24px 24px;
          display: flex;
          justify-content: center;
          flex-wrap: wrap;
          gap: 12px;
        }
        .sessions-list-container {
          margin: 0 24px;
        }
        @media (min-width: 1025px) {
          .session-tabs-mobile { display: none; }
        }
        @media (min-width: 641px) and (max-width: 1023px) {
          .desktop-actions {
            flex-direction: column;
          }
          .desktop-actions button {
            width: 100%;
            justify-content: center;
          }
        }
        @media (min-width: 1024px) {
          .desktop-actions {
            justify-content: flex-end;
          }
        }
        @media (max-width: 1024px) {
          .session-tabs-desktop { display: none; }
        }
        @media (max-width: 640px) {
          .desktop-actions { display: none; }
          .mobile-refresh-btn {
            display: flex !important;
            position: absolute;
            top: 0;
            right: 0;
          }
          .sessions-list-container {
            margin: 0 16px;
          }
        }
      `}),e.jsx("button",{onClick:_e,disabled:pe,className:"mobile-refresh-btn",style:{padding:i.space[2.5],borderRadius:i.radius.md,border:`1px solid ${i.borderColor}`,background:i.cardBgColor,color:i.textSecondary,cursor:pe?"not-allowed":"pointer",opacity:pe?.5:1,boxShadow:i.shadow.sm,alignItems:"center",justifyContent:"center"},children:e.jsx(mt,{style:{width:i.iconSize.md,height:i.iconSize.md},className:pe?"animate-spin":""})}),e.jsx("div",{className:"session-tabs-desktop",children:Ye.map(s=>{const j=s.icon,k=m===s.id,B=s.id===x.SIMULATOR?W.length:s.id===x.VIDEO?_.length:s.id===x.BRIEFINGS?Z.length:s.id===x.DECISIONS?U.length:s.id===x.IKIGAI?M.length:A.length;return e.jsxs("button",{onClick:()=>C(s.id),className:"session-tab-btn-desktop",style:{background:k?"#fff":"transparent",color:k?"#0f172a":"#64748b",fontWeight:k?600:500,boxShadow:k?"0 2px 8px rgba(0, 0, 0, 0.08)":"none"},children:[e.jsx(j,{size:18}),e.jsx("span",{children:s.label}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:"10px",background:k?w:"#e2e8f0",color:k?"white":"#64748b",fontSize:"12px",fontWeight:600,minWidth:"24px",textAlign:"center"},children:B})]},s.id)})}),e.jsxs("div",{className:"session-tabs-mobile",children:[e.jsx("div",{className:"session-tabs-mobile-icons",children:Ye.map(s=>{const j=s.icon,k=m===s.id,B=s.id===x.SIMULATOR?W.length:s.id===x.VIDEO?_.length:s.id===x.BRIEFINGS?Z.length:s.id===x.DECISIONS?U.length:A.length;return e.jsxs("button",{onClick:()=>C(s.id),className:"session-tab-btn-mobile",style:{background:k?"#fff":"#f1f5f9",boxShadow:k?"0 2px 8px rgba(0, 0, 0, 0.1)":"none",border:k?`2px solid ${w}`:"2px solid transparent"},children:[e.jsx(j,{size:20,style:{color:k?w:"#64748b"}}),e.jsx("span",{style:{padding:"2px 6px",borderRadius:"8px",background:k?w:"#e2e8f0",color:k?"white":"#64748b",fontSize:"11px",fontWeight:600,minWidth:"20px",textAlign:"center"},children:B})]},s.id)})}),e.jsx("div",{className:"session-tab-mobile-label",children:Ye.find(s=>s.id===m)?.label})]}),e.jsxs("div",{className:"desktop-actions",children:[e.jsxs(Le,{variant:"outline",onClick:_e,disabled:pe,children:[e.jsx(mt,{style:{width:"16px",height:"16px",marginRight:"8px"},className:pe?"animate-spin":""}),"Aktualisieren"]}),n&&e.jsxs(Le,{onClick:()=>{const s={[x.BRIEFINGS]:"smart_briefing",[x.DECISIONS]:"decision_board",[x.IKIGAI]:"ikigai",[x.SIMULATOR]:"simulator",[x.VIDEO]:"video_training",[x.ROLEPLAY]:"dashboard"};n(s[m]||"overview")},style:{background:f,color:v},children:[e.jsx(ti,{style:{width:"16px",height:"16px",marginRight:"8px"}}),m===x.BRIEFINGS?"Neues Briefing":m===x.DECISIONS?"Neue Entscheidungs-Analyse":m===x.IKIGAI?"Neue Ikigai-Analyse":m===x.SIMULATOR?"Neues Szenario-Training":m===x.VIDEO?"Neue Wirkungs-Analyse":"Neue Live-Simulation"]})]}),e.jsx("div",{className:"sessions-list-container",children:pt.length===0?e.jsxs("div",{style:{textAlign:"center",padding:`${i.space[15]} ${i.space[6]}`,background:i.cardBg,borderRadius:i.radius["2xl"],boxShadow:i.shadow.sm},children:[m===x.SIMULATOR&&e.jsx($e,{style:{width:i.iconSize["4xl"],height:i.iconSize["4xl"],color:i.textMuted,margin:`0 auto ${i.space[4]}`,display:"block"}}),m===x.ROLEPLAY&&e.jsx(ue,{style:{width:i.iconSize["4xl"],height:i.iconSize["4xl"],color:i.textMuted,margin:`0 auto ${i.space[4]}`,display:"block"}}),m===x.VIDEO&&e.jsx(De,{style:{width:i.iconSize["4xl"],height:i.iconSize["4xl"],color:i.textMuted,margin:`0 auto ${i.space[4]}`,display:"block"}}),m===x.BRIEFINGS&&e.jsx(Je,{style:{width:i.iconSize["4xl"],height:i.iconSize["4xl"],color:i.textMuted,margin:`0 auto ${i.space[4]}`,display:"block"}}),m===x.DECISIONS&&e.jsx(We,{style:{width:i.iconSize["4xl"],height:i.iconSize["4xl"],color:i.textMuted,margin:`0 auto ${i.space[4]}`,display:"block"}}),m===x.IKIGAI&&e.jsx(Re,{style:{width:i.iconSize["4xl"],height:i.iconSize["4xl"],color:i.textMuted,margin:`0 auto ${i.space[4]}`,display:"block"}}),e.jsxs("h3",{style:{fontSize:i.fontSize["2xl"],fontWeight:i.fontWeight.semibold,color:i.textSecondary,marginBottom:i.space[2]},children:["Noch keine ",m===x.SIMULATOR?"Szenario-Trainings":m===x.VIDEO?"Wirkungs-Analysen":m===x.BRIEFINGS?"Smart Briefings":m===x.DECISIONS?"Entscheidungs-Analysen":m===x.IKIGAI?"Ikigai-Analysen":"Live-Simulationen"]}),e.jsx("p",{style:{color:i.textMuted,fontSize:i.fontSize.base,marginBottom:i.space[6]},children:m===x.BRIEFINGS?"Erstelle dein erstes Briefing, um dich optimal vorzubereiten.":m===x.DECISIONS?"Nutze den Entscheidungs-Kompass, um deine erste Entscheidung zu analysieren.":m===x.IKIGAI?"Entdecke deinen idealen Karrierepfad mit dem Ikigai-Kompass.":"Starte dein erstes Training, um hier deine Fortschritte zu sehen."}),e.jsxs(Le,{onClick:t,children:[e.jsx(Be,{style:{width:i.iconSize.sm,height:i.iconSize.sm,marginRight:i.space[2]}}),m===x.BRIEFINGS?"Briefing erstellen":m===x.DECISIONS?"Entscheidung analysieren":m===x.IKIGAI?"Ikigai entdecken":"Training starten"]})]}):e.jsx(D.div,{style:{display:"flex",flexDirection:"column",gap:i.space[3]},initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},children:m===x.BRIEFINGS?Z.map(s=>e.jsx(_i,{briefing:s,onClick:()=>_t(s),onDelete:ot,headerGradient:f,headerText:v,primaryAccent:w},s.id)):m===x.DECISIONS?U.map(s=>e.jsx(Li,{decision:s,onClick:()=>Lt(s),onDelete:at,headerGradient:f,headerText:v,primaryAccent:w},s.id)):m===x.IKIGAI?M.map(s=>e.jsx($i,{ikigai:s,onDelete:lt,onNavigate:()=>Ot(s),headerGradient:f,headerText:v,primaryAccent:w},s.id)):pt.map(s=>{const j=Vt[s.scenario_id];return e.jsx(Ai,{session:s,type:m,scenario:j,onClick:()=>Gt(s),onContinueSession:l,onDeleteSession:Ge,headerGradient:f,headerText:v,primaryAccent:w},s.id)})})}),e.jsx("style",{children:"@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"})]})};export{an as SESSION_TABS,ln as default};
