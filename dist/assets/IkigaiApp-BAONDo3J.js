import{a as t,w as l,j as p}from"./colors-BQukwKjN.js";import{a as W,I as P}from"./IkigaiResults-DBmCukbE.js";import"./useBranding-D1dNadPD.js";import"./designTokens-DbcSlXo4.js";import"./useMobile-B_LXavH3.js";import"./card-DJOKIzV1.js";import"./utils-BEHD0UYf.js";import"./button-BqGd9OJS.js";import"./AudioRecorder-BEmTtitb.js";import"./audio-BZs8f3gH.js";import"./index.js";import"./check-DiBTcvJw.js";import"./globe-CfR5dnas.js";import"./star-BkTqDoWb.js";import"./heart-DAOFFmWr.js";import"./briefcase-DzdxhUru.js";import"./circle-check-big-BqWFsjNz.js";import"./play-0qnAUdHO.js";import"./pen-line-CkFrlKhF.js";import"./refresh-cw-hxJHsysT.js";const r={COMPASS:"compass",RESULTS:"results"},w={love:{key:"love",label:"Leidenschaft",title:"Deine Leidenschaft",icon:"â¤ï¸",color:"#E11D48",question:"Stell dir vor, Geld spielt keine Rolle: Womit wÃ¼rdest du deinen Tag verbringen? Bei welchem Thema vergisst du vÃ¶llig die Zeit?",placeholder:"Schreib einfach drauf los: Hobbys, Themen, TÃ¤tigkeiten...",description:"Was treibt dich an?"},talent:{key:"talent",label:"StÃ¤rken",title:"Deine StÃ¤rken",icon:"â­",color:"#F59E0B",question:'WofÃ¼r bitten dich Freunde oder Kollegen oft um Rat? Was erledigst du "mit links", wÃ¤hrend andere daran verzweifeln?',placeholder:"Z.B. Organisieren, ZuhÃ¶ren, Coden, Designen...",description:"Was fÃ¤llt dir leicht?"},need:{key:"need",label:"Mission",title:"Deine Mission",icon:"ðŸŒ",color:"#10B981",question:"Welches Problem in der Gesellschaft oder Wirtschaft nervt dich? Wo wÃ¼rdest du gerne mitanpacken, um Dinge zu verbessern?",placeholder:"Z.B. Nachhaltigkeit, Bildung, bessere Software, Pflege...",description:"Welchen Beitrag leistest du?"},market:{key:"market",label:"Markt",title:"Der Markt",icon:"ðŸ’°",color:"#6366F1",question:"Welche deiner FÃ¤higkeiten sind bares Geld wert? FÃ¼r welche Jobs oder Dienstleistungen existiert ein echtes Budget?",placeholder:"Z.B. Projektmanagement, Beratung, Handwerk...",description:"WofÃ¼r wirst du bezahlt?"}},se=({isAuthenticated:A,requireAuth:B,setPendingAction:F,onNavigateToHistory:M})=>{const[m,d]=t.useState(r.COMPASS),[o,k]=t.useState(null),[y,S]=t.useState(!1),[a,u]=t.useState({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),[I,g]=t.useState(null),f=t.useRef(!1);t.useEffect(()=>{window.scrollTo(0,0)},[m]);const h=Object.values(a).every(e=>e.tags&&e.tags.length>0),c=t.useCallback(async()=>{if(o)return o;try{const e=await l.createIkigai();if(e?.id)return k(e.id),f.current=!0,console.log("[Ikigai] Session created with ID:",e.id),e.id}catch(e){console.error("[Ikigai] Failed to create session:",e)}return null},[o]),b=t.useCallback(async(e,i,s)=>{u(n=>({...n,[e]:{input:i,tags:s}}));try{const n=await c();n&&(await l.updateIkigai(n,{[`${e}_input`]:i,[`${e}_tags`]:s}),console.log(`[Ikigai] Dimension ${e} saved`))}catch(n){console.error("[Ikigai] Failed to save dimension:",n)}},[c]),v=t.useCallback(async(e,i)=>{try{const s=await l.extractIkigaiKeywords(e,i);return s?.keywords?s.keywords:[]}catch(s){return console.error("[Ikigai] Failed to extract keywords:",s),[]}},[]),C=t.useCallback(async()=>{if(h){S(!0);try{const e=await l.synthesizeIkigaiPaths({love_tags:a.love.tags,talent_tags:a.talent.tags,need_tags:a.need.tags,market_tags:a.market.tags});if(e){g(e);const i=o||await c();i&&await l.updateIkigai(i,{summary:e.summary,paths:e.paths,status:"completed"}),d(r.RESULTS)}}catch(e){console.error("[Ikigai] Failed to synthesize paths:",e)}finally{S(!1)}}},[h,a,o,c]),D=t.useCallback((e,i)=>{u(s=>{const n=s[e].tags.filter(T=>T!==i);return{...s,[e]:{...s[e],tags:n}}})},[]),E=t.useCallback(()=>{u({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),g(null),k(null),f.current=!1,d(r.COMPASS)},[]),R=t.useCallback(()=>{g(null),d(r.COMPASS)},[]),x=()=>{switch(m){case r.RESULTS:return p.jsx(P,{dimensions:a,synthesisResult:I,onStartNew:E,onEdit:R,DIMENSIONS:w});case r.COMPASS:default:return p.jsx(W,{dimensions:a,DIMENSIONS:w,onExtractKeywords:v,onUpdateDimension:b,onRemoveTag:D,allDimensionsFilled:h,onSynthesize:C,isSynthesizing:y})}};return p.jsx("div",{style:{minHeight:"100%"},children:x()})};export{se as default};
