const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./RoleplayDashboard-D_h-Hkip.js","./ui-vendor-4RzMPcHM.js","./react-vendor-uDOJF2jQ.js","./ScenarioDashboard-vSA_sLNk.js","./FeatureInfoButton-DkKoIptM.js","./FeatureInfoButton.css","./ScenarioCard-CYQyYFKP.js","./dialog-BxKlTEi_.js","./utils-BEHD0UYf.js","./useMobile-YxjH166V.js","./select-native-CVzvlCkd.js","./index-CklPxmEV.js","./RoleplayDeviceSetup-y6S2eHmB.js","./DeviceSetupPage-B-mu0raW.js","./MicrophoneTestDialog-BpH4sJX2.js","./RoleplayVariablesPage-CA6IfEkI.js","./DynamicFormField-CHFrCTO-.js","./RoleplaySessionUnified-C86zqoBj.js","./button-DzjOrDtB.js","./DeviceSettingsDialog-BZyO7Z7l.js","./SessionHistory-Djr3Bl5N.js","./audioMetricsAdapter-D_aXdvUR.js","./RoleplaySessionReport-ebCDI2wH.js","./BriefingWorkbook-CLkCTUbJ.js","./DecisionBoardResult-BEzyE6zl.js","./input-CYGqJdXt.js","./textarea-DijbKlzC.js","./AudioRecorder-J8TfGKYv.js","./card-Cxxtg4gu.js","./IkigaiResults-C77k567l.js","./SessionDetailView-Cum4Ako8.js","./index-B_5WRZl0.js","./progress-bar-BwKNofYR.js","./fullscreen-loader-Dp-kqp8J.js","./Confetti-DrdvX4bE.js","./index--omDpt3c.js","./VideoTrainingApp-DS2Hv1NQ.js","./index-CEWjGuun.js","./index-Dd1brP_s.js","./index-CAL8cRWR.js","./FeatureAppHeader-DhQnpzey.js","./useScrollToTop-PegBaEbR.js","./IkigaiApp-BcOZFtWM.js","./index-C3o1Bu7J.js","./UsageLimitsDisplay-BXRMzuzy.js","./AdminDashboard-peQMTgvA.js","./ScenarioManager-BMBvGH9i.js","./form-accordion-UZ6XqZkE.js","./SimulatorScenarioManager-OQ2_3gF-.js","./VideoTrainingManager-DbyEwRZI.js","./PartnerManager-BOAtZ1oy.js"])))=>i.map(i=>d[i]);
import{j as t,S as on,T as ln,I as cn,L as At,m as H,a as dn,C as un,A as hn,X as mn,b as gn,c as pn,d as fn,F as xn,M as bn,e as yn,V as Sn,Z as En,f as ot,g as wn,h as In,i as Nn}from"./ui-vendor-4RzMPcHM.js";import{a as m,d as Le,b as vn,H as An,u as kn,e as _n,f as Rn,g as R}from"./react-vendor-uDOJF2jQ.js";import{u as ge,C as g,G as Me,h as q,g as ye,a as Se,b as Cn,c as Tn,w as B,d as kt,D as lt,e as jn,F as ct,f as On,P as Mn,T as Dn,s as Ln,S as $n,i as dt,j as Fn}from"./FeatureInfoButton-DkKoIptM.js";const Gn="modulepreload",Pn=function(e,n){return new URL(e,n).href},ut={},j=function(n,s,r){let i=Promise.resolve();if(s&&s.length>0){let p=function(u){return Promise.all(u.map(S=>Promise.resolve(S).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");i=p(s.map(u=>{if(u=Pn(u,r),u in ut)return;ut[u]=!0;const S=u.endsWith(".css"),b=S?'[rel="stylesheet"]':"";if(r)for(let E=o.length-1;E>=0;E--){const v=o[E];if(v.href===u&&(!S||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${b}`))return;const d=document.createElement("link");if(d.rel=S?"stylesheet":Gn,S||(d.as="script"),d.crossOrigin="",d.href=u,c&&d.setAttribute("nonce",c),document.head.appendChild(d),S)return new Promise((E,v)=>{d.addEventListener("load",E),d.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return n().catch(a)})};function zn({isOpen:e,onClose:n,onSuccess:s}){const{branding:r,partnerName:i,logoUrl:a}=ge(),[o,l]=m.useState(1),[c,p]=m.useState(""),[u,S]=m.useState(""),[b,d]=m.useState(""),[E,v]=m.useState(""),[T,D]=m.useState(""),[U,O]=m.useState(""),[G,L]=m.useState(!1),[I,k]=m.useState(""),[w,P]=m.useState(!1),[Y,_]=m.useState(!1),$=r?.["--primary-accent"]||g.indigo[500],ee=r?.["--button-gradient"]||Me.button,f=r?.["--header-gradient"]||Me.header,A=r?.["--focus-ring"]||q(g.indigo[500],.3),M=r?.["--header-text"]||g.white,z=r?.["--sidebar-text-color"]||g.white,K={display:"block",fontSize:"14px",fontWeight:"500",color:g.slate[700],marginBottom:"8px"},J={width:"100%",padding:"12px 16px",fontSize:"15px",borderRadius:"12px",border:`1px solid ${g.slate[200]}`,outline:"none",transition:"all 0.2s ease",backgroundColor:g.white},W={borderColor:$,boxShadow:`0 0 0 3px ${A}`},tt=async x=>{if(x.preventDefault(),k(""),!c.trim()){k("Bitte geben Sie Ihren Demo-Code ein.");return}if(c.trim().length!==5){k("Der Demo-Code muss 5 Zeichen lang sein.");return}P(!0);try{const te=ye(),ne=Se(),fe=await(await fetch(`${te}/demo/validate`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":ne},credentials:"same-origin",body:JSON.stringify({demo_code:c.toUpperCase().trim()})})).json();if(!fe.valid){k("Der Demo-Code ist ungÃ¼ltig. Bitte Ã¼berprÃ¼fen Sie Ihre Eingabe.");return}fe.is_activated?(_(!0),s&&s(c.toUpperCase().trim())):l(2)}catch(te){console.error("[DEMO] Validation error:",te),k("Ein Fehler ist aufgetreten. Bitte versuchen Sie es erneut.")}finally{P(!1)}},$e=async x=>{if(x.preventDefault(),k(""),!u.trim()){k("Bitte geben Sie den Firmennamen ein.");return}if(!b.trim()){k("Bitte geben Sie den Namen des Ansprechpartners ein.");return}if(!T.trim()){k("Bitte geben Sie eine Kontakt-E-Mail ein.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(T)){k("Bitte geben Sie eine gÃ¼ltige E-Mail-Adresse ein.");return}if(!G){k("Bitte stimmen Sie den Datenschutzbestimmungen zu.");return}P(!0);try{const ne=ye(),Ae=Se(),ke=await(await fetch(`${ne}/demo/activate`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":Ae},credentials:"same-origin",body:JSON.stringify({demo_code:c.toUpperCase().trim(),company_name:u.trim(),contact_name:b.trim(),homepage:E.trim(),contact_email:T.trim(),phone:U.trim(),privacy_accepted:G})})).json();ke.success?(_(!0),s&&s(c.toUpperCase().trim())):k(ke.error?.message||"Ein Fehler ist aufgetreten. Bitte versuchen Sie es erneut.")}catch(ne){console.error("[DEMO] Activation error:",ne),k("Ein Fehler ist aufgetreten. Bitte versuchen Sie es erneut.")}finally{P(!1)}},pe=()=>{Y||(l(1),p(""),S(""),d(""),v(""),D(""),O(""),L(!1),k(""),n&&n())},de=()=>{l(1),k("")},Fe=x=>{x.target===x.currentTarget&&pe()};return Le.useEffect(()=>{const x=te=>{te.key==="Escape"&&e&&pe()};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[e,Y]),e?t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:Fe,role:"dialog","aria-modal":"true","aria-labelledby":"demo-modal-title",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 overflow-hidden max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"px-6 py-5",style:{background:f,color:M},children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[o===2&&t.jsx("button",{onClick:de,className:"p-1.5 rounded-lg transition-colors",style:{color:M,backgroundColor:"transparent"},onMouseEnter:x=>x.target.style.backgroundColor="rgba(255,255,255,0.2)",onMouseLeave:x=>x.target.style.backgroundColor="transparent","aria-label":"ZurÃ¼ck",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsx("h2",{id:"demo-modal-title",className:"text-xl font-semibold",style:{color:M},children:o===1?"Demo-Code eingeben":"Kontaktdaten"})]}),t.jsx("button",{onClick:pe,className:"p-2 rounded-xl transition-colors",style:{color:M,backgroundColor:"transparent"},onMouseEnter:x=>x.target.style.backgroundColor="rgba(255,255,255,0.2)",onMouseLeave:x=>x.target.style.backgroundColor="transparent","aria-label":"SchlieÃŸen",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a&&o===1&&t.jsx("div",{className:"mt-3 mb-1 flex justify-center",children:t.jsx("img",{src:a,alt:`${i} Logo`,style:{height:"4rem",maxWidth:"100%",objectFit:"contain"}})}),t.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3",children:[t.jsx("div",{className:"w-8 h-1 rounded-full transition-colors",style:{backgroundColor:M,opacity:o>=1?1:.3}}),t.jsx("div",{className:"w-8 h-1 rounded-full transition-colors",style:{backgroundColor:M,opacity:o>=2?1:.3}})]})]}),o===1&&t.jsxs("form",{onSubmit:tt,className:"p-6 space-y-4",children:[t.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl text-blue-700 text-sm",children:t.jsx("p",{children:"Willkommen zur Demo! Bitte geben Sie den Demo-Code ein, den Sie von uns erhalten haben."})}),I&&t.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm flex items-start gap-3",children:[t.jsx("svg",{className:"w-5 h-5 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("span",{children:I})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"demo-code",className:"block text-[13px] font-medium text-gray-700 mb-1.5",children:["Demo-Code ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",id:"demo-code",value:c,onChange:x=>p(x.target.value.toUpperCase()),className:"w-full px-3.5 py-4 text-2xl font-semibold font-mono tracking-[4px] text-center border border-slate-200 rounded-xl outline-none transition-all bg-white focus:border-primary focus:ring-3 focus:ring-primary/30",placeholder:"XXXXX",maxLength:5,disabled:w,autoComplete:"off",autoFocus:!0})]}),t.jsx("button",{type:"submit",disabled:w,style:{width:"100%",padding:"14px 24px",fontSize:"16px",fontWeight:600,color:z,background:w?g.slate[400]:ee,border:"none",borderRadius:"12px",cursor:w?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",transition:"all 0.2s ease",opacity:w?.7:1,boxShadow:w?"none":`0 4px 14px ${q(g.indigo[500],.3)}`,marginTop:"16px"},onMouseEnter:x=>{w||(x.target.style.transform="translateY(-1px)",x.target.style.boxShadow=`0 6px 20px ${q(g.indigo[500],.4)}`)},onMouseLeave:x=>{x.target.style.transform="translateY(0)",x.target.style.boxShadow=w?"none":`0 4px 14px ${q(g.indigo[500],.3)}`},children:w?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{fill:"none",viewBox:"0 0 24 24",style:{width:"20px",height:"20px",color:z,animation:"spin 1s linear infinite"},children:[t.jsx("circle",{style:{opacity:.25},cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{style:{opacity:.75},fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t.jsx("span",{style:{color:z},children:"Wird Ã¼berprÃ¼ft..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:z,style:{width:"20px",height:"20px"},children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),t.jsx("span",{style:{color:z},children:"Weiter"})]})}),t.jsxs("p",{className:"text-xs text-center text-gray-500 pt-2",children:["Haben Sie keinen Demo-Code? Kontaktieren Sie uns unter"," ",t.jsx("a",{href:"mailto:info@karriereheld.de",className:"underline",style:{color:$},children:"info@karriereheld.de"})]})]}),o===2&&t.jsxs("form",{onSubmit:$e,className:"p-6 space-y-4",children:[t.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-xl text-green-700 text-sm",children:t.jsxs("p",{children:[t.jsx("strong",{children:"Code gÃ¼ltig!"})," Bitte geben Sie noch Ihre Kontaktdaten ein, um die Demo zu starten."]})}),I&&t.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm flex items-start gap-3",children:[t.jsx("svg",{className:"w-5 h-5 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("span",{children:I})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"company-name",style:K,children:["Firma ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",id:"company-name",value:u,onChange:x=>S(x.target.value),style:J,onFocus:x=>Object.assign(x.target.style,W),onBlur:x=>{x.target.style.borderColor=g.slate[200],x.target.style.boxShadow="none"},placeholder:"Ihre Firma",disabled:w,autoComplete:"organization",autoFocus:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"contact-name",style:K,children:["Ansprechpartner ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",id:"contact-name",value:b,onChange:x=>d(x.target.value),style:J,onFocus:x=>Object.assign(x.target.style,W),onBlur:x=>{x.target.style.borderColor=g.slate[200],x.target.style.boxShadow="none"},placeholder:"Ihr Name",disabled:w,autoComplete:"name"})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"contact-email",style:K,children:["E-Mail ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"email",id:"contact-email",value:T,onChange:x=>D(x.target.value),style:J,onFocus:x=>Object.assign(x.target.style,W),onBlur:x=>{x.target.style.borderColor=g.slate[200],x.target.style.boxShadow="none"},placeholder:"email@firma.de",disabled:w,autoComplete:"email"})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"homepage",style:K,children:["Homepage ",t.jsx("span",{className:"text-gray-400",children:"(optional)"})]}),t.jsx("input",{type:"url",id:"homepage",value:E,onChange:x=>v(x.target.value),style:J,onFocus:x=>Object.assign(x.target.style,W),onBlur:x=>{x.target.style.borderColor=g.slate[200],x.target.style.boxShadow="none"},placeholder:"https://www.ihre-firma.de",disabled:w,autoComplete:"url"})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"phone",style:K,children:["Telefon ",t.jsx("span",{className:"text-gray-400",children:"(optional)"})]}),t.jsx("input",{type:"tel",id:"phone",value:U,onChange:x=>O(x.target.value),style:J,onFocus:x=>Object.assign(x.target.style,W),onBlur:x=>{x.target.style.borderColor=g.slate[200],x.target.style.boxShadow="none"},placeholder:"+49 123 456789",disabled:w,autoComplete:"tel"})]}),t.jsxs("div",{className:"flex items-start gap-3 pt-2",children:[t.jsx("input",{type:"checkbox",id:"privacy-accepted",checked:G,onChange:x=>L(x.target.checked),className:"mt-1 w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",disabled:w,style:{accentColor:$}}),t.jsxs("label",{htmlFor:"privacy-accepted",className:"text-sm text-gray-600",children:["Ich stimme den"," ",t.jsx("a",{href:"/datenschutz",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-gray-900",style:{color:$},children:"Datenschutzbestimmungen"})," ","zu. ",t.jsx("span",{className:"text-red-500",children:"*"})]})]}),t.jsx("button",{type:"submit",disabled:w,style:{width:"100%",padding:"14px 24px",fontSize:"16px",fontWeight:600,color:z,background:w?g.slate[400]:ee,border:"none",borderRadius:"12px",cursor:w?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",transition:"all 0.2s ease",opacity:w?.7:1,boxShadow:w?"none":`0 4px 14px ${q(g.indigo[500],.3)}`,marginTop:"16px"},onMouseEnter:x=>{w||(x.target.style.transform="translateY(-1px)",x.target.style.boxShadow=`0 6px 20px ${q(g.indigo[500],.4)}`)},onMouseLeave:x=>{x.target.style.transform="translateY(0)",x.target.style.boxShadow=w?"none":`0 4px 14px ${q(g.indigo[500],.3)}`},children:w?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{fill:"none",viewBox:"0 0 24 24",style:{width:"20px",height:"20px",color:z,animation:"spin 1s linear infinite"},children:[t.jsx("circle",{style:{opacity:.25},cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{style:{opacity:.75},fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t.jsx("span",{style:{color:z},children:"Wird aktiviert..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:z,style:{width:"20px",height:"20px"},children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),t.jsx("span",{style:{color:z},children:"Demo starten"})]})})]})]})}):null}const Bn="demo";function Kn({isOpen:e,onClose:n,onLoginSuccess:s}){const{login:r,logout:i,partnerName:a,logoUrl:o,setDemoCode:l}=ge(),c=Cn(),p=Tn(),[u,S]=m.useState(""),[b,d]=m.useState(""),[E,v]=m.useState(""),[T,D]=m.useState(!1),[U,O]=m.useState(!1),[G,L]=m.useState(null),I=async _=>{if(_.preventDefault(),v(""),!u.trim()||!b.trim()){v("Bitte geben Sie Benutzername und Passwort ein.");return}D(!0);try{const $=await r(u,b);if($.success)if(u.toLowerCase()===Bn)localStorage.setItem("bewerbungstrainer_demo_pending","true"),L($.user),O(!0),d("");else{S(""),d(""),console.log("ðŸ” [LoginModal] Login successful, reloading page to apply auth cookies..."),window.location.reload();return}else v($.error||"Login fehlgeschlagen. Bitte versuchen Sie es erneut.")}catch($){console.error("Login error:",$),v("Ein Fehler ist aufgetreten. Bitte versuchen Sie es erneut.")}finally{D(!1)}},k=_=>{localStorage.removeItem("bewerbungstrainer_demo_pending"),l&&l(_),S(""),d(""),O(!1),s&&G&&s(G),n&&n()},w=async()=>{localStorage.removeItem("bewerbungstrainer_demo_pending");try{i&&await i()}catch(_){console.error("[LOGIN] Error logging out demo user:",_)}O(!1),L(null),S(""),d("")},P=()=>{v(""),S(""),d(""),n&&n()},Y=_=>{_.target===_.currentTarget&&P()};return Le.useEffect(()=>{const _=$=>{$.key==="Escape"&&e&&P()};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[e]),e?t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:Y,role:"dialog","aria-modal":"true","aria-labelledby":"login-modal-title",children:[t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 overflow-hidden",children:[t.jsxs("div",{className:"px-6 py-5",style:p.gradientHeader,children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h2",{id:"login-modal-title",className:"text-xl font-semibold",style:{color:c.headerText},children:"Anmelden"}),t.jsx("button",{onClick:P,className:"p-2 rounded-xl transition-colors hover:bg-white/20",style:{color:c.headerText},"aria-label":"SchlieÃŸen",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o&&t.jsx("div",{className:"mt-4 mb-2 flex justify-center",children:t.jsx("img",{src:o,alt:`${a} Logo`,className:"h-32 max-h-32 max-w-[280px] object-contain"})}),t.jsxs("p",{className:"text-sm mt-1 opacity-80",style:{color:c.headerText},children:["Bei ",a," anmelden"]})]}),t.jsxs("form",{onSubmit:I,className:"p-6 space-y-5",children:[E&&t.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm flex items-start gap-3",children:[t.jsx("svg",{className:"w-5 h-5 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("span",{children:E})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"login-username",className:"block text-sm font-medium text-gray-700 mb-2",children:"Benutzername oder E-Mail"}),t.jsx("input",{type:"text",id:"login-username",value:u,onChange:_=>S(_.target.value),className:"w-full px-4 py-3 text-[15px] border border-slate-200 rounded-xl outline-none transition-all bg-white focus:border-primary focus:ring-3 focus:ring-primary/30",placeholder:"Ihr Benutzername",disabled:T,autoComplete:"username",autoFocus:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"login-password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Passwort"}),t.jsx("input",{type:"password",id:"login-password",value:b,onChange:_=>d(_.target.value),className:"w-full px-4 py-3 text-[15px] border border-slate-200 rounded-xl outline-none transition-all bg-white focus:border-primary focus:ring-3 focus:ring-primary/30",placeholder:"Ihr Passwort",disabled:T,autoComplete:"current-password"})]}),t.jsx("button",{type:"submit",disabled:T,className:"w-full px-6 py-3.5 text-base rounded-xl flex items-center justify-center gap-2.5 transition-all duration-200 disabled:cursor-not-allowed disabled:opacity-70 disabled:bg-slate-400 hover:enabled:-translate-y-0.5 hover:enabled:shadow-lg",style:{...p.primaryButton,boxShadow:T?"none":c.coloredShadow(c.primaryAccent,"md"),background:T?c.disabledBg:p.primaryButton.background},children:T?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{fill:"none",viewBox:"0 0 24 24",className:"w-5 h-5 animate-spin",style:{color:c.buttonText},children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t.jsx("span",{style:{color:c.buttonText},children:"Wird angemeldet..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:c.buttonText,className:"w-5 h-5",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),t.jsx("span",{style:{color:c.buttonText},children:"Anmelden"})]})}),t.jsx("p",{className:"text-xs text-center text-gray-500 pt-2",children:"Verwenden Sie Ihre WordPress-Zugangsdaten zur Anmeldung."})]})]}),t.jsx(zn,{isOpen:U,onClose:w,onSuccess:k})]}):null}function Un({isOpen:e,onClose:n,onAcknowledge:s}){const{branding:r,partnerName:i}=ge(),[a,o]=m.useState(!1),[l,c]=m.useState(null),[p,u]=m.useState(!1),[S,b]=m.useState(""),d=r?.["--primary-accent"]||g.indigo[500],E=r?.["--button-gradient"]||Me.button,v=r?.["--header-gradient"]||Me.header,T=r?.["--header-text"]||g.white,D=r?.["--sidebar-text-color"]||g.white;m.useEffect(()=>{e&&U()},[e]);const U=async()=>{try{const I=window.bewerbungstrainerConfig?.apiUrl||"/wp-json/bewerbungstrainer/v1",w=await(await fetch(`${I}/disclaimer/status`,{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":window.bewerbungstrainerConfig?.nonce||""},credentials:"same-origin"})).json();w.success&&w.disclaimer&&c(w.disclaimer)}catch(I){console.error("[DISCLAIMER] Error fetching status:",I),b("Fehler beim Laden des Hinweises")}},O=async()=>{if(l){u(!0),b("");try{const I=window.bewerbungstrainerConfig?.apiUrl||"/wp-json/bewerbungstrainer/v1",w=await(await fetch(`${I}/disclaimer/acknowledge`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.bewerbungstrainerConfig?.nonce||""},credentials:"same-origin",body:JSON.stringify({disclaimer_id:l.id,dont_show_again:a})})).json();w.success?(s&&s(a),n&&n()):b(w.message||"Fehler bei der BestÃ¤tigung")}catch(I){console.error("[DISCLAIMER] Error acknowledging:",I),b("Ein Fehler ist aufgetreten")}finally{u(!1)}}},G=I=>{I.stopPropagation()};if(m.useEffect(()=>{const I=k=>{k.key==="Escape"&&e&&k.preventDefault()};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[e]),!e||!l)return null;const L=I=>I?I.split(`
`).map((k,w)=>k.trim()?t.jsx("p",{className:"mb-3 last:mb-0",children:k},w):null):null;return t.jsxs("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 z-[99999]",onClick:G,role:"dialog","aria-modal":"true","aria-labelledby":"disclaimer-modal-title",children:[t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-[520px] max-h-[min(85vh,600px)] flex flex-col",children:[t.jsx("div",{className:"px-4 sm:px-6 py-4 flex-shrink-0 rounded-t-2xl",style:{background:v,color:T},children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-xl hidden sm:flex bg-white/20",children:t.jsx(on,{className:"w-5 h-5",style:{color:T}})}),t.jsxs("div",{children:[t.jsx("h2",{id:"disclaimer-modal-title",className:"text-lg sm:text-xl font-semibold",style:{color:T},children:l.title}),t.jsxs("p",{className:"text-xs sm:text-sm mt-0.5 opacity-80",style:{color:T},children:["Version ",l.version]})]})]})}),t.jsxs("div",{className:"p-5 sm:p-6 overflow-y-auto flex-1",children:[S&&t.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm flex items-start gap-3",children:[t.jsx(ln,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),t.jsx("span",{children:S})]}),t.jsx("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-200 mb-4 overflow-y-auto",style:{maxHeight:"180px"},children:t.jsx("div",{className:"text-gray-700 text-sm leading-relaxed",children:L(l.content)})}),t.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 p-3 sm:p-4 bg-blue-50 rounded-xl border border-blue-100 mb-4",children:[t.jsx(cn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 flex-shrink-0 mt-0.5"}),t.jsxs("p",{className:"text-xs sm:text-sm text-blue-700",children:["Mit der BestÃ¤tigung akzeptieren Sie diese Nutzungshinweise fÃ¼r ",i,"."]})]}),t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group mb-4 sm:mb-5",children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"checkbox",checked:a,onChange:I=>o(I.target.checked),className:"sr-only"}),t.jsx("div",{className:"w-5 h-5 rounded border-2 transition-all flex items-center justify-center",style:{borderColor:a?d:g.slate[300],backgroundColor:a?d:"transparent"},children:a&&t.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]}),t.jsx("span",{className:"text-sm text-gray-700 group-hover:text-gray-900 transition-colors",children:"Diesen Hinweis nicht mehr anzeigen"})]}),t.jsx("button",{onClick:O,disabled:p,className:"w-full px-5 py-3 text-[15px] font-semibold border-none rounded-xl cursor-pointer flex items-center justify-center gap-2.5 transition-all shadow-lg disabled:cursor-not-allowed disabled:opacity-70 disabled:shadow-none hover:enabled:-translate-y-0.5 hover:enabled:shadow-xl",style:{color:D,background:p?g.slate[400]:E},children:p?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{fill:"none",viewBox:"0 0 24 24",className:"w-[18px] h-[18px] animate-spin",style:{color:D},children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t.jsx("span",{style:{color:D},children:"Wird gespeichert..."})]}):t.jsx("span",{style:{color:D},children:"Verstanden"})}),t.jsx("p",{className:"text-xs text-center text-gray-500 mt-3",children:a?"Sie werden diesen Hinweis bei zukÃ¼nftigen Anmeldungen nicht mehr sehen.":"Dieser Hinweis wird bei jeder Anmeldung angezeigt."})]})]}),t.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]})}function Wn(){const[e,n]=m.useState(!1),[s,r]=m.useState(!1),[i,a]=m.useState(!1);return{isOpen:e,needsDisclaimer:s,isChecking:i,openDisclaimerModal:()=>n(!0),closeDisclaimerModal:()=>{n(!1),r(!1)},checkDisclaimerStatus:async()=>{a(!0);try{const p=window.bewerbungstrainerConfig?.apiUrl||"/wp-json/bewerbungstrainer/v1",S=await(await fetch(`${p}/disclaimer/status`,{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":window.bewerbungstrainerConfig?.nonce||""},credentials:"same-origin"})).json();if(S.success){const b=S.needs_acknowledgment;return r(b),b&&n(!0),b}return!1}catch(p){return console.error("[DISCLAIMER] Error checking status:",p),!1}finally{a(!1)}}}}const h={HOME:"/",OVERVIEW:"/uebersicht",LIVE_TRAINING:"/live-training",LIVE_TRAINING_SETUP:"/live-training/vorbereitung",LIVE_TRAINING_DEVICES:"/live-training/geraete",LIVE_TRAINING_SESSION:"/live-training/session",LIVE_TRAINING_PROXY:"/live-training/session-proxy",SCENARIO_TRAINING:"/szenario-training",VIDEO_TRAINING:"/wirkungs-analyse",SMART_BRIEFING:"/smart-briefing",DECISION_BOARD:"/entscheidungs-kompass",IKIGAI:"/ikigai-kompass",KI_COACH:"/ki-coach",RHETORIK_GYM:"/rhetorik-gym",RHETORIK_GYM_SESSION:"/rhetorik-gym/session",HISTORY:"/verlauf",SESSION_DETAIL:"/verlauf/:sessionType/:sessionId",USAGE_LIMITS:"/nutzung",ADMIN:"/admin",ADMIN_ROLEPLAYS:"/admin/szenarien",ADMIN_SIMULATOR:"/admin/simulator",ADMIN_VIDEO:"/admin/video",ADMIN_PARTNERS:"/admin/partner"},Vn=[];function Hn(e){return Vn.some(n=>e===n||e.startsWith(n+"/"))}const Yn={overview:h.OVERVIEW,dashboard:h.LIVE_TRAINING,roleplay_variables:h.LIVE_TRAINING_SETUP,roleplay_device_setup:h.LIVE_TRAINING_DEVICES,roleplay:h.LIVE_TRAINING_SESSION,roleplay_proxy:h.LIVE_TRAINING_PROXY,simulator:h.SCENARIO_TRAINING,video_training:h.VIDEO_TRAINING,smart_briefing:h.SMART_BRIEFING,decision_board:h.DECISION_BOARD,ikigai:h.IKIGAI,ki_coach:h.KI_COACH,history:h.HISTORY,session_detail:h.SESSION_DETAIL,usage_limits:h.USAGE_LIMITS,gym:h.RHETORIK_GYM,gym_klassiker:h.RHETORIK_GYM,gym_session:h.RHETORIK_GYM_SESSION,admin:h.ADMIN,admin_roleplays:h.ADMIN_ROLEPLAYS,admin_simulator:h.ADMIN_SIMULATOR,admin_video:h.ADMIN_VIDEO,admin_partners:h.ADMIN_PARTNERS},ht={[h.HOME]:"overview",[h.OVERVIEW]:"overview",[h.LIVE_TRAINING]:"dashboard",[h.LIVE_TRAINING_SETUP]:"dashboard",[h.LIVE_TRAINING_DEVICES]:"dashboard",[h.LIVE_TRAINING_SESSION]:"dashboard",[h.LIVE_TRAINING_PROXY]:"dashboard",[h.SCENARIO_TRAINING]:"simulator",[h.VIDEO_TRAINING]:"video_training",[h.SMART_BRIEFING]:"smart_briefing",[h.DECISION_BOARD]:"decision_board",[h.IKIGAI]:"ikigai",[h.KI_COACH]:"ki_coach",[h.RHETORIK_GYM]:"gym_klassiker",[h.RHETORIK_GYM_SESSION]:"gym_klassiker",[h.HISTORY]:"history",[h.USAGE_LIMITS]:"usage_limits",[h.ADMIN]:"admin",[h.ADMIN_ROLEPLAYS]:"admin_roleplays",[h.ADMIN_SIMULATOR]:"admin_simulator",[h.ADMIN_VIDEO]:"admin_video",[h.ADMIN_PARTNERS]:"admin_partners"};function Jn(e){return ht[e]?ht[e]:e.startsWith("/verlauf/")?"history":"overview"}var Pe;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(Pe||(Pe={}));var ze;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(ze||(ze={}));var Be;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Be||(Be={}));const Ke=["user","model","function","system"];var Ue;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(Ue||(Ue={}));var We;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(We||(We={}));var Ve;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Ve||(Ve={}));var He;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(He||(He={}));var me;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER"})(me||(me={}));var Ye;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(Ye||(Ye={}));var Je;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(Je||(Je={}));var qe;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(qe||(qe={}));class F extends Error{constructor(n){super(`[GoogleGenerativeAI Error]: ${n}`)}}class ie extends F{constructor(n,s){super(n),this.response=s}}class Xe extends F{constructor(n,s,r,i){super(n),this.status=s,this.statusText=r,this.errorDetails=i}}class Q extends F{}const qn="https://generativelanguage.googleapis.com",Zn="v1beta",Xn="0.21.0",Qn="genai-js";var oe;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(oe||(oe={}));class es{constructor(n,s,r,i,a){this.model=n,this.task=s,this.apiKey=r,this.stream=i,this.requestOptions=a}toString(){var n,s;const r=((n=this.requestOptions)===null||n===void 0?void 0:n.apiVersion)||Zn;let a=`${((s=this.requestOptions)===null||s===void 0?void 0:s.baseUrl)||qn}/${r}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function ts(e){const n=[];return e?.apiClient&&n.push(e.apiClient),n.push(`${Qn}/${Xn}`),n.join(" ")}async function ns(e){var n;const s=new Headers;s.append("Content-Type","application/json"),s.append("x-goog-api-client",ts(e.requestOptions)),s.append("x-goog-api-key",e.apiKey);let r=(n=e.requestOptions)===null||n===void 0?void 0:n.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(i){throw new Q(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${i.message}`)}for(const[i,a]of r.entries()){if(i==="x-goog-api-key")throw new Q(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new Q(`Header name ${i} can only be set using the apiClient field`);s.append(i,a)}}return s}async function ss(e,n,s,r,i,a){const o=new es(e,n,s,r,a);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},os(a)),{method:"POST",headers:await ns(o),body:i})}}async function ve(e,n,s,r,i,a={},o=fetch){const{url:l,fetchOptions:c}=await ss(e,n,s,r,i,a);return rs(l,c,o)}async function rs(e,n,s=fetch){let r;try{r=await s(e,n)}catch(i){is(i,e)}return r.ok||await as(r,e),r}function is(e,n){let s=e;throw e instanceof Xe||e instanceof Q||(s=new F(`Error fetching from ${n.toString()}: ${e.message}`),s.stack=e.stack),s}async function as(e,n){let s="",r;try{const i=await e.json();s=i.error.message,i.error.details&&(s+=` ${JSON.stringify(i.error.details)}`,r=i.error.details)}catch{}throw new Xe(`Error fetching from ${n.toString()}: [${e.status} ${e.statusText}] ${s}`,e.status,e.statusText,r)}function os(e){const n={};if(e?.signal!==void 0||e?.timeout>=0){const s=new AbortController;e?.timeout>=0&&setTimeout(()=>s.abort(),e.timeout),e?.signal&&e.signal.addEventListener("abort",()=>{s.abort()}),n.signal=s.signal}return n}function Qe(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),je(e.candidates[0]))throw new ie(`${re(e)}`,e);return ls(e)}else if(e.promptFeedback)throw new ie(`Text not available. ${re(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),je(e.candidates[0]))throw new ie(`${re(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),mt(e)[0]}else if(e.promptFeedback)throw new ie(`Function call not available. ${re(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),je(e.candidates[0]))throw new ie(`${re(e)}`,e);return mt(e)}else if(e.promptFeedback)throw new ie(`Function call not available. ${re(e)}`,e)},e}function ls(e){var n,s,r,i;const a=[];if(!((s=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0)&&s.parts)for(const o of(i=(r=e.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)o.text&&a.push(o.text),o.executableCode&&a.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&a.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function mt(e){var n,s,r,i;const a=[];if(!((s=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0)&&s.parts)for(const o of(i=(r=e.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)o.functionCall&&a.push(o.functionCall);if(a.length>0)return a}const cs=[me.RECITATION,me.SAFETY,me.LANGUAGE];function je(e){return!!e.finishReason&&cs.includes(e.finishReason)}function re(e){var n,s,r;let i="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)i+="Response was blocked",!((n=e.promptFeedback)===null||n===void 0)&&n.blockReason&&(i+=` due to ${e.promptFeedback.blockReason}`),!((s=e.promptFeedback)===null||s===void 0)&&s.blockReasonMessage&&(i+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((r=e.candidates)===null||r===void 0)&&r[0]){const a=e.candidates[0];je(a)&&(i+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(i+=`: ${a.finishMessage}`))}return i}function Ee(e){return this instanceof Ee?(this.v=e,this):new Ee(e)}function ds(e,n,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=s.apply(e,n||[]),i,a=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(b){r[b]&&(i[b]=function(d){return new Promise(function(E,v){a.push([b,d,E,v])>1||l(b,d)})})}function l(b,d){try{c(r[b](d))}catch(E){S(a[0][3],E)}}function c(b){b.value instanceof Ee?Promise.resolve(b.value.v).then(p,u):S(a[0][2],b)}function p(b){l("next",b)}function u(b){l("throw",b)}function S(b,d){b(d),a.shift(),a.length&&l(a[0][0],a[0][1])}}const gt=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function us(e){const n=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),s=gs(n),[r,i]=s.tee();return{stream:ms(r),response:hs(i)}}async function hs(e){const n=[],s=e.getReader();for(;;){const{done:r,value:i}=await s.read();if(r)return Qe(ps(n));n.push(i)}}function ms(e){return ds(this,arguments,function*(){const s=e.getReader();for(;;){const{value:r,done:i}=yield Ee(s.read());if(i)break;yield yield Ee(Qe(r))}})}function gs(e){const n=e.getReader();return new ReadableStream({start(r){let i="";return a();function a(){return n.read().then(({value:o,done:l})=>{if(l){if(i.trim()){r.error(new F("Failed to parse stream"));return}r.close();return}i+=o;let c=i.match(gt),p;for(;c;){try{p=JSON.parse(c[1])}catch{r.error(new F(`Error parsing JSON response: "${c[1]}"`));return}r.enqueue(p),i=i.substring(c[0].length),c=i.match(gt)}return a()})}}})}function ps(e){const n=e[e.length-1],s={promptFeedback:n?.promptFeedback};for(const r of e){if(r.candidates)for(const i of r.candidates){const a=i.index;if(s.candidates||(s.candidates=[]),s.candidates[a]||(s.candidates[a]={index:i.index}),s.candidates[a].citationMetadata=i.citationMetadata,s.candidates[a].groundingMetadata=i.groundingMetadata,s.candidates[a].finishReason=i.finishReason,s.candidates[a].finishMessage=i.finishMessage,s.candidates[a].safetyRatings=i.safetyRatings,i.content&&i.content.parts){s.candidates[a].content||(s.candidates[a].content={role:i.content.role||"user",parts:[]});const o={};for(const l of i.content.parts)l.text&&(o.text=l.text),l.functionCall&&(o.functionCall=l.functionCall),l.executableCode&&(o.executableCode=l.executableCode),l.codeExecutionResult&&(o.codeExecutionResult=l.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),s.candidates[a].content.parts.push(o)}}r.usageMetadata&&(s.usageMetadata=r.usageMetadata)}return s}async function _t(e,n,s,r){const i=await ve(n,oe.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(s),r);return us(i)}async function Rt(e,n,s,r){const a=await(await ve(n,oe.GENERATE_CONTENT,e,!1,JSON.stringify(s),r)).json();return{response:Qe(a)}}function Ct(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function we(e){let n=[];if(typeof e=="string")n=[{text:e}];else for(const s of e)typeof s=="string"?n.push({text:s}):n.push(s);return fs(n)}function fs(e){const n={role:"user",parts:[]},s={role:"function",parts:[]};let r=!1,i=!1;for(const a of e)"functionResponse"in a?(s.parts.push(a),i=!0):(n.parts.push(a),r=!0);if(r&&i)throw new F("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new F("No content is provided for sending chat message.");return r?n:s}function xs(e,n){var s;let r={model:n?.model,generationConfig:n?.generationConfig,safetySettings:n?.safetySettings,tools:n?.tools,toolConfig:n?.toolConfig,systemInstruction:n?.systemInstruction,cachedContent:(s=n?.cachedContent)===null||s===void 0?void 0:s.name,contents:[]};const i=e.generateContentRequest!=null;if(e.contents){if(i)throw new Q("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=e.contents}else if(i)r=Object.assign(Object.assign({},r),e.generateContentRequest);else{const a=we(e);r.contents=[a]}return{generateContentRequest:r}}function pt(e){let n;return e.contents?n=e:n={contents:[we(e)]},e.systemInstruction&&(n.systemInstruction=Ct(e.systemInstruction)),n}function bs(e){return typeof e=="string"||Array.isArray(e)?{content:we(e)}:e}const ft=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],ys={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Ss(e){let n=!1;for(const s of e){const{role:r,parts:i}=s;if(!n&&r!=="user")throw new F(`First content should be with role 'user', got ${r}`);if(!Ke.includes(r))throw new F(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(Ke)}`);if(!Array.isArray(i))throw new F("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new F("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const l of i)for(const c of ft)c in l&&(a[c]+=1);const o=ys[r];for(const l of ft)if(!o.includes(l)&&a[l]>0)throw new F(`Content with role '${r}' can't contain '${l}' part`);n=!0}}const xt="SILENT_ERROR";class Tt{constructor(n,s,r,i={}){this.model=s,this.params=r,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=n,r?.history&&(Ss(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(n,s={}){var r,i,a,o,l,c;await this._sendPromise;const p=we(n),u={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,p]},S=Object.assign(Object.assign({},this._requestOptions),s);let b;return this._sendPromise=this._sendPromise.then(()=>Rt(this._apiKey,this.model,u,S)).then(d=>{var E;if(d.response.candidates&&d.response.candidates.length>0){this._history.push(p);const v=Object.assign({parts:[],role:"model"},(E=d.response.candidates)===null||E===void 0?void 0:E[0].content);this._history.push(v)}else{const v=re(d.response);v&&console.warn(`sendMessage() was unsuccessful. ${v}. Inspect response object for details.`)}b=d}),await this._sendPromise,b}async sendMessageStream(n,s={}){var r,i,a,o,l,c;await this._sendPromise;const p=we(n),u={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,p]},S=Object.assign(Object.assign({},this._requestOptions),s),b=_t(this._apiKey,this.model,u,S);return this._sendPromise=this._sendPromise.then(()=>b).catch(d=>{throw new Error(xt)}).then(d=>d.response).then(d=>{if(d.candidates&&d.candidates.length>0){this._history.push(p);const E=Object.assign({},d.candidates[0].content);E.role||(E.role="model"),this._history.push(E)}else{const E=re(d);E&&console.warn(`sendMessageStream() was unsuccessful. ${E}. Inspect response object for details.`)}}).catch(d=>{d.message!==xt&&console.error(d)}),b}}async function Es(e,n,s,r){return(await ve(n,oe.COUNT_TOKENS,e,!1,JSON.stringify(s),r)).json()}async function ws(e,n,s,r){return(await ve(n,oe.EMBED_CONTENT,e,!1,JSON.stringify(s),r)).json()}async function Is(e,n,s,r){const i=s.requests.map(o=>Object.assign(Object.assign({},o),{model:n}));return(await ve(n,oe.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:i}),r)).json()}class Ze{constructor(n,s,r={}){this.apiKey=n,this._requestOptions=r,s.model.includes("/")?this.model=s.model:this.model=`models/${s.model}`,this.generationConfig=s.generationConfig||{},this.safetySettings=s.safetySettings||[],this.tools=s.tools,this.toolConfig=s.toolConfig,this.systemInstruction=Ct(s.systemInstruction),this.cachedContent=s.cachedContent}async generateContent(n,s={}){var r;const i=pt(n),a=Object.assign(Object.assign({},this._requestOptions),s);return Rt(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),a)}async generateContentStream(n,s={}){var r;const i=pt(n),a=Object.assign(Object.assign({},this._requestOptions),s);return _t(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),a)}startChat(n){var s;return new Tt(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},n),this._requestOptions)}async countTokens(n,s={}){const r=xs(n,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),s);return Es(this.apiKey,this.model,r,i)}async embedContent(n,s={}){const r=bs(n),i=Object.assign(Object.assign({},this._requestOptions),s);return ws(this.apiKey,this.model,r,i)}async batchEmbedContents(n,s={}){const r=Object.assign(Object.assign({},this._requestOptions),s);return Is(this.apiKey,this.model,n,r)}}class jt{constructor(n){this.apiKey=n}getGenerativeModel(n,s){if(!n.model)throw new F("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Ze(this.apiKey,n,s)}getGenerativeModelFromCachedContent(n,s,r){if(!n.name)throw new Q("Cached content must contain a `name` field.");if(!n.model)throw new Q("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const o of i)if(s?.[o]&&n[o]&&s?.[o]!==n[o]){if(o==="model"){const l=s.model.startsWith("models/")?s.model.replace("models/",""):s.model,c=n.model.startsWith("models/")?n.model.replace("models/",""):n.model;if(l===c)continue}throw new Q(`Different value for "${o}" specified in modelParams (${s[o]}) and cachedContent (${n[o]})`)}const a=Object.assign(Object.assign({},s),{model:n.model,tools:n.tools,toolConfig:n.toolConfig,systemInstruction:n.systemInstruction,cachedContent:n});return new Ze(this.apiKey,a,r)}}const Ir=Object.freeze(Object.defineProperty({__proto__:null,get BlockReason(){return He},ChatSession:Tt,get DynamicRetrievalMode(){return qe},get ExecutableCodeLanguage(){return ze},get FinishReason(){return me},get FunctionCallingMode(){return Je},GenerativeModel:Ze,GoogleGenerativeAI:jt,GoogleGenerativeAIError:F,GoogleGenerativeAIFetchError:Xe,GoogleGenerativeAIRequestInputError:Q,GoogleGenerativeAIResponseError:ie,get HarmBlockThreshold(){return We},get HarmCategory(){return Ue},get HarmProbability(){return Ve},get Outcome(){return Be},POSSIBLE_ROLES:Ke,get SchemaType(){return Pe},get TaskType(){return Ye}},Symbol.toStringTag,{value:"Module"})),Ot={FALLBACK_ORDER:["gemini-2.5-flash","gemini-2.0-flash","gemini-1.5-flash-latest"]},Ie={API_KEY_MISSING:"Gemini API key is required",AUDIO_FILE_MISSING:"Audio file is required",TRANSCRIPT_EMPTY:"Transcript is empty",JSON_PARSE_FAILED:"Fehler beim Parsen der Antwort"},ue={overall:"Gesamteindruck",content:"Inhalt & Argumentation",structure:"Struktur & Aufbau",relevance:"Relevanz & Bezug",delivery:"PrÃ¤sentation & Auftreten"},bt={general:{role:"Kommunikations-Coach",intro:"Du bist ein erfahrener Kommunikations-Coach. Analysiere das folgende GesprÃ¤ch und gib konstruktives, praxisnahes Feedback auf Deutsch.",ratingDimensions:ue,analysisFocus:["Klarheit und Struktur der Kommunikation","Aktives ZuhÃ¶ren und Eingehen auf den GesprÃ¤chspartner","Ãœberzeugungskraft und Argumentation","ProfessionalitÃ¤t und Auftreten"]},interview:{role:"Karriere-Coach",intro:"Du bist ein erfahrener Karriere-Coach und Interview-Trainer. Analysiere das folgende VorstellungsgesprÃ¤ch und gib konstruktives, praxisnahes Feedback auf Deutsch.",ratingDimensions:ue,analysisFocus:["Struktur und Klarheit der Antworten (STAR-Methode)","Relevante Beispiele und messbare Erfolge","Authentische Motivation und Interesse","Selbstbewusstsein und professionelles Auftreten"]},sales:{role:"Vertriebs-Coach",intro:"Du bist ein erfahrener Sales-Coach und Vertriebstrainer. Analysiere das folgende VerkaufsgesprÃ¤ch und gib konstruktives, praxisnahes Feedback auf Deutsch.",ratingDimensions:ue,analysisFocus:["QualitÃ¤t der Bedarfsanalyse und Fragetechnik","Nutzenargumentation und Mehrwert-Kommunikation","Umgang mit EinwÃ¤nden und Preisdiskussionen","Verbindlichkeit und Abschlussorientierung"]},leadership:{role:"FÃ¼hrungskrÃ¤fte-Coach",intro:"Du bist ein erfahrener Leadership-Coach und FÃ¼hrungskrÃ¤ftetrainer. Analysiere das folgende FÃ¼hrungsgesprÃ¤ch und gib konstruktives, praxisnahes Feedback auf Deutsch.",ratingDimensions:ue,analysisFocus:["Klarheit in der Kommunikation von Zielen und Erwartungen","WertschÃ¤tzung und Anerkennung des Mitarbeiters","Balance zwischen FÃ¼hrung und Autonomie","Konstruktives Feedback und Entwicklungsorientierung"]},conflict:{role:"Konflikt- und Mediations-Coach",intro:"Du bist ein erfahrener Konflikt-Coach und Mediator. Analysiere das folgende KonfliktgesprÃ¤ch und gib konstruktives, praxisnahes Feedback auf Deutsch.",ratingDimensions:ue,analysisFocus:["Deeskalationstechniken und Ruhe bewahren","Aktives ZuhÃ¶ren und VerstÃ¤ndnis zeigen","NeutralitÃ¤t und Allparteilichkeit","Konstruktive LÃ¶sungsfindung"]},customer:{role:"Kundenservice-Coach",intro:"Du bist ein erfahrener Service-Coach und Kundenservice-Trainer. Analysiere das folgende KundengesprÃ¤ch und gib konstruktives, praxisnahes Feedback auf Deutsch.",ratingDimensions:ue,analysisFocus:["Schnelle und effektive ProblemlÃ¶sung","Freundlichkeit und Serviceorientierung","Klare Kommunikation und VerstÃ¤ndlichkeit","Proaktives Handeln und Kundenerwartungen Ã¼bertreffen"]}};function Ns(e,n,s,r){const i=n||e.intro,a=e.ratingDimensions,o=e.analysisFocus;Object.keys(a).forEach(p=>{});const l=Object.entries(a).map(([p,u])=>`    "${p}": "1-10 fÃ¼r ${u}"`).join(`,
`);let c=`${i}

## BEWERTUNGS-DIMENSIONEN
${Object.entries(a).map(([p,u])=>`- **${u}** (${p})`).join(`
`)}

## ANALYSE-FOKUS
${o.map(p=>`- ${p}`).join(`
`)}
`;return s&&(c+=`
## ZUSÃ„TZLICHER FOKUS
${s}
`),c+=`
## BEWERTUNGSSKALA (1-10)
- 1-3: Deutliche Defizite, grundlegende Verbesserungen nÃ¶tig
- 4-5: Basis vorhanden, aber wichtige Aspekte fehlen
- 6-7: Solide Leistung mit Verbesserungspotenzial
- 8-9: Sehr gut, nur Feinschliff nÃ¶tig
- 10: Exzellent, kaum Verbesserungspotenzial

## AUSGABEFORMAT
Antworte NUR mit diesem JSON-Objekt:
{
  "summary": "2-3 SÃ¤tze Gesamteindruck - was war der rote Faden?",
  "strengths": [
    "StÃ¤rke 1: Konkrete positive Beobachtung mit Beispiel aus dem GesprÃ¤ch",
    "StÃ¤rke 2: Was gut gemacht wurde"
  ],
  "improvements": [
    "Verbesserung 1: Was genau war suboptimal und warum?",
    "Verbesserung 2: Konkreter Verbesserungsbereich"
  ],
  "tips": [
    "Tipp 1: Konkreter, sofort umsetzbarer Ratschlag",
    "Tipp 2: Praktische Empfehlung fÃ¼r das nÃ¤chste GesprÃ¤ch"
  ],
  "rating": {
${l}
  }
}

## WICHTIG
- Gib 2-4 Items pro Kategorie (strengths, improvements, tips)
- Beziehe dich auf KONKRETE Aussagen aus dem Transkript
- Formuliere Verbesserungen konstruktiv, nicht kritisierend
- Tipps mÃ¼ssen sofort umsetzbar sein
- Bewerte NUR den/die ${r}, NICHT den GesprÃ¤chspartner`,c}function vs(e,n={}){const{coachType:s="general",customIntro:r="",extraFocus:i="",feedbackPrompt:a="",roleType:o="interview",userRoleLabel:l="Bewerber",agentRoleLabel:c="GesprÃ¤chspartner"}=n;if(a&&a.trim())return As(a,e);const p=bt[s]||bt.general;return`${Ns(p,r,i,l)}

---
TRANSKRIPT:
${e}

JSON Feedback:`}const yt=`
WICHTIG: Antworte NUR mit einem JSON-Objekt in diesem Format:
{
  "summary": "Eine kurze Zusammenfassung des Gesamteindrucks (2-3 SÃ¤tze)",
  "strengths": [
    "StÃ¤rke 1: Konkrete positive Beobachtung",
    "StÃ¤rke 2: Was gut gemacht wurde"
  ],
  "improvements": [
    "Verbesserung 1: Konkreter Verbesserungsbereich",
    "Verbesserung 2: Was besser gemacht werden kÃ¶nnte"
  ],
  "tips": [
    "Tipp 1: Konkrete, umsetzbare Empfehlung",
    "Tipp 2: Praktischer Ratschlag"
  ],
  "rating": {
    "overall": "1-10 Gesamtbewertung der Leistung"
  }
}`;function As(e,n){if(e.includes("${transcript}")){const s=e.replace("${transcript}",n);return s.toLowerCase().includes('"summary"')||s.toLowerCase().includes('"strengths"')?s:`${s}
${yt}`}return`${e}

=== TRANSKRIPT ===
${n}
=== ENDE TRANSKRIPT ===

Analysiere das obige Transkript und gib dein Feedback.
${yt}`}const ks=["Ã„hm","Ã„h","Ã–h","Mh","Halt","Eigentlich","Sozusagen","Quasi","Irgendwie","Also","Genau","Ja also"];function Mt(){return`${ks.slice(0,9).map(n=>`"${n}"`).join(", ")}, "Also" (am Satzanfang), "Genau" (als FÃ¼llwort), "Ja also"`}const ae="[Keine Sprache erkannt]";function Dt(){return`ABSOLUTE REGEL - KEINE HALLUZINATION:
Du DARFST NUR transkribieren, was TATSÃ„CHLICH in der Audio-Datei gesprochen wird.
- Bei Stille, Rauschen, oder unverstÃ¤ndlichem Audio: transcript = "${ae}"
- Bei nur 1-2 Sekunden Audio ohne klare Sprache: transcript = "${ae}"
- ERFINDE NIEMALS WÃ¶rter, SÃ¤tze oder Inhalte!
- Wenn du unsicher bist, ob etwas gesagt wurde: NICHT transkribieren!
- Wenn jemand nur "WeiÃŸ ich nicht" oder "Keine Ahnung" sagt, transkribiere GENAU DAS
- Eine kurze Antwort wie "Ich weiÃŸ es nicht" ist eine valide Transkription
- HALLUZINIERE KEINE ausfÃ¼hrlichen Antworten wenn der Sprecher das nicht gesagt hat`}function Lt(e="game"){const n="Es wurde keine Sprache erkannt. Bitte stellen Sie sicher, dass Ihr Mikrofon funktioniert und Sie wÃ¤hrend der Aufnahme sprechen.";switch(e){case"game":return{transcript:ae,filler_words:[],content_score:0,content_feedback:n};case"analysis":return{audio_metrics:{summary_text:n,confidence_score:0,speech_cleanliness:{score:0,total_filler_count:0,filler_word_analysis:[],feedback:"Keine Sprache zur Analyse erkannt."},pacing:{rating:"keine_sprache",estimated_wpm:0,issues_detected:[],feedback:"Keine Sprache zur Analyse erkannt."},tonality:{rating:"keine_sprache",emotional_tone:"neutral",highlights:[],feedback:"Keine Sprache zur Analyse erkannt."}}};case"simulator":return{transcript:ae,feedback:{summary:n,strengths:[],improvements:["Bitte versuchen Sie es erneut und sprechen Sie klar und deutlich ins Mikrofon."],tips:["Achten Sie darauf, dass Ihr Mikrofon funktioniert und nicht stummgeschaltet ist."],scores:{content:0,structure:0,relevance:0,delivery:0,overall:0}},audio_metrics:{speech_rate:"keine_sprache",filler_words:{count:0,words:[],severity:"keine"},confidence_score:0,clarity_score:0,notes:"Keine Sprache erkannt"}};default:return{transcript:ae,error:n}}}const $t=5e3;function _s(e={}){const{userRoleLabel:n="Bewerber",agentRoleLabel:s="GesprÃ¤chspartner",roleType:r="interview",hasTwoVoices:i=!0,transcript:a=null}=e,o=i?`
WICHTIG - STIMMEN-TRENNUNG:
Die Aufnahme enthÃ¤lt ZWEI Stimmen:
1. ${s.toUpperCase()} (KI-Stimme, synthetisch, akzentfrei)
2. ${n.toUpperCase()} (menschliche Stimme, natÃ¼rliche Varianz)

Der/Die ${s} erÃ¶ffnet typischerweise das GesprÃ¤ch.
Analysiere AUSSCHLIESSLICH die Stimme des/der ${n.toUpperCase()}.
Ignoriere alle Ã„uÃŸerungen des/der ${s} komplett.
`:`
STIMM-ANALYSE:
Die Aufnahme enthÃ¤lt nur EINE Stimme: ${n.toUpperCase()}.
Analysiere diese Stimme vollstÃ¤ndig.
`,l=a?`
TRANSKRIPT-REFERENZ:
Das folgende Transkript zeigt, wer was gesagt hat. Nutze es zur Orientierung:

${a}

Hinweis: Das Transkript hilft bei der Zuordnung. Die paraverbale Analyse (WIE etwas gesagt wird)
basiert aber auf dem AUDIO - nicht auf dem Text.
`:"";return`Du bist ein professioneller Voice-Coach und Kommunikationsexperte bei "KarriereHeld".
Deine Aufgabe: Analysiere die paraverbale Kommunikation im Audio.

Paraverbal = WIE etwas gesagt wird (nicht WAS gesagt wird).

${Dt()}
${o}
${l}
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ANALYSE-DIMENSIONEN (nur ${n.toUpperCase()})
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. FÃœLLWÃ–RTER (Speech Cleanliness)
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Erkenne diese FÃ¼llwÃ¶rter: ${Mt()}

   FÃ¼r jedes FÃ¼llwort dokumentiere:
   - Exakter Zeitstempel (MM:SS)
   - Kontext (z.B. "Satzanfang", "beim Nachdenken", "Themenwechsel")

   BewertungsmaÃŸstab:
   - 0 FÃ¼llwÃ¶rter: 100 Punkte (Exzellent)
   - 1-2 FÃ¼llwÃ¶rter: 85-95 Punkte (Sehr gut)
   - 3-5 FÃ¼llwÃ¶rter: 65-80 Punkte (Akzeptabel)
   - 6-10 FÃ¼llwÃ¶rter: 40-60 Punkte (Verbesserungsbedarf)
   - 10+ FÃ¼llwÃ¶rter: 0-35 Punkte (Deutlicher Ãœbungsbedarf)

2. SPRECHTEMPO (Pacing)
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Optimales Tempo: 120-150 WÃ¶rter pro Minute (WPM)

   Achte auf:
   - Durchschnittliches Tempo
   - Tempo-Variationen (monoton vs. dynamisch)
   - AuffÃ¤llige Stellen (zu schnell/langsam) mit Zeitstempel

   Bewertung:
   - "optimal": 120-150 WPM, natÃ¼rliche Variation
   - "zu_schnell": >160 WPM, gehetzt, atemlos
   - "zu_langsam": <100 WPM, schleppend, unsicher
   - "ungleichmaessig": Starke Schwankungen

3. TONALITÃ„T (Melodie & Betonung)
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Analysiere:
   - Stimmmelodie (monoton / natÃ¼rlich / lebendig)
   - Betonungen (passend / fehlend / Ã¼bertrieben)
   - Emotionale FÃ¤rbung (neutral / engagiert / nervÃ¶s)

   Dokumentiere Highlights und Lowlights:
   - Positive Momente: SouverÃ¤ne Passagen, gute Betonungen
   - Negative Momente: Unsichere Stellen, StimmbrÃ¼che, Monotonie

4. SELBSTSICHERHEIT (Confidence)
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Gesamteindruck: Wie sicher und kompetent wirkt die Stimme?

   Indikatoren fÃ¼r hohe Confidence:
   âœ“ Klare, feste Stimme
   âœ“ Angemessenes Tempo
   âœ“ Gute Pausen (bewusst, nicht nervÃ¶s)
   âœ“ NatÃ¼rliche Betonungen

   Indikatoren fÃ¼r niedrige Confidence:
   âœ— Zittrige oder leise Stimme
   âœ— Viele FÃ¼llwÃ¶rter
   âœ— Hastiges Sprechen
   âœ— Aufsteigende Satzenden (Unsicherheit)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
OUTPUT FORMAT (nur valides JSON, kein Markdown)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

{
  "audio_metrics": {
    "summary_text": "2-3 SÃ¤tze Gesamtfazit zur Stimmwirkung des/der ${n}. Was war gut? Was kann verbessert werden?",
    "confidence_score": <0-100>,

    "speech_cleanliness": {
      "score": <0-100>,
      "total_filler_count": <Anzahl>,
      "filler_word_analysis": [
        {
          "word": "Ã„hm",
          "count": <Anzahl>,
          "examples": [
            {"timestamp": "00:45", "context": "Satzanfang"},
            {"timestamp": "01:20", "context": "beim Nachdenken"}
          ]
        }
      ],
      "feedback": "Konkreter Tipp zur Vermeidung"
    },

    "pacing": {
      "rating": "optimal" | "zu_schnell" | "zu_langsam" | "ungleichmaessig",
      "estimated_wpm": <Zahl>,
      "issues_detected": [
        {"timestamp": "02:10", "issue": "Beschreibung des Problems"}
      ],
      "feedback": "Konkreter Tipp zum Tempo"
    },

    "tonality": {
      "rating": "monoton" | "natÃ¼rlich" | "lebendig",
      "emotional_tone": "neutral" | "engagiert" | "nervÃ¶s" | "enthusiastisch",
      "highlights": [
        {"timestamp": "00:30", "type": "positive", "note": "SouverÃ¤ner Einstieg"},
        {"timestamp": "03:15", "type": "negative", "note": "Stimme wird unsicher"}
      ],
      "feedback": "Konkreter Tipp zur Stimmmelodie"
    }
  }
}

Beginne jetzt mit der Analyse:`}const St=["Warum bin ich die beste Wahl fÃ¼r diese Position?","Meine grÃ¶ÃŸte berufliche Errungenschaft","Was motiviert mich jeden Tag aufzustehen?","Wie ich mit schwierigen Kollegen umgehe","Mein FÃ¼hrungsstil in 60 Sekunden","Die wichtigste Lektion meiner Karriere","Wie ich unter Druck arbeite","Warum Teamarbeit mir wichtig ist","Wenn ich ein Tier wÃ¤re, welches und warum?","Mein perfekter Tag sieht so aus...","Die beste Erfindung der Menschheit","Wenn ich die Welt verÃ¤ndern kÃ¶nnte...","Ein Buch, das mein Leben verÃ¤ndert hat","Mein Lieblingshobby und warum","Drei Dinge, die ich niemals machen wÃ¼rde","Warum Scheitern wichtig ist","Meine kontroverseste Meinung","Wie ich mit Kritik umgehe"],Et=["Warum sollten wir ausgerechnet Sie einstellen und nicht einen der 50 anderen Bewerber?","Ihr Lebenslauf zeigt eine LÃ¼cke. Was haben Sie in dieser Zeit wirklich gemacht?","Nennen Sie mir drei echte SchwÃ¤chen - und bitte keine getarnten StÃ¤rken.","Warum haben Sie Ihren letzten Job wirklich verlassen?","Wo sehen Sie sich in 5 Jahren? Und seien Sie ehrlich.","Was wÃ¼rde Ihr schlimmster Feind Ã¼ber Sie sagen?","Wenn ich Ihren letzten Chef anrufe - was wird er mir sagen?","Sie sind offensichtlich Ã¼berqualifiziert. Werden Sie nicht schnell gelangweilt sein?","Warum haben Sie in Ihrer Karriere nicht mehr erreicht?","Ãœberzeugen Sie mich in 30 Sekunden, dass Sie kein Risiko sind.","Was war Ihr grÃ¶ÃŸter beruflicher Misserfolg?","Haben Sie andere Angebote? Warum sind wir nicht Ihre erste Wahl?"];function Rs(e="Elevator Pitch",n=60){return`AUDIO-TRANSKRIPTION UND ANALYSE

THEMA: "${e}"

${Dt()}

DEINE AUFGABE (NUR bei klar erkennbarer Sprache):
1. TRANSKRIBIEREN: Schreibe WÃ–RTLICH was gesprochen wird - nichts hinzufÃ¼gen
2. FÃœLLWÃ–RTER: Finde diese WÃ¶rter im Transkript: ${Mt()}
3. INHALT: Bewerte wie gut die Antwort zum Thema passt (0-40 Punkte)

INHALTSBEWERTUNG (content_score):
- 0: Keine Sprache / am Thema vorbei / unverstÃ¤ndlich
- 10: Nur ansatzweise zum Thema
- 20: Teilweise zum Thema, aber oberflÃ¤chlich
- 30: Gut zum Thema, mit Substanz
- 40: Exzellent, strukturiert und Ã¼berzeugend

OUTPUT - NUR valides JSON:
{
  "transcript": "${ae}",
  "filler_words": [],
  "content_score": 0,
  "content_feedback": "Keine Sprache erkannt."
}

ODER bei erkannter Sprache:
{
  "transcript": "Das was tatsÃ¤chlich gesagt wurde...",
  "filler_words": [{"word": "Ã„hm", "count": 1}],
  "content_score": 30,
  "content_feedback": "Kurzes Feedback (1-2 SÃ¤tze)"
}

ANALYSE DER AUDIO-DATEI:`}const Cs={excellent:{range:[90,100],messages:["Perfekt! Du bist ein Rhetorik-Champion!","Wow! Makellose PrÃ¤sentation!","Ausgezeichnet! So sieht ein Profi aus!"],emoji:"ðŸ†"},good:{range:[70,89],messages:["Sehr gut! Nur kleine Verbesserungen nÃ¶tig.","Stark! Fast perfekt!","Beeindruckend! Weiter so!"],emoji:"ðŸŒŸ"},medium:{range:[50,69],messages:["Solide Leistung! Ãœbung macht den Meister.","Guter Ansatz! Da geht noch mehr.","Auf dem richtigen Weg!"],emoji:"ðŸ’ª"},needsWork:{range:[30,49],messages:["Nicht schlecht, aber hier ist Potenzial!","Die FÃ¼llwÃ¶rter haben dich erwischt!","Bleib dran - Verbesserung ist mÃ¶glich!"],emoji:"ðŸŽ¯"},poor:{range:[0,29],messages:["Ã„hm... da mÃ¼ssen wir Ã¼ben!","Die FÃ¼llwÃ¶rter haben gewonnen. Revanche?","Kopf hoch! Jeder Profi hat so angefangen."],emoji:"ðŸ”„"}};function Nr(e){for(const[,n]of Object.entries(Cs))if(e>=n.range[0]&&e<=n.range[1]){const s=Math.floor(Math.random()*n.messages.length);return{message:n.messages[s],emoji:n.emoji}}return{message:"Weiter Ã¼ben!",emoji:"ðŸ’ª"}}function Ts(){return St[Math.floor(Math.random()*St.length)]}function js(){return Et[Math.floor(Math.random()*Et.length)]}const vr={klassiker:{id:"klassiker",title:"Der Klassiker",subtitle:"Elevator Pitch",description:"60 Sekunden, um zu Ã¼berzeugen. PrÃ¤sentiere dich selbst ohne FÃ¼llwÃ¶rter!",duration:60,icon:"rocket",color:"blue",topic:"Stelle dich selbst vor - wer bist du, was machst du, was ist dein Ziel?"},zufall:{id:"zufall",title:"Zufalls-Thema",subtitle:"Slot Machine",description:"Ein zufÃ¤lliges Thema, spontan und flieÃŸend prÃ¤sentiert.",duration:60,icon:"shuffle",color:"purple",getTopic:Ts},stress:{id:"stress",title:"Stress-Test",subtitle:"Ãœberraschungsfrage",description:"Eine knallharte Interview-Frage. Behalte die Nerven!",duration:90,icon:"zap",color:"red",getTopic:js}},he={WEBM:"audio/webm",WEBM_OPUS:"audio/webm;codecs=opus",MP3:"audio/mpeg",WAV:"audio/wav",OGG:"audio/ogg",M4A:"audio/mp4",AAC:"audio/aac"};async function Os(e){return new Promise((n,s)=>{const r=new FileReader;r.onloadend=()=>{const i=r.result.split(",")[1];n(i)},r.onerror=()=>{s(new Error("Failed to read file as base64"))},r.readAsDataURL(e)})}async function Ft(e){return{inlineData:{data:await Os(e),mimeType:e.type||he.WEBM}}}function Ms(e){return typeof MediaRecorder>"u"?!1:MediaRecorder.isTypeSupported(e)}function Ar(e=[he.WEBM_OPUS,he.WEBM,he.OGG,he.MP3]){for(const n of e)if(Ms(n))return n;return null}function Gt(e,n={}){const{minSize:s=100,maxSize:r=100*1024*1024,allowedTypes:i=Object.values(he)}=n;return e?e.size<s?{valid:!1,error:"Audio-Datei ist zu klein oder leer"}:e.size>r?{valid:!1,error:"Audio-Datei ist zu groÃŸ"}:i.length>0&&e.type&&!i.some(o=>e.type.startsWith(o.split(";")[0]))?{valid:!1,error:`Audio-Format nicht unterstÃ¼tzt: ${e.type}`}:{valid:!0}:{valid:!1,error:"Keine Audio-Datei vorhanden"}}const le=!1;function Pt(e){return e.message?.includes("404")||e.message?.includes("not found")}function Ds(e){return e.message?.includes("API key")}function Ls(e,n){const s=Ot.FALLBACK_ORDER.join(", ");return Pt(e)?`Kein Gemini-Modell verfÃ¼gbar. Versuchte Modelle: ${s}

MÃ¶gliche LÃ¶sungen:
1. ÃœberprÃ¼fe, ob dein API Key gÃ¼ltig ist
2. Stelle sicher, dass die Gemini API aktiviert ist
3. Besuche https://ai.google.dev/ um deinen API-Key zu Ã¼berprÃ¼fen

Fehler: ${e.message}`:Ds(e)?`API Key Problem: ${e.message}

Stelle sicher, dass:
1. VITE_GEMINI_API_KEY korrekt in der .env Datei gesetzt ist
2. Der API Key gÃ¼ltig ist (Ã¼berprÃ¼fe auf https://ai.google.dev/)`:e.message||"Unbekannter Fehler"}async function ce({apiKey:e,content:n,context:s}){const r=`[GEMINI ${s}]`;if(!e)throw console.error(`âŒ ${r} API key is missing`),new Error(Ie.API_KEY_MISSING);let i=null;for(const o of Ot.FALLBACK_ORDER)try{return(await(await new jt(e).getGenerativeModel({model:o}).generateContent(n)).response).text()}catch(l){if(console.error(`âŒ ${r} Error with ${o}:`,l.message),i=l,Pt(l))continue;break}const a=Ls(i);throw new Error(`Fehler bei der ${s}: ${a}`)}async function $s(e,n,s="gemini-1.5-flash",r=null,i={}){if(!e||e.trim().length===0)throw console.error("âŒ [GEMINI FEEDBACK] Transcript is empty"),new Error(Ie.TRANSCRIPT_EMPTY);const a=r||i.feedbackPrompt||null,o=vs(e,{...i,feedbackPrompt:a}),l=i.roleType==="simulation"?"Simulation":"Interview",c=i.userRoleLabel||"Bewerber",p=i.coachType||"general";`${l}${p}${c}`,`${e.length}`,i.customIntro,i.extraFocus,e.substring(0,300);const u=await ce({apiKey:n,content:o,context:"FEEDBACK"});return B.logPrompt("GEMINI_LIVE_FEEDBACK",`Live-Training Feedback-Generierung (${l})`,o,{transcript_length:e.length,custom_prompt:r?"Ja":"Nein",role_type:i.roleType||"interview",user_role_label:c},u),u}async function Fs(e,n,s="gemini-1.5-flash",r={}){if(!e)throw console.error("âŒ [GEMINI AUDIO] Audio file is missing"),new Error(Ie.AUDIO_FILE_MISSING);const i=Gt(e,{minSize:$t});if(!i.valid)return console.warn(`âš ï¸ [GEMINI AUDIO] Audio validation failed: ${i.error}, Size: ${e.size} bytes`),JSON.stringify(Lt("analysis"));const a=r.userRoleLabel||"Bewerber",o=r.agentRoleLabel||"GesprÃ¤chspartner",l=r.roleType||"interview",c=r.hasTwoVoices!==!1,p=r.transcript||null,u=await Ft(e),S=_s({userRoleLabel:a,agentRoleLabel:o,roleType:l,hasTwoVoices:c,transcript:p}),b=[S,u];`${a}`,`${Math.round(e.size/1024)}`,e.type;const d=await ce({apiKey:n,content:b,context:"AUDIO"});return B.logPrompt("GEMINI_LIVE_AUDIO_ANALYSIS",`Live-Training Audio-Analyse (${a})`,S,{audio_size_kb:Math.round(e.size/1024),audio_type:e.type,role_type:l,user_role_label:a},d),d}async function kr(e,n,s="Elevator Pitch",r=60){if(!e)throw console.error("âŒ [GEMINI GAME] Audio file is missing"),new Error(Ie.AUDIO_FILE_MISSING);const i=Gt(e,{minSize:$t});if(!i.valid)return console.warn(`âš ï¸ [GEMINI GAME] Audio validation failed: ${i.error}, Size: ${e.size} bytes`),Lt("game");const a=await Ft(e),l=[Rs(s,r),a];`${Math.round(e.size/1024)}`;const c=await ce({apiKey:n,content:l,context:"GAME"});try{let p=c.trim();p.startsWith("```json")?p=p.replace(/```json\n?/,"").replace(/\n?```$/,""):p.startsWith("```")&&(p=p.replace(/```\n?/,"").replace(/\n?```$/,""));const u=JSON.parse(p);return{transcript:u.transcript||ae,filler_words:u.filler_words||[],content_score:Math.max(0,Math.min(40,u.content_score||0)),content_feedback:u.content_feedback||""}}catch(p){throw console.error("âŒ [GEMINI GAME] Failed to parse response:",p),console.error("âŒ [GEMINI GAME] Raw response:",c),new Error(`${Ie.JSON_PARSE_FAILED}: ${p.message}`)}}async function _r(e,n){const{topic:s,context:r,pros:i,cons:a,proScore:o,contraScore:l}=e;if(!s||s.trim().length===0)throw new Error("Entscheidungsfrage fehlt");const c=i.map(d=>`- "${d.text}" (Gewicht: ${d.weight}/10)`).join(`
`),p=a.map(d=>`- "${d.text}" (Gewicht: ${d.weight}/10)`).join(`
`),u=r?`
Situationsbeschreibung des Users:
"${r}"
`:"",S=`Du bist 'Decisio', ein analytischer Entscheidungs-Coach.
Deine Aufgabe: Analysiere die Entscheidungsmatrix des Users (Thema, Pro/Contra mit Gewichtung 1-10).
Ziel: Deck blinde Flecken auf und hinterfrage die Gewichtung kritisch. Nimm dem User die Entscheidung NICHT ab, sondern verbessere seine Datengrundlage.

INPUT:
Thema: ${s}
${u}
Pro-Liste (Gesamtpunkte: ${o}):
${c||"(keine Pro-Argumente)"}

Contra-Liste (Gesamtpunkte: ${l}):
${p||"(keine Contra-Argumente)"}

Rationaler Score: ${o>l?"Pro fÃ¼hrt":l>o?"Contra fÃ¼hrt":"Ausgeglichen"} (${o} vs ${l})

GENERATION RULES:
1. "Blind Spot": Welcher Lebensbereich (Gesundheit, Langzeit, Familie, Werte, Finanzen, Karriere, Work-Life-Balance) fehlt? Welche Perspektive wurde nicht berÃ¼cksichtigt?
2. "Challenger": Identifiziere das INTERESSANTESTE oder KRITISCHSTE Argument (nicht unbedingt das mit der hÃ¶chsten Gewichtung). WÃ¤hle das Argument, das am meisten hinterfragt werden sollte - vielleicht weil die Bewertung unrealistisch wirkt, wichtige Aspekte ignoriert werden, oder es auf Annahmen basiert die geprÃ¼ft werden sollten.
3. "Intuition": Stelle eine systemische Frage (z.B. 10-10-10 Methode: Wie wirst du in 10 Minuten/10 Monaten/10 Jahren darÃ¼ber denken? Oder: Was wÃ¼rdest du einem Freund in dieser Situation raten?), um das BauchgefÃ¼hl zu prÃ¼fen.

WICHTIG: Antworte AUSSCHLIESSLICH mit einem validen JSON-Objekt. Kein Markdown, kein Intro, keine ErklÃ¤rung auÃŸerhalb des JSON.

FORMATIERUNG DER INHALTE:
- Jede Card soll STRUKTURIERT sein, NICHT als FlieÃŸtext
- Verwende kurze, prÃ¤gnante AufzÃ¤hlungspunkte
- Maximal 3-5 Punkte pro Card
- Jeder Punkt soll ein konkreter, handlungsorientierter Gedanke sein

JSON SCHEMA:
{
  "analysis_summary": "Ein bis zwei SÃ¤tze zum rationalen Ergebnis.",
  "cards": [
    {
      "type": "blind_spot",
      "title": "Der blinde Fleck",
      "points": [
        "Erster fehlender Aspekt oder Lebensbereich",
        "Zweiter fehlender Aspekt",
        "Dritter fehlender Aspekt (optional)"
      ]
    },
    {
      "type": "challenger",
      "title": "Der HÃ¤rtetest",
      "argument": "NUR der Text des Arguments, OHNE Gewicht (z.B. Mehr Gehalt oder Flexible Arbeitszeiten)",
      "points": [
        "Erste kritische Frage zum Argument",
        "Zweite kritische Frage",
        "Dritte kritische Frage (optional)"
      ]
    },
    {
      "type": "intuition",
      "title": "Der Bauch-Check",
      "question": "Die zentrale Reflexionsfrage (z.B. '10-10-10 Methode')",
      "points": [
        "Erster Reflexionsimpuls",
        "Zweiter Reflexionsimpuls",
        "Dritter Reflexionsimpuls (optional)"
      ]
    }
  ]
}`;i.length,a.length,Math.max(...i.map(d=>d.weight),...a.map(d=>d.weight));const b=await ce({apiKey:n,content:S,context:"DECISION"});try{let d=b.trim();d.startsWith("```json")?d=d.replace(/^```json\s*\n?/,""):d.startsWith("```")&&(d=d.replace(/^```\s*\n?/,"")),d=d.replace(/\n?```\s*$/,"").trim(),d=d.replace(/"\s*\(Gewicht:\s*\d+\/10\)"/g,'"');const E=JSON.parse(d);if(!E.cards||!Array.isArray(E.cards))throw new Error("Invalid response structure: missing cards array");return B.logPrompt("GEMINI_DECISION_ANALYSIS","Entscheidungs-Kompass Analyse",S,{topic:s,context:r?"vorhanden":"nicht angegeben",pro_count:i.length,contra_count:a.length,pro_score:o,contra_score:l},b),E}catch(d){throw console.error("âŒ [GEMINI DECISION] Failed to parse response:",d),console.error("âŒ [GEMINI DECISION] Raw response:",b),new Error(`Fehler beim Verarbeiten der Analyse: ${d.message}`)}}async function Rr(e,n,s,r=null,i=[],a=[]){if(!e||e.trim().length===0)throw new Error("Entscheidungsfrage fehlt");if(!["strategist","security","feelgood","growth","future"].includes(n))throw new Error(`UngÃ¼ltige Persona: ${n}`);const l=r?`
Situationsbeschreibung:
"${r}"
`:"",c=i.filter(d=>d.text?.trim()).map(d=>`- ${d.text}`),p=a.filter(d=>d.text?.trim()).map(d=>`- ${d.text}`);let u="";(c.length>0||p.length>0)&&(u=`
BEREITS ERFASSTE ARGUMENTE DES USERS:
Nutze diese als Kontext, um ERGÃ„NZENDE Perspektiven zu generieren. Wiederhole NICHT dieselben Punkte, sondern baue darauf auf oder beleuchte andere Aspekte.`,c.length>0&&(u+=`
Pro-Argumente:
${c.join(`
`)}`),p.length>0&&(u+=`
Contra-Argumente:
${p.join(`
`)}`),u+=`
`);const S=`Du bist ein kreativer Entscheidungs-Assistent fÃ¼r die Karriere-Plattform 'KarriereHeld'.
Deine Aufgabe: Generiere fÃ¼r eine spezifische Entscheidungsfrage Argumente aus der strikten Sicht einer gewÃ¤hlten Persona.
${l?"WICHTIG: BerÃ¼cksichtige unbedingt die Situationsbeschreibung des Users - seine WÃ¼nsche, Ã„ngste und Rahmenbedingungen!":""}

INPUT:
Thema: ${e}${l}${u}
Persona: ${n}

PERSONA DEFINITIONEN:
- 'strategist' (Der Stratege): Fokus auf CV, Marktwert, Geld, Macht, Karriereleiter, Prestige.
- 'security' (Der Sicherheits-Beauftragte): Fokus auf Arbeitsplatzsicherheit, Gehaltsgarantie, Risikominimierung, BestÃ¤ndigkeit.
- 'feelgood' (Der Feel-Good Manager): Fokus auf Mental Health, Stresslevel, Team-Kultur, Zeit fÃ¼r Familie, SpaÃŸ.
- 'growth' (Der GrÃ¼nder): Fokus auf steile Lernkurve, Innovation, Netzwerk, "High Risk / High Reward".
- 'future' (Das Zukunfts-Ich): Fokus auf langfristigen Sinn, "Regret Minimization" (Was werde ich in 10 Jahren bereuen?), Lebensziele.

OUTPUT FORMAT (JSON):
Generiere genau 4 VorschlÃ¤ge (2 Pro, 2 Contra), die extrem kurz und knackig sind (max. 10 WÃ¶rter pro Punkt).

WICHTIG: Antworte AUSSCHLIESSLICH mit einem validen JSON-Objekt. Kein Markdown, kein Intro.

{
  "suggestions": [
    { "type": "pro", "text": "Argument fÃ¼r JA aus Sicht der Persona" },
    { "type": "pro", "text": "Weiteres Argument fÃ¼r JA..." },
    { "type": "con", "text": "Argument fÃ¼r NEIN aus Sicht der Persona" },
    { "type": "con", "text": "Weiteres Argument fÃ¼r NEIN..." }
  ]
}`,b=await ce({apiKey:s,content:S,context:"BRAINSTORM"});try{let d=b.trim();d.startsWith("```json")?d=d.replace(/```json\n?/,"").replace(/\n?```$/,""):d.startsWith("```")&&(d=d.replace(/```\n?/,"").replace(/\n?```$/,""));const E=JSON.parse(d);if(!E.suggestions||!Array.isArray(E.suggestions))throw new Error("Invalid response structure: missing suggestions array");return B.logPrompt("GEMINI_DECISION_BRAINSTORM",`Entscheidungs-Kompass Brainstorming (${n})`,S,{topic:e,context:r?"vorhanden":"nicht angegeben",persona:n},b),E}catch(d){throw console.error("âŒ [GEMINI BRAINSTORM] Failed to parse response:",d),console.error("âŒ [GEMINI BRAINSTORM] Raw response:",b),new Error(`Fehler beim Verarbeiten der VorschlÃ¤ge: ${d.message}`)}}async function Cr(e,n=[],s=[],r=[],i){if(!e||e.trim().length===0)throw new Error("Entscheidungsfrage fehlt");const a=n.filter(u=>u.text?.trim()).map(u=>`- ${u.text}`).join(`
`)||"(keine)",o=s.filter(u=>u.text?.trim()).map(u=>`- ${u.text}`).join(`
`)||"(keine)";let l="";r.length>0&&(l=`
BISHERIGER GESPRÃ„CHSVERLAUF:
`+r.map((u,S)=>`Frage ${S+1}: "${u.question}"
Antwort: "${u.answer}"`).join(`

`));const c=`Du bist ein einfÃ¼hlsamer systemischer Coach, der Menschen hilft, versteckte Motive und GefÃ¼hle bei wichtigen Entscheidungen zu entdecken.

ENTSCHEIDUNGSTHEMA: "${e}"

BEREITS ERFASSTE ARGUMENTE:
Pro:
${a}

Contra:
${o}
${l}

DEINE AUFGABE:
1. Analysiere, welche PERSPEKTIVE oder welcher LEBENSBEREICH noch nicht beleuchtet wurde
2. Identifiziere eine LÃœCKE (z.B. fehlen Emotionen? Langzeitperspektive? Werte? Beziehungen? Ã„ngste? TrÃ¤ume?)
3. Stelle GENAU EINE tiefgrÃ¼ndige, offene Frage, um diese LÃ¼cke zu fÃ¼llen

FRAGE-TECHNIKEN (wÃ¤hle passend):
- Wunderfrage: "Stell dir vor, du wachst morgen auf und alles ist perfekt gelÃ¶st..."
- Worst-Case: "Was ist das Schlimmste, das passieren kÃ¶nnte, wenn..."
- Zukunfts-Ich: "Stell dir vor, es ist 5 Jahre spÃ¤ter..."
- Werte-Check: "Was sagt diese Entscheidung Ã¼ber das aus, was dir wirklich wichtig ist?"
- BauchgefÃ¼hl: "Wenn du ganz ehrlich bist, was sagt dein KÃ¶rper dazu?"
- Mentor-Perspektive: "Was wÃ¼rde dir jemand raten, der dich sehr gut kennt?"

REGELN:
- Verwende die "Du"-Form (persÃ¶nlich, warm)
- Halte die Frage kurz (max. 2 SÃ¤tze)
- Vermeide Wiederholungen von bereits gestellten Fragen
- Die Frage soll zum Nachdenken anregen, nicht suggestiv sein

AUSGABE (nur JSON, kein Markdown):
{
  "question": "Deine Frage hier...",
  "question_type": "wunderfrage|worst_case|zukunft|werte|bauchgefÃ¼hl|mentor|andere",
  "targets_gap": "Kurze Beschreibung, welche LÃ¼cke diese Frage adressiert"
}`,p=await ce({apiKey:i,content:c,context:"WIZARD_QUESTION"});try{let u=p.trim();u.startsWith("```json")?u=u.replace(/```json\n?/,"").replace(/\n?```$/,""):u.startsWith("```")&&(u=u.replace(/```\n?/,"").replace(/\n?```$/,""));const S=JSON.parse(u);return B.logPrompt("GEMINI_WIZARD_QUESTION","Deep Dive Wizard - Frage generieren",c,{topic:e,existing_pros:n.length,existing_cons:s.length},p),S}catch(u){throw console.error("âŒ [GEMINI WIZARD] Failed to parse question response:",u),new Error(`Fehler beim Generieren der Frage: ${u.message}`)}}async function Tr(e,n,s,r){if(!s||s.trim().length<10)return{extracted_items:[],message:"Antwort zu kurz fÃ¼r Analyse"};const i=`Du bist ein Daten-Analyst fÃ¼r Entscheidungsprozesse. Deine Aufgabe ist es, aus Freitext-Antworten strukturierte Argumente zu extrahieren.

KONTEXT:
Entscheidungsthema: "${e}"
Gestellte Frage: "${n}"

ANTWORT DES USERS:
"${s}"

DEINE AUFGABE:
1. Identifiziere die KERN-ARGUMENTE im Text (max. 3 StÃ¼ck)
2. Klassifiziere jedes als "pro" (spricht FÃœR das Thema/JA) oder "con" (spricht DAGEGEN/NEIN)
3. Formuliere sie in KURZE, PRÃ„GNANTE Stichpunkte um (substantivisch, max. 8 WÃ¶rter)
4. SchÃ¤tze die WICHTIGKEIT (weight 1-10) basierend auf:
   - Emotionale IntensitÃ¤t der Wortwahl
   - Wie oft/ausfÃ¼hrlich der Punkt erwÃ¤hnt wird
   - KÃ¶rperliche Reaktionen (BauchgefÃ¼hl, Stress, etc.)

BEISPIELE fÃ¼r gute Extraktionen:
- "Ich kriege immer Bauchschmerzen" â†’ "KÃ¶rperliche Stressreaktion", weight: 8-9
- "Das Geld ist halt wichtig" â†’ "Finanzielle Sicherheit", weight: 6-7
- "Ich trÃ¤ume davon seit Jahren" â†’ "Langgehegter Lebenstraum", weight: 9

WICHTIG:
- Wenn der Text keine klaren Argumente enthÃ¤lt (z.B. "weiÃŸ nicht", zu vage), gib ein leeres Array zurÃ¼ck
- Extrahiere NUR das, was der User tatsÃ¤chlich gesagt hat - erfinde nichts dazu
- Pro/Con bezieht sich auf das THEMA, nicht auf die Frage

AUSGABE (nur JSON, kein Markdown):
{
  "extracted_items": [
    {
      "type": "pro|con",
      "text": "Kurzer prÃ¤gnanter Stichpunkt",
      "weight": 1-10,
      "source_quote": "Originalzitat aus der Antwort"
    }
  ],
  "analysis_note": "Kurze Notiz, was du erkannt hast (optional)"
}`,a=await ce({apiKey:r,content:i,context:"WIZARD_EXTRACT"});try{let o=a.trim();o.startsWith("```json")?o=o.replace(/```json\n?/,"").replace(/\n?```$/,""):o.startsWith("```")&&(o=o.replace(/```\n?/,"").replace(/\n?```$/,""));const l=JSON.parse(o);return B.logPrompt("GEMINI_WIZARD_EXTRACT","Deep Dive Wizard - Argumente extrahieren",i,{topic:e,question_length:n.length,answer_length:s.length},a),l}catch(o){throw console.error("âŒ [GEMINI EXTRACT] Failed to parse extraction response:",o),new Error(`Fehler beim Extrahieren der Argumente: ${o.message}`)}}function zt(e){return!e||typeof e!="string"?e:e.replace(/\\u([0-9a-fA-F]{4})/g,(n,s)=>String.fromCharCode(parseInt(s,16))).replace(new RegExp("(?<!\\\\)u([0-9a-fA-F]{4})","g"),(n,s)=>{const r=parseInt(s,16);return r>=160&&r<=65535?String.fromCharCode(r):n})}function Gs(e){if(!e||typeof e!="string")return e;let n=e.trim();return n=n.replace(/^```json\s*/i,"").replace(/^```\s*/,"").replace(/\s*```\s*$/,""),n.trim()}function et(e,n={}){const{silent:s=!1,context:r="JSON"}=n;if(e==null)return null;if(typeof e=="object")return e;if(typeof e!="string")return s||console.warn(`[parseJSON] Expected string or object, got ${typeof e}`),null;try{let i=Gs(e);return i=zt(i),JSON.parse(i)}catch(i){return s||(console.error(`[parseJSON] Failed to parse ${r}:`,i.message),console.error(`[parseJSON] Input preview: ${e.substring(0,100)}...`)),null}}function jr(e){return et(e,{context:"feedback_json"})}function Or(e){return et(e,{context:"audio_analysis_json"})}function Mr(e){if(!e)return[];const n=et(e,{context:"transcript"});return Array.isArray(n)?n:[]}function De(e){if(e==null)return e;if(typeof e=="string")return zt(e);if(Array.isArray(e))return e.map(De);if(typeof e=="object"){const n={};for(const s of Object.keys(e))n[s]=De(e[s]);return n}return e}async function Dr(e,n={},s=null,r=null){if(!e||e.length===0)throw new Error("Transkript ist leer. Das GesprÃ¤ch muss mindestens einen Austausch enthalten.");const i=Ps(e,n),a=B.getGeminiApiKey();if(!a)throw new Error("Gemini API Key ist nicht konfiguriert. Bitte kontaktiere den Administrator.");const o={feedbackContent:null,audioAnalysisContent:null},l={roleType:n.role_type||"interview",userRoleLabel:n.user_role_label||"Bewerber",agentRoleLabel:n.interviewer_profile?.role||"GesprÃ¤chspartner",coachType:n.feedback_coach_type||"general",customIntro:n.feedback_custom_intro||"",extraFocus:n.feedback_extra_focus||"",feedbackPrompt:n.feedback_prompt||""};try{o.feedbackContent=await $s(i,a,"gemini-1.5-flash",null,l)}catch(c){throw console.error("âŒ [Roleplay Feedback] Failed to generate feedback:",c),new Error(`Fehler bei der Feedback-Generierung: ${c.message}`)}if(s){r&&r("audio_analysis");try{o.audioAnalysisContent=await Fs(s,a,"gemini-1.5-flash",{...l,hasTwoVoices:!0,transcript:i})}catch(c){console.error("âŒ [Roleplay Feedback] Failed to generate audio analysis:",c),o.audioAnalysisContent=JSON.stringify({error:!0,summary:"Audio-Analyse konnte nicht durchgefÃ¼hrt werden.",errorMessage:c.message,troubleshooting:["Stelle sicher, dass dein Mikrofon richtig funktioniert","Versuche das GesprÃ¤ch erneut zu starten","ÃœberprÃ¼fe, ob keine andere Anwendung das Mikrofon blockiert"]})}}return o}function Ps(e,n={}){let s="";n.title&&(s+=`Rollenspiel-Szenario: ${n.title}
`),n.description&&(s+=`Beschreibung: ${n.description}
`),n.variables&&(s+=`
Kontext-Variablen:
`,Object.entries(n.variables).forEach(([a,o])=>{s+=`- ${a}: ${o}
`})),s+=`
--- GesprÃ¤chsverlauf ---

`;const r=n.user_role_label||"Bewerber",i=n.interviewer_profile?.role||"GesprÃ¤chspartner";return e.forEach(a=>{const o=a.role==="agent"?i:r;s+=`${o}: ${a.text}

`}),s}async function Lr(e,n,s,r=null,i=0,a=null){try{let o=n;Array.isArray(n)&&(o=JSON.stringify(n));const l={transcript:o,feedback_json:s,duration:i};r&&(l.audio_analysis_json=r),a&&(l.conversation_id=a);const c=await B.request(`/roleplays/sessions/${e}`,{method:"PUT",body:JSON.stringify(l)});if(i>0)try{await B.request(`/roleplays/sessions/${e}/duration`,{method:"POST",body:JSON.stringify({duration_seconds:i})})}catch(p){console.warn("âš ï¸ [Roleplay Feedback] Failed to update usage limits:",p.message)}return c.data}catch(o){throw console.error("âŒ [Roleplay Feedback] ========= SAVE FAILED ========="),console.error("âŒ [Roleplay Feedback] Error:",o),console.error("âŒ [Roleplay Feedback] Error message:",o.message),new Error(`Fehler beim Speichern der Analyse: ${o.message}`)}}async function $r(e){try{return(await B.request(`/roleplays/sessions/${e}`,{method:"GET"})).data}catch(n){throw console.error("âŒ [Roleplay Feedback] Failed to load session analysis:",n),new Error(`Fehler beim Laden der Analyse: ${n.message}`)}}async function Fr(e={}){try{const n=new URLSearchParams(e).toString(),s=n?`/roleplays/sessions?${n}`:"/roleplays/sessions";return await B.request(s,{method:"GET"})}catch(n){throw console.error("âŒ [Roleplay Feedback] Failed to load sessions:",n),new Error(`Fehler beim Laden der Sessions: ${n.message}`)}}function Gr(e){return`${(window.bewerbungstrainerConfig||{apiUrl:"/wp-json/bewerbungstrainer/v1"}).apiUrl}/roleplays/sessions/${e}/audio`}async function Pr(e,n){try{return(await B.request(`/roleplays/sessions/${e}`,{method:"PUT",body:JSON.stringify({conversation_id:n})})).data}catch(s){throw console.error("âŒ [Roleplay Feedback] Failed to update session conversation_id:",s),new Error(`Fehler beim Aktualisieren der Session: ${s.message}`)}}async function zr(e){try{return(await B.request("/roleplays/sessions",{method:"POST",body:JSON.stringify(e)})).data}catch(n){throw console.error("âŒ [Roleplay Feedback] Failed to create session:",n),new Error(`Fehler beim Erstellen der Session: ${n.message}`)}}async function zs(){try{const e=await fetch(`${ye()}/roleplays`,{headers:{"X-WP-Nonce":Se()},credentials:"same-origin"});if(!e.ok)throw new Error("Fehler beim Laden der Szenarien");const n=await e.json();return De(n.data||[])}catch(e){throw console.error("âŒ [Roleplay Feedback] Failed to load scenarios:",e),new Error(`Fehler beim Laden der Szenarien: ${e.message}`)}}async function Br(e){try{const n=await B.request(`/roleplays/${e}`,{method:"GET"});return De(n.data)}catch(n){throw console.error("âŒ [Roleplay Feedback] Failed to load scenario:",n),new Error(`Fehler beim Laden des Szenarios: ${n.message}`)}}const wt={"#e91e63":"#3b82f6","#ec407a":"#3b82f6","#f06292":"#3b82f6","#d81b60":"#3b82f6","#c2185b":"#3b82f6","#ad1457":"#3b82f6","#880e4f":"#3b82f6","#ff4081":"#3b82f6","#f50057":"#3b82f6","#f44336":"#3b82f6","#e53935":"#3b82f6","#d32f2f":"#3b82f6","#c62828":"#3b82f6","#b71c1c":"#3b82f6","#ff1744":"#3b82f6","#ff5252":"#3b82f6","#ef5350":"#3b82f6","#e57373":"#3b82f6","#ff5722":"#f59e0b","#e64a19":"#f59e0b","#bf360c":"#f59e0b"},Bs=e=>{if(!e||typeof e!="string")return!1;const n=e.replace("#","");if(n.length!==6)return!1;const s=parseInt(n.substring(0,2),16)/255,r=parseInt(n.substring(2,4),16)/255,i=parseInt(n.substring(4,6),16)/255,a=Math.max(s,r,i),o=Math.min(s,r,i),l=(a+o)/2;if(a===o)return!1;const c=a-o,p=l>.5?c/(2-a-o):c/(a+o);let u;switch(a){case s:u=((r-i)/c+(r<i?6:0))/6;break;case r:u=((i-s)/c+2)/6;break;case i:u=((s-r)/c+4)/6;break;default:u=0}const S=u*360;return p>.4&&(S>=330&&S<=360||S>=0&&S<=20)},Bt=(e,n="#3b82f6")=>{if(!e||typeof e!="string")return n;const s=e.toLowerCase().trim();return wt[s]?wt[s]:Bs(s)?n:e},Ks=({setup:e,isSelected:n,onSelect:s})=>{const[r,i]=m.useState(!1),a=Bt(e.color);return t.jsxs(H.button,{onClick:s,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),whileHover:{y:-4},whileTap:{scale:.98},className:"relative w-full text-left rounded-2xl overflow-hidden bg-white transition-all duration-200 outline-none cursor-pointer",style:{border:n?`2px solid ${a}`:`2px solid ${g.slate[200]}`,boxShadow:r||n?`0 12px 24px -8px ${a}30, 0 4px 8px -2px rgba(0,0,0,0.08)`:"0 2px 8px -2px rgba(0,0,0,0.06)"},children:[t.jsxs("div",{className:"h-[100px] flex items-center justify-center relative",style:{background:`linear-gradient(135deg, ${a} 0%, ${a}dd 100%)`},children:[n&&t.jsx("div",{className:"absolute top-3 right-3 w-6 h-6 rounded-full bg-white flex items-center justify-center shadow-md",children:t.jsx(gn,{size:14,style:{color:a},strokeWidth:3})}),t.jsx("span",{className:"text-5xl leading-none",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.15))"},children:e.icon})]}),t.jsxs("div",{className:"p-5 h-[140px] flex flex-col",children:[t.jsx("h3",{className:"text-base font-bold text-slate-800 mb-1.5 leading-tight",children:e.name}),t.jsx("p",{className:"text-[13px] text-slate-500 leading-relaxed mb-4 line-clamp-2 flex-1",children:e.description}),t.jsxs("div",{className:"flex flex-wrap gap-2 mt-auto",children:[t.jsx("span",{className:"inline-flex items-center text-[11px] px-2.5 py-1 rounded-full font-semibold",style:{backgroundColor:`${a}15`,color:a},children:e.focus}),t.jsx("span",{className:"inline-flex items-center text-[11px] px-2.5 py-1 rounded-full font-medium bg-slate-100 text-slate-500",children:e.targetGroup})]})]})]})},Us=()=>{const{currentSetup:e,setSelectedSetup:n,clearSelectedSetup:s,availableSetups:r,branding:i,setupsLoading:a}=ge(),[o,l]=m.useState(!1),[c,p]=m.useState(!1);Le.useEffect(()=>{const E=()=>p(window.innerWidth<640);return E(),window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]);const u=i?.["--primary-accent"]||g.indigo[500],S=E=>{n(E),l(!1)},b=()=>{s(),l(!1)},d=e?Bt(e.color):null;return a?t.jsx("div",{className:"w-full flex items-center justify-center py-4",children:t.jsx(At,{className:"w-5 h-5 animate-spin text-gray-400"})}):!r||r.length===0?null:t.jsxs(t.Fragment,{children:[t.jsxs(H.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"w-full",children:[t.jsx("p",{className:"text-sm text-slate-500 mb-2 pl-1",children:"Filtere Trainingsszenarien nach deinem Fokus"}),t.jsxs("button",{onClick:()=>l(!0),className:"w-full flex items-center justify-between gap-3 px-4 py-3.5 rounded-xl border border-slate-200 bg-white cursor-pointer transition-all duration-200 outline-none hover:border-slate-300 hover:shadow-md",children:[t.jsxs("div",{className:"flex items-center gap-3.5 min-w-0",children:[t.jsx("div",{className:"w-11 h-11 rounded-xl flex items-center justify-center flex-shrink-0",style:{backgroundColor:d?`${d}15`:g.slate[100]},children:e?t.jsx("span",{className:"text-2xl",children:e.icon}):t.jsx(dn,{size:22,className:"text-slate-400"})}),t.jsxs("div",{className:"text-left min-w-0",children:[t.jsx("div",{className:"text-[15px] font-semibold text-slate-800 truncate",children:e?e.name:"Alle Szenarien"}),t.jsx("div",{className:"text-[13px] text-slate-500 truncate",children:e?`${e.focus} â€¢ ${e.targetGroup}`:"Trainings-Setup wÃ¤hlen"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[t.jsx("span",{className:"text-[13px] font-medium text-slate-400",children:"Ã„ndern"}),t.jsx(un,{size:18,className:"text-slate-400"})]})]})]}),vn.createPortal(t.jsx(hn,{children:o&&t.jsxs(t.Fragment,{children:[t.jsx(H.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>l(!1),className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-[9999]"}),t.jsx("div",{className:`fixed inset-0 flex ${c?"items-end":"items-center"} justify-center ${c?"p-0":"p-4"} z-[10000]`,children:t.jsxs(H.div,{initial:{opacity:0,y:c?100:20,scale:c?1:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:c?100:20,scale:c?1:.95},transition:{type:"spring",damping:25,stiffness:400},className:`w-full ${c?"max-w-full":"max-w-[720px]"} bg-slate-50 shadow-2xl flex flex-col ${c?"max-h-[calc(100vh-60px)]":"max-h-[calc(100vh-2rem)]"} ${c?"rounded-t-3xl":"rounded-2xl"} overflow-hidden`,children:[t.jsxs("div",{className:`flex items-center justify-between ${c?"p-5":"px-7 py-6"} bg-white border-b border-slate-200 flex-shrink-0`,children:[t.jsxs("div",{children:[t.jsx("h2",{className:`${c?"text-lg":"text-[22px]"} font-bold text-slate-900 mb-1`,children:"Trainings-Setup wÃ¤hlen"}),t.jsx("p",{className:`text-sm text-slate-500 m-0 ${c?"hidden":"block"}`,children:"WÃ¤hle deinen Schwerpunkt fÃ¼r passende Trainingsszenarien"})]}),t.jsx("button",{onClick:()=>l(!1),className:"w-9 h-9 rounded-xl bg-slate-100 hover:bg-slate-200 border-0 flex items-center justify-center cursor-pointer transition-colors outline-none flex-shrink-0",children:t.jsx(mn,{size:20,className:"text-slate-500"})})]}),t.jsx("div",{className:`flex-1 overflow-y-auto ${c?"p-5":"px-7 py-6"}`,children:t.jsx("div",{className:`grid ${c?"grid-cols-1":"grid-cols-2"} gap-4`,children:r.map(E=>t.jsx(Ks,{setup:E,isSelected:e?.id===E.id,onSelect:()=>S(E.id)},E.id))})}),t.jsxs("div",{className:`flex items-center justify-between ${c?"px-5 py-4":"px-7 py-5"} bg-white border-t border-slate-200 flex-shrink-0`,style:{paddingBottom:c?"max(20px, env(safe-area-inset-bottom))":"20px"},children:[t.jsx("button",{onClick:b,className:"px-4 py-2.5 rounded-xl border border-slate-200 bg-white hover:bg-slate-50 hover:border-slate-300 text-slate-600 text-sm font-medium cursor-pointer transition-all outline-none",children:"Alle anzeigen"}),t.jsx("button",{onClick:()=>l(!1),className:"px-6 py-2.5 rounded-xl border-0 bg-primary text-white text-sm font-semibold cursor-pointer transition-all outline-none hover:-translate-y-0.5",style:{backgroundColor:u,boxShadow:`0 4px 12px -2px ${u}50`},children:"Fertig"})]})]})})]})}),document.body)]})},Ce=({onNavigate:e})=>{const{branding:n,user:s,filterScenariosBySetupAndPartner:r,currentSetup:i,checkModuleAllowed:a,appName:o,dashboardSubtitle:l}=ge(),{isAuthenticated:c}=kt(),[p,u]=m.useState([]),[S,b]=m.useState(!1),[d,E]=m.useState({simulator:null,roleplay:null,video:null});n?.["--header-gradient"]||lt["--header-gradient"];const v=n?.["--primary-accent"]||lt["--primary-accent"],T=async()=>{try{const f=await fetch(`${ye()}/simulator/scenarios`,{headers:{"X-WP-Nonce":Se()},credentials:"same-origin"});if(!f.ok)return[];const A=await f.json();return A.success&&A.data?.scenarios?A.data.scenarios:[]}catch{return[]}},D=async()=>{try{const f=await fetch(`${ye()}/video-training/scenarios`,{headers:{"X-WP-Nonce":Se()}});if(!f.ok)return[];const A=await f.json();return A.success&&A.data?.scenarios?A.data.scenarios:[]}catch{return[]}};m.useEffect(()=>{(async()=>{try{const[A,M,z]=await Promise.all([T(),zs().catch(()=>[]),D()]),K=r(A||[],"simulator"),J=r(M||[],"roleplay"),W=r(z||[],"video_training");console.log("[QuadDashboard] Scenario counts:",{currentSetup:i?.id,simulator:K.length,roleplay:J.length,video:W.length}),E({simulator:K.length,roleplay:J.length,video:W.length})}catch(A){console.error("Failed to load scenario counts:",A)}})()},[i,r]),m.useEffect(()=>{c&&U()},[c]);const U=async()=>{b(!0);try{const f=await jn(6);u(f||[])}catch(f){console.error("Failed to load recent activities:",f),u([])}b(!1)},G=s?s.first_name?s.first_name:s.display_name?s.display_name.split(" ")[0]:s.name?s.name.split(" ")[0]:null:null,I=[{id:"ikigai",moduleKey:"ikigai",featureId:"ikigai",step:"1",title:"Orientierung",subtitle:"Ikigai-Kompass",description:"Finde den Schnittpunkt deiner Talente, Leidenschaften und MÃ¶glichkeiten.",icon:pn,color:g.purple[500],bgLight:g.purple[50],gradient:`linear-gradient(135deg, ${g.purple[400]} 0%, ${g.purple[600]} 100%)`,route:"ikigai"},{id:"decision",moduleKey:"decision",featureId:"decisionboard",step:"2",title:"Entscheiden",subtitle:"Decision-Navigator",description:"LÃ¶se dein Dilemma mit KI-gestÃ¼tzter Pro & Contra Analyse.",icon:fn,color:g.blue[500],bgLight:g.blue[50],gradient:`linear-gradient(135deg, ${g.blue[400]} 0%, ${g.blue[600]} 100%)`,route:"decision_board"},{id:"briefing",moduleKey:"briefings",featureId:"smartbriefing",step:"3",title:"Vorbereiten",subtitle:"Smart Briefing",description:"Erstelle deinen Schlachtplan mit personalisierten LeitfÃ¤den.",icon:xn,color:g.amber[500],bgLight:g.amber[50],gradient:`linear-gradient(135deg, ${g.amber[400]} 0%, ${g.amber[600]} 100%)`,route:"smart_briefing"}].filter(f=>a(f.moduleKey)),w=[{id:"simulator",moduleKey:"simulator",featureId:"simulator",title:"Szenario Training",subtitle:"Frage-Antwort",description:"Beantworte Interview-Fragen und erhalte sofortiges KI-Feedback.",icon:bn,tag:"Audio-KI",color:g.green[500],bgLight:g.green[50],gradient:`linear-gradient(135deg, ${g.green[400]} 0%, ${g.teal[500]} 100%)`,route:"simulator",countKey:"simulator"},{id:"roleplay",moduleKey:"roleplay",featureId:"roleplay",title:"Live Simulation",subtitle:"Echtzeit-Dialog",description:"FÃ¼hre ein realistisches GesprÃ¤ch mit dem KI-Interviewer.",icon:yn,tag:"Voice-KI",color:g.amber[500],bgLight:g.amber[50],gradient:`linear-gradient(135deg, ${g.amber[400]} 0%, ${g.red[400]} 100%)`,route:"dashboard",countKey:"roleplay"},{id:"video",moduleKey:"video_training",featureId:"videotraining",title:"Wirkungsanalyse",subtitle:"KÃ¶rpersprache",description:"Nimm dich auf Video auf und erhalte Feedback zu deiner Wirkung.",icon:Sn,tag:"Video-KI",color:g.red[500],bgLight:g.red[50],gradient:`linear-gradient(135deg, ${g.red[400]} 0%, ${g.purple[500]} 100%)`,route:"video_training",countKey:"video"},{id:"gym",moduleKey:"gym",featureId:"rhetorikgym",title:"Rhetorik Gym",subtitle:"Sprechtraining",description:"Reduziere FÃ¼llwÃ¶rter und verbessere deine Redegewandtheit.",icon:En,tag:"Drills",color:g.purple[500],bgLight:g.purple[50],gradient:`linear-gradient(135deg, ${g.purple[500]} 0%, ${g.blue[500]} 100%)`,route:"gym_klassiker",countKey:null}].filter(f=>a(f.moduleKey)),P={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.15}}},Y={hidden:{opacity:0,y:24},visible:{opacity:1,y:0,transition:{duration:.5,ease:[.25,.1,.25,1]}}},_=f=>{e&&e(f)},$=f=>({briefing:"Smart Briefing",simulator:"Szenario-Training",video:"Wirkungs-Analyse",roleplay:"Live-Simulation",game:"Rhetorik-Gym",ikigai:"Ikigai-Kompass",decision:"Entscheidungs-Navigator"})[f]||f,ee=f=>({briefing:g.amber[500],simulator:g.green[500],video:g.red[500],roleplay:g.amber[600],game:g.purple[500],ikigai:g.purple[500],decision:g.blue[500]})[f]||g.slate[400];return t.jsxs("div",{className:"min-h-screen py-8 lg:py-12 px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"max-w-[1000px] mx-auto",children:[t.jsxs(H.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,ease:[.25,.1,.25,1]},className:"text-center mb-14",children:[t.jsx("h1",{className:"text-[clamp(26px,4.5vw,38px)] font-extrabold text-slate-900 mb-3 leading-tight tracking-tight",children:G?t.jsxs(t.Fragment,{children:["Hallo"," ",t.jsx("span",{style:{color:v},children:G}),", wo stehst du?"]}):t.jsxs(t.Fragment,{children:["Willkommen bei"," ",t.jsx("span",{style:{color:v},children:o||"Karriereheld"})]})}),t.jsx("p",{className:"text-[clamp(15px,2vw,17px)] text-slate-500 max-w-[420px] mx-auto leading-relaxed",children:l||"Erst denken, dann handeln. WÃ¤hle deine Phase."})]}),I.length>0&&t.jsxs(H.section,{variants:P,initial:"hidden",animate:"visible",className:"mb-12",children:[t.jsxs("div",{className:"flex items-center gap-3.5 mb-6",children:[t.jsx("span",{className:"bg-gradient-to-br from-slate-100 to-slate-200 text-slate-700 px-3.5 py-2 rounded-xl text-xs font-bold uppercase tracking-wider",children:"Phase 1"}),t.jsx("h2",{className:"text-lg font-bold text-slate-800 m-0",children:"Deine Strategie"})]}),t.jsx("div",{className:"grid grid-cols-3 gap-6 strategy-grid",children:I.map(f=>t.jsxs(H.div,{variants:Y,whileHover:{y:-6,transition:{duration:.2}},whileTap:{scale:.98},onClick:()=>_(f.route),className:"bg-white rounded-2xl p-6 cursor-pointer border border-slate-100 shadow-md hover:shadow-xl transition-all duration-300 ease-out relative overflow-hidden",onMouseEnter:A=>{A.currentTarget.style.boxShadow=`0 12px 32px -8px ${f.color}25`,A.currentTarget.style.borderColor=`${f.color}30`},onMouseLeave:A=>{A.currentTarget.style.boxShadow="",A.currentTarget.style.borderColor=""},children:[t.jsx("div",{className:"absolute -top-8 -right-8 w-32 h-32 rounded-full opacity-5 pointer-events-none",style:{background:f.color}}),t.jsxs("div",{className:"absolute top-5 right-5 flex items-center gap-2",children:[t.jsx(ct,{featureId:f.featureId,size:"md"}),t.jsx("div",{className:"w-8 h-8 rounded-xl flex items-center justify-center text-sm font-bold",style:{background:f.bgLight,color:f.color},children:f.step})]}),t.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center mb-5",style:{background:f.gradient,boxShadow:`0 8px 20px -4px ${f.color}40`},children:t.jsx(f.icon,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-1.5",children:f.title}),t.jsx("p",{className:"text-sm font-semibold mb-2.5",style:{color:f.color},children:f.subtitle}),t.jsx("p",{className:"text-sm text-slate-500 leading-relaxed m-0 min-h-[44px]",children:f.description}),t.jsx("div",{className:"flex justify-end mt-5",children:t.jsx("div",{className:"w-8 h-8 rounded-xl bg-slate-50 flex items-center justify-center transition-all duration-200",children:t.jsx(ot,{className:"w-4 h-4 text-slate-400"})})})]},f.id))})]}),w.length>0&&t.jsxs(H.section,{variants:P,initial:"hidden",animate:"visible",className:"mb-12",children:[t.jsxs("div",{className:"flex items-center gap-3.5 mb-6",children:[t.jsx("span",{className:"bg-gradient-to-br from-green-50 to-green-100 text-green-700 px-3.5 py-2 rounded-xl text-xs font-bold uppercase tracking-wider",children:"Phase 2"}),t.jsx("h2",{className:"text-lg font-bold text-slate-800 m-0",children:"Trainings-Arena"})]}),t.jsx("div",{className:"mb-6",children:t.jsx(Us,{})}),t.jsx("div",{className:"grid grid-cols-2 gap-6 training-grid",children:w.map(f=>t.jsxs(H.div,{variants:Y,whileHover:{y:-6,transition:{duration:.2}},whileTap:{scale:.98},onClick:()=>_(f.route),className:"bg-white rounded-2xl p-6 cursor-pointer border border-slate-100 shadow-md hover:shadow-xl transition-all duration-300 ease-out relative overflow-hidden flex flex-col",onMouseEnter:A=>{A.currentTarget.style.boxShadow=`0 12px 32px -8px ${f.color}25`,A.currentTarget.style.borderColor=`${f.color}30`},onMouseLeave:A=>{A.currentTarget.style.boxShadow="",A.currentTarget.style.borderColor=""},children:[t.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-2",children:[t.jsx(ct,{featureId:f.featureId,size:"md"}),t.jsx("div",{className:"px-3 py-1.5 rounded-lg text-xs font-bold uppercase tracking-wide",style:{background:f.bgLight,color:f.color},children:f.tag})]}),t.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center mb-4",style:{background:f.gradient,boxShadow:`0 8px 20px -4px ${f.color}40`},children:t.jsx(f.icon,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:f.title}),t.jsx("p",{className:"text-sm font-semibold mb-2",style:{color:f.color},children:f.subtitle}),t.jsx("p",{className:"text-sm text-slate-500 leading-normal m-0 flex-1",children:f.description}),t.jsxs("div",{className:"flex justify-between items-center mt-4",children:[f.countKey&&d[f.countKey]!==null&&t.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-slate-50 border border-slate-100",children:[t.jsx("span",{className:"text-sm font-bold",style:{color:d[f.countKey]>0?f.color:g.slate[400]},children:d[f.countKey]}),t.jsx("span",{className:"text-xs text-slate-500",children:d[f.countKey]===1?"Szenario":"Szenarien"})]}),(!f.countKey||d[f.countKey]===null)&&t.jsx("div",{}),t.jsx("div",{className:"w-8 h-8 rounded-xl bg-slate-50 flex items-center justify-center",children:t.jsx(ot,{className:"w-4 h-4 text-slate-400"})})]})]},f.id))})]}),c&&p.length>0&&t.jsx(H.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:t.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-100 shadow-md",children:[t.jsxs("div",{className:"flex items-center justify-between mb-5",children:[t.jsxs("div",{className:"flex items-center gap-2.5",children:[t.jsx("div",{className:"w-9 h-9 rounded-xl bg-slate-100 flex items-center justify-center",children:t.jsx(wn,{className:"w-5 h-5 text-slate-500"})}),t.jsx("h3",{className:"text-base font-bold text-slate-800 m-0",children:"Letzte AktivitÃ¤ten"})]}),t.jsxs("button",{onClick:()=>_("history"),className:"flex items-center gap-1 text-sm font-semibold bg-transparent border-0 cursor-pointer px-2.5 py-1.5 rounded-lg transition-all duration-200 hover:bg-slate-50",style:{color:v},children:["Alle ansehen",t.jsx(In,{className:"w-4 h-4"})]})]}),S?t.jsxs("div",{className:"flex items-center justify-center gap-3 py-8 text-slate-500",children:[t.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-slate-200 rounded-full",style:{borderTopColor:v}}),"LÃ¤dt..."]}):t.jsx("div",{className:"flex flex-col gap-2",children:p.slice(0,5).map((f,A)=>t.jsxs(H.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.05*A},className:"flex items-center justify-between px-4 py-3 bg-slate-50 rounded-xl cursor-pointer transition-all duration-200 border border-transparent hover:bg-white hover:border-slate-200",onClick:()=>_("history"),children:[t.jsxs("div",{className:"flex items-center gap-3.5 min-w-0 flex-1",children:[t.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{background:ee(f.type)}}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-sm font-semibold text-slate-800 m-0 overflow-hidden text-ellipsis whitespace-nowrap",children:f.title||$(f.type)}),t.jsx("p",{className:"text-xs text-slate-500 mt-0.5 m-0",children:$(f.type)})]})]}),t.jsx("span",{className:"text-xs text-slate-400 font-medium flex-shrink-0 ml-4",children:On(f.created_at||f.date)})]},f.id||A))})]})}),!c&&t.jsxs(H.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.4},className:"text-center py-10 px-8 bg-white rounded-2xl border border-slate-100 shadow-md",children:[t.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center mx-auto mb-4",children:t.jsx(Nn,{className:"w-7 h-7 text-blue-500"})}),t.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:"Verfolge deinen Fortschritt"}),t.jsx("p",{className:"text-sm text-slate-500 m-0 max-w-[360px] mx-auto leading-relaxed",children:"Melde dich an, um deinen Fortschritt zu speichern und personalisierte Empfehlungen zu erhalten."})]})]}),t.jsx("style",{children:`
        @media (max-width: 900px) {
          .strategy-grid {
            grid-template-columns: 1fr !important;
          }
          .training-grid {
            grid-template-columns: 1fr !important;
          }
        }
        @media (min-width: 901px) and (max-width: 1100px) {
          .strategy-grid {
            grid-template-columns: repeat(3, 1fr) !important;
          }
          .training-grid {
            grid-template-columns: repeat(2, 1fr) !important;
          }
        }
      `})]})},Ne="[APP.JSX]";console.log(`${Ne} ðŸš€ Module loaded`);const Ws=m.lazy(()=>j(()=>import("./RoleplayDashboard-D_h-Hkip.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url)),Vs=m.lazy(()=>j(()=>import("./RoleplayDeviceSetup-y6S2eHmB.js"),__vite__mapDeps([12,1,2,13,4,5,14,8]),import.meta.url)),Hs=m.lazy(()=>j(()=>import("./RoleplayVariablesPage-CA6IfEkI.js"),__vite__mapDeps([15,1,2,16,4,5]),import.meta.url)),It=m.lazy(()=>j(()=>import("./RoleplaySessionUnified-C86zqoBj.js"),__vite__mapDeps([17,1,2,9,4,5,18,7,8,14,19,13]),import.meta.url)),Ys=m.lazy(()=>j(()=>import("./SessionHistory-Djr3Bl5N.js"),__vite__mapDeps([20,1,2,10,8,11,4,5,7,9,21,22,23,24,25,26,27,18,28,29,19,13,14]),import.meta.url).then(e=>({default:e.default}))),Js=m.lazy(()=>j(()=>import("./SessionDetailView-Cum4Ako8.js"),__vite__mapDeps([30,1,2,18,4,5,22]),import.meta.url)),qs=m.lazy(()=>j(()=>import("./index-B_5WRZl0.js"),__vite__mapDeps([31,1,2,4,5,3,6,7,8,9,10,11,14,18,21,32,19,13,33,34,16]),import.meta.url).then(e=>({default:e.SimulatorApp}))),Zs=m.lazy(()=>j(()=>import("./index--omDpt3c.js"),__vite__mapDeps([35,36,1,2,4,5,3,6,7,8,9,10,11,18,14,25,26,19,13,32,34,21,33]),import.meta.url).then(e=>({default:e.VideoTrainingApp}))),Xs=m.lazy(()=>j(()=>import("./index-CEWjGuun.js"),__vite__mapDeps([37,1,2,9,4,5,14,8,10,11,6,7,34]),import.meta.url).then(e=>({default:e.RhetorikGym}))),Qs=m.lazy(()=>j(()=>import("./index-CEWjGuun.js"),__vite__mapDeps([37,1,2,9,4,5,14,8,10,11,6,7,34]),import.meta.url).then(e=>({default:e.GameSession}))),er=m.lazy(()=>j(()=>import("./index-Dd1brP_s.js"),__vite__mapDeps([38,1,2,4,5,3,6,7,8,9,10,11,33,16,23]),import.meta.url).then(e=>({default:e.SmartBriefingApp}))),tr=m.lazy(()=>j(()=>import("./index-CAL8cRWR.js"),__vite__mapDeps([39,1,2,10,8,11,4,5,7,28,40,14,24,25,26,27,18,41]),import.meta.url).then(e=>({default:e.DecisionBoardApp}))),nr=m.lazy(()=>j(()=>import("./IkigaiApp-BcOZFtWM.js"),__vite__mapDeps([42,1,2,10,8,11,4,5,7,28,40,14,29,9,18,27,19,13,41]),import.meta.url)),sr=m.lazy(()=>j(()=>import("./index-C3o1Bu7J.js"),__vite__mapDeps([43,1,2,10,8,11,4,5,7,9,40]),import.meta.url).then(e=>({default:e.KiCoachApp}))),rr=m.lazy(()=>j(()=>import("./UsageLimitsDisplay-BXRMzuzy.js"),__vite__mapDeps([44,1,2,18,4,5]),import.meta.url)),ir=m.lazy(()=>j(()=>import("./AdminDashboard-peQMTgvA.js"),__vite__mapDeps([45,1,2,28,11,8,18,4,5]),import.meta.url)),ar=m.lazy(()=>j(()=>import("./ScenarioManager-BMBvGH9i.js"),__vite__mapDeps([46,1,2,28,11,8,18,4,5,25,26,7,47]),import.meta.url)),or=m.lazy(()=>j(()=>import("./SimulatorScenarioManager-OQ2_3gF-.js"),__vite__mapDeps([48,1,2,28,11,8,18,4,5,25]),import.meta.url)),lr=m.lazy(()=>j(()=>import("./VideoTrainingManager-DbyEwRZI.js"),__vite__mapDeps([49,1,2,28,11,8,18,4,5,25]),import.meta.url)),cr=m.lazy(()=>j(()=>import("./PartnerManager-BOAtZ1oy.js"),__vite__mapDeps([50,1,2,28,11,8,18,4,5,25,26,7,47]),import.meta.url)),Nt={DIRECT:"direct",PROXY:"proxy"},Te={BRIEFINGS:"briefings",SIMULATOR:"simulator",VIDEO:"video",ROLEPLAY:"roleplay"},dr=()=>t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"400px",gap:"16px"},children:[t.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:`linear-gradient(135deg, ${g.sky[400]} 0%, ${g.indigo[400]} 100%)`,display:"flex",alignItems:"center",justifyContent:"center",animation:"pulse 1.5s ease-in-out infinite"},children:t.jsx(At,{size:24,color:"white",style:{animation:"spin 1s linear infinite"}})}),t.jsx("p",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"14px"},children:"Modul wird geladen..."}),t.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        @keyframes pulse {
          0%, 100% { transform: scale(1); opacity: 1; }
          50% { transform: scale(1.05); opacity: 0.8; }
        }
      `})]});let Oe=!1;const ur=()=>(Le.useEffect(()=>(console.log(`${Ne} ðŸ”„ BrandingLoadingSpinner MOUNT - marking initialSplashShown=true`),Oe=!0,()=>{console.log(`${Ne} ðŸ”„ BrandingLoadingSpinner UNMOUNT`)}),[]),t.jsxs("div",{className:"fullscreen-loader",style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:`linear-gradient(135deg, ${g.slate[900]} 0%, ${g.slate[800]} 50%, ${g.slate[900]} 100%)`,zIndex:9999},children:[t.jsx("div",{style:{position:"absolute",top:"20%",left:"10%",width:"300px",height:"300px",borderRadius:"50%",background:`radial-gradient(circle, ${q(g.sky[400],.1)} 0%, transparent 70%)`,animation:"float 6s ease-in-out infinite"}}),t.jsx("div",{style:{position:"absolute",bottom:"20%",right:"10%",width:"400px",height:"400px",borderRadius:"50%",background:`radial-gradient(circle, ${q(g.violet[500],.1)} 0%, transparent 70%)`,animation:"float 8s ease-in-out infinite reverse"}}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"32px",zIndex:1},children:[t.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"24px",background:`linear-gradient(135deg, ${g.sky[400]} 0%, ${g.indigo[400]} 100%)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 20px 40px ${q(g.sky[400],.3)}`,animation:"pulse 2s ease-in-out infinite"},children:t.jsxs("svg",{width:"44",height:"44",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),t.jsx("path",{d:"M2 17l10 5 10-5"}),t.jsx("path",{d:"M2 12l10 5 10-5"})]})}),t.jsxs("div",{style:{textAlign:"center",color:"white"},children:[t.jsx("h1",{style:{fontSize:"28px",fontWeight:700,margin:0,letterSpacing:"-0.02em"},children:"Karriereheld"}),t.jsx("p",{style:{fontSize:"15px",opacity:.6,margin:"8px 0 0 0",fontWeight:400},children:"wird geladen..."})]}),t.jsx("div",{style:{width:"200px",height:"4px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"2px",overflow:"hidden"},children:t.jsx("div",{style:{width:"40%",height:"100%",background:`linear-gradient(90deg, ${g.sky[400]}, ${g.indigo[400]}, ${g.sky[400]})`,backgroundSize:"200% 100%",borderRadius:"2px",animation:"loading 1.5s ease-in-out infinite"}})})]}),t.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
          }
          @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
          }
          @keyframes loading {
            0% { transform: translateX(-100%); }
            50% { transform: translateX(150%); }
            100% { transform: translateX(400%); }
          }
        `})]})),vt=()=>{requestAnimationFrame(()=>{window.scrollTo(0,0);const e=document.getElementById("bewerbungstrainer-app");e&&(e.scrollTop=0);const n=document.querySelector("[data-main-content]");n&&(n.scrollTop=0),document.querySelectorAll('.overflow-y-auto, .overflow-auto, [style*="overflow"]').forEach(r=>{r.scrollTop>0&&(r.scrollTop=0)})})};function hr(){const e=document.body.classList.contains("admin-bar")||document.documentElement.classList.contains("admin-bar"),n=document.getElementById("wpadminbar");if(n){const s=n.getBoundingClientRect(),r=window.getComputedStyle(n);return!(r.display!=="none"&&r.visibility!=="hidden")||s.bottom<=0?0:s.top<0?Math.max(0,s.bottom):n.offsetHeight}return e?window.innerWidth<=782?46:32:0}function mr(){const e=document.getElementById("bewerbungstrainer-app"),n=hr(),s=document.elementFromPoint(window.innerWidth/2,n+10);if(s){let i=s;for(;i&&i!==document.body;){const a=i.tagName?.toLowerCase();if((a==="header"||a==="nav"||i.classList?.contains("site-header")||i.classList?.contains("elementor-location-header")||i.id==="masthead")&&(!e||!e.contains(i))){const c=i.getBoundingClientRect().bottom;return c<=n?n:Math.max(n,c)}i=i.parentElement}}const r=["header.site-header","#masthead",".site-header",".elementor-location-header",'[data-elementor-type="header"]',".ast-header-wrap","#starter-header",".header-wrapper","header"];for(const i of r){const a=document.querySelector(i);if(a&&(!e||!e.contains(a))){const l=a.getBoundingClientRect().bottom;return l<=n?n:Math.max(n,l)}}if(e){let i=e.previousElementSibling;for(;i;){const a=i.getBoundingClientRect();if(a.height>30&&a.top<100){const o=a.bottom;return o<=n?n:Math.max(n,o)}i=i.previousElementSibling}}return n}function gr(){const e=kn(),n=_n(),{isAuthenticated:s,authLoading:r,isLoading:i,demoCode:a}=ge(),{isAdmin:o}=kt(),l=Jn(n.pathname),[c,p]=m.useState(0),[u,S]=m.useState(null),[b,d]=m.useState({}),[E,v]=m.useState(null),[T,D]=m.useState("websocket"),[U,O]=m.useState(null),[G,L]=m.useState(null),[I,k]=m.useState(null),[w,P]=m.useState(!1),Y=()=>{P(!0),dt(!0)},_=()=>{P(!1),dt(!1)},{isOpen:$,closeDisclaimerModal:ee,checkDisclaimerStatus:f}=Wn(),[A,M]=m.useState(null),[z,K]=m.useState(null),[J,W]=m.useState(null),[tt,$e]=m.useState(null),[pe,de]=m.useState(null),[Fe,x]=m.useState(null),[te,ne]=m.useState(null),[Ae,fe]=m.useState(0);m.useEffect(()=>{s&&!r&&f()},[s,r]),m.useEffect(()=>{if(!r&&(s||a)){const y=setTimeout(()=>{Ln(s,a)},300);return()=>clearTimeout(y)}},[s,r,a]);const ke=m.useCallback(y=>{if(y)switch(y.type){case"SELECT_ROLEPLAY_SCENARIO":K(y.scenario),e(h.LIVE_TRAINING);break;case"SELECT_SIMULATOR_SCENARIO":W(y.scenario),e(h.SCENARIO_TRAINING);break;case"START_GYM_GAME":k(y.config),e(h.RHETORIK_GYM_SESSION,{state:{gameConfig:y.config}});break;case"SELECT_GYM_MODE":$e(y.mode),e(h.RHETORIK_GYM);break;case"SELECT_VIDEO_TRAINING_SCENARIO":de(y.scenario),e(h.VIDEO_TRAINING);break;default:console.warn("Unknown pending action type:",y.type)}},[e]),se=m.useCallback((y,C=null)=>s?(y(),!0):(r||(C&&M(C),Y()),!1),[s,r]);m.useEffect(()=>{const y=()=>{const X=mr();p(X)},C=(X=0)=>{y(),X<5&&setTimeout(()=>C(X+1),200)};requestAnimationFrame(()=>{setTimeout(()=>C(),50)});const V=()=>setTimeout(y,100);return window.addEventListener("load",V),window.addEventListener("resize",y),window.addEventListener("scroll",y,{passive:!0}),()=>{window.removeEventListener("load",V),window.removeEventListener("resize",y),window.removeEventListener("scroll",y)}},[]),m.useEffect(()=>{vt()},[n.pathname]);const Z=m.useCallback((y,C=null)=>{if(vt(),y==="video_training"&&fe(X=>X+1),C)switch(y){case"dashboard":K({id:C});break;case"simulator":W({id:C});break;case"video_training":de({id:C});break}const V=Yn[y];e(V||h.OVERVIEW)},[e]),Kt=m.useCallback(y=>{S(y),d({}),v(null),e(h.LIVE_TRAINING_SETUP,{state:{scenario:y}})},[e]),Ut=m.useCallback(y=>{d(y),e(h.LIVE_TRAINING_DEVICES,{state:{scenario:u,variables:y}})},[e,u]),Wt=m.useCallback(()=>{S(null),d({}),e(h.LIVE_TRAINING)},[e]),Vt=m.useCallback(({selectedMicrophoneId:y,connectionMode:C="websocket"})=>{v(y),D(C);const V=C==="proxy"?h.LIVE_TRAINING_PROXY:h.LIVE_TRAINING_SESSION;e(V,{state:{scenario:u,variables:b,microphoneId:y}})},[e,u,b]),Ht=m.useCallback(()=>{v(null),e(h.LIVE_TRAINING_SETUP,{state:{scenario:u}})},[e,u]),nt=m.useCallback(()=>{S(null),d({}),e(h.LIVE_TRAINING)},[e]),st=m.useCallback(y=>{S(null),d({}),O(y),e(`/verlauf/${y.type||"roleplay"}/${y.id}`,{state:{session:y}})},[e]),Yt=m.useCallback((y=null)=>{L(y),e(h.HISTORY,{state:{initialTab:y}})},[e]),Jt=m.useCallback(()=>{L(null),e(h.LIVE_TRAINING)},[e]),_e=m.useCallback(y=>{const V={briefings:Te.BRIEFINGS,simulator:Te.SIMULATOR,video:Te.VIDEO,roleplay:Te.ROLEPLAY}[y]||null;L(V),e(h.HISTORY,{state:{initialTab:V}})},[e]),qt=m.useCallback(y=>{O(y),e(`/verlauf/${y.type||"roleplay"}/${y.id}`,{state:{session:y}})},[e]),Zt=m.useCallback(()=>{O(null),e(h.HISTORY)},[e]),Xt=m.useCallback((y,C)=>{x({session:y,scenario:C}),e(h.SCENARIO_TRAINING)},[e]),rt=m.useCallback((y,C,V)=>{const X=V||y?.type;X==="roleplay"?(C&&K(C),e(h.LIVE_TRAINING)):X==="video"?(C&&de(C),e(h.VIDEO_TRAINING)):(ne({session:y,scenario:C}),e(h.SCENARIO_TRAINING))},[e]),Qt=m.useCallback(y=>{k(y),e(h.RHETORIK_GYM_SESSION,{state:{gameConfig:y}})},[e]),en=m.useCallback(()=>{k(null),e(h.RHETORIK_GYM)},[e]),tn=m.useCallback(y=>{},[]),xe=m.useCallback(({children:y})=>o?y:t.jsx(Ce,{onNavigate:Z}),[o,Z]);if(console.log(`${Ne} ðŸ” Loading check: isLoading=${i}, initialSplashShown=${Oe}, showSpinner=${i&&!Oe}`),i&&!Oe)return console.log(`${Ne} â³ Showing BrandingLoadingSpinner`),t.jsx(ur,{});const Re=()=>n.state?.scenario||u,it=()=>n.state?.variables||b,at=()=>n.state?.microphoneId||E,nn=()=>n.state?.gameConfig||I,sn=()=>n.state?.session||U,rn=()=>n.state?.initialTab||G,an=()=>t.jsx(m.Suspense,{fallback:t.jsx(dr,{}),children:t.jsxs(Rn,{children:[t.jsx(R,{path:"/",element:t.jsx(Ce,{onNavigate:Z})}),t.jsx(R,{path:h.OVERVIEW,element:t.jsx(Ce,{onNavigate:Z})}),t.jsx(R,{path:h.LIVE_TRAINING,element:t.jsx(Ws,{onSelectScenario:Kt,onOpenHistory:Yt,isAuthenticated:s,requireAuth:se,setPendingAction:M,pendingScenario:z,clearPendingScenario:()=>K(null),onNavigateToHistory:()=>_e("roleplay")})}),t.jsx(R,{path:h.LIVE_TRAINING_SETUP,element:t.jsx(Hs,{scenario:Re(),onBack:Wt,onNext:Ut})}),t.jsx(R,{path:h.LIVE_TRAINING_DEVICES,element:t.jsx(Vs,{scenario:Re(),onBack:Ht,onStart:Vt})}),t.jsx(R,{path:h.LIVE_TRAINING_SESSION,element:t.jsx(It,{scenario:Re(),variables:it(),selectedMicrophoneId:at(),connectionMode:Nt.DIRECT,onEnd:nt,onNavigateToSession:st})}),t.jsx(R,{path:h.LIVE_TRAINING_PROXY,element:t.jsx(It,{scenario:Re(),variables:it(),selectedMicrophoneId:at(),connectionMode:Nt.PROXY,onEnd:nt,onNavigateToSession:st})}),t.jsx(R,{path:h.SCENARIO_TRAINING,element:t.jsx(qs,{isAuthenticated:s,requireAuth:se,setPendingAction:M,pendingContinueSession:Fe,clearPendingContinueSession:()=>x(null),pendingRepeatSession:te,clearPendingRepeatSession:()=>ne(null),pendingScenario:J,clearPendingScenario:()=>W(null),onNavigateToHistory:()=>_e("simulator")})}),t.jsx(R,{path:h.VIDEO_TRAINING,element:t.jsx(Zs,{isAuthenticated:s,requireAuth:se,setPendingAction:M,pendingScenario:pe,clearPendingScenario:()=>de(null),onNavigateToHistory:()=>_e("video")},Ae)}),t.jsx(R,{path:h.SMART_BRIEFING,element:t.jsx(er,{isAuthenticated:s,requireAuth:se,setPendingAction:M,demoCode:a,onNavigateToSimulator:()=>e(h.SCENARIO_TRAINING),onNavigateToHistory:()=>_e("briefings")})}),t.jsx(R,{path:h.DECISION_BOARD,element:t.jsx(tr,{isAuthenticated:s,requireAuth:se,setPendingAction:M,onNavigateToHistory:()=>e(h.HISTORY)})}),t.jsx(R,{path:h.IKIGAI,element:t.jsx(nr,{isAuthenticated:s,requireAuth:se,setPendingAction:M,onNavigateToHistory:()=>e(h.HISTORY)})}),t.jsx(R,{path:h.KI_COACH,element:t.jsx(sr,{isAuthenticated:s,requireAuth:se,onNavigate:Z,onNavigateToHistory:()=>e(h.HISTORY)})}),t.jsx(R,{path:h.RHETORIK_GYM,element:t.jsx(Xs,{onStartGame:Qt,isAuthenticated:s,requireAuth:se,setPendingAction:M})}),t.jsx(R,{path:h.RHETORIK_GYM_SESSION,element:t.jsx(Qs,{gameConfig:nn(),onBack:en,onComplete:tn})}),t.jsx(R,{path:h.HISTORY,element:t.jsx(Ys,{onBack:Jt,onSelectSession:qt,isAuthenticated:s,onLoginClick:Y,onContinueSession:Xt,onRepeatSession:rt,initialTab:rn(),onNavigateToModule:Z})}),t.jsx(R,{path:"/verlauf/:sessionType/:sessionId",element:t.jsx(Js,{session:sn(),onBack:Zt,onRepeatSession:rt})}),t.jsx(R,{path:h.USAGE_LIMITS,element:t.jsx("div",{style:{padding:"24px",maxWidth:"600px",margin:"0 auto"},children:t.jsx(rr,{onNavigateToRoleplay:()=>e(h.LIVE_TRAINING)})})}),t.jsx(R,{path:h.ADMIN,element:t.jsx(xe,{children:t.jsx("div",{style:{padding:"24px"},children:t.jsx(ir,{onNavigate:Z})})})}),t.jsx(R,{path:h.ADMIN_ROLEPLAYS,element:t.jsx(xe,{children:t.jsx("div",{style:{padding:"24px"},children:t.jsx(ar,{onBack:()=>e(h.ADMIN)})})})}),t.jsx(R,{path:h.ADMIN_SIMULATOR,element:t.jsx(xe,{children:t.jsx("div",{style:{padding:"24px"},children:t.jsx(or,{onBack:()=>e(h.ADMIN)})})})}),t.jsx(R,{path:h.ADMIN_VIDEO,element:t.jsx(xe,{children:t.jsx("div",{style:{padding:"24px"},children:t.jsx(lr,{onBack:()=>e(h.ADMIN)})})})}),t.jsx(R,{path:h.ADMIN_PARTNERS,element:t.jsx(xe,{children:t.jsx("div",{style:{padding:"24px"},children:t.jsx(cr,{onBack:()=>e(h.ADMIN)})})})}),t.jsx(R,{path:"*",element:t.jsx(Ce,{onNavigate:Z})})]})});return t.jsxs(t.Fragment,{children:[t.jsx($n,{activeView:l,onNavigate:Z,headerOffset:c,onLoginClick:Y,children:an()}),t.jsx(Kn,{isOpen:w,onClose:()=>{_(),M(null),!s&&Hn(n.pathname)&&e(h.HOME)},onLoginSuccess:async y=>{await f(),A&&(ke(A),M(null))}}),t.jsx(Un,{isOpen:$,onClose:ee,onAcknowledge:y=>{ee()}})]})}function pr(){return t.jsx(An,{children:t.jsx(Mn,{children:t.jsx(Dn,{children:t.jsx(gr,{})})})})}const N="[MAIN.JSX]";console.log(`${N} ðŸš€ Script loaded at ${new Date().toISOString()}`);function fr(){return new Promise(e=>{const n=document.querySelectorAll('link[rel="stylesheet"]'),s=Array.from(n).filter(o=>{if(!o.href)return!1;const l=o.href.toLowerCase();return l.includes("bewerbungstrainer")||l.includes("featureinfobutton")||l.includes("karriereheld")||o.id&&o.id.includes("bewerbungstrainer")});if(console.log(`${N} ðŸŽ¨ Found ${s.length} app stylesheets`),s.length===0){console.log(`${N} ðŸŽ¨ No external CSS found, waiting for styles to apply...`),requestAnimationFrame(()=>{requestAnimationFrame(()=>{console.log(`${N} ðŸŽ¨ Styles should be applied now`),e()})});return}let r=0;const i=s.length,a=()=>{r++,console.log(`${N} ðŸŽ¨ CSS loaded: ${r}/${i}`),r>=i&&(console.log(`${N} âœ… All CSS loaded!`),requestAnimationFrame(()=>{e()}))};s.forEach(o=>{o.sheet?(console.log(`${N} ðŸŽ¨ CSS already loaded: ${o.href}`),a()):(o.addEventListener("load",()=>{console.log(`${N} ðŸŽ¨ CSS load event: ${o.href}`),a()}),o.addEventListener("error",()=>{console.warn(`${N} âš ï¸ CSS failed to load: ${o.href}`),a()}))}),setTimeout(()=>{r<i&&(console.warn(`${N} âš ï¸ CSS loading timeout, proceeding anyway`),e())},3e3)})}let be=!1,Ge=null;function xr(){if(console.log(`${N} ðŸ“¦ initReactApp() called, hasAlreadyMounted=${be}`),be){console.log(`${N} â­ï¸ Skipping - already mounted`);return}const e=document.getElementById("bewerbungstrainer-app")||document.getElementById("root");if(console.log(`${N} ðŸ” Looking for root element:`,e?"FOUND":"NOT FOUND"),!e){console.error(`${N} âŒ Root element not found! Looking for #bewerbungstrainer-app or #root`);return}if(e._reactRootContainer||e.__reactRoot||Ge){console.warn(`${N} âš ï¸ Root element already has a React root, skipping re-mount...`),be=!0;return}if(e.dataset.reactMounted==="true"){console.warn(`${N} âš ï¸ DOM marker indicates React already mounted (likely caching issue), skipping...`),be=!0;return}try{for(console.log(`${N} ðŸ§¹ Clearing root element children...`);e.firstChild;)e.removeChild(e.firstChild);console.log(`${N} ðŸŽ¯ Creating React root with StrictMode...`),Ge=Fn.createRoot(e),Ge.render(t.jsx(m.StrictMode,{children:t.jsx(pr,{})})),be=!0,e.dataset.reactMounted="true",console.log(`${N} âœ… React app mounted successfully!`)}catch(n){console.error(`${N} âŒ Failed to mount React app:`,n)}}function br(){return new Promise(e=>{let s=0;const r=()=>{s++;const i=document.documentElement.classList.contains("bewerbungstrainer-css-loaded"),o=getComputedStyle(document.documentElement).getPropertyValue("--primary-accent").trim()!=="",l=document.createElement("div");l.style.cssText="position:absolute;left:-9999px;visibility:hidden;";const c=document.createElement("div");c.className="flex";const p=document.createElement("div");p.className="rounded-xl";const u=document.createElement("div");u.className="bg-transparent",l.appendChild(c),l.appendChild(p),l.appendChild(u),document.body.appendChild(l);const S=window.getComputedStyle(c),b=window.getComputedStyle(p),d=window.getComputedStyle(u),E=S.display==="flex",v=b.borderRadius!=="0px"&&b.borderRadius!=="";d.backgroundColor==="rgba(0, 0, 0, 0)"||d.backgroundColor,document.body.removeChild(l);const T=E||v,D=document.styleSheets;let U=!1,O=!1;try{for(let L=0;L<D.length;L++){const I=D[L];I.href&&(I.href.includes("bewerbungstrainer")||I.href.includes("FeatureInfoButton")||I.href.includes("karriereheld"))&&(U=!0,I.cssRules&&I.cssRules.length>100&&(O=!0)),I.cssRules&&I.cssRules.length>500&&(O=!0)}}catch{O=!0}i||o&&T&&O||s>=150?(s>=150?(console.log(`${N} ðŸŽ¨ CSS check timeout after ${s} attempts, proceeding...`),console.log(`${N} ðŸŽ¨ Final state: loadedClass=${i}, cssVar=${o}, flex=${E}, rounded=${v}, rules=${O}`)):console.log(`${N} ðŸŽ¨ CSS is fully applied (attempt ${s}, loadedClass=${i}, cssVar=${o}, flex=${E}, rounded=${v})`),setTimeout(()=>e(),100)):setTimeout(r,10)};r()})}async function yr(){console.log(`${N} ðŸ• waitForDOMAndMount() called, readyState=${document.readyState}`);const e=async n=>{console.log(`${N} ðŸŽ¬ safeMount() via ${n}`),console.log(`${N} â³ Waiting for CSS to load...`),await fr(),console.log(`${N} â³ Verifying CSS is applied...`),await br(),console.log(`${N} ðŸŽ¨ CSS ready, mounting React...`),requestAnimationFrame(()=>{try{xr()}catch(s){console.error(`${N} âŒ Error during mount:`,s)}})};if(document.getElementById("bewerbungstrainer-app")||document.getElementById("root")){console.log(`${N} ðŸ“ Strategy 1: Element already available`),setTimeout(()=>e("Strategy1-ElementExists"),50);return}if(document.readyState==="loading")console.log(`${N} ðŸ“ Strategy 2: Waiting for DOMContentLoaded`),document.addEventListener("DOMContentLoaded",()=>{console.log(`${N} ðŸ“¢ DOMContentLoaded fired`),setTimeout(()=>e("Strategy2-DOMContentLoaded"),50)});else{console.log(`${N} ðŸ“ Strategy 3: Polling for element`);let n=0;const s=50,r=setInterval(()=>{n++,document.getElementById("bewerbungstrainer-app")||document.getElementById("root")?(console.log(`${N} âœ… Element found after ${n} attempts`),clearInterval(r),setTimeout(()=>e("Strategy3-Polling"),50)):n>=s&&(clearInterval(r),console.error(`${N} âŒ Element not found after 5 seconds`))},100)}}console.log(`${N} ðŸ Starting mount process...`);yr();export{jt as G,$t as M,j as _,Dr as a,$r as b,zr as c,Or as d,jr as e,Br as f,zs as g,Gr as h,Fr as i,vr as j,Lt as k,kr as l,Nr as m,Cr as n,Tr as o,Mr as p,Rr as q,_r as r,Lr as s,Os as t,Pr as u,Gt as v,Ar as w,Ir as x};
