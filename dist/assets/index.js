const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./RoleplayDashboard-Ck3w5vzy.js","./ui-vendor-BAEfSb-X.js","./react-vendor-uDOJF2jQ.js","./ScenarioDashboard-khg2dnvk.js","./designTokens-LSOQEIoP.js","./designTokens.css","./ScenarioCard-Da4NRxEW.js","./useBranding-CRmuKfX5.js","./dialog-Bc6rUSl2.js","./utils-BEHD0UYf.js","./RoleplayDeviceSetup-DvxZ82Da.js","./DeviceSetupPage-BoApRe_d.js","./MicrophoneTestDialog-Bxd46hzl.js","./RoleplayVariablesPage-BtdffgeY.js","./DynamicFormField-GSaBss9o.js","./RoleplaySessionUnified-BkIO90YZ.js","./useMobile-YxjH166V.js","./button-C27wFDRr.js","./DeviceSettingsDialog-DsCyxatN.js","./SessionHistory-CQtaYyIM.js","./RoleplaySessionReport-C816wZDZ.js","./BriefingWorkbook-DD-984qs.js","./DecisionBoardResult-DnLgolFW.js","./card-CRd_k1Xo.js","./input-B2p07toF.js","./textarea-AQGmZicy.js","./AudioRecorder-LFdSK1H4.js","./IkigaiResults-jZsWqaCh.js","./SessionDetailView-CP7yXETI.js","./index-DEx4AG1S.js","./progress-bar-C-jl1BET.js","./fullscreen-loader-CDncfBzO.js","./index-BkdYO7HP.js","./index-DpNEhGdx.js","./index-CaOJWB3f.js","./index-Bsf3_iiC.js","./IkigaiApp-XlPJ1I4L.js","./UsageLimitsDisplay-XOPSmwfQ.js","./AdminDashboard-B-pC0-wK.js","./ScenarioManager-hIKXzTL9.js","./form-accordion-CqqVK1Aa.js","./SimulatorScenarioManager-BCO8lro1.js","./VideoTrainingManager-DXwYBmIX.js","./PartnerManager-DOFCHUv4.js"])))=>i.map(i=>d[i]);
import{j as t,A as be,m as F,L as Ln,C as Wt,S as Pt,a as Je,T as Be,V as qe,M as Xe,R as zn,D as Dn,H as Fn,b as Ze,U as Bn,c as Ut,G as Ke,X as Qe,d as Gn,e as et,f as Kt,g as Ht,h as tt,i as $n,k as Wn,I as Vt,l as Yt,n as Jt,F as Pn,o as ut,p as Un,Z as Kn,q as Hn}from"./ui-vendor-BAEfSb-X.js";import{a as d,d as $e,b as nt,H as Vn,u as Yn,e as Jn,f as qn,g as L}from"./react-vendor-uDOJF2jQ.js";import{u as Z,a as We,g as ke,b as ye,w as Y,c as le,C as p,h as xe,R as qt,T as He,d as Xn,D as pt,e as Zn,f as Qn,P as er,i as tr}from"./designTokens-LSOQEIoP.js";const nr="modulepreload",rr=function(e,n){return new URL(e,n).href},ht={},P=function(n,r,i){let s=Promise.resolve();if(r&&r.length>0){let S=function(c){return Promise.all(c.map(y=>Promise.resolve(y).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};const a=document.getElementsByTagName("link"),u=document.querySelector("meta[property=csp-nonce]"),h=u?.nonce||u?.getAttribute("nonce");s=S(r.map(c=>{if(c=rr(c,i),c in ht)return;ht[c]=!0;const y=c.endsWith(".css"),x=y?'[rel="stylesheet"]':"";if(i)for(let m=a.length-1;m>=0;m--){const v=a[m];if(v.href===c&&(!y||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${x}`))return;const l=document.createElement("link");if(l.rel=y?"stylesheet":nr,y||(l.as="script"),l.crossOrigin="",l.href=c,h&&l.setAttribute("nonce",h),document.head.appendChild(l),y)return new Promise((m,v)=>{l.addEventListener("load",m),l.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return s.then(a=>{for(const u of a||[])u.status==="rejected"&&o(u.reason);return n().catch(o)})},Xt=d.createContext(null),gt={success:{bgColor:"#10b981",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})},error:{bgColor:"#ef4444",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})},info:{bgColor:"#3b82f6",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},warning:{bgColor:"#f59e0b",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}};function ir({id:e,message:n,type:r="success",duration:i=3e3,onDismiss:s}){const o=gt[r]||gt.info;return d.useEffect(()=>{if(i>0){const a=setTimeout(()=>{s(e)},i);return()=>clearTimeout(a)}},[e,i,s]),t.jsxs(F.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},transition:{duration:.2},style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 20px",backgroundColor:o.bgColor,color:"#ffffff",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)",fontSize:"15px",fontWeight:500,minWidth:"280px",maxWidth:"400px"},children:[t.jsx("span",{style:{flexShrink:0},children:o.icon}),t.jsx("span",{style:{flex:1},children:n}),t.jsx("button",{onClick:()=>s(e),style:{background:"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"6px",padding:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#ffffff",flexShrink:0},onMouseEnter:a=>a.target.style.background="rgba(255, 255, 255, 0.3)",onMouseLeave:a=>a.target.style.background="rgba(255, 255, 255, 0.2)",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}function sr({toasts:e,onDismiss:n}){return t.jsx("div",{style:{position:"fixed",top:"20px",left:"50%",transform:"translateX(-50%)",zIndex:9999,display:"flex",flexDirection:"column",gap:"10px",alignItems:"center"},children:t.jsx(be,{children:e.map(r=>t.jsx(ir,{...r,onDismiss:n},r.id))})})}function or({children:e}){const[n,r]=d.useState([]),i=d.useCallback((c,y="success",x=3e3)=>{const l=Date.now()+Math.random();return r(m=>[...m,{id:l,message:c,type:y,duration:x}]),l},[]),s=d.useCallback(c=>{r(y=>y.filter(x=>x.id!==c))},[]),o=d.useCallback((c,y)=>i(c,"success",y),[i]),a=d.useCallback((c,y)=>i(c,"error",y),[i]),u=d.useCallback((c,y)=>i(c,"info",y),[i]),h=d.useCallback((c,y)=>i(c,"warning",y),[i]),S={addToast:i,dismissToast:s,showSuccess:o,showError:a,showInfo:u,showWarning:h};return t.jsxs(Xt.Provider,{value:S,children:[e,t.jsx(sr,{toasts:n,onDismiss:s})]})}function Zt(){const e=d.useContext(Xt);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}const R={blue:{50:"#E8F4F8",600:"#3A7FA7",700:"#2D6485"},teal:{500:"#3DA389"},slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",400:"#94a3b8",700:"#334155",900:"#0f172a"}},Qt=e=>e?{sidebarBg:e["--sidebar-bg-color"]||R.slate[50],sidebarText:e["--sidebar-text-color"]||R.slate[900],sidebarTextMuted:e["--sidebar-text-muted"]||R.slate[400],sidebarActiveBg:e["--sidebar-active-bg"]||R.blue[50],sidebarActiveText:e["--sidebar-active-text"]||R.blue[700],sidebarHoverBg:e["--sidebar-hover-bg"]||R.slate[50],primaryAccent:e["--primary-accent"]||R.blue[600],borderColor:e["--border-color"]||R.slate[200],borderColorLight:e["--border-color-light"]||R.slate[100]}:null,en=[{id:"overview",moduleId:"overview",label:"Übersicht",shortLabel:"Übersicht",icon:Ln,description:"Alle Trainingsmöglichkeiten",alwaysVisible:!0},{id:"ikigai",moduleId:"ikigai",label:"Ikigai-Kompass",shortLabel:"Ikigai",icon:Wt,description:"Finde deinen idealen Karrierepfad"},{id:"decision_board",moduleId:"decision_board",label:"Entscheidungs-Kompass",shortLabel:"Entscheidung",icon:Pt,description:"KI-gestützte Entscheidungshilfe"},{id:"smart_briefing",moduleId:"smart_briefing",label:"Smart Briefing",shortLabel:"Briefing",icon:Je,description:"KI-Vorbereitungs-Assistent"},{id:"simulator",moduleId:"simulator",label:"Szenario-Training",shortLabel:"Szenario",icon:Be,description:"Frage-Antwort Training mit KI-Feedback"},{id:"video_training",moduleId:"video_training",label:"Wirkungs-Analyse",shortLabel:"Wirkung",icon:qe,description:"Video-Aufnahme mit Wirkungs-Analyse"},{id:"dashboard",moduleId:"roleplay",label:"Live-Simulationen",shortLabel:"Live",icon:Xe,description:"Live Simulationen mit KI-Interviewer"},{id:"gym",moduleId:"gym",label:"Rhetorik-Gym",shortLabel:"Gym",icon:Dn,description:"Spielerisch Rhetorik trainieren",subItems:[{id:"gym_klassiker",label:"Der Füllwort-Killer",shortLabel:"Klassiker",icon:zn,description:"60s Elevator Pitch"}]},{id:"history",moduleId:"history",label:"Meine Sessions",shortLabel:"Sessions",icon:Fn,description:"Vergangene Übungen ansehen"},{id:"usage_limits",moduleId:"roleplay",label:"Mein Kontingent",shortLabel:"Kontingent",icon:Ze,description:"Verfügbare Gesprächsminuten"}],tn=[{id:"admin",label:"Administration",shortLabel:"Admin",icon:Ut,description:"Inhalte verwalten",adminOnly:!0,subItems:[{id:"admin_roleplays",label:"Live-Simulationen",shortLabel:"Live",icon:Xe,description:"Simulations-Szenarien verwalten"},{id:"admin_simulator",label:"Szenario-Training",shortLabel:"Simulator",icon:Be,description:"Simulator-Szenarien verwalten"},{id:"admin_video",label:"Wirkungs-Analyse",shortLabel:"Wirkung",icon:qe,description:"Wirkungs-Analysen verwalten"},{id:"admin_partners",label:"Partner-Branding",shortLabel:"Partner",icon:Bn,description:"White-Label Partner verwalten"}]}],ar=({isCollapsed:e,onToggleCollapse:n,activeView:r,onNavigate:i,headerOffset:s=0,onLoginClick:o})=>{const[a,u]=d.useState([]),{branding:h,isWhiteLabel:S,partnerName:c,logoUrl:y,checkModuleAllowed:x}=Z(),{user:l,isAuthenticated:m,isAdmin:v,logout:M}=We(),{showSuccess:B}=Zt(),j=Qt(h),U=d.useMemo(()=>{const g=en.filter(_=>{if(_.alwaysVisible)return!0;const f=_.moduleId||_.id;return x(f)});return v?[...g,...tn]:g},[x,v]),K=async()=>{await M(),B("Sie wurden erfolgreich abgemeldet",3e3)},w=d.useMemo(()=>j?{sidebarBg:j.sidebarBg,sidebarText:j.sidebarText,sidebarTextMuted:j.sidebarTextMuted,activeBg:j.sidebarActiveBg,activeText:j.sidebarActiveText,hoverBg:j.sidebarHoverBg,primaryAccent:j.primaryAccent,borderColor:j.borderColor,borderColorLight:j.borderColorLight}:{sidebarBg:"#ffffff",sidebarText:R.slate[900],sidebarTextMuted:R.slate[400],activeBg:R.blue[50],activeText:R.blue[700],hoverBg:R.slate[50],primaryAccent:R.blue[600],borderColor:R.slate[200],borderColorLight:R.slate[100]},[j]),C=g=>{u(_=>_.includes(g)?_.filter(f=>f!==g):[..._,g])},T=g=>{g.subItems&&!e?C(g.id):i(g.id)};return t.jsxs(F.aside,{initial:!1,animate:{width:e?72:280},transition:{duration:.3,ease:[.4,0,.2,1]},style:{position:"fixed",left:0,top:s,bottom:0,zIndex:40,backgroundColor:w.sidebarBg,borderRight:`1px solid ${w.borderColor}`,display:"flex",flexDirection:"column",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"},children:[t.jsx("div",{style:{height:"64px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px",borderBottom:`1px solid ${w.borderColorLight}`},children:t.jsx(be,{mode:"wait",children:e?t.jsx(F.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},style:{width:"40px",height:"40px",borderRadius:"12px",background:S?w.primaryAccent:`linear-gradient(135deg, ${R.blue[600]} 0%, ${R.teal[500]} 100%)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",margin:"0 auto",overflow:"hidden"},children:y?t.jsx("img",{src:y,alt:c,style:{width:"100%",height:"100%",objectFit:"contain"}}):t.jsx(Ke,{style:{width:"20px",height:"20px",color:"white"}})},"logo-collapsed"):t.jsxs(F.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},style:{display:"flex",alignItems:"center",gap:"12px"},children:[y?t.jsx("img",{src:y,alt:c,style:{width:"40px",height:"40px",borderRadius:"12px",objectFit:"contain"}}):t.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:S?w.primaryAccent:`linear-gradient(135deg, ${R.blue[600]} 0%, ${R.teal[500]} 100%)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:t.jsx(Ke,{style:{width:"20px",height:"20px",color:"white"}})}),t.jsx("div",{style:{display:"flex",flexDirection:"column"},children:S?t.jsx("span",{style:{fontWeight:700,color:w.sidebarText,fontSize:"14px",lineHeight:"1.4"},children:c}):t.jsxs(t.Fragment,{children:[t.jsx("span",{style:{fontWeight:700,color:w.sidebarText,fontSize:"14px",lineHeight:"1.2"},children:"Karriere"}),t.jsx("span",{style:{fontWeight:700,color:w.primaryAccent,fontSize:"14px",lineHeight:"1.2"},children:"Navigation"})]})})]},"logo-full")})}),t.jsx("nav",{style:{flex:1,padding:"8px 12px",overflowY:"auto"},children:U.map((g,_)=>{const f=g.icon,A=r===g.id||g.id==="dashboard"&&r==="roleplay"||g.id==="gym"&&r.startsWith("gym")||g.id==="admin"&&r.startsWith("admin"),z=g.subItems&&g.subItems.length>0,H=a.includes(g.id),W=g.adminOnly;return t.jsxs("div",{children:[W&&t.jsx("div",{style:{margin:"12px 0",padding:e?"0":"0 4px",borderTop:`1px solid ${w.borderColor}`},children:!e&&t.jsx("span",{style:{display:"block",fontSize:"11px",fontWeight:600,color:w.sidebarTextMuted,textTransform:"uppercase",letterSpacing:"0.5px",marginTop:"12px",marginBottom:"8px",paddingLeft:"12px"},children:"Admin"})}),t.jsxs("button",{onClick:()=>T(g),style:{width:"100%",borderRadius:"12px",display:"flex",alignItems:"center",gap:"12px",position:"relative",padding:e?"12px":"12px 16px",justifyContent:e?"center":"flex-start",backgroundColor:A?w.activeBg:"transparent",color:A?w.activeText:w.sidebarText,fontWeight:A?600:400,fontSize:"14px",border:"none",cursor:"pointer",marginBottom:"4px",transition:"all 0.2s",textAlign:"left"},onMouseEnter:O=>{A||(O.currentTarget.style.backgroundColor=w.hoverBg,O.currentTarget.style.color=w.sidebarText)},onMouseLeave:O=>{A||(O.currentTarget.style.backgroundColor="transparent",O.currentTarget.style.color=w.sidebarText)},children:[A&&t.jsx("div",{style:{position:"absolute",left:0,top:"50%",transform:"translateY(-50%)",width:"4px",height:"32px",backgroundColor:w.primaryAccent,borderTopRightRadius:"9999px",borderBottomRightRadius:"9999px"}}),t.jsx(f,{style:{width:"20px",height:"20px",flexShrink:0,color:A?w.primaryAccent:w.sidebarTextMuted}}),!e&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",overflow:"hidden",flex:1,minWidth:0},children:[t.jsx("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:g.label}),t.jsx("span",{style:{fontSize:"12px",color:w.sidebarTextMuted,whiteSpace:"normal",lineHeight:1.3},children:g.description})]}),z&&t.jsx(et,{style:{width:"16px",height:"16px",color:w.sidebarTextMuted,transition:"transform 0.2s",transform:H?"rotate(180deg)":"rotate(0deg)"}})]})]}),z&&!e&&t.jsx(be,{children:H&&t.jsx(F.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},style:{overflow:"hidden",marginLeft:"16px"},children:g.subItems.map(O=>{const N=O.icon,D=r===O.id;return t.jsxs("button",{onClick:()=>i(O.id),style:{width:"100%",borderRadius:"10px",display:"flex",alignItems:"center",gap:"10px",padding:"10px 14px",backgroundColor:D?w.activeBg:"transparent",color:D?w.activeText:w.sidebarText,fontWeight:D?600:400,fontSize:"13px",border:"none",cursor:"pointer",marginBottom:"2px",transition:"all 0.2s",textAlign:"left"},onMouseEnter:I=>{D||(I.currentTarget.style.backgroundColor=w.hoverBg,I.currentTarget.style.color=w.sidebarText)},onMouseLeave:I=>{D||(I.currentTarget.style.backgroundColor="transparent",I.currentTarget.style.color=w.sidebarText)},children:[t.jsx(N,{style:{width:"16px",height:"16px",flexShrink:0,color:D?w.primaryAccent:w.sidebarTextMuted}}),t.jsx("span",{style:{whiteSpace:"nowrap"},children:O.label})]},O.id)})})})]},g.id)})}),t.jsx("div",{style:{padding:"12px",borderTop:`1px solid ${w.borderColorLight}`},children:m&&l?t.jsxs("div",{style:{marginBottom:"8px"},children:[!e&&t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px",borderRadius:"12px",backgroundColor:"transparent",border:`1px solid ${w.borderColor}`,marginBottom:"8px"},children:[t.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",backgroundColor:w.primaryAccent,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:600,fontSize:"14px",flexShrink:0},children:(l.firstName||l.displayName||"U").charAt(0).toUpperCase()}),t.jsxs("div",{style:{flex:1,minWidth:0,overflow:"hidden"},children:[t.jsx("div",{style:{fontWeight:600,fontSize:"14px",color:w.sidebarText,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:l.displayName||l.firstName||"Benutzer"}),l.email&&t.jsx("div",{style:{fontSize:"12px",color:w.sidebarText,opacity:.7,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:l.email})]})]}),t.jsxs("button",{onClick:K,style:{width:"100%",borderRadius:"12px",padding:"10px 12px",display:"flex",alignItems:"center",gap:"10px",justifyContent:e?"center":"flex-start",color:w.sidebarText,backgroundColor:"transparent",border:"none",cursor:"pointer",fontSize:"13px",transition:"all 0.2s"},onMouseEnter:g=>{g.currentTarget.style.backgroundColor=w.hoverBg},onMouseLeave:g=>{g.currentTarget.style.backgroundColor="transparent"},title:"Abmelden",children:[t.jsx(Kt,{style:{width:"18px",height:"18px",flexShrink:0}}),!e&&t.jsx("span",{children:"Abmelden"})]})]}):t.jsxs("button",{onClick:o,style:{width:"100%",borderRadius:"12px",padding:"10px 12px",display:"flex",alignItems:"center",gap:"10px",justifyContent:e?"center":"flex-start",color:w.sidebarText,backgroundColor:"transparent",border:`1px solid ${w.borderColor}`,cursor:"pointer",fontSize:"13px",fontWeight:500,transition:"all 0.2s",marginBottom:"8px"},onMouseEnter:g=>{g.currentTarget.style.backgroundColor=w.hoverBg},onMouseLeave:g=>{g.currentTarget.style.backgroundColor="transparent"},title:"Anmelden",children:[t.jsx(Ht,{style:{width:"18px",height:"18px",flexShrink:0}}),!e&&t.jsx("span",{children:"Anmelden"})]})}),t.jsx("div",{style:{padding:"0 12px 12px 12px"},children:t.jsx("button",{onClick:n,style:{width:"100%",borderRadius:"12px",padding:"12px",display:"flex",alignItems:"center",gap:"12px",justifyContent:e?"center":"flex-start",color:w.sidebarTextMuted,backgroundColor:"transparent",border:"none",cursor:"pointer",fontSize:"14px",transition:"all 0.2s"},onMouseEnter:g=>{g.currentTarget.style.backgroundColor=w.hoverBg,g.currentTarget.style.color=w.sidebarText},onMouseLeave:g=>{g.currentTarget.style.backgroundColor="transparent",g.currentTarget.style.color=w.sidebarTextMuted},children:e?t.jsx(tt,{style:{width:"20px",height:"20px"}}):t.jsxs(t.Fragment,{children:[t.jsx($n,{style:{width:"20px",height:"20px"}}),t.jsx("span",{children:"Einklappen"})]})})})]})},lr=({activeView:e,onNavigate:n,headerOffset:r=0,onLoginClick:i})=>{const[s,o]=d.useState(!1),[a,u]=d.useState([]),{branding:h,isWhiteLabel:S,partnerName:c,logoUrl:y,checkModuleAllowed:x}=Z(),{user:l,isAuthenticated:m,isAdmin:v,logout:M}=We(),{showSuccess:B}=Zt(),j=Qt(h),U=d.useMemo(()=>{const g=en.filter(_=>{const f=_.moduleId||_.id;return x(f)});return v?[...g,...tn]:g},[x,v]),K=async()=>{await M(),B("Sie wurden erfolgreich abgemeldet",3e3)},w=d.useMemo(()=>j?{headerBg:j.sidebarBg,headerText:j.sidebarText,headerTextMuted:j.sidebarTextMuted,menuBg:"#ffffff",activeBg:j.sidebarActiveBg,activeText:j.sidebarActiveText,hoverBg:j.sidebarHoverBg,primaryAccent:j.primaryAccent,borderColor:j.borderColor,textMain:R.slate[700],textMuted:R.slate[400]}:{headerBg:"#ffffff",headerText:R.slate[900],headerTextMuted:R.slate[400],menuBg:"#ffffff",activeBg:R.blue[50],activeText:R.blue[700],hoverBg:R.slate[50],primaryAccent:R.blue[600],borderColor:R.slate[200],textMain:R.slate[700],textMuted:R.slate[400]},[j]),C=g=>{n(g),o(!1)},T=g=>{u(_=>_.includes(g)?_.filter(f=>f!==g):[..._,g])};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{position:"fixed",top:r,left:0,right:0,height:"56px",backgroundColor:w.headerBg,borderBottom:`1px solid ${w.borderColor}`,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px",zIndex:50,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08)",transition:"top 0.15s ease-out"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[y?t.jsx("img",{src:y,alt:c,style:{width:"36px",height:"36px",borderRadius:"10px",objectFit:"contain"}}):t.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:S?w.primaryAccent:`linear-gradient(135deg, ${R.blue[600]} 0%, ${R.teal[500]} 100%)`,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(Ke,{style:{width:"18px",height:"18px",color:"white"}})}),t.jsx("span",{style:{fontWeight:700,color:w.headerText,fontSize:"15px"},children:S?c:"Karriere Navigation"})]}),t.jsx("button",{onClick:()=>o(!s),style:{width:"56px",height:"56px",borderRadius:"12px",border:"none",backgroundColor:s?w.hoverBg:"transparent",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:s?t.jsx(Qe,{style:{width:"40px",height:"40px",color:w.headerText}}):t.jsx(Gn,{style:{width:"40px",height:"40px",color:w.headerText}})})]}),t.jsx(be,{children:s&&t.jsxs(t.Fragment,{children:[t.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>o(!1),style:{position:"fixed",top:r+56,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.3)",zIndex:40}}),t.jsxs(F.nav,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},style:{position:"fixed",top:r+56,left:0,right:0,backgroundColor:w.menuBg,zIndex:45,padding:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",borderBottomLeftRadius:"16px",borderBottomRightRadius:"16px",maxHeight:"70vh",overflowY:"auto"},children:[U.map(g=>{const _=g.icon,f=e===g.id||g.id==="dashboard"&&e==="roleplay"||g.id==="gym"&&e.startsWith("gym")||g.id==="admin"&&e.startsWith("admin"),A=g.subItems&&g.subItems.length>0,z=a.includes(g.id),H=g.adminOnly;return t.jsxs("div",{children:[H&&t.jsx("div",{style:{margin:"12px 8px",borderTop:`1px solid ${w.borderColor}`},children:t.jsx("span",{style:{display:"block",fontSize:"11px",fontWeight:600,color:w.textMuted,textTransform:"uppercase",letterSpacing:"0.5px",marginTop:"12px",marginBottom:"8px",paddingLeft:"8px"},children:"Admin"})}),t.jsxs("button",{onClick:()=>A?T(g.id):C(g.id),style:{width:"100%",display:"flex",alignItems:"center",gap:"12px",padding:"14px 16px",borderRadius:"12px",border:"none",backgroundColor:f?w.activeBg:"transparent",color:f?w.activeText:w.textMain,fontSize:"15px",fontWeight:f?600:500,cursor:"pointer",textAlign:"left",marginBottom:"4px"},children:[t.jsx(_,{style:{width:"22px",height:"22px",color:f?w.primaryAccent:w.textMuted}}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{children:g.label}),t.jsx("div",{style:{fontSize:"12px",color:w.textMuted,fontWeight:400},children:g.description})]}),A&&t.jsx(et,{style:{width:"18px",height:"18px",color:w.textMuted,transition:"transform 0.2s",transform:z?"rotate(180deg)":"rotate(0deg)"}})]}),A&&z&&t.jsx("div",{style:{marginLeft:"20px",marginBottom:"8px"},children:g.subItems.map(W=>{const O=W.icon,N=e===W.id;return t.jsxs("button",{onClick:()=>C(W.id),style:{width:"100%",display:"flex",alignItems:"center",gap:"10px",padding:"12px 14px",borderRadius:"10px",border:"none",backgroundColor:N?w.activeBg:"transparent",color:N?w.activeText:w.textMain,fontSize:"14px",fontWeight:N?600:400,cursor:"pointer",textAlign:"left",marginBottom:"4px"},children:[t.jsx(O,{style:{width:"18px",height:"18px",color:N?w.primaryAccent:w.textMuted}}),t.jsx("span",{children:W.label})]},W.id)})})]},g.id)}),t.jsx("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:`1px solid ${w.borderColor}`},children:m&&l?t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",borderRadius:"12px",backgroundColor:"transparent",border:`1px solid ${w.borderColor}`,marginBottom:"8px"},children:[t.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:w.primaryAccent,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:600,fontSize:"16px",flexShrink:0},children:(l.firstName||l.displayName||"U").charAt(0).toUpperCase()}),t.jsxs("div",{style:{flex:1,minWidth:0},children:[t.jsx("div",{style:{fontWeight:600,fontSize:"15px",color:w.textMain},children:l.displayName||l.firstName||"Benutzer"}),l.email&&t.jsx("div",{style:{fontSize:"13px",color:w.textMain,opacity:.7},children:l.email})]})]}),t.jsxs("button",{onClick:()=>{K(),o(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",borderRadius:"12px",border:"none",backgroundColor:"transparent",color:w.textMain,fontSize:"15px",fontWeight:500,cursor:"pointer",textAlign:"left"},children:[t.jsx(Kt,{style:{width:"20px",height:"20px"}}),t.jsx("span",{children:"Abmelden"})]})]}):t.jsxs("button",{onClick:()=>{i&&i(),o(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:"12px",padding:"14px 16px",borderRadius:"12px",border:`1px solid ${w.borderColor}`,backgroundColor:"transparent",color:w.textMain,fontSize:"15px",fontWeight:600,cursor:"pointer",textAlign:"left"},children:[t.jsx(Ht,{style:{width:"20px",height:"20px"}}),t.jsx("span",{children:"Anmelden"})]})})]})]})})]})},cr=({children:e,activeView:n,onNavigate:r,headerOffset:i=0,onLoginClick:s})=>{const[o,a]=d.useState(!1),[u,h]=d.useState(!1),{branding:S}=Z(),c=d.useMemo(()=>{if(S){const x=S["--app-bg-start"]||"#f8fafc",l=S["--app-bg-mid"]||"#eff6ff",m=S["--app-bg-end"]||"#f0fdfa";return`linear-gradient(135deg, ${x} 0%, ${l} 50%, ${m} 100%)`}return"linear-gradient(135deg, #f8fafc 0%, #eff6ff 50%, #f0fdfa 100%)"},[S]);d.useEffect(()=>{const x=()=>{h(window.innerWidth<768)};x(),window.addEventListener("resize",x);const l=localStorage.getItem("sidebar-collapsed");return l!==null&&a(JSON.parse(l)),()=>window.removeEventListener("resize",x)},[]);const y=()=>{const x=!o;a(x),localStorage.setItem("sidebar-collapsed",JSON.stringify(x))};return u?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:c,zIndex:-1}}),t.jsxs("div",{style:{minHeight:i>0?`calc(100vh - ${i}px)`:"100vh"},children:[t.jsx(lr,{activeView:n,onNavigate:r,headerOffset:i,onLoginClick:s}),t.jsx("main",{"data-main-content":!0,style:{paddingTop:"56px",minHeight:i>0?`calc(100vh - ${i}px)`:"100vh"},children:e})]})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:c,zIndex:-1}}),t.jsxs("div",{style:{minHeight:i>0?`calc(100vh - ${i}px)`:"100vh"},children:[t.jsx(ar,{isCollapsed:o,onToggleCollapse:y,activeView:n,onNavigate:r,headerOffset:i,onLoginClick:s}),t.jsx(F.main,{"data-main-content":!0,initial:!1,animate:{marginLeft:o?72:280},transition:{duration:.3,ease:[.4,0,.2,1]},style:{minHeight:i>0?`calc(100vh - ${i}px)`:"100vh"},children:e})]})]})};function dr({isOpen:e,onClose:n,onSuccess:r}){const{branding:i,partnerName:s,logoUrl:o}=Z(),[a,u]=d.useState(1),[h,S]=d.useState(""),[c,y]=d.useState(""),[x,l]=d.useState(""),[m,v]=d.useState(""),[M,B]=d.useState(""),[j,U]=d.useState(""),[K,w]=d.useState(!1),[C,T]=d.useState(""),[g,_]=d.useState(!1),[f,A]=d.useState(!1),z=i?.["--primary-accent"]||"#3A7FA7",H=i?.["--button-gradient"]||"linear-gradient(135deg, #3A7FA7 0%, #3DA389 100%)",W=i?.["--header-gradient"]||"linear-gradient(135deg, #3A7FA7 0%, #3DA389 100%)",O=i?.["--focus-ring"]||"rgba(58, 127, 167, 0.3)",N=i?.["--header-text"]||"#ffffff",D=i?.["--sidebar-text-color"]||"#ffffff",I=async E=>{if(E.preventDefault(),T(""),!h.trim()){T("Bitte geben Sie Ihren Demo-Code ein.");return}if(h.trim().length!==5){T("Der Demo-Code muss 5 Zeichen lang sein.");return}_(!0);try{const te=ke(),ne=ye(),Se=await(await fetch(`${te}/demo/validate`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":ne},credentials:"same-origin",body:JSON.stringify({demo_code:h.toUpperCase().trim()})})).json();if(!Se.valid){T("Der Demo-Code ist ungültig. Bitte überprüfen Sie Ihre Eingabe.");return}Se.is_activated?(A(!0),r&&r(h.toUpperCase().trim())):u(2)}catch(te){console.error("[DEMO] Validation error:",te),T("Ein Fehler ist aufgetreten. Bitte versuchen Sie es erneut.")}finally{_(!1)}},J=async E=>{if(E.preventDefault(),T(""),!c.trim()){T("Bitte geben Sie den Firmennamen ein.");return}if(!x.trim()){T("Bitte geben Sie den Namen des Ansprechpartners ein.");return}if(!M.trim()){T("Bitte geben Sie eine Kontakt-E-Mail ein.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(M)){T("Bitte geben Sie eine gültige E-Mail-Adresse ein.");return}if(!K){T("Bitte stimmen Sie den Datenschutzbestimmungen zu.");return}_(!0);try{const ne=ke(),Te=ye(),Re=await(await fetch(`${ne}/demo/activate`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":Te},credentials:"same-origin",body:JSON.stringify({demo_code:h.toUpperCase().trim(),company_name:c.trim(),contact_name:x.trim(),homepage:m.trim(),contact_email:M.trim(),phone:j.trim(),privacy_accepted:K})})).json();Re.success?(A(!0),r&&r(h.toUpperCase().trim())):T(Re.error?.message||"Ein Fehler ist aufgetreten. Bitte versuchen Sie es erneut.")}catch(ne){console.error("[DEMO] Activation error:",ne),T("Ein Fehler ist aufgetreten. Bitte versuchen Sie es erneut.")}finally{_(!1)}},ge=()=>{f||(u(1),S(""),y(""),l(""),v(""),B(""),U(""),w(!1),T(""),n&&n())},st=()=>{u(1),T("")},Pe=E=>{E.target===E.currentTarget&&ge()};if($e.useEffect(()=>{const E=te=>{te.key==="Escape"&&e&&ge()};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[e,f]),!e)return null;const Q={width:"100%",padding:"10px 14px",fontSize:"14px",border:"1px solid #e2e8f0",borderRadius:"10px",outline:"none",transition:"all 0.2s ease",backgroundColor:"#ffffff"},X={borderColor:z,boxShadow:`0 0 0 3px ${O}`,backgroundColor:"#ffffff"},ee={display:"block",fontSize:"13px",fontWeight:"500",color:"#374151",marginBottom:"6px"};return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:Pe,role:"dialog","aria-modal":"true","aria-labelledby":"demo-modal-title",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 overflow-hidden max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"px-6 py-5",style:{background:W,color:N},children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[a===2&&t.jsx("button",{onClick:st,className:"p-1.5 rounded-lg transition-colors",style:{color:N,backgroundColor:"transparent"},onMouseEnter:E=>E.target.style.backgroundColor="rgba(255,255,255,0.2)",onMouseLeave:E=>E.target.style.backgroundColor="transparent","aria-label":"Zurück",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsx("h2",{id:"demo-modal-title",className:"text-xl font-semibold",style:{color:N},children:a===1?"Demo-Code eingeben":"Kontaktdaten"})]}),t.jsx("button",{onClick:ge,className:"p-2 rounded-xl transition-colors",style:{color:N,backgroundColor:"transparent"},onMouseEnter:E=>E.target.style.backgroundColor="rgba(255,255,255,0.2)",onMouseLeave:E=>E.target.style.backgroundColor="transparent","aria-label":"Schließen",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o&&a===1&&t.jsx("div",{className:"mt-3 mb-1 flex justify-center",children:t.jsx("img",{src:o,alt:`${s} Logo`,style:{height:"4rem",maxWidth:"100%",objectFit:"contain"}})}),t.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3",children:[t.jsx("div",{className:"w-8 h-1 rounded-full transition-colors",style:{backgroundColor:N,opacity:a>=1?1:.3}}),t.jsx("div",{className:"w-8 h-1 rounded-full transition-colors",style:{backgroundColor:N,opacity:a>=2?1:.3}})]})]}),a===1&&t.jsxs("form",{onSubmit:I,className:"p-6 space-y-4",children:[t.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl text-blue-700 text-sm",children:t.jsx("p",{children:"Willkommen zur Demo! Bitte geben Sie den Demo-Code ein, den Sie von uns erhalten haben."})}),C&&t.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm flex items-start gap-3",children:[t.jsx("svg",{className:"w-5 h-5 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("span",{children:C})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"demo-code",style:ee,children:["Demo-Code ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",id:"demo-code",value:h,onChange:E=>S(E.target.value.toUpperCase()),style:{...Q,fontFamily:"monospace",fontSize:"24px",fontWeight:"600",letterSpacing:"4px",textAlign:"center",padding:"16px 14px"},onFocus:E=>Object.assign(E.target.style,X),onBlur:E=>{E.target.style.borderColor="#e2e8f0",E.target.style.boxShadow="none"},placeholder:"XXXXX",maxLength:5,disabled:g,autoComplete:"off",autoFocus:!0})]}),t.jsx("button",{type:"submit",disabled:g,style:{width:"100%",padding:"14px 24px",fontSize:"16px",fontWeight:600,color:D,background:g?"#94a3b8":H,border:"none",borderRadius:"12px",cursor:g?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",transition:"all 0.2s ease",opacity:g?.7:1,boxShadow:g?"none":"0 4px 14px rgba(58, 127, 167, 0.3)",marginTop:"16px"},onMouseEnter:E=>{g||(E.target.style.transform="translateY(-1px)",E.target.style.boxShadow="0 6px 20px rgba(58, 127, 167, 0.4)")},onMouseLeave:E=>{E.target.style.transform="translateY(0)",E.target.style.boxShadow=g?"none":"0 4px 14px rgba(58, 127, 167, 0.3)"},children:g?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{fill:"none",viewBox:"0 0 24 24",style:{width:"20px",height:"20px",color:D,animation:"spin 1s linear infinite"},children:[t.jsx("circle",{style:{opacity:.25},cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{style:{opacity:.75},fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t.jsx("span",{style:{color:D},children:"Wird überprüft..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:D,style:{width:"20px",height:"20px"},children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),t.jsx("span",{style:{color:D},children:"Weiter"})]})}),t.jsxs("p",{className:"text-xs text-center text-gray-500 pt-2",children:["Haben Sie keinen Demo-Code? Kontaktieren Sie uns unter"," ",t.jsx("a",{href:"mailto:info@karriereheld.de",className:"underline",style:{color:z},children:"info@karriereheld.de"})]})]}),a===2&&t.jsxs("form",{onSubmit:J,className:"p-6 space-y-4",children:[t.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-xl text-green-700 text-sm",children:t.jsxs("p",{children:[t.jsx("strong",{children:"Code gültig!"})," Bitte geben Sie noch Ihre Kontaktdaten ein, um die Demo zu starten."]})}),C&&t.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm flex items-start gap-3",children:[t.jsx("svg",{className:"w-5 h-5 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("span",{children:C})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"company-name",style:ee,children:["Firma ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",id:"company-name",value:c,onChange:E=>y(E.target.value),style:Q,onFocus:E=>Object.assign(E.target.style,X),onBlur:E=>{E.target.style.borderColor="#e2e8f0",E.target.style.boxShadow="none"},placeholder:"Ihre Firma",disabled:g,autoComplete:"organization",autoFocus:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"contact-name",style:ee,children:["Ansprechpartner ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",id:"contact-name",value:x,onChange:E=>l(E.target.value),style:Q,onFocus:E=>Object.assign(E.target.style,X),onBlur:E=>{E.target.style.borderColor="#e2e8f0",E.target.style.boxShadow="none"},placeholder:"Ihr Name",disabled:g,autoComplete:"name"})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"contact-email",style:ee,children:["E-Mail ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"email",id:"contact-email",value:M,onChange:E=>B(E.target.value),style:Q,onFocus:E=>Object.assign(E.target.style,X),onBlur:E=>{E.target.style.borderColor="#e2e8f0",E.target.style.boxShadow="none"},placeholder:"email@firma.de",disabled:g,autoComplete:"email"})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"homepage",style:ee,children:["Homepage ",t.jsx("span",{className:"text-gray-400",children:"(optional)"})]}),t.jsx("input",{type:"url",id:"homepage",value:m,onChange:E=>v(E.target.value),style:Q,onFocus:E=>Object.assign(E.target.style,X),onBlur:E=>{E.target.style.borderColor="#e2e8f0",E.target.style.boxShadow="none"},placeholder:"https://www.ihre-firma.de",disabled:g,autoComplete:"url"})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"phone",style:ee,children:["Telefon ",t.jsx("span",{className:"text-gray-400",children:"(optional)"})]}),t.jsx("input",{type:"tel",id:"phone",value:j,onChange:E=>U(E.target.value),style:Q,onFocus:E=>Object.assign(E.target.style,X),onBlur:E=>{E.target.style.borderColor="#e2e8f0",E.target.style.boxShadow="none"},placeholder:"+49 123 456789",disabled:g,autoComplete:"tel"})]}),t.jsxs("div",{className:"flex items-start gap-3 pt-2",children:[t.jsx("input",{type:"checkbox",id:"privacy-accepted",checked:K,onChange:E=>w(E.target.checked),className:"mt-1 w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",disabled:g,style:{accentColor:z}}),t.jsxs("label",{htmlFor:"privacy-accepted",className:"text-sm text-gray-600",children:["Ich stimme den"," ",t.jsx("a",{href:"/datenschutz",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-gray-900",style:{color:z},children:"Datenschutzbestimmungen"})," ","zu. ",t.jsx("span",{className:"text-red-500",children:"*"})]})]}),t.jsx("button",{type:"submit",disabled:g,style:{width:"100%",padding:"14px 24px",fontSize:"16px",fontWeight:600,color:D,background:g?"#94a3b8":H,border:"none",borderRadius:"12px",cursor:g?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",transition:"all 0.2s ease",opacity:g?.7:1,boxShadow:g?"none":"0 4px 14px rgba(58, 127, 167, 0.3)",marginTop:"16px"},onMouseEnter:E=>{g||(E.target.style.transform="translateY(-1px)",E.target.style.boxShadow="0 6px 20px rgba(58, 127, 167, 0.4)")},onMouseLeave:E=>{E.target.style.transform="translateY(0)",E.target.style.boxShadow=g?"none":"0 4px 14px rgba(58, 127, 167, 0.3)"},children:g?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{fill:"none",viewBox:"0 0 24 24",style:{width:"20px",height:"20px",color:D,animation:"spin 1s linear infinite"},children:[t.jsx("circle",{style:{opacity:.25},cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{style:{opacity:.75},fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t.jsx("span",{style:{color:D},children:"Wird aktiviert..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:D,style:{width:"20px",height:"20px"},children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),t.jsx("span",{style:{color:D},children:"Demo starten"})]})})]})]})})}const ur="demo";function pr({isOpen:e,onClose:n,onLoginSuccess:r}){const{login:i,logout:s,branding:o,partnerName:a,logoUrl:u,setDemoCode:h}=Z(),[S,c]=d.useState(""),[y,x]=d.useState(""),[l,m]=d.useState(""),[v,M]=d.useState(!1),[B,j]=d.useState(!1),[U,K]=d.useState(null),w=o?.["--primary-accent"]||"#3A7FA7",C=o?.["--button-gradient"]||"linear-gradient(135deg, #3A7FA7 0%, #3DA389 100%)",T=o?.["--header-gradient"]||"linear-gradient(135deg, #3A7FA7 0%, #3DA389 100%)",g=o?.["--focus-ring"]||"rgba(58, 127, 167, 0.3)",_=o?.["--header-text"]||"#ffffff",f=o?.["--sidebar-text-color"]||"#ffffff",A=async I=>{if(I.preventDefault(),m(""),!S.trim()||!y.trim()){m("Bitte geben Sie Benutzername und Passwort ein.");return}M(!0);try{const J=await i(S,y);J.success?S.toLowerCase()===ur?(localStorage.setItem("bewerbungstrainer_demo_pending","true"),K(J.user),j(!0),x("")):(c(""),x(""),r&&r(J.user),n&&n()):m(J.error||"Login fehlgeschlagen. Bitte versuchen Sie es erneut.")}catch(J){console.error("Login error:",J),m("Ein Fehler ist aufgetreten. Bitte versuchen Sie es erneut.")}finally{M(!1)}},z=I=>{localStorage.removeItem("bewerbungstrainer_demo_pending"),h&&h(I),c(""),x(""),j(!1),r&&U&&r(U),n&&n()},H=async()=>{localStorage.removeItem("bewerbungstrainer_demo_pending");try{s&&await s()}catch(I){console.error("[LOGIN] Error logging out demo user:",I)}j(!1),K(null),c(""),x("")},W=()=>{m(""),c(""),x(""),n&&n()},O=I=>{I.target===I.currentTarget&&W()};if($e.useEffect(()=>{const I=J=>{J.key==="Escape"&&e&&W()};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[e]),!e)return null;const N={width:"100%",padding:"12px 16px",fontSize:"15px",border:"1px solid #e2e8f0",borderRadius:"12px",outline:"none",transition:"all 0.2s ease",backgroundColor:"#ffffff"},D={borderColor:w,boxShadow:`0 0 0 3px ${g}`,backgroundColor:"#ffffff"};return t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:O,role:"dialog","aria-modal":"true","aria-labelledby":"login-modal-title",children:[t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 overflow-hidden",children:[t.jsxs("div",{className:"px-6 py-5",style:{background:T,color:_},children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h2",{id:"login-modal-title",className:"text-xl font-semibold",style:{color:_},children:"Anmelden"}),t.jsx("button",{onClick:W,className:"p-2 rounded-xl transition-colors",style:{color:_,backgroundColor:"transparent"},onMouseEnter:I=>I.target.style.backgroundColor="rgba(255,255,255,0.2)",onMouseLeave:I=>I.target.style.backgroundColor="transparent","aria-label":"Schließen",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u&&t.jsx("div",{className:"mt-4 mb-2 flex justify-center",children:t.jsx("img",{src:u,alt:`${a} Logo`,style:{height:"8.5rem",maxWidth:"100%",objectFit:"contain"}})}),t.jsxs("p",{className:"text-sm mt-1",style:{color:_,opacity:.8},children:["Bei ",a," anmelden"]})]}),t.jsxs("form",{onSubmit:A,className:"p-6 space-y-5",children:[l&&t.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm flex items-start gap-3",children:[t.jsx("svg",{className:"w-5 h-5 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("span",{children:l})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"login-username",className:"block text-sm font-medium text-gray-700 mb-2",children:"Benutzername oder E-Mail"}),t.jsx("input",{type:"text",id:"login-username",value:S,onChange:I=>c(I.target.value),style:N,onFocus:I=>Object.assign(I.target.style,D),onBlur:I=>{I.target.style.borderColor="#e2e8f0",I.target.style.boxShadow="none",I.target.style.backgroundColor="#ffffff"},placeholder:"Ihr Benutzername",disabled:v,autoComplete:"username",autoFocus:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"login-password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Passwort"}),t.jsx("input",{type:"password",id:"login-password",value:y,onChange:I=>x(I.target.value),style:N,onFocus:I=>Object.assign(I.target.style,D),onBlur:I=>{I.target.style.borderColor="#e2e8f0",I.target.style.boxShadow="none",I.target.style.backgroundColor="#ffffff"},placeholder:"Ihr Passwort",disabled:v,autoComplete:"current-password"})]}),t.jsx("button",{type:"submit",disabled:v,style:{width:"100%",padding:"14px 24px",fontSize:"16px",fontWeight:600,color:f,background:v?"#94a3b8":C,border:"none",borderRadius:"12px",cursor:v?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",transition:"all 0.2s ease",opacity:v?.7:1,boxShadow:v?"none":"0 4px 14px rgba(58, 127, 167, 0.3)"},onMouseEnter:I=>{v||(I.target.style.transform="translateY(-1px)",I.target.style.boxShadow="0 6px 20px rgba(58, 127, 167, 0.4)")},onMouseLeave:I=>{I.target.style.transform="translateY(0)",I.target.style.boxShadow=v?"none":"0 4px 14px rgba(58, 127, 167, 0.3)"},children:v?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{fill:"none",viewBox:"0 0 24 24",style:{width:"20px",height:"20px",color:f,animation:"spin 1s linear infinite"},children:[t.jsx("circle",{style:{opacity:.25},cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{style:{opacity:.75},fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t.jsx("span",{style:{color:f,fontSize:"16px",fontWeight:600},children:"Wird angemeldet..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:f,style:{width:"20px",height:"20px"},children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),t.jsx("span",{style:{color:f,fontSize:"16px",fontWeight:600},children:"Anmelden"})]})}),t.jsx("p",{className:"text-xs text-center text-gray-500 pt-2",children:"Verwenden Sie Ihre WordPress-Zugangsdaten zur Anmeldung."})]})]}),t.jsx(dr,{isOpen:B,onClose:H,onSuccess:z})]})}function hr({isOpen:e,onClose:n,onAcknowledge:r}){const{branding:i,partnerName:s}=Z(),[o,a]=d.useState(!1),[u,h]=d.useState(null),[S,c]=d.useState(!1),[y,x]=d.useState(""),l=i?.["--primary-accent"]||"#3A7FA7",m=i?.["--button-gradient"]||"linear-gradient(135deg, #3A7FA7 0%, #3DA389 100%)",v=i?.["--header-gradient"]||"linear-gradient(135deg, #3A7FA7 0%, #3DA389 100%)",M=i?.["--header-text"]||"#ffffff",B=i?.["--sidebar-text-color"]||"#ffffff";d.useEffect(()=>{e&&j()},[e]);const j=async()=>{try{const C=window.bewerbungstrainerConfig?.apiUrl||"/wp-json/bewerbungstrainer/v1",g=await(await fetch(`${C}/disclaimer/status`,{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":window.bewerbungstrainerConfig?.nonce||""},credentials:"same-origin"})).json();g.success&&g.disclaimer&&h(g.disclaimer)}catch(C){console.error("[DISCLAIMER] Error fetching status:",C),x("Fehler beim Laden des Hinweises")}},U=async()=>{if(u){c(!0),x("");try{const C=window.bewerbungstrainerConfig?.apiUrl||"/wp-json/bewerbungstrainer/v1",g=await(await fetch(`${C}/disclaimer/acknowledge`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.bewerbungstrainerConfig?.nonce||""},credentials:"same-origin",body:JSON.stringify({disclaimer_id:u.id,dont_show_again:o})})).json();g.success?(r&&r(o),n&&n()):x(g.message||"Fehler bei der Bestätigung")}catch(C){console.error("[DISCLAIMER] Error acknowledging:",C),x("Ein Fehler ist aufgetreten")}finally{c(!1)}}},K=C=>{C.stopPropagation()};if(d.useEffect(()=>{const C=T=>{T.key==="Escape"&&e&&T.preventDefault()};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[e]),!e||!u)return null;const w=C=>C?C.split(`
`).map((T,g)=>T.trim()?t.jsx("p",{className:"mb-3 last:mb-0",children:T},g):null):null;return t.jsxs("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",style:{zIndex:99999},onClick:K,role:"dialog","aria-modal":"true","aria-labelledby":"disclaimer-modal-title",children:[t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full flex flex-col",style:{maxHeight:"min(85vh, 600px)",maxWidth:"520px",width:"100%"},children:[t.jsx("div",{className:"px-4 sm:px-6 py-4 flex-shrink-0 rounded-t-2xl",style:{background:v,color:M},children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-xl hidden sm:flex",style:{backgroundColor:"rgba(255,255,255,0.2)"},children:t.jsx(Ut,{className:"w-5 h-5",style:{color:M}})}),t.jsxs("div",{children:[t.jsx("h2",{id:"disclaimer-modal-title",className:"text-lg sm:text-xl font-semibold",style:{color:M},children:u.title}),t.jsxs("p",{className:"text-xs sm:text-sm mt-0.5",style:{color:M,opacity:.8},children:["Version ",u.version]})]})]})}),t.jsxs("div",{className:"p-5 sm:p-6 overflow-y-auto flex-1",children:[y&&t.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm flex items-start gap-3",children:[t.jsx(Wn,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),t.jsx("span",{children:y})]}),t.jsx("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-200 mb-4 overflow-y-auto",style:{maxHeight:"180px"},children:t.jsx("div",{className:"text-gray-700 text-sm leading-relaxed",children:w(u.content)})}),t.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 p-3 sm:p-4 bg-blue-50 rounded-xl border border-blue-100 mb-4",children:[t.jsx(Vt,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 flex-shrink-0 mt-0.5"}),t.jsxs("p",{className:"text-xs sm:text-sm text-blue-700",children:["Mit der Bestätigung akzeptieren Sie diese Nutzungshinweise für ",s,"."]})]}),t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group mb-4 sm:mb-5",children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"checkbox",checked:o,onChange:C=>a(C.target.checked),className:"sr-only"}),t.jsx("div",{className:"w-5 h-5 rounded border-2 transition-all flex items-center justify-center",style:{borderColor:o?l:"#cbd5e1",backgroundColor:o?l:"transparent"},children:o&&t.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]}),t.jsx("span",{className:"text-sm text-gray-700 group-hover:text-gray-900 transition-colors",children:"Diesen Hinweis nicht mehr anzeigen"})]}),t.jsx("button",{onClick:U,disabled:S,style:{width:"100%",padding:"12px 20px",fontSize:"15px",fontWeight:600,color:B,background:S?"#94a3b8":m,border:"none",borderRadius:"12px",cursor:S?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",transition:"all 0.2s ease",opacity:S?.7:1,boxShadow:S?"none":"0 4px 14px rgba(58, 127, 167, 0.3)"},onMouseEnter:C=>{S||(C.target.style.transform="translateY(-1px)",C.target.style.boxShadow="0 6px 20px rgba(58, 127, 167, 0.4)")},onMouseLeave:C=>{C.target.style.transform="translateY(0)",C.target.style.boxShadow=S?"none":"0 4px 14px rgba(58, 127, 167, 0.3)"},children:S?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{fill:"none",viewBox:"0 0 24 24",style:{width:"18px",height:"18px",color:B,animation:"spin 1s linear infinite"},children:[t.jsx("circle",{style:{opacity:.25},cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{style:{opacity:.75},fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t.jsx("span",{style:{color:B,fontSize:"15px",fontWeight:600},children:"Wird gespeichert..."})]}):t.jsx("span",{style:{color:B,fontSize:"15px",fontWeight:600},children:"Verstanden"})}),t.jsx("p",{className:"text-xs text-center text-gray-500 mt-3",children:o?"Sie werden diesen Hinweis bei zukünftigen Anmeldungen nicht mehr sehen.":"Dieser Hinweis wird bei jeder Anmeldung angezeigt."})]})]}),t.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]})}function gr(){const[e,n]=d.useState(!1),[r,i]=d.useState(!1),[s,o]=d.useState(!1);return{isOpen:e,needsDisclaimer:r,isChecking:s,openDisclaimerModal:()=>n(!0),closeDisclaimerModal:()=>{n(!1),i(!1)},checkDisclaimerStatus:async()=>{o(!0);try{const S=window.bewerbungstrainerConfig?.apiUrl||"/wp-json/bewerbungstrainer/v1",y=await(await fetch(`${S}/disclaimer/status`,{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":window.bewerbungstrainerConfig?.nonce||""},credentials:"same-origin"})).json();if(y.success){const x=y.needs_acknowledgment;return i(x),x&&n(!0),x}return!1}catch(S){return console.error("[DISCLAIMER] Error checking status:",S),!1}finally{o(!1)}}}}const b={HOME:"/",OVERVIEW:"/uebersicht",LIVE_TRAINING:"/live-training",LIVE_TRAINING_SETUP:"/live-training/vorbereitung",LIVE_TRAINING_DEVICES:"/live-training/geraete",LIVE_TRAINING_SESSION:"/live-training/session",LIVE_TRAINING_PROXY:"/live-training/session-proxy",SCENARIO_TRAINING:"/szenario-training",VIDEO_TRAINING:"/wirkungs-analyse",SMART_BRIEFING:"/smart-briefing",DECISION_BOARD:"/entscheidungs-kompass",IKIGAI:"/ikigai-kompass",RHETORIK_GYM:"/rhetorik-gym",RHETORIK_GYM_SESSION:"/rhetorik-gym/session",HISTORY:"/verlauf",SESSION_DETAIL:"/verlauf/:sessionType/:sessionId",USAGE_LIMITS:"/nutzung",ADMIN:"/admin",ADMIN_ROLEPLAYS:"/admin/szenarien",ADMIN_SIMULATOR:"/admin/simulator",ADMIN_VIDEO:"/admin/video",ADMIN_PARTNERS:"/admin/partner"},fr={overview:b.OVERVIEW,dashboard:b.LIVE_TRAINING,roleplay_variables:b.LIVE_TRAINING_SETUP,roleplay_device_setup:b.LIVE_TRAINING_DEVICES,roleplay:b.LIVE_TRAINING_SESSION,roleplay_proxy:b.LIVE_TRAINING_PROXY,simulator:b.SCENARIO_TRAINING,video_training:b.VIDEO_TRAINING,smart_briefing:b.SMART_BRIEFING,decision_board:b.DECISION_BOARD,ikigai:b.IKIGAI,history:b.HISTORY,session_detail:b.SESSION_DETAIL,usage_limits:b.USAGE_LIMITS,gym:b.RHETORIK_GYM,gym_klassiker:b.RHETORIK_GYM,gym_session:b.RHETORIK_GYM_SESSION,admin:b.ADMIN,admin_roleplays:b.ADMIN_ROLEPLAYS,admin_simulator:b.ADMIN_SIMULATOR,admin_video:b.ADMIN_VIDEO,admin_partners:b.ADMIN_PARTNERS},ft={[b.HOME]:"overview",[b.OVERVIEW]:"overview",[b.LIVE_TRAINING]:"dashboard",[b.LIVE_TRAINING_SETUP]:"dashboard",[b.LIVE_TRAINING_DEVICES]:"dashboard",[b.LIVE_TRAINING_SESSION]:"dashboard",[b.LIVE_TRAINING_PROXY]:"dashboard",[b.SCENARIO_TRAINING]:"simulator",[b.VIDEO_TRAINING]:"video_training",[b.SMART_BRIEFING]:"smart_briefing",[b.DECISION_BOARD]:"decision_board",[b.IKIGAI]:"ikigai",[b.RHETORIK_GYM]:"gym_klassiker",[b.RHETORIK_GYM_SESSION]:"gym_klassiker",[b.HISTORY]:"history",[b.USAGE_LIMITS]:"usage_limits",[b.ADMIN]:"admin",[b.ADMIN_ROLEPLAYS]:"admin_roleplays",[b.ADMIN_SIMULATOR]:"admin_simulator",[b.ADMIN_VIDEO]:"admin_video",[b.ADMIN_PARTNERS]:"admin_partners"};function mr(e){return ft[e]?ft[e]:e.startsWith("/verlauf/")?"history":"overview"}var mt;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(mt||(mt={}));var xt;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(xt||(xt={}));var bt;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(bt||(bt={}));const yt=["user","model","function","system"];var St;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(St||(St={}));var wt;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(wt||(wt={}));var Et;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Et||(Et={}));var kt;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(kt||(kt={}));var Ee;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER"})(Ee||(Ee={}));var It;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(It||(It={}));var vt;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(vt||(vt={}));var At;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(At||(At={}));class V extends Error{constructor(n){super(`[GoogleGenerativeAI Error]: ${n}`)}}class fe extends V{constructor(n,r){super(n),this.response=r}}class nn extends V{constructor(n,r,i,s){super(n),this.status=r,this.statusText=i,this.errorDetails=s}}class se extends V{}const xr="https://generativelanguage.googleapis.com",br="v1beta",yr="0.21.0",Sr="genai-js";var ue;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(ue||(ue={}));class wr{constructor(n,r,i,s,o){this.model=n,this.task=r,this.apiKey=i,this.stream=s,this.requestOptions=o}toString(){var n,r;const i=((n=this.requestOptions)===null||n===void 0?void 0:n.apiVersion)||br;let o=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||xr}/${i}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function Er(e){const n=[];return e?.apiClient&&n.push(e.apiClient),n.push(`${Sr}/${yr}`),n.join(" ")}async function kr(e){var n;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",Er(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let i=(n=e.requestOptions)===null||n===void 0?void 0:n.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(s){throw new se(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${s.message}`)}for(const[s,o]of i.entries()){if(s==="x-goog-api-key")throw new se(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new se(`Header name ${s} can only be set using the apiClient field`);r.append(s,o)}}return r}async function Ir(e,n,r,i,s,o){const a=new wr(e,n,r,i,o);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},jr(o)),{method:"POST",headers:await kr(a),body:s})}}async function je(e,n,r,i,s,o={},a=fetch){const{url:u,fetchOptions:h}=await Ir(e,n,r,i,s,o);return vr(u,h,a)}async function vr(e,n,r=fetch){let i;try{i=await r(e,n)}catch(s){Ar(s,e)}return i.ok||await Cr(i,e),i}function Ar(e,n){let r=e;throw e instanceof nn||e instanceof se||(r=new V(`Error fetching from ${n.toString()}: ${e.message}`),r.stack=e.stack),r}async function Cr(e,n){let r="",i;try{const s=await e.json();r=s.error.message,s.error.details&&(r+=` ${JSON.stringify(s.error.details)}`,i=s.error.details)}catch{}throw new nn(`Error fetching from ${n.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,i)}function jr(e){const n={};if(e?.signal!==void 0||e?.timeout>=0){const r=new AbortController;e?.timeout>=0&&setTimeout(()=>r.abort(),e.timeout),e?.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),n.signal=r.signal}return n}function rt(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),De(e.candidates[0]))throw new fe(`${ie(e)}`,e);return Tr(e)}else if(e.promptFeedback)throw new fe(`Text not available. ${ie(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),De(e.candidates[0]))throw new fe(`${ie(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Ct(e)[0]}else if(e.promptFeedback)throw new fe(`Function call not available. ${ie(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),De(e.candidates[0]))throw new fe(`${ie(e)}`,e);return Ct(e)}else if(e.promptFeedback)throw new fe(`Function call not available. ${ie(e)}`,e)},e}function Tr(e){var n,r,i,s;const o=[];if(!((r=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||r===void 0)&&r.parts)for(const a of(s=(i=e.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)a.text&&o.push(a.text),a.executableCode&&o.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&o.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function Ct(e){var n,r,i,s;const o=[];if(!((r=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||r===void 0)&&r.parts)for(const a of(s=(i=e.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)a.functionCall&&o.push(a.functionCall);if(o.length>0)return o}const Rr=[Ee.RECITATION,Ee.SAFETY,Ee.LANGUAGE];function De(e){return!!e.finishReason&&Rr.includes(e.finishReason)}function ie(e){var n,r,i;let s="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)s+="Response was blocked",!((n=e.promptFeedback)===null||n===void 0)&&n.blockReason&&(s+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(s+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((i=e.candidates)===null||i===void 0)&&i[0]){const o=e.candidates[0];De(o)&&(s+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(s+=`: ${o.finishMessage}`))}return s}function Ie(e){return this instanceof Ie?(this.v=e,this):new Ie(e)}function _r(e,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(e,n||[]),s,o=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(x){i[x]&&(s[x]=function(l){return new Promise(function(m,v){o.push([x,l,m,v])>1||u(x,l)})})}function u(x,l){try{h(i[x](l))}catch(m){y(o[0][3],m)}}function h(x){x.value instanceof Ie?Promise.resolve(x.value.v).then(S,c):y(o[0][2],x)}function S(x){u("next",x)}function c(x){u("throw",x)}function y(x,l){x(l),o.shift(),o.length&&u(o[0][0],o[0][1])}}const jt=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Nr(e){const n=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=Lr(n),[i,s]=r.tee();return{stream:Or(i),response:Mr(s)}}async function Mr(e){const n=[],r=e.getReader();for(;;){const{done:i,value:s}=await r.read();if(i)return rt(zr(n));n.push(s)}}function Or(e){return _r(this,arguments,function*(){const r=e.getReader();for(;;){const{value:i,done:s}=yield Ie(r.read());if(s)break;yield yield Ie(rt(i))}})}function Lr(e){const n=e.getReader();return new ReadableStream({start(i){let s="";return o();function o(){return n.read().then(({value:a,done:u})=>{if(u){if(s.trim()){i.error(new V("Failed to parse stream"));return}i.close();return}s+=a;let h=s.match(jt),S;for(;h;){try{S=JSON.parse(h[1])}catch{i.error(new V(`Error parsing JSON response: "${h[1]}"`));return}i.enqueue(S),s=s.substring(h[0].length),h=s.match(jt)}return o()})}}})}function zr(e){const n=e[e.length-1],r={promptFeedback:n?.promptFeedback};for(const i of e){if(i.candidates)for(const s of i.candidates){const o=s.index;if(r.candidates||(r.candidates=[]),r.candidates[o]||(r.candidates[o]={index:s.index}),r.candidates[o].citationMetadata=s.citationMetadata,r.candidates[o].groundingMetadata=s.groundingMetadata,r.candidates[o].finishReason=s.finishReason,r.candidates[o].finishMessage=s.finishMessage,r.candidates[o].safetyRatings=s.safetyRatings,s.content&&s.content.parts){r.candidates[o].content||(r.candidates[o].content={role:s.content.role||"user",parts:[]});const a={};for(const u of s.content.parts)u.text&&(a.text=u.text),u.functionCall&&(a.functionCall=u.functionCall),u.executableCode&&(a.executableCode=u.executableCode),u.codeExecutionResult&&(a.codeExecutionResult=u.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),r.candidates[o].content.parts.push(a)}}i.usageMetadata&&(r.usageMetadata=i.usageMetadata)}return r}async function rn(e,n,r,i){const s=await je(n,ue.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),i);return Nr(s)}async function sn(e,n,r,i){const o=await(await je(n,ue.GENERATE_CONTENT,e,!1,JSON.stringify(r),i)).json();return{response:rt(o)}}function on(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function ve(e){let n=[];if(typeof e=="string")n=[{text:e}];else for(const r of e)typeof r=="string"?n.push({text:r}):n.push(r);return Dr(n)}function Dr(e){const n={role:"user",parts:[]},r={role:"function",parts:[]};let i=!1,s=!1;for(const o of e)"functionResponse"in o?(r.parts.push(o),s=!0):(n.parts.push(o),i=!0);if(i&&s)throw new V("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!s)throw new V("No content is provided for sending chat message.");return i?n:r}function Fr(e,n){var r;let i={model:n?.model,generationConfig:n?.generationConfig,safetySettings:n?.safetySettings,tools:n?.tools,toolConfig:n?.toolConfig,systemInstruction:n?.systemInstruction,cachedContent:(r=n?.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const s=e.generateContentRequest!=null;if(e.contents){if(s)throw new se("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=e.contents}else if(s)i=Object.assign(Object.assign({},i),e.generateContentRequest);else{const o=ve(e);i.contents=[o]}return{generateContentRequest:i}}function Tt(e){let n;return e.contents?n=e:n={contents:[ve(e)]},e.systemInstruction&&(n.systemInstruction=on(e.systemInstruction)),n}function Br(e){return typeof e=="string"||Array.isArray(e)?{content:ve(e)}:e}const Rt=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Gr={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function $r(e){let n=!1;for(const r of e){const{role:i,parts:s}=r;if(!n&&i!=="user")throw new V(`First content should be with role 'user', got ${i}`);if(!yt.includes(i))throw new V(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(yt)}`);if(!Array.isArray(s))throw new V("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new V("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const u of s)for(const h of Rt)h in u&&(o[h]+=1);const a=Gr[i];for(const u of Rt)if(!a.includes(u)&&o[u]>0)throw new V(`Content with role '${i}' can't contain '${u}' part`);n=!0}}const _t="SILENT_ERROR";class Wr{constructor(n,r,i,s={}){this.model=r,this.params=i,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=n,i?.history&&($r(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(n,r={}){var i,s,o,a,u,h;await this._sendPromise;const S=ve(n),c={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,S]},y=Object.assign(Object.assign({},this._requestOptions),r);let x;return this._sendPromise=this._sendPromise.then(()=>sn(this._apiKey,this.model,c,y)).then(l=>{var m;if(l.response.candidates&&l.response.candidates.length>0){this._history.push(S);const v=Object.assign({parts:[],role:"model"},(m=l.response.candidates)===null||m===void 0?void 0:m[0].content);this._history.push(v)}else{const v=ie(l.response);v&&console.warn(`sendMessage() was unsuccessful. ${v}. Inspect response object for details.`)}x=l}),await this._sendPromise,x}async sendMessageStream(n,r={}){var i,s,o,a,u,h;await this._sendPromise;const S=ve(n),c={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,S]},y=Object.assign(Object.assign({},this._requestOptions),r),x=rn(this._apiKey,this.model,c,y);return this._sendPromise=this._sendPromise.then(()=>x).catch(l=>{throw new Error(_t)}).then(l=>l.response).then(l=>{if(l.candidates&&l.candidates.length>0){this._history.push(S);const m=Object.assign({},l.candidates[0].content);m.role||(m.role="model"),this._history.push(m)}else{const m=ie(l);m&&console.warn(`sendMessageStream() was unsuccessful. ${m}. Inspect response object for details.`)}}).catch(l=>{l.message!==_t&&console.error(l)}),x}}async function Pr(e,n,r,i){return(await je(n,ue.COUNT_TOKENS,e,!1,JSON.stringify(r),i)).json()}async function Ur(e,n,r,i){return(await je(n,ue.EMBED_CONTENT,e,!1,JSON.stringify(r),i)).json()}async function Kr(e,n,r,i){const s=r.requests.map(a=>Object.assign(Object.assign({},a),{model:n}));return(await je(n,ue.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:s}),i)).json()}class Nt{constructor(n,r,i={}){this.apiKey=n,this._requestOptions=i,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=on(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(n,r={}){var i;const s=Tt(n),o=Object.assign(Object.assign({},this._requestOptions),r);return sn(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),o)}async generateContentStream(n,r={}){var i;const s=Tt(n),o=Object.assign(Object.assign({},this._requestOptions),r);return rn(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),o)}startChat(n){var r;return new Wr(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},n),this._requestOptions)}async countTokens(n,r={}){const i=Fr(n,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),r);return Pr(this.apiKey,this.model,i,s)}async embedContent(n,r={}){const i=Br(n),s=Object.assign(Object.assign({},this._requestOptions),r);return Ur(this.apiKey,this.model,i,s)}async batchEmbedContents(n,r={}){const i=Object.assign(Object.assign({},this._requestOptions),r);return Kr(this.apiKey,this.model,n,i)}}class Hr{constructor(n){this.apiKey=n}getGenerativeModel(n,r){if(!n.model)throw new V("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Nt(this.apiKey,n,r)}getGenerativeModelFromCachedContent(n,r,i){if(!n.name)throw new se("Cached content must contain a `name` field.");if(!n.model)throw new se("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const a of s)if(r?.[a]&&n[a]&&r?.[a]!==n[a]){if(a==="model"){const u=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,h=n.model.startsWith("models/")?n.model.replace("models/",""):n.model;if(u===h)continue}throw new se(`Different value for "${a}" specified in modelParams (${r[a]}) and cachedContent (${n[a]})`)}const o=Object.assign(Object.assign({},r),{model:n.model,tools:n.tools,toolConfig:n.toolConfig,systemInstruction:n.systemInstruction,cachedContent:n});return new Nt(this.apiKey,o,i)}}const an={FALLBACK_ORDER:["gemini-2.5-flash","gemini-2.0-flash","gemini-1.5-flash-latest"]},Ae={API_KEY_MISSING:"Gemini API key is required",AUDIO_FILE_MISSING:"Audio file is required",TRANSCRIPT_EMPTY:"Transcript is empty",JSON_PARSE_FAILED:"Fehler beim Parsen der Antwort"};function Vr(e,n={}){const{roleType:r="interview",userRoleLabel:i="Bewerber",agentRoleLabel:s="Gesprächspartner"}=n;return r==="simulation"?Jr(e,i,s):Yr(e,i,s)}function Yr(e,n,r){return`Du bist ein professioneller Karriere-Coach. Analysiere das folgende Gespräch-Transkript und gib konstruktives Feedback in "Du"-Form.

SEHR WICHTIG: Bewerte AUSSCHLIESSLICH den/die ${n.toUpperCase()}!
- Die Aussagen des ${r} (z.B. "H. Müller", "${r}", oder ähnliche Kennzeichnungen) dienen NUR als Kontext für die Fragen.
- Dein gesamtes Feedback, alle Stärken, Verbesserungen, Tipps und Bewertungen beziehen sich NUR auf die Antworten und das Verhalten des/der ${n}.
- Bewerte NICHT die Qualität der Fragen oder das Verhalten des ${r}.

WICHTIG: Antworte NUR mit einem JSON-Objekt in folgendem Format (keine zusätzlichen Erklärungen):

{
  "summary": "Eine kurze Zusammenfassung des Gesamteindrucks des/der ${n} (2-3 Sätze)",
  "strengths": [
    "Stärke 1: Konkrete positive Beobachtung",
    "Stärke 2: Was gut gemacht wurde",
    "Stärke 3: Weitere Stärken"
  ],
  "improvements": [
    "Verbesserung 1: Konkreter Verbesserungsbereich",
    "Verbesserung 2: Was besser gemacht werden könnte",
    "Verbesserung 3: Weitere Verbesserungspotenziale"
  ],
  "tips": [
    "Tipp 1: Konkrete, umsetzbare Empfehlung",
    "Tipp 2: Praktischer Ratschlag",
    "Tipp 3: Weitere hilfreiche Tipps"
  ],
  "rating": {
    "overall": 7,
    "communication": 6,
    "motivation": 7,
    "professionalism": 8
  }
}

Bewertungsskala: 1-10 (1=sehr schwach, 10=exzellent)

Analysiere diese Aspekte der Antworten des/der ${n}:
- Struktur & Klarheit der Antworten
- Inhalt & Beispiele, die genannt werden
- Motivation & Begeisterung
- Professionalität & Selbstbewusstsein

Sei konstruktiv, ehrlich und motivierend. Fokussiere auf umsetzbare Verbesserungen.

Transkript:
${e}

JSON Feedback:`}function Jr(e,n,r){return`Du bist ein professioneller Coach für Kommunikation und Gesprächsführung. Analysiere das folgende Gespräch-Transkript und gib konstruktives Feedback in "Du"-Form.

KONTEXT: Dies ist eine Simulation, bei der der/die ${n} das Gespräch führt und der/die ${r} darauf reagiert.

SEHR WICHTIG: Bewerte AUSSCHLIESSLICH den/die ${n.toUpperCase()}!
- Die Aussagen des/der ${r} dienen als Kontext für die Reaktionen.
- Dein gesamtes Feedback bezieht sich NUR auf die Gesprächsführung, Reaktionen und das Verhalten des/der ${n}.
- Bewerte die Fähigkeit, das Gespräch professionell zu führen und auf den/die ${r} einzugehen.

WICHTIG: Antworte NUR mit einem JSON-Objekt in folgendem Format (keine zusätzlichen Erklärungen):

{
  "summary": "Eine kurze Zusammenfassung der Gesprächsführung des/der ${n} (2-3 Sätze)",
  "strengths": [
    "Stärke 1: Konkrete positive Beobachtung zur Gesprächsführung",
    "Stärke 2: Was in der Kommunikation gut gemacht wurde",
    "Stärke 3: Weitere Stärken im Umgang mit dem/der ${r}"
  ],
  "improvements": [
    "Verbesserung 1: Konkreter Verbesserungsbereich in der Gesprächsführung",
    "Verbesserung 2: Wie besser auf den/die ${r} eingegangen werden könnte",
    "Verbesserung 3: Weitere Verbesserungspotenziale"
  ],
  "tips": [
    "Tipp 1: Konkrete, umsetzbare Empfehlung für ähnliche Situationen",
    "Tipp 2: Praktischer Ratschlag zur Gesprächsführung",
    "Tipp 3: Weitere hilfreiche Tipps"
  ],
  "rating": {
    "overall": 7,
    "communication": 6,
    "motivation": 7,
    "professionalism": 8
  }
}

Bewertungsskala: 1-10 (1=sehr schwach, 10=exzellent)

Analysiere diese Aspekte der Gesprächsführung des/der ${n}:
- Gesprächsführung & Struktur (Wie gut wurde das Gespräch geleitet?)
- Kundenorientierung & Empathie (Wie gut wurde auf den/die ${r} eingegangen?)
- Problemlösungskompetenz (Wie effektiv wurden Anliegen bearbeitet?)
- Professionalität & Souveränität (Wie professionell war das Auftreten?)

Sei konstruktiv, ehrlich und motivierend. Fokussiere auf umsetzbare Verbesserungen für die Gesprächsführung.

Transkript:
${e}

JSON Feedback:`}function qr(e,n){return e.replace("${transcript}",n)}const Xr=["Ähm","Äh","Öh","Mh","Halt","Eigentlich","Sozusagen","Quasi","Irgendwie","Also","Genau","Ja also"];function ln(){return`${Xr.slice(0,9).map(n=>`"${n}"`).join(", ")}, "Also" (am Satzanfang), "Genau" (als Füllwort), "Ja also"`}const de="[Keine Sprache erkannt]";function cn(){return`ABSOLUTE REGEL - KEINE HALLUZINATION:
Du DARFST NUR transkribieren, was TATSÄCHLICH in der Audio-Datei gesprochen wird.
- Bei Stille, Rauschen, oder unverständlichem Audio: transcript = "${de}"
- Bei nur 1-2 Sekunden Audio ohne klare Sprache: transcript = "${de}"
- ERFINDE NIEMALS Wörter, Sätze oder Inhalte!
- Wenn du unsicher bist, ob etwas gesagt wurde: NICHT transkribieren!
- Wenn jemand nur "Weiß ich nicht" oder "Keine Ahnung" sagt, transkribiere GENAU DAS
- Eine kurze Antwort wie "Ich weiß es nicht" ist eine valide Transkription
- HALLUZINIERE KEINE ausführlichen Antworten wenn der Sprecher das nicht gesagt hat`}function dn(e="game"){const n="Es wurde keine Sprache erkannt. Bitte stellen Sie sicher, dass Ihr Mikrofon funktioniert und Sie während der Aufnahme sprechen.";switch(e){case"game":return{transcript:de,filler_words:[],content_score:0,content_feedback:n};case"analysis":return{audio_metrics:{summary_text:n,confidence_score:0,speech_cleanliness:{score:0,total_filler_count:0,filler_word_analysis:[],feedback:"Keine Sprache zur Analyse erkannt."},pacing:{rating:"keine_sprache",estimated_wpm:0,issues_detected:[],feedback:"Keine Sprache zur Analyse erkannt."},tonality:{rating:"keine_sprache",emotional_tone:"neutral",highlights:[],feedback:"Keine Sprache zur Analyse erkannt."}}};case"simulator":return{transcript:de,feedback:{summary:n,strengths:[],improvements:["Bitte versuchen Sie es erneut und sprechen Sie klar und deutlich ins Mikrofon."],tips:["Achten Sie darauf, dass Ihr Mikrofon funktioniert und nicht stummgeschaltet ist."],scores:{content:0,structure:0,relevance:0,delivery:0,overall:0}},audio_metrics:{speech_rate:"keine_sprache",filler_words:{count:0,words:[],severity:"keine"},confidence_score:0,clarity_score:0,notes:"Keine Sprache erkannt"}};default:return{transcript:de,error:n}}}const un=5e3;function Zr(e={}){const{userRoleLabel:n="Bewerber",agentRoleLabel:r="Gesprächspartner",roleType:i="interview",hasTwoVoices:s=!0,transcript:o=null}=e,a=s?`
WICHTIG - STIMMEN-TRENNUNG:
Die Aufnahme enthält ZWEI Stimmen:
1. ${r.toUpperCase()} (KI-Stimme, synthetisch, akzentfrei)
2. ${n.toUpperCase()} (menschliche Stimme, natürliche Varianz)

Der/Die ${r} eröffnet typischerweise das Gespräch.
Analysiere AUSSCHLIESSLICH die Stimme des/der ${n.toUpperCase()}.
Ignoriere alle Äußerungen des/der ${r} komplett.
`:`
STIMM-ANALYSE:
Die Aufnahme enthält nur EINE Stimme: ${n.toUpperCase()}.
Analysiere diese Stimme vollständig.
`,u=o?`
TRANSKRIPT-REFERENZ:
Das folgende Transkript zeigt, wer was gesagt hat. Nutze es zur Orientierung:

${o}

Hinweis: Das Transkript hilft bei der Zuordnung. Die paraverbale Analyse (WIE etwas gesagt wird)
basiert aber auf dem AUDIO - nicht auf dem Text.
`:"";return`Du bist ein professioneller Voice-Coach und Kommunikationsexperte bei "KarriereHeld".
Deine Aufgabe: Analysiere die paraverbale Kommunikation im Audio.

Paraverbal = WIE etwas gesagt wird (nicht WAS gesagt wird).

${cn()}
${a}
${u}
═══════════════════════════════════════════════════════════
ANALYSE-DIMENSIONEN (nur ${n.toUpperCase()})
═══════════════════════════════════════════════════════════

1. FÜLLWÖRTER (Speech Cleanliness)
   ────────────────────────────────
   Erkenne diese Füllwörter: ${ln()}

   Für jedes Füllwort dokumentiere:
   - Exakter Zeitstempel (MM:SS)
   - Kontext (z.B. "Satzanfang", "beim Nachdenken", "Themenwechsel")

   Bewertungsmaßstab:
   - 0 Füllwörter: 100 Punkte (Exzellent)
   - 1-2 Füllwörter: 85-95 Punkte (Sehr gut)
   - 3-5 Füllwörter: 65-80 Punkte (Akzeptabel)
   - 6-10 Füllwörter: 40-60 Punkte (Verbesserungsbedarf)
   - 10+ Füllwörter: 0-35 Punkte (Deutlicher Übungsbedarf)

2. SPRECHTEMPO (Pacing)
   ─────────────────────
   Optimales Tempo: 120-150 Wörter pro Minute (WPM)

   Achte auf:
   - Durchschnittliches Tempo
   - Tempo-Variationen (monoton vs. dynamisch)
   - Auffällige Stellen (zu schnell/langsam) mit Zeitstempel

   Bewertung:
   - "optimal": 120-150 WPM, natürliche Variation
   - "zu_schnell": >160 WPM, gehetzt, atemlos
   - "zu_langsam": <100 WPM, schleppend, unsicher
   - "ungleichmaessig": Starke Schwankungen

3. TONALITÄT (Melodie & Betonung)
   ───────────────────────────────
   Analysiere:
   - Stimmmelodie (monoton / natürlich / lebendig)
   - Betonungen (passend / fehlend / übertrieben)
   - Emotionale Färbung (neutral / engagiert / nervös)

   Dokumentiere Highlights und Lowlights:
   - Positive Momente: Souveräne Passagen, gute Betonungen
   - Negative Momente: Unsichere Stellen, Stimmbrüche, Monotonie

4. SELBSTSICHERHEIT (Confidence)
   ──────────────────────────────
   Gesamteindruck: Wie sicher und kompetent wirkt die Stimme?

   Indikatoren für hohe Confidence:
   ✓ Klare, feste Stimme
   ✓ Angemessenes Tempo
   ✓ Gute Pausen (bewusst, nicht nervös)
   ✓ Natürliche Betonungen

   Indikatoren für niedrige Confidence:
   ✗ Zittrige oder leise Stimme
   ✗ Viele Füllwörter
   ✗ Hastiges Sprechen
   ✗ Aufsteigende Satzenden (Unsicherheit)

═══════════════════════════════════════════════════════════
OUTPUT FORMAT (nur valides JSON, kein Markdown)
═══════════════════════════════════════════════════════════

{
  "audio_metrics": {
    "summary_text": "2-3 Sätze Gesamtfazit zur Stimmwirkung des/der ${n}. Was war gut? Was kann verbessert werden?",
    "confidence_score": <0-100>,

    "speech_cleanliness": {
      "score": <0-100>,
      "total_filler_count": <Anzahl>,
      "filler_word_analysis": [
        {
          "word": "Ähm",
          "count": <Anzahl>,
          "examples": [
            {"timestamp": "00:45", "context": "Satzanfang"},
            {"timestamp": "01:20", "context": "beim Nachdenken"}
          ]
        }
      ],
      "feedback": "Konkreter Tipp zur Vermeidung"
    },

    "pacing": {
      "rating": "optimal" | "zu_schnell" | "zu_langsam" | "ungleichmaessig",
      "estimated_wpm": <Zahl>,
      "issues_detected": [
        {"timestamp": "02:10", "issue": "Beschreibung des Problems"}
      ],
      "feedback": "Konkreter Tipp zum Tempo"
    },

    "tonality": {
      "rating": "monoton" | "natürlich" | "lebendig",
      "emotional_tone": "neutral" | "engagiert" | "nervös" | "enthusiastisch",
      "highlights": [
        {"timestamp": "00:30", "type": "positive", "note": "Souveräner Einstieg"},
        {"timestamp": "03:15", "type": "negative", "note": "Stimme wird unsicher"}
      ],
      "feedback": "Konkreter Tipp zur Stimmmelodie"
    }
  }
}

Beginne jetzt mit der Analyse:`}const Mt=["Warum bin ich die beste Wahl für diese Position?","Meine größte berufliche Errungenschaft","Was motiviert mich jeden Tag aufzustehen?","Wie ich mit schwierigen Kollegen umgehe","Mein Führungsstil in 60 Sekunden","Die wichtigste Lektion meiner Karriere","Wie ich unter Druck arbeite","Warum Teamarbeit mir wichtig ist","Wenn ich ein Tier wäre, welches und warum?","Mein perfekter Tag sieht so aus...","Die beste Erfindung der Menschheit","Wenn ich die Welt verändern könnte...","Ein Buch, das mein Leben verändert hat","Mein Lieblingshobby und warum","Drei Dinge, die ich niemals machen würde","Warum Scheitern wichtig ist","Meine kontroverseste Meinung","Wie ich mit Kritik umgehe"],Ot=["Warum sollten wir ausgerechnet Sie einstellen und nicht einen der 50 anderen Bewerber?","Ihr Lebenslauf zeigt eine Lücke. Was haben Sie in dieser Zeit wirklich gemacht?","Nennen Sie mir drei echte Schwächen - und bitte keine getarnten Stärken.","Warum haben Sie Ihren letzten Job wirklich verlassen?","Wo sehen Sie sich in 5 Jahren? Und seien Sie ehrlich.","Was würde Ihr schlimmster Feind über Sie sagen?","Wenn ich Ihren letzten Chef anrufe - was wird er mir sagen?","Sie sind offensichtlich überqualifiziert. Werden Sie nicht schnell gelangweilt sein?","Warum haben Sie in Ihrer Karriere nicht mehr erreicht?","Überzeugen Sie mich in 30 Sekunden, dass Sie kein Risiko sind.","Was war Ihr größter beruflicher Misserfolg?","Haben Sie andere Angebote? Warum sind wir nicht Ihre erste Wahl?"];function Qr(e="Elevator Pitch",n=60){return`AUDIO-TRANSKRIPTION UND ANALYSE

THEMA: "${e}"

${cn()}

DEINE AUFGABE (NUR bei klar erkennbarer Sprache):
1. TRANSKRIBIEREN: Schreibe WÖRTLICH was gesprochen wird - nichts hinzufügen
2. FÜLLWÖRTER: Finde diese Wörter im Transkript: ${ln()}
3. INHALT: Bewerte wie gut die Antwort zum Thema passt (0-40 Punkte)

INHALTSBEWERTUNG (content_score):
- 0: Keine Sprache / am Thema vorbei / unverständlich
- 10: Nur ansatzweise zum Thema
- 20: Teilweise zum Thema, aber oberflächlich
- 30: Gut zum Thema, mit Substanz
- 40: Exzellent, strukturiert und überzeugend

OUTPUT - NUR valides JSON:
{
  "transcript": "${de}",
  "filler_words": [],
  "content_score": 0,
  "content_feedback": "Keine Sprache erkannt."
}

ODER bei erkannter Sprache:
{
  "transcript": "Das was tatsächlich gesagt wurde...",
  "filler_words": [{"word": "Ähm", "count": 1}],
  "content_score": 30,
  "content_feedback": "Kurzes Feedback (1-2 Sätze)"
}

ANALYSE DER AUDIO-DATEI:`}const ei={excellent:{range:[90,100],messages:["Perfekt! Du bist ein Rhetorik-Champion!","Wow! Makellose Präsentation!","Ausgezeichnet! So sieht ein Profi aus!"],emoji:"🏆"},good:{range:[70,89],messages:["Sehr gut! Nur kleine Verbesserungen nötig.","Stark! Fast perfekt!","Beeindruckend! Weiter so!"],emoji:"🌟"},medium:{range:[50,69],messages:["Solide Leistung! Übung macht den Meister.","Guter Ansatz! Da geht noch mehr.","Auf dem richtigen Weg!"],emoji:"💪"},needsWork:{range:[30,49],messages:["Nicht schlecht, aber hier ist Potenzial!","Die Füllwörter haben dich erwischt!","Bleib dran - Verbesserung ist möglich!"],emoji:"🎯"},poor:{range:[0,29],messages:["Ähm... da müssen wir üben!","Die Füllwörter haben gewonnen. Revanche?","Kopf hoch! Jeder Profi hat so angefangen."],emoji:"🔄"}};function Ji(e){for(const[,n]of Object.entries(ei))if(e>=n.range[0]&&e<=n.range[1]){const r=Math.floor(Math.random()*n.messages.length);return{message:n.messages[r],emoji:n.emoji}}return{message:"Weiter üben!",emoji:"💪"}}function ti(){return Mt[Math.floor(Math.random()*Mt.length)]}function ni(){return Ot[Math.floor(Math.random()*Ot.length)]}const qi={klassiker:{id:"klassiker",title:"Der Klassiker",subtitle:"Elevator Pitch",description:"60 Sekunden, um zu überzeugen. Präsentiere dich selbst ohne Füllwörter!",duration:60,icon:"rocket",color:"blue",topic:"Stelle dich selbst vor - wer bist du, was machst du, was ist dein Ziel?"},zufall:{id:"zufall",title:"Zufalls-Thema",subtitle:"Slot Machine",description:"Ein zufälliges Thema, spontan und fließend präsentiert.",duration:60,icon:"shuffle",color:"purple",getTopic:ti},stress:{id:"stress",title:"Stress-Test",subtitle:"Überraschungsfrage",description:"Eine knallharte Interview-Frage. Behalte die Nerven!",duration:90,icon:"zap",color:"red",getTopic:ni}},me={WEBM:"audio/webm",WEBM_OPUS:"audio/webm;codecs=opus",MP3:"audio/mpeg",WAV:"audio/wav",OGG:"audio/ogg",M4A:"audio/mp4",AAC:"audio/aac"};async function ri(e){return new Promise((n,r)=>{const i=new FileReader;i.onloadend=()=>{const s=i.result.split(",")[1];n(s)},i.onerror=()=>{r(new Error("Failed to read file as base64"))},i.readAsDataURL(e)})}async function pn(e){return{inlineData:{data:await ri(e),mimeType:e.type||me.WEBM}}}function ii(e){return typeof MediaRecorder>"u"?!1:MediaRecorder.isTypeSupported(e)}function Xi(e=[me.WEBM_OPUS,me.WEBM,me.OGG,me.MP3]){for(const n of e)if(ii(n))return n;return null}function hn(e,n={}){const{minSize:r=100,maxSize:i=100*1024*1024,allowedTypes:s=Object.values(me)}=n;return e?e.size<r?{valid:!1,error:"Audio-Datei ist zu klein oder leer"}:e.size>i?{valid:!1,error:"Audio-Datei ist zu groß"}:s.length>0&&e.type&&!s.some(a=>e.type.startsWith(a.split(";")[0]))?{valid:!1,error:`Audio-Format nicht unterstützt: ${e.type}`}:{valid:!0}:{valid:!1,error:"Keine Audio-Datei vorhanden"}}const pe=!1;function gn(e){return e.message?.includes("404")||e.message?.includes("not found")}function si(e){return e.message?.includes("API key")}function oi(e,n){const r=an.FALLBACK_ORDER.join(", ");return gn(e)?`Kein Gemini-Modell verfügbar. Versuchte Modelle: ${r}

Mögliche Lösungen:
1. Überprüfe, ob dein API Key gültig ist
2. Stelle sicher, dass die Gemini API aktiviert ist
3. Besuche https://ai.google.dev/ um deinen API-Key zu überprüfen

Fehler: ${e.message}`:si(e)?`API Key Problem: ${e.message}

Stelle sicher, dass:
1. VITE_GEMINI_API_KEY korrekt in der .env Datei gesetzt ist
2. Der API Key gültig ist (überprüfe auf https://ai.google.dev/)`:e.message||"Unbekannter Fehler"}async function he({apiKey:e,content:n,context:r}){const i=`[GEMINI ${r}]`;if(!e)throw console.error(`❌ ${i} API key is missing`),new Error(Ae.API_KEY_MISSING);let s=null;for(const a of an.FALLBACK_ORDER)try{return(await(await new Hr(e).getGenerativeModel({model:a}).generateContent(n)).response).text()}catch(u){if(console.error(`❌ ${i} Error with ${a}:`,u.message),s=u,gn(u))continue;break}const o=oi(s);throw new Error(`Fehler bei der ${r}: ${o}`)}async function ai(e,n,r="gemini-1.5-flash",i=null,s={}){if(!e||e.trim().length===0)throw console.error("❌ [GEMINI FEEDBACK] Transcript is empty"),new Error(Ae.TRANSCRIPT_EMPTY);const o=i?qr(i,e):Vr(e,s),a=s.roleType==="simulation"?"Simulation":"Interview",u=s.userRoleLabel||"Bewerber";`${a}${u}`,`${e.length}`,e.substring(0,300);const h=await he({apiKey:n,content:o,context:"FEEDBACK"});return Y.logPrompt("GEMINI_LIVE_FEEDBACK",`Live-Training Feedback-Generierung (${a})`,o,{transcript_length:e.length,custom_prompt:i?"Ja":"Nein",role_type:s.roleType||"interview",user_role_label:u},h),h}async function li(e,n,r="gemini-1.5-flash",i={}){if(!e)throw console.error("❌ [GEMINI AUDIO] Audio file is missing"),new Error(Ae.AUDIO_FILE_MISSING);const s=hn(e,{minSize:un});if(!s.valid)return console.warn(`⚠️ [GEMINI AUDIO] Audio validation failed: ${s.error}, Size: ${e.size} bytes`),JSON.stringify(dn("analysis"));const o=i.userRoleLabel||"Bewerber",a=i.agentRoleLabel||"Gesprächspartner",u=i.roleType||"interview",h=i.hasTwoVoices!==!1,S=i.transcript||null,c=await pn(e),y=Zr({userRoleLabel:o,agentRoleLabel:a,roleType:u,hasTwoVoices:h,transcript:S}),x=[y,c];`${o}`,`${Math.round(e.size/1024)}`,e.type;const l=await he({apiKey:n,content:x,context:"AUDIO"});return Y.logPrompt("GEMINI_LIVE_AUDIO_ANALYSIS",`Live-Training Audio-Analyse (${o})`,y,{audio_size_kb:Math.round(e.size/1024),audio_type:e.type,role_type:u,user_role_label:o},l),l}async function Zi(e,n,r="Elevator Pitch",i=60){if(!e)throw console.error("❌ [GEMINI GAME] Audio file is missing"),new Error(Ae.AUDIO_FILE_MISSING);const s=hn(e,{minSize:un});if(!s.valid)return console.warn(`⚠️ [GEMINI GAME] Audio validation failed: ${s.error}, Size: ${e.size} bytes`),dn("game");const o=await pn(e),u=[Qr(r,i),o];`${Math.round(e.size/1024)}`;const h=await he({apiKey:n,content:u,context:"GAME"});try{let S=h.trim();S.startsWith("```json")?S=S.replace(/```json\n?/,"").replace(/\n?```$/,""):S.startsWith("```")&&(S=S.replace(/```\n?/,"").replace(/\n?```$/,""));const c=JSON.parse(S);return{transcript:c.transcript||de,filler_words:c.filler_words||[],content_score:Math.max(0,Math.min(40,c.content_score||0)),content_feedback:c.content_feedback||""}}catch(S){throw console.error("❌ [GEMINI GAME] Failed to parse response:",S),console.error("❌ [GEMINI GAME] Raw response:",h),new Error(`${Ae.JSON_PARSE_FAILED}: ${S.message}`)}}async function Qi(e,n){const{topic:r,context:i,pros:s,cons:o,proScore:a,contraScore:u}=e;if(!r||r.trim().length===0)throw new Error("Entscheidungsfrage fehlt");const h=s.map(l=>`- "${l.text}" (Gewicht: ${l.weight}/10)`).join(`
`),S=o.map(l=>`- "${l.text}" (Gewicht: ${l.weight}/10)`).join(`
`),c=i?`
Situationsbeschreibung des Users:
"${i}"
`:"",y=`Du bist 'Decisio', ein analytischer Entscheidungs-Coach.
Deine Aufgabe: Analysiere die Entscheidungsmatrix des Users (Thema, Pro/Contra mit Gewichtung 1-10).
Ziel: Deck blinde Flecken auf und hinterfrage die Gewichtung kritisch. Nimm dem User die Entscheidung NICHT ab, sondern verbessere seine Datengrundlage.

INPUT:
Thema: ${r}
${c}
Pro-Liste (Gesamtpunkte: ${a}):
${h||"(keine Pro-Argumente)"}

Contra-Liste (Gesamtpunkte: ${u}):
${S||"(keine Contra-Argumente)"}

Rationaler Score: ${a>u?"Pro führt":u>a?"Contra führt":"Ausgeglichen"} (${a} vs ${u})

GENERATION RULES:
1. "Blind Spot": Welcher Lebensbereich (Gesundheit, Langzeit, Familie, Werte, Finanzen, Karriere, Work-Life-Balance) fehlt? Welche Perspektive wurde nicht berücksichtigt?
2. "Challenger": Identifiziere das INTERESSANTESTE oder KRITISCHSTE Argument (nicht unbedingt das mit der höchsten Gewichtung). Wähle das Argument, das am meisten hinterfragt werden sollte - vielleicht weil die Bewertung unrealistisch wirkt, wichtige Aspekte ignoriert werden, oder es auf Annahmen basiert die geprüft werden sollten.
3. "Intuition": Stelle eine systemische Frage (z.B. 10-10-10 Methode: Wie wirst du in 10 Minuten/10 Monaten/10 Jahren darüber denken? Oder: Was würdest du einem Freund in dieser Situation raten?), um das Bauchgefühl zu prüfen.

WICHTIG: Antworte AUSSCHLIESSLICH mit einem validen JSON-Objekt. Kein Markdown, kein Intro, keine Erklärung außerhalb des JSON.

FORMATIERUNG DER INHALTE:
- Jede Card soll STRUKTURIERT sein, NICHT als Fließtext
- Verwende kurze, prägnante Aufzählungspunkte
- Maximal 3-5 Punkte pro Card
- Jeder Punkt soll ein konkreter, handlungsorientierter Gedanke sein

JSON SCHEMA:
{
  "analysis_summary": "Ein bis zwei Sätze zum rationalen Ergebnis.",
  "cards": [
    {
      "type": "blind_spot",
      "title": "Der blinde Fleck",
      "points": [
        "Erster fehlender Aspekt oder Lebensbereich",
        "Zweiter fehlender Aspekt",
        "Dritter fehlender Aspekt (optional)"
      ]
    },
    {
      "type": "challenger",
      "title": "Der Härtetest",
      "argument": "NUR der Text des Arguments, OHNE Gewicht (z.B. Mehr Gehalt oder Flexible Arbeitszeiten)",
      "points": [
        "Erste kritische Frage zum Argument",
        "Zweite kritische Frage",
        "Dritte kritische Frage (optional)"
      ]
    },
    {
      "type": "intuition",
      "title": "Der Bauch-Check",
      "question": "Die zentrale Reflexionsfrage (z.B. '10-10-10 Methode')",
      "points": [
        "Erster Reflexionsimpuls",
        "Zweiter Reflexionsimpuls",
        "Dritter Reflexionsimpuls (optional)"
      ]
    }
  ]
}`;s.length,o.length,Math.max(...s.map(l=>l.weight),...o.map(l=>l.weight));const x=await he({apiKey:n,content:y,context:"DECISION"});try{let l=x.trim();l.startsWith("```json")?l=l.replace(/^```json\s*\n?/,""):l.startsWith("```")&&(l=l.replace(/^```\s*\n?/,"")),l=l.replace(/\n?```\s*$/,"").trim(),l=l.replace(/"\s*\(Gewicht:\s*\d+\/10\)"/g,'"');const m=JSON.parse(l);if(!m.cards||!Array.isArray(m.cards))throw new Error("Invalid response structure: missing cards array");return Y.logPrompt("GEMINI_DECISION_ANALYSIS","Entscheidungs-Kompass Analyse",y,{topic:r,context:i?"vorhanden":"nicht angegeben",pro_count:s.length,contra_count:o.length,pro_score:a,contra_score:u},x),m}catch(l){throw console.error("❌ [GEMINI DECISION] Failed to parse response:",l),console.error("❌ [GEMINI DECISION] Raw response:",x),new Error(`Fehler beim Verarbeiten der Analyse: ${l.message}`)}}async function es(e,n,r,i=null,s=[],o=[]){if(!e||e.trim().length===0)throw new Error("Entscheidungsfrage fehlt");if(!["strategist","security","feelgood","growth","future"].includes(n))throw new Error(`Ungültige Persona: ${n}`);const u=i?`
Situationsbeschreibung:
"${i}"
`:"",h=s.filter(l=>l.text?.trim()).map(l=>`- ${l.text}`),S=o.filter(l=>l.text?.trim()).map(l=>`- ${l.text}`);let c="";(h.length>0||S.length>0)&&(c=`
BEREITS ERFASSTE ARGUMENTE DES USERS:
Nutze diese als Kontext, um ERGÄNZENDE Perspektiven zu generieren. Wiederhole NICHT dieselben Punkte, sondern baue darauf auf oder beleuchte andere Aspekte.`,h.length>0&&(c+=`
Pro-Argumente:
${h.join(`
`)}`),S.length>0&&(c+=`
Contra-Argumente:
${S.join(`
`)}`),c+=`
`);const y=`Du bist ein kreativer Entscheidungs-Assistent für die Karriere-Plattform 'KarriereHeld'.
Deine Aufgabe: Generiere für eine spezifische Entscheidungsfrage Argumente aus der strikten Sicht einer gewählten Persona.
${u?"WICHTIG: Berücksichtige unbedingt die Situationsbeschreibung des Users - seine Wünsche, Ängste und Rahmenbedingungen!":""}

INPUT:
Thema: ${e}${u}${c}
Persona: ${n}

PERSONA DEFINITIONEN:
- 'strategist' (Der Stratege): Fokus auf CV, Marktwert, Geld, Macht, Karriereleiter, Prestige.
- 'security' (Der Sicherheits-Beauftragte): Fokus auf Arbeitsplatzsicherheit, Gehaltsgarantie, Risikominimierung, Beständigkeit.
- 'feelgood' (Der Feel-Good Manager): Fokus auf Mental Health, Stresslevel, Team-Kultur, Zeit für Familie, Spaß.
- 'growth' (Der Gründer): Fokus auf steile Lernkurve, Innovation, Netzwerk, "High Risk / High Reward".
- 'future' (Das Zukunfts-Ich): Fokus auf langfristigen Sinn, "Regret Minimization" (Was werde ich in 10 Jahren bereuen?), Lebensziele.

OUTPUT FORMAT (JSON):
Generiere genau 4 Vorschläge (2 Pro, 2 Contra), die extrem kurz und knackig sind (max. 10 Wörter pro Punkt).

WICHTIG: Antworte AUSSCHLIESSLICH mit einem validen JSON-Objekt. Kein Markdown, kein Intro.

{
  "suggestions": [
    { "type": "pro", "text": "Argument für JA aus Sicht der Persona" },
    { "type": "pro", "text": "Weiteres Argument für JA..." },
    { "type": "con", "text": "Argument für NEIN aus Sicht der Persona" },
    { "type": "con", "text": "Weiteres Argument für NEIN..." }
  ]
}`,x=await he({apiKey:r,content:y,context:"BRAINSTORM"});try{let l=x.trim();l.startsWith("```json")?l=l.replace(/```json\n?/,"").replace(/\n?```$/,""):l.startsWith("```")&&(l=l.replace(/```\n?/,"").replace(/\n?```$/,""));const m=JSON.parse(l);if(!m.suggestions||!Array.isArray(m.suggestions))throw new Error("Invalid response structure: missing suggestions array");return Y.logPrompt("GEMINI_DECISION_BRAINSTORM",`Entscheidungs-Kompass Brainstorming (${n})`,y,{topic:e,context:i?"vorhanden":"nicht angegeben",persona:n},x),m}catch(l){throw console.error("❌ [GEMINI BRAINSTORM] Failed to parse response:",l),console.error("❌ [GEMINI BRAINSTORM] Raw response:",x),new Error(`Fehler beim Verarbeiten der Vorschläge: ${l.message}`)}}async function ts(e,n=[],r=[],i=[],s){if(!e||e.trim().length===0)throw new Error("Entscheidungsfrage fehlt");const o=n.filter(c=>c.text?.trim()).map(c=>`- ${c.text}`).join(`
`)||"(keine)",a=r.filter(c=>c.text?.trim()).map(c=>`- ${c.text}`).join(`
`)||"(keine)";let u="";i.length>0&&(u=`
BISHERIGER GESPRÄCHSVERLAUF:
`+i.map((c,y)=>`Frage ${y+1}: "${c.question}"
Antwort: "${c.answer}"`).join(`

`));const h=`Du bist ein einfühlsamer systemischer Coach, der Menschen hilft, versteckte Motive und Gefühle bei wichtigen Entscheidungen zu entdecken.

ENTSCHEIDUNGSTHEMA: "${e}"

BEREITS ERFASSTE ARGUMENTE:
Pro:
${o}

Contra:
${a}
${u}

DEINE AUFGABE:
1. Analysiere, welche PERSPEKTIVE oder welcher LEBENSBEREICH noch nicht beleuchtet wurde
2. Identifiziere eine LÜCKE (z.B. fehlen Emotionen? Langzeitperspektive? Werte? Beziehungen? Ängste? Träume?)
3. Stelle GENAU EINE tiefgründige, offene Frage, um diese Lücke zu füllen

FRAGE-TECHNIKEN (wähle passend):
- Wunderfrage: "Stell dir vor, du wachst morgen auf und alles ist perfekt gelöst..."
- Worst-Case: "Was ist das Schlimmste, das passieren könnte, wenn..."
- Zukunfts-Ich: "Stell dir vor, es ist 5 Jahre später..."
- Werte-Check: "Was sagt diese Entscheidung über das aus, was dir wirklich wichtig ist?"
- Bauchgefühl: "Wenn du ganz ehrlich bist, was sagt dein Körper dazu?"
- Mentor-Perspektive: "Was würde dir jemand raten, der dich sehr gut kennt?"

REGELN:
- Verwende die "Du"-Form (persönlich, warm)
- Halte die Frage kurz (max. 2 Sätze)
- Vermeide Wiederholungen von bereits gestellten Fragen
- Die Frage soll zum Nachdenken anregen, nicht suggestiv sein

AUSGABE (nur JSON, kein Markdown):
{
  "question": "Deine Frage hier...",
  "question_type": "wunderfrage|worst_case|zukunft|werte|bauchgefühl|mentor|andere",
  "targets_gap": "Kurze Beschreibung, welche Lücke diese Frage adressiert"
}`,S=await he({apiKey:s,content:h,context:"WIZARD_QUESTION"});try{let c=S.trim();c.startsWith("```json")?c=c.replace(/```json\n?/,"").replace(/\n?```$/,""):c.startsWith("```")&&(c=c.replace(/```\n?/,"").replace(/\n?```$/,""));const y=JSON.parse(c);return Y.logPrompt("GEMINI_WIZARD_QUESTION","Deep Dive Wizard - Frage generieren",h,{topic:e,existing_pros:n.length,existing_cons:r.length},S),y}catch(c){throw console.error("❌ [GEMINI WIZARD] Failed to parse question response:",c),new Error(`Fehler beim Generieren der Frage: ${c.message}`)}}async function ns(e,n,r,i){if(!r||r.trim().length<10)return{extracted_items:[],message:"Antwort zu kurz für Analyse"};const s=`Du bist ein Daten-Analyst für Entscheidungsprozesse. Deine Aufgabe ist es, aus Freitext-Antworten strukturierte Argumente zu extrahieren.

KONTEXT:
Entscheidungsthema: "${e}"
Gestellte Frage: "${n}"

ANTWORT DES USERS:
"${r}"

DEINE AUFGABE:
1. Identifiziere die KERN-ARGUMENTE im Text (max. 3 Stück)
2. Klassifiziere jedes als "pro" (spricht FÜR das Thema/JA) oder "con" (spricht DAGEGEN/NEIN)
3. Formuliere sie in KURZE, PRÄGNANTE Stichpunkte um (substantivisch, max. 8 Wörter)
4. Schätze die WICHTIGKEIT (weight 1-10) basierend auf:
   - Emotionale Intensität der Wortwahl
   - Wie oft/ausführlich der Punkt erwähnt wird
   - Körperliche Reaktionen (Bauchgefühl, Stress, etc.)

BEISPIELE für gute Extraktionen:
- "Ich kriege immer Bauchschmerzen" → "Körperliche Stressreaktion", weight: 8-9
- "Das Geld ist halt wichtig" → "Finanzielle Sicherheit", weight: 6-7
- "Ich träume davon seit Jahren" → "Langgehegter Lebenstraum", weight: 9

WICHTIG:
- Wenn der Text keine klaren Argumente enthält (z.B. "weiß nicht", zu vage), gib ein leeres Array zurück
- Extrahiere NUR das, was der User tatsächlich gesagt hat - erfinde nichts dazu
- Pro/Con bezieht sich auf das THEMA, nicht auf die Frage

AUSGABE (nur JSON, kein Markdown):
{
  "extracted_items": [
    {
      "type": "pro|con",
      "text": "Kurzer prägnanter Stichpunkt",
      "weight": 1-10,
      "source_quote": "Originalzitat aus der Antwort"
    }
  ],
  "analysis_note": "Kurze Notiz, was du erkannt hast (optional)"
}`,o=await he({apiKey:i,content:s,context:"WIZARD_EXTRACT"});try{let a=o.trim();a.startsWith("```json")?a=a.replace(/```json\n?/,"").replace(/\n?```$/,""):a.startsWith("```")&&(a=a.replace(/```\n?/,"").replace(/\n?```$/,""));const u=JSON.parse(a);return Y.logPrompt("GEMINI_WIZARD_EXTRACT","Deep Dive Wizard - Argumente extrahieren",s,{topic:e,question_length:n.length,answer_length:r.length},o),u}catch(a){throw console.error("❌ [GEMINI EXTRACT] Failed to parse extraction response:",a),new Error(`Fehler beim Extrahieren der Argumente: ${a.message}`)}}function fn(e){return!e||typeof e!="string"?e:e.replace(/\\u([0-9a-fA-F]{4})/g,(n,r)=>String.fromCharCode(parseInt(r,16))).replace(new RegExp("(?<!\\\\)u([0-9a-fA-F]{4})","g"),(n,r)=>{const i=parseInt(r,16);return i>=160&&i<=65535?String.fromCharCode(i):n})}function ci(e){if(!e||typeof e!="string")return e;let n=e.trim();return n.startsWith("```json")?n=n.replace(/^```json\s*/i,"").replace(/\s*```\s*$/,""):n.startsWith("```")&&(n=n.replace(/^```\s*/,"").replace(/\s*```\s*$/,"")),n.trim()}function it(e,n={}){const{silent:r=!1,context:i="JSON"}=n;if(e==null)return null;if(typeof e=="object")return e;if(typeof e!="string")return r||console.warn(`[parseJSON] Expected string or object, got ${typeof e}`),null;try{let s=ci(e);return s=fn(s),JSON.parse(s)}catch(s){return r||(console.error(`[parseJSON] Failed to parse ${i}:`,s.message),console.error(`[parseJSON] Input preview: ${e.substring(0,100)}...`)),null}}function rs(e){return it(e,{context:"feedback_json"})}function is(e){return it(e,{context:"audio_analysis_json"})}function ss(e){if(!e)return[];const n=it(e,{context:"transcript"});return Array.isArray(n)?n:[]}function Ge(e){if(e==null)return e;if(typeof e=="string")return fn(e);if(Array.isArray(e))return e.map(Ge);if(typeof e=="object"){const n={};for(const r of Object.keys(e))n[r]=Ge(e[r]);return n}return e}const Me=e=>new Promise(n=>setTimeout(n,e));async function os(e,n={},r=null,i=null){if(!e||e.length===0)throw new Error("Transkript ist leer. Das Gespräch muss mindestens einen Austausch enthalten.");const s=di(e,n),o=Y.getGeminiApiKey();if(!o)throw new Error("Gemini API Key ist nicht konfiguriert. Bitte kontaktiere den Administrator.");const a={feedbackContent:null,audioAnalysisContent:null},u={roleType:n.role_type||"interview",userRoleLabel:n.user_role_label||"Bewerber",agentRoleLabel:n.interviewer_profile?.role||"Gesprächspartner"};try{const h=n.feedback_prompt||null;a.feedbackContent=await ai(s,o,"gemini-1.5-flash",h,u)}catch(h){throw console.error("❌ [Roleplay Feedback] Failed to generate feedback:",h),new Error(`Fehler bei der Feedback-Generierung: ${h.message}`)}if(r){i&&i("audio_analysis");try{a.audioAnalysisContent=await li(r,o,"gemini-1.5-flash",{...u,hasTwoVoices:!0,transcript:s})}catch(h){console.error("❌ [Roleplay Feedback] Failed to generate audio analysis:",h),a.audioAnalysisContent=JSON.stringify({error:!0,summary:"Audio-Analyse konnte nicht durchgeführt werden.",errorMessage:h.message,troubleshooting:["Stelle sicher, dass dein Mikrofon richtig funktioniert","Versuche das Gespräch erneut zu starten","Überprüfe, ob keine andere Anwendung das Mikrofon blockiert"]})}}return a}function di(e,n={}){let r="";n.title&&(r+=`Rollenspiel-Szenario: ${n.title}
`),n.description&&(r+=`Beschreibung: ${n.description}
`),n.variables&&(r+=`
Kontext-Variablen:
`,Object.entries(n.variables).forEach(([o,a])=>{r+=`- ${o}: ${a}
`})),r+=`
--- Gesprächsverlauf ---

`;const i=n.user_role_label||"Bewerber",s=n.interviewer_profile?.role||"Gesprächspartner";return e.forEach(o=>{const a=o.role==="agent"?s:i;r+=`${a}: ${o.text}

`}),r}async function as(e,n,r,i=null,s=0,o=null){try{let a=n;Array.isArray(n)&&(a=JSON.stringify(n));const u={transcript:a,feedback_json:r,duration:s};i&&(u.audio_analysis_json=i),o&&(u.conversation_id=o);const h=await Y.request(`/roleplays/sessions/${e}`,{method:"PUT",body:JSON.stringify(u)});if(s>0)try{await Y.request(`/roleplays/sessions/${e}/duration`,{method:"POST",body:JSON.stringify({duration_seconds:s})})}catch(S){console.warn("⚠️ [Roleplay Feedback] Failed to update usage limits:",S.message)}return h.data}catch(a){throw console.error("❌ [Roleplay Feedback] ========= SAVE FAILED ========="),console.error("❌ [Roleplay Feedback] Error:",a),console.error("❌ [Roleplay Feedback] Error message:",a.message),new Error(`Fehler beim Speichern der Analyse: ${a.message}`)}}async function ls(e){try{return(await Y.request(`/roleplays/sessions/${e}`,{method:"GET"})).data}catch(n){throw console.error("❌ [Roleplay Feedback] Failed to load session analysis:",n),new Error(`Fehler beim Laden der Analyse: ${n.message}`)}}async function cs(e={}){try{const n=new URLSearchParams(e).toString(),r=n?`/roleplays/sessions?${n}`:"/roleplays/sessions";return await Y.request(r,{method:"GET"})}catch(n){throw console.error("❌ [Roleplay Feedback] Failed to load sessions:",n),new Error(`Fehler beim Laden der Sessions: ${n.message}`)}}function ui(e){return`${(window.bewerbungstrainerConfig||{apiUrl:"/wp-json/bewerbungstrainer/v1"}).apiUrl}/roleplays/sessions/${e}/audio`}async function ds(e,n=10,r=3e3){const i=ui(e);for(let s=1;s<=n;s++)try{const o=await fetch(i,{method:"GET",headers:{"X-WP-Nonce":ye()},credentials:"same-origin"});if(o.ok){const a=await o.blob();if(a.size===0){if(console.warn("⚠️ [Roleplay Feedback] Audio blob is empty, retrying..."),s<n){await Me(r);continue}return null}return a}if(o.status===404&&s<n){await Me(r);continue}if(console.error(`❌ [Roleplay Feedback] Failed to fetch audio: HTTP ${o.status}`),s<n){await Me(r);continue}}catch(o){if(console.error(`❌ [Roleplay Feedback] Error fetching audio on attempt ${s}:`,o),s<n){await Me(r);continue}}return console.warn("⚠️ [Roleplay Feedback] All retry attempts failed, audio not available"),null}async function us(e,n){try{return(await Y.request(`/roleplays/sessions/${e}`,{method:"PUT",body:JSON.stringify({conversation_id:n})})).data}catch(r){throw console.error("❌ [Roleplay Feedback] Failed to update session conversation_id:",r),new Error(`Fehler beim Aktualisieren der Session: ${r.message}`)}}async function ps(e){try{return(await Y.request("/roleplays/sessions",{method:"POST",body:JSON.stringify(e)})).data}catch(n){throw console.error("❌ [Roleplay Feedback] Failed to create session:",n),new Error(`Fehler beim Erstellen der Session: ${n.message}`)}}async function pi(){try{const e=await fetch(`${ke()}/roleplays`,{headers:{"X-WP-Nonce":ye()},credentials:"same-origin"});if(!e.ok)throw new Error("Fehler beim Laden der Szenarien");const n=await e.json();return Ge(n.data||[])}catch(e){throw console.error("❌ [Roleplay Feedback] Failed to load scenarios:",e),new Error(`Fehler beim Laden der Szenarien: ${e.message}`)}}async function hs(e){try{const n=await Y.request(`/roleplays/${e}`,{method:"GET"});return Ge(n.data)}catch(n){throw console.error("❌ [Roleplay Feedback] Failed to load scenario:",n),new Error(`Fehler beim Laden des Szenarios: ${n.message}`)}}const Lt={"#e91e63":"#3b82f6","#ec407a":"#3b82f6","#f06292":"#3b82f6","#d81b60":"#3b82f6","#c2185b":"#3b82f6","#ad1457":"#3b82f6","#880e4f":"#3b82f6","#ff4081":"#3b82f6","#f50057":"#3b82f6","#f44336":"#3b82f6","#e53935":"#3b82f6","#d32f2f":"#3b82f6","#c62828":"#3b82f6","#b71c1c":"#3b82f6","#ff1744":"#3b82f6","#ff5252":"#3b82f6","#ef5350":"#3b82f6","#e57373":"#3b82f6","#ff5722":"#f59e0b","#e64a19":"#f59e0b","#bf360c":"#f59e0b"},hi=e=>{if(!e||typeof e!="string")return!1;const n=e.replace("#","");if(n.length!==6)return!1;const r=parseInt(n.substring(0,2),16)/255,i=parseInt(n.substring(2,4),16)/255,s=parseInt(n.substring(4,6),16)/255,o=Math.max(r,i,s),a=Math.min(r,i,s),u=(o+a)/2;if(o===a)return!1;const h=o-a,S=u>.5?h/(2-o-a):h/(o+a);let c;switch(o){case r:c=((i-s)/h+(i<s?6:0))/6;break;case i:c=((s-r)/h+2)/6;break;case s:c=((r-i)/h+4)/6;break;default:c=0}const y=c*360;return S>.4&&(y>=330&&y<=360||y>=0&&y<=20)},mn=(e,n="#3b82f6")=>{if(!e||typeof e!="string")return n;const r=e.toLowerCase().trim();return Lt[r]?Lt[r]:hi(r)?n:e},gi=({setup:e,isSelected:n,onSelect:r})=>{const[i,s]=d.useState(!1),o=mn(e.color);return t.jsxs(F.button,{onClick:r,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),whileHover:{y:-4},whileTap:{scale:.98},style:{position:"relative",width:"100%",textAlign:"left",borderRadius:"16px",overflow:"hidden",border:n?`2px solid ${o}`:"2px solid #e5e7eb",backgroundColor:"white",boxShadow:i||n?`0 12px 24px -8px ${o}30, 0 4px 8px -2px rgba(0,0,0,0.08)`:"0 2px 8px -2px rgba(0,0,0,0.06)",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",outline:"none",cursor:"pointer",WebkitAppearance:"none"},children:[t.jsxs("div",{style:{background:`linear-gradient(135deg, ${o} 0%, ${o}dd 100%)`,height:"100px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[n&&t.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"white",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:t.jsx(Jt,{size:14,style:{color:o},strokeWidth:3})}),t.jsx("span",{style:{fontSize:"48px",lineHeight:1,filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.15))"},children:e.icon})]}),t.jsxs("div",{style:{padding:"20px",height:"140px",display:"flex",flexDirection:"column"},children:[t.jsx("h3",{style:{fontSize:"16px",fontWeight:700,color:"#1e293b",marginBottom:"6px",lineHeight:1.3},children:e.name}),t.jsx("p",{style:{fontSize:"13px",color:"#64748b",lineHeight:1.5,marginBottom:"16px",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",flex:1},children:e.description}),t.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginTop:"auto"},children:[t.jsx("span",{style:{display:"inline-flex",alignItems:"center",fontSize:"11px",padding:"5px 10px",borderRadius:"20px",fontWeight:600,backgroundColor:`${o}15`,color:o},children:e.focus}),t.jsx("span",{style:{display:"inline-flex",alignItems:"center",fontSize:"11px",padding:"5px 10px",borderRadius:"20px",fontWeight:500,backgroundColor:"#f1f5f9",color:"#64748b"},children:e.targetGroup})]})]})]})},fi=()=>{const{currentSetup:e,setSelectedSetup:n,clearSelectedSetup:r,availableSetups:i,branding:s,setupsLoading:o}=Z(),[a,u]=d.useState(!1),[h,S]=d.useState(!1);$e.useEffect(()=>{const m=()=>S(window.innerWidth<640);return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]);const c=s?.["--primary-accent"]||"#3A7FA7",y=m=>{n(m),u(!1)},x=()=>{r(),u(!1)},l=e?mn(e.color):null;return o?t.jsx("div",{className:"w-full flex items-center justify-center py-4",children:t.jsx(Yt,{className:"w-5 h-5 animate-spin text-gray-400"})}):!i||i.length===0?null:t.jsxs(t.Fragment,{children:[t.jsxs(F.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"w-full",children:[t.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px",paddingLeft:"4px"},children:"Filtere Trainingsszenarien nach deinem Fokus"}),t.jsxs("button",{onClick:()=>u(!0),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",padding:"14px 18px",borderRadius:"14px",border:"1px solid #e2e8f0",backgroundColor:"white",cursor:"pointer",transition:"all 0.2s ease",outline:"none",WebkitAppearance:"none"},onMouseEnter:m=>{m.currentTarget.style.borderColor="#cbd5e1",m.currentTarget.style.boxShadow="0 4px 12px -2px rgba(0,0,0,0.08)"},onMouseLeave:m=>{m.currentTarget.style.borderColor="#e2e8f0",m.currentTarget.style.boxShadow="none"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px",minWidth:0},children:[t.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,backgroundColor:l?`${l}15`:"#f1f5f9"},children:e?t.jsx("span",{style:{fontSize:"24px"},children:e.icon}):t.jsx(Je,{size:22,style:{color:"#94a3b8"}})}),t.jsxs("div",{style:{textAlign:"left",minWidth:0},children:[t.jsx("div",{style:{fontSize:"15px",fontWeight:600,color:"#1e293b",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e?e.name:"Alle Szenarien"}),t.jsx("div",{style:{fontSize:"13px",color:"#64748b",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e?`${e.focus} • ${e.targetGroup}`:"Trainings-Setup wählen"})]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[t.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:"#94a3b8"},children:"Ändern"}),t.jsx(et,{size:18,style:{color:"#94a3b8"}})]})]})]}),nt.createPortal(t.jsx(be,{children:a&&t.jsxs(t.Fragment,{children:[t.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>u(!1),style:{position:"fixed",inset:0,backgroundColor:"rgba(15, 23, 42, 0.5)",backdropFilter:"blur(4px)",zIndex:9999}}),t.jsx("div",{style:{position:"fixed",inset:0,display:"flex",alignItems:h?"flex-end":"center",justifyContent:"center",padding:h?0:"16px",zIndex:1e4},children:t.jsxs(F.div,{initial:{opacity:0,y:h?100:20,scale:h?1:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:h?100:20,scale:h?1:.95},transition:{type:"spring",damping:25,stiffness:400},style:{width:"100%",maxWidth:h?"100%":"720px",backgroundColor:"#f8fafc",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",display:"flex",flexDirection:"column",maxHeight:h?"calc(100vh - 60px)":"calc(100vh - 2rem)",borderRadius:h?"24px 24px 0 0":"20px",overflow:"hidden"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:h?"20px":"24px 28px",backgroundColor:"white",borderBottom:"1px solid #e2e8f0",flexShrink:0},children:[t.jsxs("div",{children:[t.jsx("h2",{style:{fontSize:h?"18px":"22px",fontWeight:700,color:"#0f172a",marginBottom:"4px"},children:"Trainings-Setup wählen"}),t.jsx("p",{style:{fontSize:"14px",color:"#64748b",margin:0,display:h?"none":"block"},children:"Wähle deinen Schwerpunkt für passende Trainingsszenarien"})]}),t.jsx("button",{onClick:()=>u(!1),style:{width:"36px",height:"36px",borderRadius:"10px",backgroundColor:"#f1f5f9",border:"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"background-color 0.2s ease",outline:"none",WebkitAppearance:"none",flexShrink:0},onMouseEnter:m=>m.currentTarget.style.backgroundColor="#e2e8f0",onMouseLeave:m=>m.currentTarget.style.backgroundColor="#f1f5f9",children:t.jsx(Qe,{size:20,style:{color:"#64748b"}})})]}),t.jsx("div",{style:{flex:1,overflowY:"auto",padding:h?"20px":"24px 28px",WebkitOverflowScrolling:"touch"},children:t.jsx("div",{style:{display:"grid",gridTemplateColumns:h?"1fr":"repeat(2, 1fr)",gap:"16px"},children:i.map(m=>t.jsx(gi,{setup:m,isSelected:e?.id===m.id,onSelect:()=>y(m.id)},m.id))})}),t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:h?"16px 20px":"20px 28px",paddingBottom:h?"max(20px, env(safe-area-inset-bottom))":"20px",backgroundColor:"white",borderTop:"1px solid #e2e8f0",flexShrink:0},children:[t.jsx("button",{onClick:x,style:{padding:"10px 18px",borderRadius:"10px",border:"1px solid #e2e8f0",backgroundColor:"white",color:"#475569",fontSize:"14px",fontWeight:500,cursor:"pointer",transition:"all 0.2s ease",outline:"none",WebkitAppearance:"none"},onMouseEnter:m=>{m.currentTarget.style.backgroundColor="#f8fafc",m.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:m=>{m.currentTarget.style.backgroundColor="white",m.currentTarget.style.borderColor="#e2e8f0"},children:"Alle anzeigen"}),t.jsx("button",{onClick:()=>u(!1),style:{padding:"10px 24px",borderRadius:"10px",border:"none",background:c,color:"white",fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease",outline:"none",WebkitAppearance:"none",boxShadow:`0 4px 12px -2px ${c}50`},onMouseEnter:m=>{m.currentTarget.style.transform="translateY(-1px)",m.currentTarget.style.boxShadow=`0 6px 16px -2px ${c}60`},onMouseLeave:m=>{m.currentTarget.style.transform="translateY(0)",m.currentTarget.style.boxShadow=`0 4px 12px -2px ${c}50`},children:"Fertig"})]})]})})]})}),document.body)]})},xn={smartbriefing:{id:"smartbriefing",title:"Smart Briefings",subtitle:"Intelligente Wissenspakete",icon:"📋",color:p.purple[500],gradient:le(p.purple[500],p.purple[400]),description:"Smart Briefings generiert mithilfe von KI personalisierte Wissenspakete für bevorstehende berufliche Gespräche. Basierend auf Ihren Eingaben erstellt das System ein strukturiertes Briefing mit relevanten Informationen, Formulierungshilfen und strategischen Tipps.",benefits:[{icon:"⏱️",text:"Zeitersparnis: In Sekunden statt Stunden vorbereitet"},{icon:"📊",text:"Strukturierte Vorbereitung in logischen Abschnitten"},{icon:"✏️",text:"Interaktives Workbook mit persönlichen Notizen"},{icon:"💾",text:"Jederzeit abrufbar für die Wiederholung"}],learningGoals:["Fundiertes Wissen über Zielunternehmen aufbauen","Typische Fragen und Antwortstrategien kennenlernen","Selbstvertrauen durch gründliche Vorbereitung gewinnen","Eigene Stärken strukturiert aufbereiten"],duration:"~10 Sekunden Generierung",idealFor:"Vor jedem wichtigen Gespräch"},simulator:{id:"simulator",title:"Szenario-Training",subtitle:"Strukturiertes Lernen mit Sofort-Feedback",icon:"🎯",color:p.green[500],gradient:le(p.green[500],p.teal[400]),description:"Das Szenario-Training ist ein geführtes Frage-Antwort-Format, bei dem Sie vordefinierte Interview-Fragen beantworten und nach jeder einzelnen Antwort sofortiges, detailliertes Feedback erhalten. Dies ermöglicht gezieltes Lernen in Ihrem eigenen Tempo.",benefits:[{icon:"⚡",text:"Sofortiges Feedback direkt nach jeder Antwort"},{icon:"🔄",text:"Wiederholungsmöglichkeit bis die Antwort sitzt"},{icon:"💡",text:"Konkrete Verbesserungsvorschläge"},{icon:"📈",text:"Fortschrittsverfolgung über alle Fragen"}],learningGoals:["Klassische Interview-Fragen souverän beantworten","Die STAR-Methode verinnerlichen","Eigene Erfahrungen überzeugend präsentieren","Schwächen identifizieren und gezielt verbessern"],duration:"~15-30 Minuten",idealFor:"Anfänger und systematische Lerner"},roleplay:{id:"roleplay",title:"Live-Simulation",subtitle:"Realistische Echtzeit-Gespräche",icon:"🎙️",color:p.amber[500],gradient:le(p.amber[500],p.amber[400]),description:"Die Live-Simulation ermöglicht echte, bidirektionale Sprachgespräche mit einem KI-gesteuerten Interviewer. Sie sprechen über Ihr Mikrofon und erhalten in Echtzeit gesprochene Antworten und Nachfragen – genau wie in einem echten Vorstellungsgespräch.",benefits:[{icon:"🎭",text:"Realistische Drucksituation mit spontanen Reaktionen"},{icon:"🎚️",text:"Verschiedene Interviewer-Stile wählbar"},{icon:"📝",text:"Echtzeit-Transkript für spätere Analyse"},{icon:"🔊",text:"Paraverbale Analyse von Tempo und Tonalität"}],learningGoals:["Spontanes Reagieren auf unerwartete Fragen","Unter Zeitdruck strukturiert antworten","Nervosität in Gesprächssituationen reduzieren","Eigene Sprechgewohnheiten erkennen"],duration:"~10-15 Minuten",idealFor:"Fortgeschrittene, die unter Druck üben wollen"},videotraining:{id:"videotraining",title:"Wirkungs-Analyse",subtitle:"Video-Training mit Körpersprache-Feedback",icon:"🎬",color:p.red[400],gradient:le(p.red[400],p.red[300]),description:"Die Wirkungs-Analyse ist ein videobasiertes Training, bei dem Sie Ihre Antworten per Webcam aufnehmen. Die KI analysiert nicht nur das Gesprochene, sondern auch Körpersprache, Mimik und Auftreten – und gibt konkretes Feedback zur Gesamtwirkung.",benefits:[{icon:"📹",text:"Sichtbare Selbstwahrnehmung durch Video"},{icon:"🧘",text:"Ganzheitliche Analyse von Körpersprache"},{icon:"👁️",text:"Feedback zu Augenkontakt und Mimik"},{icon:"💪",text:"Verbesserung der Gesamtpräsenz"}],learningGoals:["Eigene Körpersprache bewusst wahrnehmen","Nervöse Ticks identifizieren und reduzieren","Selbstbewusstes Auftreten entwickeln","Präsenz vor der Kamera verbessern"],duration:"~15-30 Minuten",idealFor:"Wer an seiner Präsenz arbeiten will"},rhetorikgym:{id:"rhetorikgym",title:"Rhetorik-Gym",subtitle:"Spielerisches Sprechtraining",icon:"🏋️",color:p.blue[500],gradient:le(p.blue[500],p.teal[500]),description:"Das Rhetorik-Gym ist ein gamifiziertes Kurzformat (60-90 Sekunden), das gezielt Füllwörter reduziert und die Sprechflüssigkeit verbessert. Mit Punktesystem, Highscores und schnellem Feedback macht es Spaß, die eigene Redegewandtheit zu trainieren.",benefits:[{icon:"⚡",text:"Kurze, intensive Übungen für zwischendurch"},{icon:"🎮",text:"Motivierendes Punktesystem mit Highscores"},{icon:"🔢",text:"Füllwort-Zähler macht Unbewusstes sichtbar"},{icon:"⏱️",text:"Tempo-Feedback für optimales Sprechen"}],learningGoals:["Füllwörter drastisch reduzieren","Flüssiger und selbstsicherer sprechen","Optimales Sprechtempo finden","Spontan zu beliebigen Themen sprechen"],duration:"60-90 Sekunden",idealFor:"Alle, regelmäßig zwischendurch"},ikigai:{id:"ikigai",title:"Ikigai-Kompass",subtitle:"Finde deine berufliche Bestimmung",icon:"🧭",color:p.purple[500],gradient:le(p.purple[500],p.purple[400]),description:"Der Ikigai-Kompass hilft Ihnen, den Schnittpunkt Ihrer Talente, Leidenschaften und beruflichen Möglichkeiten zu finden. Durch geführte Reflexionsfragen entdecken Sie, was Sie wirklich antreibt und wo Ihre Stärken liegen.",benefits:[{icon:"💡",text:"Klarheit über eigene Stärken und Werte"},{icon:"🎯",text:"Fokus auf das, was wirklich wichtig ist"},{icon:"🗺️",text:"Orientierung für Karriereentscheidungen"},{icon:"✨",text:"Motivation durch Sinnfindung"}],learningGoals:["Eigene Stärken und Talente identifizieren","Berufliche Leidenschaften erkennen","Werte und Prioritäten klären","Karriereziele definieren"],duration:"~15-20 Minuten",idealFor:"Alle vor wichtigen Karriereentscheidungen"},decisionboard:{id:"decisionboard",title:"Entscheidungs-Board",subtitle:"Strukturierte Entscheidungsfindung",icon:"⚖️",color:p.teal[500],gradient:le(p.teal[500],p.teal[400]),description:"Das Entscheidungs-Board unterstützt Sie bei komplexen Karriereentscheidungen. Durch strukturierte Bewertung von Pro- und Contra-Argumenten sowie gewichteten Kriterien gelangen Sie zu fundierten Entscheidungen.",benefits:[{icon:"📊",text:"Strukturierte Analyse aller Optionen"},{icon:"⚖️",text:"Gewichtete Bewertungskriterien"},{icon:"🧠",text:"Reduzierung von emotionalen Fehlentscheidungen"},{icon:"📋",text:"Dokumentation für spätere Reflexion"}],learningGoals:["Entscheidungen systematisch analysieren","Prioritäten setzen und gewichten","Emotionen und Fakten trennen","Selbstbewusst Entscheidungen treffen"],duration:"~10-15 Minuten",idealFor:"Bei wichtigen Karriereentscheidungen"}},Ve="karriereheld_feature_info_dismissed",zt=e=>{try{return JSON.parse(localStorage.getItem(Ve)||"{}")[e]===!0}catch{return!1}},mi=(e,n=!0)=>{try{const r=JSON.parse(localStorage.getItem(Ve)||"{}");r[e]=n,localStorage.setItem(Ve,JSON.stringify(r))}catch(r){console.error("Failed to save feature info preference:",r)}},xi=24,ce="[FEATURE_INFO_MODAL]",Ye="karriereheld_feature_info_session_shown",Dt=e=>{try{return JSON.parse(sessionStorage.getItem(Ye)||"{}")[e]===!0}catch{return!1}},bi=e=>{try{const n=JSON.parse(sessionStorage.getItem(Ye)||"{}");n[e]=!0,sessionStorage.setItem(Ye,JSON.stringify(n))}catch{}},yi=({featureId:e,isOpen:n,onClose:r,showOnMount:i=!1})=>{const[s,o]=d.useState(!1),[a,u]=d.useState(!1),h=d.useRef(!1),S=d.useRef(Math.random().toString(36).substr(2,9)),c=xn[e];d.useEffect(()=>(console.log(`${ce} 🔵 MOUNT featureId="${e}" mountId=${S.current} showOnMount=${i}`),()=>{console.log(`${ce} 🔴 UNMOUNT featureId="${e}" mountId=${S.current}`)}),[e,i]),d.useEffect(()=>{const l=zt(e),m=Dt(e);if(console.log(`${ce} 🔄 Auto-show effect for "${e}":`,{showOnMount:i,hasFeature:!!c,isDismissed:l,hasAutoShownRef:h.current,isSessionShown:m,willShow:i&&c&&!l&&!h.current&&!m}),i&&c&&!l&&!h.current&&!m){console.log(`${ce} ✅ Will auto-show "${e}" in 400ms`),h.current=!0,bi(e);let v=!0;const M=setTimeout(()=>{const B=!Dt(e)||v;console.log(`${ce} 🎉 Timer fired for "${e}": isMounted=${v}, stillShouldShow=${B}`),v?u(!0):console.log(`${ce} ⚠️ Component unmounted before timer, skipping open`)},400);return()=>{console.log(`${ce} 🧹 Cleanup: clearing timer for "${e}"`),v=!1,clearTimeout(M)}}},[i,e,c]),d.useEffect(()=>{n!==void 0&&(u(n),n&&e&&o(zt(e)))},[n,e]),d.useEffect(()=>{if(a)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[a]);const y=()=>{c&&mi(e,s),u(!1),r?.()};if(!c)return e&&console.warn(`FeatureInfoModal: Unknown feature ID "${e}"`),null;if(!a)return null;const x=t.jsx(be,{mode:"wait",children:t.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:y,style:{position:"fixed",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",backgroundColor:xe(p.slate[900],.7),backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",zIndex:999999,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",paddingTop:"calc(16px + env(safe-area-inset-top, 0px))",paddingBottom:"calc(16px + env(safe-area-inset-bottom, 0px))",boxSizing:"border-box",contain:"layout"},children:t.jsxs(F.div,{initial:{opacity:0,scale:.9,y:30},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:30},transition:{type:"spring",damping:25,stiffness:350},onClick:l=>l.stopPropagation(),style:{backgroundColor:p.white,borderRadius:qt["2xl"],maxWidth:"500px",width:"100%",maxHeight:"min(calc(100vh - 100px), 700px)",overflow:"hidden",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.4)",border:`1px solid ${p.slate[200]}`,display:"flex",flexDirection:"column"},children:[t.jsxs("div",{style:{background:c.gradient,padding:"24px 24px 32px",position:"relative",overflow:"hidden",flexShrink:0},children:[t.jsx("div",{style:{position:"absolute",top:"-40px",right:"-40px",width:"120px",height:"120px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.1)",pointerEvents:"none"}}),t.jsx("div",{style:{position:"absolute",bottom:"-20px",left:"25%",width:"60px",height:"60px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.08)",pointerEvents:"none"}}),t.jsx("button",{onClick:y,style:{position:"absolute",top:"12px",right:"12px",width:"44px",height:"44px",borderRadius:"50%",backgroundColor:"rgba(255, 255, 255, 0.25)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:p.white,transition:He.normal,zIndex:10},onMouseEnter:l=>l.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.4)",onMouseLeave:l=>l.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.25)",children:t.jsx(Qe,{size:xi,strokeWidth:2.5})}),t.jsxs("div",{style:{position:"relative",zIndex:1},children:[t.jsx("div",{style:{fontSize:"44px",marginBottom:"12px",filter:"drop-shadow(0 4px 8px rgba(0,0,0,0.15))"},children:c.icon}),t.jsx("h2",{style:{color:p.white,fontSize:"24px",fontWeight:700,margin:0,textShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:c.title}),t.jsx("p",{style:{color:"rgba(255, 255, 255, 0.9)",fontSize:"14px",margin:"4px 0 0 0",fontWeight:500},children:c.subtitle})]})]}),t.jsxs("div",{style:{padding:"20px 24px",flex:1,overflowY:"auto",minHeight:0,WebkitOverflowScrolling:"touch"},children:[t.jsx("p",{style:{color:p.slate[600],fontSize:"14px",lineHeight:1.7,margin:"0 0 20px 0"},children:c.description}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsxs("h3",{style:{color:p.slate[900],fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",margin:"0 0 10px 0",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx(Je,{size:14,style:{color:c.color}}),"Vorteile"]}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:c.benefits.map((l,m)=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",backgroundColor:p.slate[50],borderRadius:"8px",border:`1px solid ${p.slate[200]}`},children:[t.jsx("span",{style:{fontSize:"18px",flexShrink:0},children:l.icon}),t.jsx("span",{style:{color:p.slate[700],fontSize:"13px"},children:l.text})]},m))})]}),t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsxs("h3",{style:{color:p.slate[900],fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",margin:"0 0 10px 0",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx(Be,{size:14,style:{color:c.color}}),"Lernziele"]}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:c.learningGoals.map((l,m)=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",color:p.slate[600],fontSize:"13px"},children:[t.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"50%",backgroundColor:xe(c.color,.15),display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:t.jsx(Jt,{size:12,style:{color:c.color}})}),l]},m))})]}),t.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 14px",backgroundColor:xe(c.color,.1),borderRadius:"20px",color:c.color,fontSize:"12px",fontWeight:500},children:[t.jsx(Ze,{size:14}),c.duration]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 14px",backgroundColor:p.slate[100],borderRadius:"20px",color:p.slate[600],fontSize:"12px",fontWeight:500},children:[t.jsx(Be,{size:14}),c.idealFor]})]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 24px",borderTop:`1px solid ${p.slate[200]}`,gap:"16px",flexWrap:"wrap",backgroundColor:p.white,flexShrink:0},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",color:p.slate[500],fontSize:"13px"},children:[t.jsx("input",{type:"checkbox",checked:s,onChange:l=>o(l.target.checked),style:{width:"18px",height:"18px",accentColor:c.color,cursor:"pointer"}}),"Nicht mehr automatisch anzeigen"]}),t.jsxs("button",{onClick:y,style:{background:c.gradient,color:p.white,border:"none",borderRadius:"10px",padding:"12px 24px",fontSize:"15px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",boxShadow:Xn(c.color,"md"),transition:He.normal,flexShrink:0},children:["Los geht's",t.jsx(tt,{size:18})]})]})]},"modal-content")},"modal-backdrop")});return i?nt.createPortal(x,document.body):x},Ft=({featureId:e,size:n="md",variant:r="default",className:i="",style:s={}})=>{const[o,a]=d.useState(!1),[u,h]=d.useState(!1),[S,c]=d.useState(null),y=xn[e];if(d.useEffect(()=>{c(document.body)},[]),!y)return console.warn(`FeatureInfoButton: Unknown feature ID "${e}"`),null;const x={sm:{button:40,icon:26},md:{button:48,icon:32},lg:{button:56,icon:38}},l=x[n]||x.md,m={default:{background:y.color,color:p.white,hoverBackground:xe(y.color,.85)},subtle:{background:xe(y.color,.2),color:y.color,hoverBackground:xe(y.color,.35)},light:{background:"rgba(255, 255, 255, 0.3)",color:p.white,hoverBackground:"rgba(255, 255, 255, 0.5)"},dark:{background:p.slate[600],color:p.white,hoverBackground:p.slate[700]}},v=m[r]||m.default,M=j=>{j.stopPropagation(),j.preventDefault(),a(!0)},B=()=>{a(!1)};return t.jsxs(t.Fragment,{children:[t.jsx("button",{type:"button",onClick:M,onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),className:i,title:`Info über ${y.title}`,style:{width:`${l.button}px`,height:`${l.button}px`,borderRadius:qt.full,backgroundColor:u?v.hoverBackground:v.background,color:v.color,border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:He.normal,flexShrink:0,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)",transform:u?"scale(1.08)":"scale(1)",...s},children:t.jsx(Vt,{size:l.icon,strokeWidth:2.5})}),S&&o&&nt.createPortal(t.jsx(yi,{featureId:e,isOpen:o,onClose:B}),S)]})},Oe=({onNavigate:e})=>{const{branding:n,user:r,filterScenariosBySetupAndPartner:i,currentSetup:s}=Z(),{isAuthenticated:o}=We(),[a,u]=d.useState([]),[h,S]=d.useState(!1),[c,y]=d.useState({simulator:null,roleplay:null,video:null}),x=n?.["--header-gradient"]||pt["--header-gradient"],l=n?.["--primary-accent"]||pt["--primary-accent"],m=async()=>{try{const f=await fetch(`${ke()}/simulator/scenarios`,{headers:{"X-WP-Nonce":ye()},credentials:"same-origin"});if(!f.ok)return[];const A=await f.json();return A.success&&A.data?.scenarios?A.data.scenarios:[]}catch{return[]}},v=async()=>{try{const f=await fetch(`${ke()}/video-training/scenarios`,{headers:{"X-WP-Nonce":ye()}});if(!f.ok)return[];const A=await f.json();return A.success&&A.data?.scenarios?A.data.scenarios:[]}catch{return[]}};d.useEffect(()=>{(async()=>{try{const[A,z,H]=await Promise.all([m(),pi().catch(()=>[]),v()]),W=i(A||[],"simulator"),O=i(z||[],"roleplay"),N=i(H||[],"video_training");console.log("[QuadDashboard] Scenario counts:",{currentSetup:s?.id,simulator:W.length,roleplay:O.length,video:N.length}),y({simulator:W.length,roleplay:O.length,video:N.length})}catch(A){console.error("Failed to load scenario counts:",A)}})()},[s,i]),d.useEffect(()=>{o&&M()},[o]);const M=async()=>{S(!0);try{const f=await Zn(6);u(f||[])}catch(f){console.error("Failed to load recent activities:",f),u([])}S(!1)},j=r?r.first_name?r.first_name:r.display_name?r.display_name.split(" ")[0]:r.name?r.name.split(" ")[0]:null:null,U=[{id:"ikigai",featureId:"ikigai",step:"1",title:"Orientierung",subtitle:"Ikigai-Kompass",description:"Finde den Schnittpunkt deiner Talente, Leidenschaften und Möglichkeiten.",icon:Wt,color:p.purple[500],bgLight:p.purple[50],gradient:`linear-gradient(135deg, ${p.purple[400]} 0%, ${p.purple[600]} 100%)`,route:"ikigai"},{id:"decision",featureId:"decisionboard",step:"2",title:"Entscheiden",subtitle:"Decision-Navigator",description:"Löse dein Dilemma mit KI-gestützter Pro & Contra Analyse.",icon:Pt,color:p.blue[500],bgLight:p.blue[50],gradient:`linear-gradient(135deg, ${p.blue[400]} 0%, ${p.blue[600]} 100%)`,route:"decision_board"},{id:"briefing",featureId:"smartbriefing",step:"3",title:"Vorbereiten",subtitle:"Smart Briefing",description:"Erstelle deinen Schlachtplan mit personalisierten Leitfäden.",icon:Pn,color:p.amber[500],bgLight:p.amber[50],gradient:`linear-gradient(135deg, ${p.amber[400]} 0%, ${p.amber[600]} 100%)`,route:"smart_briefing"}],K=[{id:"simulator",featureId:"simulator",title:"Szenario Training",subtitle:"Frage-Antwort",description:"Beantworte Interview-Fragen und erhalte sofortiges KI-Feedback.",icon:Xe,tag:"Audio-KI",color:p.green[500],bgLight:p.green[50],gradient:`linear-gradient(135deg, ${p.green[400]} 0%, ${p.teal[500]} 100%)`,route:"simulator",countKey:"simulator"},{id:"roleplay",featureId:"roleplay",title:"Live Simulation",subtitle:"Echtzeit-Dialog",description:"Führe ein realistisches Gespräch mit dem KI-Interviewer.",icon:Un,tag:"Voice-KI",color:p.amber[500],bgLight:p.amber[50],gradient:`linear-gradient(135deg, ${p.amber[400]} 0%, ${p.red[400]} 100%)`,route:"dashboard",countKey:"roleplay"},{id:"video",featureId:"videotraining",title:"Wirkungsanalyse",subtitle:"Körpersprache",description:"Nimm dich auf Video auf und erhalte Feedback zu deiner Wirkung.",icon:qe,tag:"Video-KI",color:p.red[500],bgLight:p.red[50],gradient:`linear-gradient(135deg, ${p.red[400]} 0%, ${p.purple[500]} 100%)`,route:"video_training",countKey:"video"},{id:"gym",featureId:"rhetorikgym",title:"Rhetorik Gym",subtitle:"Sprechtraining",description:"Reduziere Füllwörter und verbessere deine Redegewandtheit.",icon:Kn,tag:"Drills",color:p.purple[500],bgLight:p.purple[50],gradient:`linear-gradient(135deg, ${p.purple[500]} 0%, ${p.blue[500]} 100%)`,route:"gym_klassiker",countKey:null}],w={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.15}}},C={hidden:{opacity:0,y:24},visible:{opacity:1,y:0,transition:{duration:.5,ease:[.25,.1,.25,1]}}},T=f=>{e&&e(f)},g=f=>({briefing:"Smart Briefing",simulator:"Szenario-Training",video:"Wirkungs-Analyse",roleplay:"Live-Simulation",game:"Rhetorik-Gym",ikigai:"Ikigai-Kompass",decision:"Entscheidungs-Navigator"})[f]||f,_=f=>({briefing:p.amber[500],simulator:p.green[500],video:p.red[500],roleplay:p.amber[600],game:p.purple[500],ikigai:p.purple[500],decision:p.blue[500]})[f]||p.slate[400];return t.jsxs("div",{className:"min-h-screen py-8 lg:py-12 px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[t.jsxs(F.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,ease:[.25,.1,.25,1]},className:"text-center mb-14",children:[t.jsx("h1",{style:{fontSize:"clamp(26px, 4.5vw, 38px)",fontWeight:800,color:p.slate[900],marginBottom:"12px",lineHeight:1.2,letterSpacing:"-0.02em"},children:j?t.jsxs(t.Fragment,{children:["Hallo"," ",t.jsx("span",{style:{background:x,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:j}),", wo stehst du?"]}):t.jsxs(t.Fragment,{children:["Willkommen bei"," ",t.jsx("span",{style:{background:x,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Karriereheld"})]})}),t.jsx("p",{style:{fontSize:"clamp(15px, 2vw, 17px)",color:p.slate[500],maxWidth:"420px",margin:"0 auto",lineHeight:1.6},children:"Erst denken, dann handeln. Wähle deine Phase."})]}),t.jsxs(F.section,{variants:w,initial:"hidden",animate:"visible",style:{marginBottom:"48px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px",marginBottom:"24px"},children:[t.jsx("span",{style:{background:`linear-gradient(135deg, ${p.slate[100]} 0%, ${p.slate[200]} 100%)`,color:p.slate[700],padding:"8px 14px",borderRadius:"10px",fontSize:"12px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Phase 1"}),t.jsx("h2",{style:{fontSize:"18px",fontWeight:700,color:p.slate[800],margin:0},children:"Deine Strategie"})]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px"},className:"strategy-grid",children:U.map(f=>t.jsxs(F.div,{variants:C,whileHover:{y:-6,transition:{duration:.2}},whileTap:{scale:.98},onClick:()=>T(f.route),style:{background:"white",borderRadius:"20px",padding:"28px",cursor:"pointer",border:`1px solid ${p.slate[100]}`,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.04)",transition:"all 0.3s cubic-bezier(0.25, 0.1, 0.25, 1)",position:"relative",overflow:"hidden"},onMouseEnter:A=>{A.currentTarget.style.boxShadow=`0 20px 40px -12px ${f.color}25`,A.currentTarget.style.borderColor=`${f.color}30`},onMouseLeave:A=>{A.currentTarget.style.boxShadow="0 4px 20px rgba(0, 0, 0, 0.04)",A.currentTarget.style.borderColor=p.slate[100]},children:[t.jsx("div",{style:{position:"absolute",top:"-30px",right:"-30px",width:"120px",height:"120px",borderRadius:"50%",background:`${f.color}08`,pointerEvents:"none"}}),t.jsxs("div",{style:{position:"absolute",top:"20px",right:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx(Ft,{featureId:f.featureId,size:"md"}),t.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"10px",background:f.bgLight,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:700,color:f.color},children:f.step})]}),t.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:f.gradient,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"20px",boxShadow:`0 8px 20px -4px ${f.color}40`},children:t.jsx(f.icon,{style:{width:"26px",height:"26px",color:"white"}})}),t.jsx("h3",{style:{fontSize:"20px",fontWeight:700,color:p.slate[900],marginBottom:"6px"},children:f.title}),t.jsx("p",{style:{fontSize:"13px",fontWeight:600,color:f.color,marginBottom:"10px"},children:f.subtitle}),t.jsx("p",{style:{fontSize:"14px",color:p.slate[500],lineHeight:1.6,margin:0,minHeight:"44px"},children:f.description}),t.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px"},children:t.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"10px",background:p.slate[50],display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},children:t.jsx(ut,{style:{width:"16px",height:"16px",color:p.slate[400]}})})})]},f.id))})]}),t.jsxs(F.section,{variants:w,initial:"hidden",animate:"visible",style:{marginBottom:"48px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px",marginBottom:"24px"},children:[t.jsx("span",{style:{background:`linear-gradient(135deg, ${p.green[50]} 0%, ${p.green[100]} 100%)`,color:p.green[700],padding:"8px 14px",borderRadius:"10px",fontSize:"12px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Phase 2"}),t.jsx("h2",{style:{fontSize:"18px",fontWeight:700,color:p.slate[800],margin:0},children:"Trainings-Arena"})]}),t.jsx("div",{style:{marginBottom:"24px"},children:t.jsx(fi,{})}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px"},className:"training-grid",children:K.map(f=>t.jsxs(F.div,{variants:C,whileHover:{y:-6,transition:{duration:.2}},whileTap:{scale:.98},onClick:()=>T(f.route),style:{background:"white",borderRadius:"20px",padding:"26px",cursor:"pointer",border:`1px solid ${p.slate[100]}`,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.04)",transition:"all 0.3s cubic-bezier(0.25, 0.1, 0.25, 1)",position:"relative",overflow:"hidden",display:"flex",flexDirection:"column"},onMouseEnter:A=>{A.currentTarget.style.boxShadow=`0 20px 40px -12px ${f.color}25`,A.currentTarget.style.borderColor=`${f.color}30`},onMouseLeave:A=>{A.currentTarget.style.boxShadow="0 4px 20px rgba(0, 0, 0, 0.04)",A.currentTarget.style.borderColor=p.slate[100]},children:[t.jsxs("div",{style:{position:"absolute",top:"18px",right:"18px",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx(Ft,{featureId:f.featureId,size:"md"}),t.jsx("div",{style:{background:f.bgLight,color:f.color,padding:"6px 12px",borderRadius:"8px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.3px"},children:f.tag})]}),t.jsx("div",{style:{width:"52px",height:"52px",borderRadius:"14px",background:f.gradient,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"18px",boxShadow:`0 8px 20px -4px ${f.color}40`},children:t.jsx(f.icon,{style:{width:"24px",height:"24px",color:"white"}})}),t.jsx("h3",{style:{fontSize:"18px",fontWeight:700,color:p.slate[900],marginBottom:"4px"},children:f.title}),t.jsx("p",{style:{fontSize:"13px",fontWeight:600,color:f.color,marginBottom:"8px"},children:f.subtitle}),t.jsx("p",{style:{fontSize:"14px",color:p.slate[500],lineHeight:1.5,margin:0,flex:1},children:f.description}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"16px"},children:[f.countKey&&c[f.countKey]!==null&&t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"8px",backgroundColor:p.slate[50],border:`1px solid ${p.slate[100]}`},children:[t.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:c[f.countKey]>0?f.color:p.slate[400]},children:c[f.countKey]}),t.jsx("span",{style:{fontSize:"12px",color:p.slate[500]},children:c[f.countKey]===1?"Szenario":"Szenarien"})]}),(!f.countKey||c[f.countKey]===null)&&t.jsx("div",{}),t.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"10px",background:p.slate[50],display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(ut,{style:{width:"16px",height:"16px",color:p.slate[400]}})})]})]},f.id))})]}),o&&a.length>0&&t.jsx(F.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:t.jsxs("div",{style:{background:"white",borderRadius:"20px",padding:"28px",border:`1px solid ${p.slate[100]}`,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.04)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:p.slate[100],display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(Ze,{style:{width:"18px",height:"18px",color:p.slate[500]}})}),t.jsx("h3",{style:{fontSize:"16px",fontWeight:700,color:p.slate[800],margin:0},children:"Letzte Aktivitäten"})]}),t.jsxs("button",{onClick:()=>T("history"),style:{display:"flex",alignItems:"center",gap:"4px",color:l,fontSize:"13px",fontWeight:600,background:"none",border:"none",cursor:"pointer",padding:"6px 10px",borderRadius:"8px",transition:"background 0.2s ease"},onMouseEnter:f=>{f.currentTarget.style.background=p.slate[50]},onMouseLeave:f=>{f.currentTarget.style.background="none"},children:["Alle ansehen",t.jsx(tt,{style:{width:"16px",height:"16px"}})]})]}),h?t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",padding:"32px",color:p.slate[500]},children:[t.jsx("div",{className:"animate-spin",style:{width:"20px",height:"20px",border:`2px solid ${p.slate[200]}`,borderTopColor:l,borderRadius:"50%"}}),"Lädt..."]}):t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:a.slice(0,5).map((f,A)=>t.jsxs(F.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.05*A},style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px 16px",background:p.slate[50],borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease",border:"1px solid transparent"},onClick:()=>T("history"),onMouseEnter:z=>{z.currentTarget.style.background="white",z.currentTarget.style.borderColor=p.slate[200]},onMouseLeave:z=>{z.currentTarget.style.background=p.slate[50],z.currentTarget.style.borderColor="transparent"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px",minWidth:0,flex:1},children:[t.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:_(f.type),flexShrink:0}}),t.jsxs("div",{style:{minWidth:0,flex:1},children:[t.jsx("p",{style:{fontSize:"14px",fontWeight:600,color:p.slate[800],margin:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:f.title||g(f.type)}),t.jsx("p",{style:{fontSize:"12px",color:p.slate[500],margin:"2px 0 0 0"},children:g(f.type)})]})]}),t.jsx("span",{style:{fontSize:"12px",color:p.slate[400],fontWeight:500,flexShrink:0,marginLeft:"16px"},children:Qn(f.created_at||f.date)})]},f.id||A))})]})}),!o&&t.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.4},style:{textAlign:"center",padding:"40px 32px",background:"white",borderRadius:"20px",border:`1px solid ${p.slate[100]}`,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.04)"},children:[t.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:`linear-gradient(135deg, ${p.blue[50]} 0%, ${p.purple[50]} 100%)`,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:t.jsx(Hn,{style:{width:"28px",height:"28px",color:p.blue[500]}})}),t.jsx("h3",{style:{fontSize:"18px",fontWeight:700,color:p.slate[800],marginBottom:"8px"},children:"Verfolge deinen Fortschritt"}),t.jsx("p",{style:{fontSize:"14px",color:p.slate[500],margin:0,maxWidth:"360px",marginLeft:"auto",marginRight:"auto",lineHeight:1.6},children:"Melde dich an, um deinen Fortschritt zu speichern und personalisierte Empfehlungen zu erhalten."})]})]}),t.jsx("style",{children:`
        @media (max-width: 900px) {
          .strategy-grid {
            grid-template-columns: 1fr !important;
          }
          .training-grid {
            grid-template-columns: 1fr !important;
          }
        }
        @media (min-width: 901px) and (max-width: 1100px) {
          .strategy-grid {
            grid-template-columns: repeat(3, 1fr) !important;
          }
          .training-grid {
            grid-template-columns: repeat(2, 1fr) !important;
          }
        }
      `})]})},Ce="[APP.JSX]";console.log(`${Ce} 🚀 Module loaded`);const Si=d.lazy(()=>P(()=>import("./RoleplayDashboard-Ck3w5vzy.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url)),wi=d.lazy(()=>P(()=>import("./RoleplayDeviceSetup-DvxZ82Da.js"),__vite__mapDeps([10,1,2,11,7,4,5,12,9]),import.meta.url)),Ei=d.lazy(()=>P(()=>import("./RoleplayVariablesPage-BtdffgeY.js"),__vite__mapDeps([13,1,2,7,4,5,14]),import.meta.url)),Bt=d.lazy(()=>P(()=>import("./RoleplaySessionUnified-BkIO90YZ.js"),__vite__mapDeps([15,1,2,16,4,5,17,8,9,12,7,18,11]),import.meta.url)),ki=d.lazy(()=>P(()=>import("./SessionHistory-CQtaYyIM.js"),__vite__mapDeps([19,1,2,17,4,5,8,9,7,16,20,21,22,23,24,25,26,27]),import.meta.url).then(e=>({default:e.default}))),Ii=d.lazy(()=>P(()=>import("./SessionDetailView-CP7yXETI.js"),__vite__mapDeps([28,1,2,17,4,5,20,7,16]),import.meta.url)),vi=d.lazy(()=>P(()=>import("./index-DEx4AG1S.js"),__vite__mapDeps([29,1,2,4,5,3,6,7,8,9,16,12,30,18,11,31,14]),import.meta.url).then(e=>({default:e.SimulatorApp}))),Ai=d.lazy(()=>P(()=>import("./index-BkdYO7HP.js"),__vite__mapDeps([32,1,2,4,5,3,6,7,8,9,11,12,31,16,18,30]),import.meta.url).then(e=>({default:e.VideoTrainingApp}))),Ci=d.lazy(()=>P(()=>import("./index-DpNEhGdx.js"),__vite__mapDeps([33,1,2,16,4,5,12,7,9,6]),import.meta.url).then(e=>({default:e.RhetorikGym}))),ji=d.lazy(()=>P(()=>import("./index-DpNEhGdx.js"),__vite__mapDeps([33,1,2,16,4,5,12,7,9,6]),import.meta.url).then(e=>({default:e.GameSession}))),Ti=d.lazy(()=>P(()=>import("./index-CaOJWB3f.js"),__vite__mapDeps([34,1,2,4,5,3,6,7,8,9,31,21,16]),import.meta.url).then(e=>({default:e.SmartBriefingApp}))),Ri=d.lazy(()=>P(()=>import("./index-Bsf3_iiC.js"),__vite__mapDeps([35,1,2,22,23,9,17,4,5,24,25,7,26]),import.meta.url).then(e=>({default:e.DecisionBoardApp}))),_i=d.lazy(()=>P(()=>import("./IkigaiApp-XlPJ1I4L.js"),__vite__mapDeps([36,1,2,27,7,4,5,16,23,9,17,26]),import.meta.url)),Ni=d.lazy(()=>P(()=>import("./UsageLimitsDisplay-XOPSmwfQ.js"),__vite__mapDeps([37,1,2,17,4,5]),import.meta.url)),Mi=d.lazy(()=>P(()=>import("./AdminDashboard-B-pC0-wK.js"),__vite__mapDeps([38,1,2,23,9,17,4,5]),import.meta.url)),Oi=d.lazy(()=>P(()=>import("./ScenarioManager-hIKXzTL9.js"),__vite__mapDeps([39,1,2,23,9,17,4,5,24,25,8,40]),import.meta.url)),Li=d.lazy(()=>P(()=>import("./SimulatorScenarioManager-BCO8lro1.js"),__vite__mapDeps([41,1,2,23,9,17,4,5,24]),import.meta.url)),zi=d.lazy(()=>P(()=>import("./VideoTrainingManager-DXwYBmIX.js"),__vite__mapDeps([42,1,2,23,9,17,4,5,24]),import.meta.url)),Di=d.lazy(()=>P(()=>import("./PartnerManager-DOFCHUv4.js"),__vite__mapDeps([43,1,2,23,9,17,4,5,24,25,8,40]),import.meta.url)),Gt={DIRECT:"direct",PROXY:"proxy"},Le={BRIEFINGS:"briefings",SIMULATOR:"simulator",VIDEO:"video",ROLEPLAY:"roleplay"},Fi=()=>t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"400px",gap:"16px"},children:[t.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #38bdf8 0%, #818cf8 100%)",display:"flex",alignItems:"center",justifyContent:"center",animation:"pulse 1.5s ease-in-out infinite"},children:t.jsx(Yt,{size:24,color:"white",style:{animation:"spin 1s linear infinite"}})}),t.jsx("p",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"14px"},children:"Modul wird geladen..."}),t.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        @keyframes pulse {
          0%, 100% { transform: scale(1); opacity: 1; }
          50% { transform: scale(1.05); opacity: 0.8; }
        }
      `})]});let Fe=!1;const Bi=()=>($e.useEffect(()=>(console.log(`${Ce} 🔄 BrandingLoadingSpinner MOUNT - marking initialSplashShown=true`),Fe=!0,()=>{console.log(`${Ce} 🔄 BrandingLoadingSpinner UNMOUNT`)}),[]),t.jsxs("div",{className:"fullscreen-loader",style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%)",zIndex:9999},children:[t.jsx("div",{style:{position:"absolute",top:"20%",left:"10%",width:"300px",height:"300px",borderRadius:"50%",background:"radial-gradient(circle, rgba(56, 189, 248, 0.1) 0%, transparent 70%)",animation:"float 6s ease-in-out infinite"}}),t.jsx("div",{style:{position:"absolute",bottom:"20%",right:"10%",width:"400px",height:"400px",borderRadius:"50%",background:"radial-gradient(circle, rgba(139, 92, 246, 0.1) 0%, transparent 70%)",animation:"float 8s ease-in-out infinite reverse"}}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"32px",zIndex:1},children:[t.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"24px",background:"linear-gradient(135deg, #38bdf8 0%, #818cf8 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 20px 40px rgba(56, 189, 248, 0.3)",animation:"pulse 2s ease-in-out infinite"},children:t.jsxs("svg",{width:"44",height:"44",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),t.jsx("path",{d:"M2 17l10 5 10-5"}),t.jsx("path",{d:"M2 12l10 5 10-5"})]})}),t.jsxs("div",{style:{textAlign:"center",color:"white"},children:[t.jsx("h1",{style:{fontSize:"28px",fontWeight:700,margin:0,letterSpacing:"-0.02em"},children:"Karriereheld"}),t.jsx("p",{style:{fontSize:"15px",opacity:.6,margin:"8px 0 0 0",fontWeight:400},children:"wird geladen..."})]}),t.jsx("div",{style:{width:"200px",height:"4px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"2px",overflow:"hidden"},children:t.jsx("div",{style:{width:"40%",height:"100%",background:"linear-gradient(90deg, #38bdf8, #818cf8, #38bdf8)",backgroundSize:"200% 100%",borderRadius:"2px",animation:"loading 1.5s ease-in-out infinite"}})})]}),t.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
          }
          @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
          }
          @keyframes loading {
            0% { transform: translateX(-100%); }
            50% { transform: translateX(150%); }
            100% { transform: translateX(400%); }
          }
        `})]})),$t=()=>{requestAnimationFrame(()=>{window.scrollTo(0,0);const e=document.getElementById("bewerbungstrainer-app");e&&(e.scrollTop=0);const n=document.querySelector("[data-main-content]");n&&(n.scrollTop=0),document.querySelectorAll('.overflow-y-auto, .overflow-auto, [style*="overflow"]').forEach(i=>{i.scrollTop>0&&(i.scrollTop=0)})})};function Gi(){const e=document.body.classList.contains("admin-bar")||document.documentElement.classList.contains("admin-bar"),n=document.getElementById("wpadminbar");if(n){const r=n.getBoundingClientRect(),i=window.getComputedStyle(n);return!(i.display!=="none"&&i.visibility!=="hidden")||r.bottom<=0?0:r.top<0?Math.max(0,r.bottom):n.offsetHeight}return e?window.innerWidth<=782?46:32:0}function $i(){const e=document.getElementById("bewerbungstrainer-app"),n=Gi(),r=document.elementFromPoint(window.innerWidth/2,n+10);if(r){let s=r;for(;s&&s!==document.body;){const o=s.tagName?.toLowerCase();if((o==="header"||o==="nav"||s.classList?.contains("site-header")||s.classList?.contains("elementor-location-header")||s.id==="masthead")&&(!e||!e.contains(s))){const h=s.getBoundingClientRect().bottom;return h<=n?n:Math.max(n,h)}s=s.parentElement}}const i=["header.site-header","#masthead",".site-header",".elementor-location-header",'[data-elementor-type="header"]',".ast-header-wrap","#starter-header",".header-wrapper","header"];for(const s of i){const o=document.querySelector(s);if(o&&(!e||!e.contains(o))){const u=o.getBoundingClientRect().bottom;return u<=n?n:Math.max(n,u)}}if(e){let s=e.previousElementSibling;for(;s;){const o=s.getBoundingClientRect();if(o.height>30&&o.top<100){const a=o.bottom;return a<=n?n:Math.max(n,a)}s=s.previousElementSibling}}return n}function Wi(){const e=Yn(),n=Jn(),{isAuthenticated:r,authLoading:i,isLoading:s,demoCode:o}=Z(),{isAdmin:a}=We(),u=mr(n.pathname),[h,S]=d.useState(0),[c,y]=d.useState(null),[x,l]=d.useState({}),[m,v]=d.useState(null),[M,B]=d.useState("websocket"),[j,U]=d.useState(null),[K,w]=d.useState(null),[C,T]=d.useState(null),[g,_]=d.useState(!1),f=()=>_(!0),A=()=>_(!1),{isOpen:z,closeDisclaimerModal:H,checkDisclaimerStatus:W}=gr(),[O,N]=d.useState(null),[D,I]=d.useState(null),[J,ge]=d.useState(null),[st,Pe]=d.useState(null),[Q,X]=d.useState(null),[ee,E]=d.useState(null),[te,ne]=d.useState(null),[Te,Se]=d.useState(0);d.useEffect(()=>{r&&!i&&W()},[r,i]);const Re=d.useCallback(k=>{if(k)switch(k.type){case"SELECT_ROLEPLAY_SCENARIO":I(k.scenario),e(b.LIVE_TRAINING);break;case"SELECT_SIMULATOR_SCENARIO":ge(k.scenario),e(b.SCENARIO_TRAINING);break;case"START_GYM_GAME":T(k.config),e(b.RHETORIK_GYM_SESSION,{state:{gameConfig:k.config}});break;case"SELECT_GYM_MODE":Pe(k.mode),e(b.RHETORIK_GYM);break;case"SELECT_VIDEO_TRAINING_SCENARIO":X(k.scenario),e(b.VIDEO_TRAINING);break;default:console.warn("Unknown pending action type:",k.type)}},[e]),oe=d.useCallback((k,G=null)=>r?(k(),!0):(G&&N(G),f(),!1),[r]);d.useEffect(()=>{const k=()=>{const ae=$i();S(ae)},G=(ae=0)=>{k(),ae<5&&setTimeout(()=>G(ae+1),200)};requestAnimationFrame(()=>{setTimeout(()=>G(),50)});const q=()=>setTimeout(k,100);return window.addEventListener("load",q),window.addEventListener("resize",k),window.addEventListener("scroll",k,{passive:!0}),()=>{window.removeEventListener("load",q),window.removeEventListener("resize",k),window.removeEventListener("scroll",k)}},[]),d.useEffect(()=>{$t()},[n.pathname]);const re=d.useCallback(k=>{$t(),k==="video_training"&&Se(q=>q+1);const G=fr[k];e(G||b.OVERVIEW)},[e]),bn=d.useCallback(k=>{y(k),l({}),v(null),e(b.LIVE_TRAINING_SETUP,{state:{scenario:k}})},[e]),yn=d.useCallback(k=>{l(k),e(b.LIVE_TRAINING_DEVICES,{state:{scenario:c,variables:k}})},[e,c]),Sn=d.useCallback(()=>{y(null),l({}),e(b.LIVE_TRAINING)},[e]),wn=d.useCallback(({selectedMicrophoneId:k,connectionMode:G="websocket"})=>{v(k),B(G);const q=G==="proxy"?b.LIVE_TRAINING_PROXY:b.LIVE_TRAINING_SESSION;e(q,{state:{scenario:c,variables:x,microphoneId:k}})},[e,c,x]),En=d.useCallback(()=>{v(null),e(b.LIVE_TRAINING_SETUP,{state:{scenario:c}})},[e,c]),ot=d.useCallback(()=>{y(null),l({}),e(b.LIVE_TRAINING)},[e]),at=d.useCallback(k=>{y(null),l({}),U(k),e(`/verlauf/${k.type||"roleplay"}/${k.id}`,{state:{session:k}})},[e]),kn=d.useCallback((k=null)=>{w(k),e(b.HISTORY,{state:{initialTab:k}})},[e]),In=d.useCallback(()=>{w(null),e(b.LIVE_TRAINING)},[e]),_e=d.useCallback(k=>{const q={briefings:Le.BRIEFINGS,simulator:Le.SIMULATOR,video:Le.VIDEO,roleplay:Le.ROLEPLAY}[k]||null;w(q),e(b.HISTORY,{state:{initialTab:q}})},[e]),vn=d.useCallback(k=>{U(k),e(`/verlauf/${k.type||"roleplay"}/${k.id}`,{state:{session:k}})},[e]),An=d.useCallback(()=>{U(null),e(b.HISTORY)},[e]),Cn=d.useCallback((k,G)=>{E({session:k,scenario:G}),e(b.SCENARIO_TRAINING)},[e]),lt=d.useCallback((k,G,q)=>{const ae=q||k?.type;ae==="roleplay"?(G&&I(G),e(b.LIVE_TRAINING)):ae==="video"?(G&&X(G),e(b.VIDEO_TRAINING)):(ne({session:k,scenario:G}),e(b.SCENARIO_TRAINING))},[e]),jn=d.useCallback(k=>{T(k),e(b.RHETORIK_GYM_SESSION,{state:{gameConfig:k}})},[e]),Tn=d.useCallback(()=>{T(null),e(b.RHETORIK_GYM)},[e]),Rn=d.useCallback(k=>{},[]),we=d.useCallback(({children:k})=>a?k:t.jsx(Oe,{onNavigate:re}),[a,re]);if(console.log(`${Ce} 🔍 Loading check: isLoading=${s}, initialSplashShown=${Fe}, showSpinner=${s&&!Fe}`),s&&!Fe)return console.log(`${Ce} ⏳ Showing BrandingLoadingSpinner`),t.jsx(Bi,{});const Ne=()=>n.state?.scenario||c,ct=()=>n.state?.variables||x,dt=()=>n.state?.microphoneId||m,_n=()=>n.state?.gameConfig||C,Nn=()=>n.state?.session||j,Mn=()=>n.state?.initialTab||K,On=()=>t.jsx(d.Suspense,{fallback:t.jsx(Fi,{}),children:t.jsxs(qn,{children:[t.jsx(L,{path:"/",element:t.jsx(Oe,{onNavigate:re})}),t.jsx(L,{path:b.OVERVIEW,element:t.jsx(Oe,{onNavigate:re})}),t.jsx(L,{path:b.LIVE_TRAINING,element:t.jsx(Si,{onSelectScenario:bn,onOpenHistory:kn,isAuthenticated:r,requireAuth:oe,setPendingAction:N,pendingScenario:D,clearPendingScenario:()=>I(null),onNavigateToHistory:()=>_e("roleplay")})}),t.jsx(L,{path:b.LIVE_TRAINING_SETUP,element:t.jsx(Ei,{scenario:Ne(),onBack:Sn,onNext:yn})}),t.jsx(L,{path:b.LIVE_TRAINING_DEVICES,element:t.jsx(wi,{scenario:Ne(),onBack:En,onStart:wn})}),t.jsx(L,{path:b.LIVE_TRAINING_SESSION,element:t.jsx(Bt,{scenario:Ne(),variables:ct(),selectedMicrophoneId:dt(),connectionMode:Gt.DIRECT,onEnd:ot,onNavigateToSession:at})}),t.jsx(L,{path:b.LIVE_TRAINING_PROXY,element:t.jsx(Bt,{scenario:Ne(),variables:ct(),selectedMicrophoneId:dt(),connectionMode:Gt.PROXY,onEnd:ot,onNavigateToSession:at})}),t.jsx(L,{path:b.SCENARIO_TRAINING,element:t.jsx(vi,{isAuthenticated:r,requireAuth:oe,setPendingAction:N,pendingContinueSession:ee,clearPendingContinueSession:()=>E(null),pendingRepeatSession:te,clearPendingRepeatSession:()=>ne(null),onNavigateToHistory:()=>_e("simulator")})}),t.jsx(L,{path:b.VIDEO_TRAINING,element:t.jsx(Ai,{isAuthenticated:r,requireAuth:oe,setPendingAction:N,pendingScenario:Q,clearPendingScenario:()=>X(null),onNavigateToHistory:()=>_e("video")},Te)}),t.jsx(L,{path:b.SMART_BRIEFING,element:t.jsx(Ti,{isAuthenticated:r,requireAuth:oe,setPendingAction:N,demoCode:o,onNavigateToSimulator:()=>e(b.SCENARIO_TRAINING),onNavigateToHistory:()=>_e("briefings")})}),t.jsx(L,{path:b.DECISION_BOARD,element:t.jsx(Ri,{isAuthenticated:r,requireAuth:oe,setPendingAction:N})}),t.jsx(L,{path:b.IKIGAI,element:t.jsx(_i,{isAuthenticated:r,requireAuth:oe,setPendingAction:N,onNavigateToHistory:()=>e(b.HISTORY)})}),t.jsx(L,{path:b.RHETORIK_GYM,element:t.jsx(Ci,{onStartGame:jn,isAuthenticated:r,requireAuth:oe,setPendingAction:N})}),t.jsx(L,{path:b.RHETORIK_GYM_SESSION,element:t.jsx(ji,{gameConfig:_n(),onBack:Tn,onComplete:Rn})}),t.jsx(L,{path:b.HISTORY,element:t.jsx(ki,{onBack:In,onSelectSession:vn,isAuthenticated:r,onLoginClick:f,onContinueSession:Cn,onRepeatSession:lt,initialTab:Mn(),onNavigateToModule:re})}),t.jsx(L,{path:"/verlauf/:sessionType/:sessionId",element:t.jsx(Ii,{session:Nn(),onBack:An,onRepeatSession:lt})}),t.jsx(L,{path:b.USAGE_LIMITS,element:t.jsx("div",{style:{padding:"24px",maxWidth:"600px",margin:"0 auto"},children:t.jsx(Ni,{onNavigateToRoleplay:()=>e(b.LIVE_TRAINING)})})}),t.jsx(L,{path:b.ADMIN,element:t.jsx(we,{children:t.jsx("div",{style:{padding:"24px"},children:t.jsx(Mi,{onNavigate:re})})})}),t.jsx(L,{path:b.ADMIN_ROLEPLAYS,element:t.jsx(we,{children:t.jsx("div",{style:{padding:"24px"},children:t.jsx(Oi,{onBack:()=>e(b.ADMIN)})})})}),t.jsx(L,{path:b.ADMIN_SIMULATOR,element:t.jsx(we,{children:t.jsx("div",{style:{padding:"24px"},children:t.jsx(Li,{onBack:()=>e(b.ADMIN)})})})}),t.jsx(L,{path:b.ADMIN_VIDEO,element:t.jsx(we,{children:t.jsx("div",{style:{padding:"24px"},children:t.jsx(zi,{onBack:()=>e(b.ADMIN)})})})}),t.jsx(L,{path:b.ADMIN_PARTNERS,element:t.jsx(we,{children:t.jsx("div",{style:{padding:"24px"},children:t.jsx(Di,{onBack:()=>e(b.ADMIN)})})})}),t.jsx(L,{path:"*",element:t.jsx(Oe,{onNavigate:re})})]})});return t.jsxs(t.Fragment,{children:[t.jsx(cr,{activeView:u,onNavigate:re,headerOffset:h,onLoginClick:f,children:On()}),t.jsx(pr,{isOpen:g,onClose:()=>{A(),N(null)},onLoginSuccess:async k=>{await W(),O&&(Re(O),N(null))}}),t.jsx(hr,{isOpen:z,onClose:H,onAcknowledge:k=>{H()}})]})}function Pi(){return t.jsx(Vn,{children:t.jsx(er,{children:t.jsx(or,{children:t.jsx(Wi,{})})})})}const $="[MAIN.JSX]";console.log(`${$} 🚀 Script loaded at ${new Date().toISOString()}`);let ze=!1,Ue=null;function Ui(){if(console.log(`${$} 📦 initReactApp() called, hasAlreadyMounted=${ze}`),ze){console.log(`${$} ⏭️ Skipping - already mounted`);return}const e=document.getElementById("bewerbungstrainer-app")||document.getElementById("root");if(console.log(`${$} 🔍 Looking for root element:`,e?"FOUND":"NOT FOUND"),!e){console.error(`${$} ❌ Root element not found! Looking for #bewerbungstrainer-app or #root`);return}if(e._reactRootContainer||e.__reactRoot||Ue){console.warn(`${$} ⚠️ Root element already has a React root, skipping re-mount...`),ze=!0;return}try{for(console.log(`${$} 🧹 Clearing root element children...`);e.firstChild;)e.removeChild(e.firstChild);console.log(`${$} 🎯 Creating React root with StrictMode...`),Ue=tr.createRoot(e),Ue.render(t.jsx(d.StrictMode,{children:t.jsx(Pi,{})})),ze=!0,console.log(`${$} ✅ React app mounted successfully!`)}catch(n){console.error(`${$} ❌ Failed to mount React app:`,n)}}function Ki(){console.log(`${$} 🕐 waitForDOMAndMount() called, readyState=${document.readyState}`);const e=n=>{console.log(`${$} 🎬 safeMount() via ${n}`),requestAnimationFrame(()=>{try{Ui()}catch(r){console.error(`${$} ❌ Error during mount:`,r)}})};if(document.getElementById("bewerbungstrainer-app")||document.getElementById("root")){console.log(`${$} 📍 Strategy 1: Element already available`),setTimeout(()=>e("Strategy1-ElementExists"),50);return}if(document.readyState==="loading")console.log(`${$} 📍 Strategy 2: Waiting for DOMContentLoaded`),document.addEventListener("DOMContentLoaded",()=>{console.log(`${$} 📢 DOMContentLoaded fired`),setTimeout(()=>e("Strategy2-DOMContentLoaded"),50)});else{console.log(`${$} 📍 Strategy 3: Polling for element`);let n=0;const r=50,i=setInterval(()=>{n++,document.getElementById("bewerbungstrainer-app")||document.getElementById("root")?(console.log(`${$} ✅ Element found after ${n} attempts`),clearInterval(i),setTimeout(()=>e("Strategy3-Polling"),50)):n>=r&&(clearInterval(i),console.error(`${$} ❌ Element not found after 5 seconds`))},100)}}console.log(`${$} 🏁 Starting mount process...`);Ki();export{yi as F,Hr as G,un as M,os as a,ls as b,ps as c,is as d,rs as e,ds as f,pi as g,hs as h,ui as i,cs as j,qi as k,dn as l,Zi as m,Ji as n,Ft as o,ss as p,ts as q,ns as r,as as s,es as t,us as u,hn as v,Qi as w,ri as x,Xi as y};
