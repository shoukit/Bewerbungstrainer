import{j as e,ai as g,m as h,M as C,a8 as N,v as y,aj as M,ak as S,T as A}from"./ui-vendor-DSq21R2h.js";import"./react-vendor-uDOJF2jQ.js";import{C as o}from"./FeatureInfoButton-CFo_jWu4.js";const $=s=>s>=80?{color:o.green[500],bg:o.green[50],label:"Sehr selbstsicher"}:s>=60?{color:o.blue[500],bg:o.blue[50],label:"Selbstsicher"}:s>=40?{color:o.amber[500],bg:o.amber[50],label:"Ausbaufähig"}:{color:o.red[500],bg:o.red[50],label:"Unsicher"},F=s=>{switch(s){case"zu_langsam":return 15;case"optimal":return 50;case"zu_schnell":return 85;default:return 50}},P=s=>s==="lebendig"?"Lebendig":s==="natürlich"?"Natürlich":"Monoton",W=s=>s==="lebendig"?{base:20,variance:30}:s==="natürlich"?{base:25,variance:20}:{base:35,variance:8},w=s=>{if(typeof s=="number")return s;if(!s||typeof s!="string")return 0;const t=s.split(":");if(t.length===2){const c=parseInt(t[0],10)||0,n=parseInt(t[1],10)||0;return c*60+n}if(t.length===3){const c=parseInt(t[0],10)||0,n=parseInt(t[1],10)||0,l=parseInt(t[2],10)||0;return c*3600+n*60+l}return parseFloat(s)||0},U=({audioAnalysis:s,primaryAccent:t,onJumpToTimestamp:c})=>{const n=s?.audio_metrics||s,l=n&&(n.confidence_score!==void 0||n.speech_cleanliness||n.pacing||n.tonality);if(!s||!l)return e.jsxs("div",{className:"bg-white rounded-xl p-10 border border-slate-200 text-center",children:[e.jsx(g,{size:32,className:"text-slate-400 mb-3 mx-auto"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Keine Audio-Analyse verfügbar"})]});const m=n.confidence_score,d=n.speech_cleanliness,f=n.pacing,u=n.tonality,b=d?.total_filler_count||0,j=d?.filler_word_analysis||[],_=d?.feedback;return e.jsxs("div",{className:"flex flex-col gap-4",children:[m!==void 0&&e.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(g,{size:18,className:"text-primary"}),e.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"Selbstsicherheit"})]}),e.jsx("div",{className:"flex justify-center mb-4",children:(()=>{const a=m,i=$(a),r=140,x=r/2-12,p=Math.PI*x,z=p-a/100*p;return e.jsxs("div",{className:"rounded-2xl px-8 py-5 flex flex-col items-center",style:{backgroundColor:i.bg},children:[e.jsxs("div",{className:"relative",style:{width:r,height:r/2+20},children:[e.jsxs("svg",{width:r,height:r/2+20,className:"overflow-visible",children:[e.jsx("path",{d:`M 12 ${r/2} A ${x} ${x} 0 0 1 ${r-12} ${r/2}`,fill:"none",stroke:o.slate[200],strokeWidth:"10",strokeLinecap:"round"}),e.jsx(h.path,{d:`M 12 ${r/2} A ${x} ${x} 0 0 1 ${r-12} ${r/2}`,fill:"none",stroke:i.color,strokeWidth:"10",strokeLinecap:"round",strokeDasharray:p,initial:{strokeDashoffset:p},animate:{strokeDashoffset:z},transition:{duration:1.2,ease:"easeOut"}})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-end pb-1",children:[e.jsx(h.span,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{delay:.5},className:"text-[32px] font-bold",style:{color:i.color},children:Math.round(a)}),e.jsx("span",{className:"text-[11px] text-slate-400",children:"/ 100"})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-2",children:[e.jsx(g,{size:14,style:{color:i.color}}),e.jsx("span",{className:"text-[13px] font-semibold",style:{color:i.color},children:i.label})]})]})})()}),n.summary_text&&e.jsx("p",{className:"text-[13px] leading-normal text-slate-600 text-center",children:n.summary_text})]}),d&&e.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{size:18,className:"text-orange-500"}),e.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"Füllwörter"})]}),e.jsxs("span",{className:`text-[13px] font-semibold px-2.5 py-1 rounded-full ${b<=2?"bg-green-200 text-green-800":b<=5?"bg-amber-200 text-amber-800":"bg-red-200 text-red-800"}`,children:[b,"x gesamt"]})]}),j.length>0?e.jsx("div",{className:"flex flex-col gap-2 mb-3",children:j.map((a,i)=>e.jsxs("div",{className:"rounded-lg bg-amber-100 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[e.jsxs("span",{className:"text-[13px] text-amber-800 font-medium",children:['"',a.word,'"']}),e.jsxs("span",{className:"text-xs text-amber-800 font-semibold",children:[a.count,"x"]})]}),a.examples?.length>0&&c&&e.jsx("div",{className:"flex flex-wrap gap-1.5 px-3 py-2 bg-amber-50 border-t border-amber-200",children:a.examples.map((r,x)=>e.jsxs("button",{onClick:()=>c(w(r.timestamp)),className:"inline-flex items-center gap-1 px-2 py-1 rounded-md border-none bg-amber-100 cursor-pointer text-[11px] text-amber-800 transition-all hover:bg-amber-200",children:[e.jsx("span",{className:"font-mono font-semibold",children:r.timestamp}),e.jsx(N,{size:10})]},x))})]},i))}):e.jsxs("div",{className:"flex items-center gap-2 text-green-500",children:[e.jsx(y,{size:16}),e.jsx("span",{className:"text-[13px]",children:"Keine Füllwörter erkannt!"})]}),_&&e.jsx("p",{className:"text-[13px] leading-normal text-slate-600 mt-3",children:_})]}),f&&e.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{size:18,className:"text-blue-500"}),e.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"Sprechtempo"})]}),f.estimated_wpm&&e.jsxs("span",{className:"text-xs font-mono px-2.5 py-1 rounded-md bg-slate-100 text-slate-600",children:["~",f.estimated_wpm," WPM"]})]}),e.jsxs("div",{className:"relative h-10 mb-2",children:[e.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-2 rounded -translate-y-1/2 bg-gradient-to-r from-blue-300 via-green-300 to-red-300"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-15 h-4 bg-green-500/20 border border-green-500 rounded-lg -translate-x-1/2 -translate-y-1/2"}),e.jsx(h.div,{initial:{left:"50%"},animate:{left:`${F(f.rating)}%`},transition:{duration:.8,ease:"easeOut"},className:"absolute top-1/2 w-4 h-4 rounded-full border-2 border-white shadow-md -translate-x-1/2 -translate-y-1/2",style:{backgroundColor:f.rating==="optimal"?o.green[500]:o.amber[500]}}),e.jsxs("div",{className:"absolute -bottom-1 left-0 right-0 flex justify-between text-[10px] text-slate-400",children:[e.jsx("span",{children:"Langsam"}),e.jsx("span",{className:"text-green-500 font-medium",children:"Optimal"}),e.jsx("span",{children:"Schnell"})]})]}),f.feedback&&e.jsx("p",{className:"text-[13px] leading-normal text-slate-600 mt-4",children:f.feedback})]}),u&&e.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:18,className:"text-indigo-500"}),e.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"Betonung & Melodie"})]}),e.jsx("span",{className:"text-xs font-medium px-2.5 py-1 rounded-md bg-indigo-50 text-indigo-700",children:P(u.rating)})]}),e.jsx("div",{className:"flex items-center justify-center gap-0.5 h-12 mb-3",children:Array.from({length:30}).map((a,i)=>{const{base:r,variance:x}=W(u.rating),p=r+Math.sin(i*.5)*x+Math.sin(i*12.9898)%1*(x/2);return e.jsx(h.div,{initial:{height:0},animate:{height:`${Math.max(10,Math.min(100,p))}%`},transition:{duration:.5,delay:i*.02},className:"w-1 rounded-sm bg-indigo-500"},i)})}),u.highlights?.length>0&&c&&e.jsx("div",{className:"mb-3",children:u.highlights.map((a,i)=>e.jsxs("button",{onClick:()=>c(w(a.timestamp)),className:`w-full flex items-start gap-2 px-3 py-2.5 mb-1.5 rounded-lg border-none cursor-pointer text-left ${a.type==="positive"?"bg-green-50":"bg-red-50"}`,children:[e.jsx("span",{className:`text-[11px] font-mono px-1.5 py-0.5 rounded flex-shrink-0 ${a.type==="positive"?"bg-green-200 text-green-800":"bg-red-200 text-red-800"}`,children:a.timestamp}),e.jsx("span",{className:"flex-shrink-0 mt-0.5",children:a.type==="positive"?e.jsx(y,{size:14,className:"text-green-500"}):e.jsx(A,{size:14,className:"text-red-500"})}),e.jsx("span",{className:"text-xs text-slate-600 flex-1 leading-relaxed break-words",children:a.note}),e.jsx(N,{size:12,className:"text-slate-400 flex-shrink-0 mt-0.5"})]},i))}),u.feedback&&e.jsx("p",{className:"text-[13px] leading-normal text-slate-600",children:u.feedback})]})]})};function D(s){return s?s.speech_cleanliness?.filler_word_analysis||s.audio_metrics?.speech_cleanliness?.filler_word_analysis?"professional":s.filler_words?.words!==void 0?"simulator":s.speech_metrics||s.filler_words?.severity!==void 0?"video":s.confidence_score!==void 0&&s.speech_rate!==void 0?"simulator":"unknown":"unknown"}function L(s){const t=s.filler_words?.count||0,n=(s.filler_words?.words||[]).map(d=>({word:d.charAt(0).toUpperCase()+d.slice(1).toLowerCase(),count:1,examples:[]}));let l=100;t>0&&(t<=2?l=90:t<=5?l=70:t<=10?l=50:l=30);const m=s.speech_rate==="optimal"?"optimal":s.speech_rate==="zu_schnell"?"zu_schnell":s.speech_rate==="zu_langsam"?"zu_langsam":"optimal";return{confidence_score:s.confidence_score,summary_text:s.notes||null,speech_cleanliness:{score:l,total_filler_count:t,filler_word_analysis:n,feedback:v(s.filler_words?.severity)},pacing:{rating:m,estimated_wpm:null,issues_detected:[],feedback:k(m)},tonality:{rating:"natürlich",emotional_tone:"neutral",highlights:[],feedback:null}}}function I(s){const t=s.filler_words?.count||0,n=(s.filler_words?.words||[]).map(u=>({word:u.charAt(0).toUpperCase()+u.slice(1).toLowerCase(),count:1,examples:[]}));let l=100;t>0&&(t<=2?l=90:t<=5?l=70:t<=10?l=50:l=30);const m=s.speech_metrics?.pace||"optimal",d=m==="zu schnell"?"zu_schnell":m==="zu langsam"?"zu_langsam":"optimal";return{confidence_score:s.speech_metrics?.clarity||s.speech_metrics?.energy||70,summary_text:null,speech_cleanliness:{score:l,total_filler_count:t,filler_word_analysis:n,feedback:v(s.filler_words?.severity)},pacing:{rating:d,estimated_wpm:null,issues_detected:[],feedback:k(d)},tonality:{rating:"natürlich",emotional_tone:"neutral",highlights:[],feedback:null}}}function v(s){switch(s){case"hoch":return"Versuche, bewusster zu sprechen und Pausen statt Füllwörter zu nutzen.";case"mittel":return"Gute Basis! Mit etwas Übung kannst du die Füllwörter weiter reduzieren.";case"niedrig":return"Sehr gut! Du sprichst bereits sehr klar und flüssig.";case"keine":return"Perfekt! Keine Füllwörter erkannt.";default:return null}}function k(s){switch(s){case"zu_schnell":return"Versuche, etwas langsamer zu sprechen und bewusste Pausen einzubauen.";case"zu_langsam":return"Du könntest etwas zügiger sprechen, um mehr Energie zu vermitteln.";case"optimal":return"Dein Sprechtempo ist optimal für gute Verständlichkeit.";default:return null}}function O(s){if(!s)return null;switch(D(s)){case"professional":return s.audio_metrics||s;case"simulator":return L(s);case"video":return I(s);default:return s}}function B(s){if(!s)return!1;const t=O(s);return t?t.confidence_score!==void 0||t.speech_cleanliness?.total_filler_count!==void 0||t.pacing?.rating!==void 0:!1}export{U as A,B as h,O as n};
