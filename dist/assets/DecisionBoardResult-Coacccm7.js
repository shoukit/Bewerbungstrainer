import{j as e,A as L,m as w,aW as be,X as ie,l as V,as as Ke,a as R,a5 as He,h as qe,n as Ge,aa as _,ab as K,aX as Qe,y as we,ae,S as de,z as he,U as Oe,x as Ve,e as Ue,O as Ze,v as Xe,t as pe,aD as Je,ad as Ye,aY as et}from"./ui-vendor-B9DEMv6g.js";import{a as d,d as M}from"./react-vendor-uDOJF2jQ.js";import{C as se,B as E}from"./Button-BHvYxNT_.js";import{I as tt}from"./input-B9TvIUbd.js";import{T as ce}from"./textarea-Bk12bbFh.js";import{o as st,q as it,r as ue,t as rt}from"./index.js";import{A as nt}from"./AudioRecorder-B5vZ1Zkz.js";import{B as W}from"./button-CGU79vEo.js";import{u as Ce}from"./useBranding-CjHnMPMs.js";import{C as oe,a as le,b as ve,c as ze}from"./card-Ct7yzV_G.js";const at=()=>`wizard_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,ot=({value:r,onChange:x,type:i,b:a})=>{const t=i==="pro"?a.success:a.error;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:a.space[2],minWidth:"100px"},children:[e.jsx("input",{type:"range",min:"1",max:"10",value:r,onChange:m=>x(parseInt(m.target.value)),style:{width:"70px",height:"6px",borderRadius:a.radius.sm,background:`linear-gradient(90deg, ${t} 0%, ${t} ${(r-1)*11.1}%, ${a.borderColor} ${(r-1)*11.1}%, ${a.borderColor} 100%)`,appearance:"none",cursor:"pointer"}}),e.jsx("span",{style:{minWidth:"24px",textAlign:"center",fontWeight:a.fontWeight.semibold,fontSize:a.fontSize.sm,color:t},children:r})]})},lt=({item:r,onToggle:x,onWeightChange:i,onTextChange:a,b:t})=>{const m=r.type==="pro",s=m?t.successLight:t.errorLight,h=m?"#bbf7d0":"#fecaca",c=m?t.successDark:t.errorDark,u=M.useRef(null);return M.useEffect(()=>{const f=u.current;f&&(f.style.height="auto",f.style.height=Math.max(36,f.scrollHeight)+"px")},[r.text]),e.jsxs(w.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},style:{display:"flex",alignItems:"flex-start",gap:t.space[3],padding:t.space[4],backgroundColor:r.selected?s:t.cardBgHover,borderRadius:t.radius.lg,border:`2px solid ${r.selected?h:t.borderColor}`,transition:t.transition.normal},children:[e.jsx("div",{onClick:()=>x(r.id),style:{width:"24px",height:"24px",borderRadius:t.radius.md,border:`2px solid ${r.selected?c:t.borderColor}`,backgroundColor:r.selected?c:"transparent",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,cursor:"pointer",transition:t.transition.normal},children:r.selected&&e.jsx(Ge,{size:14,color:t.white,strokeWidth:3})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t.space[2],marginBottom:t.space[1]},children:[m?e.jsx(_,{size:t.iconSize.md,color:c}):e.jsx(K,{size:t.iconSize.md,color:c}),e.jsx("span",{style:{fontSize:t.fontSize.xs,fontWeight:t.fontWeight.semibold,color:c,textTransform:"uppercase"},children:m?"Pro":"Contra"})]}),e.jsx("textarea",{ref:u,value:r.text,onChange:f=>a(r.id,f.target.value),style:{width:"100%",fontSize:t.fontSize.md,fontWeight:t.fontWeight.medium,color:t.textMain,marginBottom:t.space[2],padding:`${t.space[2]} ${t.space[2.5]}`,border:`1px solid ${h}`,borderRadius:t.radius.md,backgroundColor:t.white,resize:"none",overflow:"hidden",minHeight:"36px",lineHeight:1.4}}),r.source_quote&&e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:t.space[1.5],fontSize:t.fontSize.sm,color:t.textMuted,fontStyle:"italic"},children:[e.jsx(Qe,{size:12,style:{flexShrink:0,marginTop:"2px"}}),e.jsxs("span",{children:['"',r.source_quote,'"']})]})]}),e.jsx("div",{onClick:f=>f.stopPropagation(),children:e.jsx(ot,{value:r.weight,onChange:f=>i(r.id,f),type:r.type,b:t})})]})},dt=({isOpen:r,onClose:x,topic:i,existingPros:a,existingCons:t,onAddItems:m})=>{const s=Ce(),[h,c]=d.useState("loading_question"),[u,f]=d.useState(""),[y,z]=d.useState(""),[j,P]=d.useState(""),[b,N]=d.useState([]),[S,B]=d.useState([]),[H,I]=d.useState(null),[U,D]=d.useState(0);d.useEffect(()=>{r&&h==="loading_question"&&Z()},[h,r]),d.useEffect(()=>{r&&(c("loading_question"),f(""),P(""),N([]),B([]),I(null),D(0))},[r]);const Z=async()=>{I(null);try{const l=window.bewerbungstrainerConfig?.geminiApiKey;if(!l)throw new Error("API-Key nicht konfiguriert");const C=await st(i,a,t,S,l);f(C.question),z(C.question_type||""),c("input"),D(k=>k+1)}catch(l){console.error("[DeepDiveWizard] Question generation error:",l),I(l.message||"Fehler beim Generieren der Frage"),c("input")}},X=async()=>{if(j.trim()){c("analyzing"),I(null);try{const l=window.bewerbungstrainerConfig?.geminiApiKey;if(!l)throw new Error("API-Key nicht konfiguriert");const k=((await it(i,u,j,l)).extracted_items||[]).map(v=>({...v,id:at(),selected:!0}));N(k),B(v=>[...v,{question:u,answer:j}]),c("selection")}catch(l){console.error("[DeepDiveWizard] Extraction error:",l),I(l.message||"Fehler beim Analysieren der Antwort"),c("input")}}},re=d.useCallback(l=>{N(C=>C.map(k=>k.id===l?{...k,selected:!k.selected}:k))},[]),q=d.useCallback((l,C)=>{N(k=>k.map(v=>v.id===l?{...v,weight:C}:v))},[]),xe=d.useCallback((l,C)=>{N(k=>k.map(v=>v.id===l?{...v,text:C}:v))},[]),J=()=>{const l=b.filter(C=>C.selected);l.length>0&&m(l),P(""),N([]),c("loading_question")},$=()=>{B(l=>[...l,{question:u,answer:j}]),P(""),N([]),c("loading_question")},T=()=>{const l=b.filter(C=>C.selected);l.length>0&&m(l),x()};return r?e.jsxs(L,{children:[e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:s.zIndex.modal,padding:s.space[4]},onClick:x,children:e.jsxs(w.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:l=>l.stopPropagation(),className:"wizard-modal",style:{backgroundColor:s.cardBgColor,borderRadius:s.radius.xl,width:"100%",maxWidth:"640px",maxHeight:"90dvh",overflow:"hidden",boxShadow:s.shadow.xl,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${s.space[4]} ${s.space[5]}`,borderBottom:`1px solid ${s.borderColor}`,background:s.headerGradient},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:s.space[3]},children:[e.jsx("div",{style:{width:s.space[10],height:s.space[10],borderRadius:s.radius.lg,backgroundColor:"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(be,{size:s.iconSize.xl,color:s.white})}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:s.fontSize.xl,fontWeight:s.fontWeight.bold,color:s.white,margin:0},children:"Deep Dive Interview"}),e.jsxs("p",{style:{fontSize:s.fontSize.sm,color:"rgba(255,255,255,0.8)",margin:0},children:["Frage ",U," ‚Ä¢ Entdecke deine wahren Motive"]})]})]}),e.jsx("button",{onClick:x,style:{width:s.space[10],height:s.space[10],borderRadius:s.radius.md,border:"none",backgroundColor:"rgba(255,255,255,0.2)",color:s.white,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ie,{size:s.iconSize.xl})})]}),e.jsxs("div",{style:{flex:1,overflow:"auto",padding:s.space[5]},children:[h==="loading_question"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:s.space[8],gap:s.space[4]},children:[e.jsx(V,{size:48,color:s.primaryAccent,style:{animation:"spin 1s linear infinite"}}),e.jsx("p",{style:{color:s.textSecondary,fontSize:s.fontSize.lg},children:"Generiere n√§chste Frage..."})]}),h==="input"&&e.jsxs("div",{children:[e.jsxs("div",{style:{backgroundColor:`${s.primaryAccent}10`,borderRadius:s.radius.lg,padding:s.space[5],marginBottom:s.space[5],borderLeft:`4px solid ${s.primaryAccent}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:s.space[2],marginBottom:s.space[2]},children:[e.jsx(Ke,{size:s.iconSize.md,color:s.primaryAccent}),e.jsx("span",{style:{fontSize:s.fontSize.sm,fontWeight:s.fontWeight.semibold,color:s.primaryAccent,textTransform:"uppercase"},children:"Coach fragt"})]}),e.jsx("p",{style:{fontSize:s.fontSize.xl,fontWeight:s.fontWeight.medium,color:s.textMain,lineHeight:1.5,margin:0},children:u||"Lade Frage..."})]}),H&&e.jsx("div",{style:{backgroundColor:s.errorLight,color:s.errorDark,padding:s.space[3],borderRadius:s.radius.md,marginBottom:s.space[4],fontSize:s.fontSize.sm},children:H}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:s.fontSize.base,fontWeight:s.fontWeight.medium,color:s.textSecondary,marginBottom:s.space[2]},children:"Deine Antwort"}),e.jsx(ce,{value:j,onChange:l=>P(l.target.value),placeholder:"Schreib einfach drauf los... Was f√§llt dir ein? Was f√ºhlst du dabei?",rows:5,style:{fontSize:s.fontSize.md,padding:s.space[4],borderRadius:s.radius.lg,resize:"vertical",minHeight:"120px"}})]})]}),h==="analyzing"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:s.space[8],gap:s.space[4]},children:[e.jsx(w.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:e.jsx(R,{size:48,color:s.primaryAccent})}),e.jsx("p",{style:{color:s.textSecondary,fontSize:s.fontSize.lg},children:"KI extrahiert Argumente..."})]}),h==="selection"&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:s.space[2],marginBottom:s.space[4]},children:[e.jsx(R,{size:s.iconSize.lg,color:s.primaryAccent}),e.jsx("h3",{style:{fontSize:s.fontSize.lg,fontWeight:s.fontWeight.semibold,color:s.textMain,margin:0},children:"Extrahierte Argumente"})]}),b.length===0?e.jsxs("div",{style:{textAlign:"center",padding:s.space[6],backgroundColor:s.cardBgHover,borderRadius:s.radius.lg},children:[e.jsx("p",{style:{color:s.textSecondary,marginBottom:s.space[3]},children:"Keine konkreten Argumente gefunden."}),e.jsx("p",{style:{color:s.textMuted,fontSize:s.fontSize.sm},children:"Das ist okay! Versuch es mit einer ausf√ºhrlicheren Antwort oder einer anderen Frage."})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:s.space[3]},children:b.map(l=>e.jsx(lt,{item:l,onToggle:re,onWeightChange:q,onTextChange:xe,b:s},l.id))}),e.jsx("p",{style:{fontSize:s.fontSize.sm,color:s.textMuted,marginTop:s.space[4],textAlign:"center"},children:"Klicke auf ein Argument um es ab-/anzuw√§hlen. Passe die Gewichtung nach Bedarf an."})]})]}),e.jsxs("div",{className:"wizard-footer",style:{padding:`${s.space[4]} ${s.space[5]}`,borderTop:`1px solid ${s.borderColor}`,display:"flex",flexWrap:"wrap",justifyContent:"space-between",gap:s.space[3],flexShrink:0,backgroundColor:s.cardBgColor},children:[h==="input"&&e.jsxs(e.Fragment,{children:[e.jsx(W,{variant:"ghost",onClick:x,children:"Abbrechen"}),e.jsxs("div",{style:{display:"flex",gap:s.space[2]},children:[e.jsxs(W,{variant:"outline",onClick:$,children:[e.jsx(He,{size:s.iconSize.md,style:{marginRight:s.space[1.5]}}),"√úberspringen"]}),e.jsxs(W,{variant:"solid",onClick:X,disabled:!j.trim()||j.length<10,style:{background:j.trim().length>=10?s.headerGradient:void 0},children:[e.jsx(R,{size:s.iconSize.md,style:{marginRight:s.space[2]}}),"Auswerten"]})]})]}),h==="selection"&&e.jsxs(e.Fragment,{children:[e.jsx(W,{variant:"outline",onClick:T,style:{borderColor:s.borderColor,backgroundColor:s.cardBgHover},children:"Fertig"}),e.jsxs(W,{variant:"solid",onClick:()=>{b.filter(C=>C.selected).length>0?J():$()},style:{background:s.headerGradient},children:[b.some(l=>l.selected)?"√úbernehmen & Weiter":"N√§chste Frage",e.jsx(qe,{size:s.iconSize.md,style:{marginLeft:s.space[1]}})]})]})]})]})}),e.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }

          /* Mobile responsive: footer buttons stack on small screens */
          @media (max-width: 480px) {
            .wizard-modal {
              max-height: calc(100dvh - 16px) !important;
              border-radius: 16px !important;
            }
            .wizard-footer {
              padding: 12px 16px !important;
            }
            .wizard-footer > button,
            .wizard-footer > div {
              flex: 1 1 auto;
            }
            .wizard-footer > div {
              width: 100%;
              justify-content: stretch;
            }
            .wizard-footer > div > button {
              flex: 1;
            }
          }
        `})]}):null},F=()=>`item_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Se=[{id:"strategist",name:"Der Stratege",icon:"‚ôüÔ∏è",color:"#6366f1",bgColor:"bg-indigo-50",borderColor:"border-indigo-500",textColor:"text-indigo-600",description:"Karriere, Geld, Macht"},{id:"security",name:"Der Sicherheits-Beauftragte",icon:"üõ°Ô∏è",color:"#0891b2",bgColor:"bg-cyan-50",borderColor:"border-cyan-600",textColor:"text-cyan-700",description:"Risiko, Best√§ndigkeit"},{id:"feelgood",name:"Der Feel-Good Manager",icon:"üßò",color:"#10b981",bgColor:"bg-emerald-50",borderColor:"border-emerald-500",textColor:"text-emerald-600",description:"Work-Life-Balance, Kultur"},{id:"growth",name:"Der Gr√ºnder",icon:"üöÄ",color:"#f59e0b",bgColor:"bg-amber-50",borderColor:"border-amber-500",textColor:"text-amber-600",description:"Wachstum, Innovation"},{id:"future",name:"Dein Zukunfts-Ich",icon:"üîÆ",color:"#8b5cf6",bgColor:"bg-violet-50",borderColor:"border-violet-500",textColor:"text-violet-600",description:"Langzeit, Reue-Vermeidung"}],ct=({value:r,onChange:x,onChangeEnd:i,color:a})=>{const t=a==="green",m=t?"#22c55e":"#ef4444";return e.jsxs("div",{className:"flex items-center gap-2 min-w-[90px] shrink-0",children:[e.jsx("input",{type:"range",min:"1",max:"10",value:r,onChange:s=>x(parseInt(s.target.value)),onMouseUp:i,onTouchEnd:i,className:"w-[60px] h-1.5 rounded cursor-pointer appearance-none shrink-0",style:{background:`linear-gradient(90deg, ${m} 0%, ${m} ${(r-1)*11.1}%, #e2e8f0 ${(r-1)*11.1}%, #e2e8f0 100%)`}}),e.jsx("span",{className:`min-w-[20px] text-center font-semibold text-sm shrink-0 ${t?"text-green-700":"text-red-700"}`,children:r})]})},fe=({item:r,onUpdate:x,onDelete:i,onBlur:a,color:t,autoFocus:m})=>{const s=t==="green",h=M.useRef(null);return M.useEffect(()=>{const c=h.current;c&&(c.style.height="auto",c.style.height=Math.max(44,c.scrollHeight)+"px")},[r.text]),e.jsxs(w.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,x:s?-20:20},transition:{duration:.2},className:`decision-item flex flex-wrap items-start gap-2.5 p-3 rounded-lg border ${s?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsxs("div",{className:"decision-item-input-row flex items-start gap-2.5 flex-[1_1_100%] min-w-0",children:[e.jsx("div",{className:"shrink-0 pt-2",children:s?e.jsx(_,{size:20,className:"text-green-700"}):e.jsx(K,{size:20,className:"text-red-700"})}),e.jsx(ce,{ref:h,value:r.text,onChange:c=>x(r.id,{text:c.target.value}),onBlur:a,autoFocus:m,placeholder:s?"Pro-Argument...":"Contra-Argument...",rows:1,className:`flex-1 min-w-0 bg-white rounded-md px-3 py-2 text-base resize-none min-h-[44px] overflow-hidden border ${s?"border-green-300":"border-red-300"}`})]}),e.jsxs("div",{className:"decision-item-controls flex items-center justify-end gap-2 shrink-0 ml-auto",children:[e.jsx(ct,{value:r.weight,onChange:c=>x(r.id,{weight:c}),onChangeEnd:a,color:t}),e.jsx("button",{onClick:()=>i(r.id),className:"p-2 bg-transparent border-none rounded cursor-pointer text-slate-400 transition-all shrink-0 hover:bg-red-50 hover:text-red-700",children:e.jsx(Ze,{size:18})})]})]})},xt=({proScore:r,contraScore:x})=>{const i=r+x,a=i>0?Math.round(r/i*100):50,t=100-a;return e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex justify-between mb-2 text-base font-semibold",children:[e.jsxs("span",{className:"text-green-700",children:["Pro: ",r," Punkte (",a,"%)"]}),e.jsxs("span",{className:"text-red-700",children:["Contra: ",x," Punkte (",t,"%)"]})]}),e.jsxs("div",{className:"h-6 rounded-lg overflow-hidden flex bg-slate-100 shadow-inner",children:[e.jsx(w.div,{initial:{width:0},animate:{width:`${a}%`},transition:{duration:.5,ease:"easeOut"},className:"h-full flex items-center justify-center text-white font-semibold text-xs bg-gradient-to-r from-green-500 to-green-600",style:{minWidth:a>10?"auto":"0"},children:a>15&&`${a}%`}),e.jsx(w.div,{initial:{width:0},animate:{width:`${t}%`},transition:{duration:.5,ease:"easeOut"},className:"h-full flex items-center justify-center text-white font-semibold text-xs bg-gradient-to-r from-red-500 to-red-600",style:{minWidth:t>10?"auto":"0"},children:t>15&&`${t}%`})]})]})},ye=({suggestion:r,onAdd:x,isAdded:i})=>{const a=r.type==="pro";return e.jsxs(w.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:`flex items-center gap-3 px-4 py-3 rounded-md border ${a?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsx("div",{className:`w-6 h-6 rounded flex items-center justify-center shrink-0 ${a?"bg-green-100":"bg-red-100"}`,children:a?e.jsx(_,{size:14,className:"text-green-700"}):e.jsx(K,{size:14,className:"text-red-700"})}),e.jsx("span",{className:"flex-1 text-base text-slate-600 leading-snug",children:r.text}),e.jsx("button",{onClick:()=>x(r),disabled:i,className:`w-12 h-12 rounded-lg border-none flex items-center justify-center shrink-0 transition-all ${i?"bg-slate-200 text-slate-400 cursor-default":a?"bg-green-500 text-white cursor-pointer hover:bg-green-600":"bg-red-500 text-white cursor-pointer hover:bg-red-600"}`,children:i?"‚úì":e.jsx(ae,{size:24,color:"white",strokeWidth:2.5})})]})},gt=({isOpen:r,onClose:x,activePersona:i,isLoading:a,suggestions:t,onAddSuggestion:m,onLoadMore:s,addedSuggestions:h})=>{if(!r)return null;const c=Se.find(u=>u.id===i);return e.jsxs(w.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"relative mt-4 p-5 bg-white rounded-xl shadow-lg",style:{border:`2px solid ${c?.color||"#6366f1"}`},children:[e.jsx("button",{onClick:x,className:"absolute top-3 right-3 w-10 h-10 rounded-md border-none bg-slate-100 text-slate-600 cursor-pointer flex items-center justify-center hover:bg-slate-200",children:e.jsx(ie,{size:20,strokeWidth:2.5})}),e.jsxs("div",{className:"flex items-center gap-3 mb-4 pr-8",children:[e.jsx("span",{className:"text-4xl",children:c?.icon}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-slate-800 m-0",children:c?.name}),e.jsx("p",{className:"text-sm text-slate-600 m-0",children:c?.description})]})]}),a?e.jsxs("div",{className:"flex flex-col items-center gap-3 py-6",children:[e.jsx(V,{size:28,className:"animate-spin",style:{color:c?.color}}),e.jsxs("span",{className:"text-slate-600 text-base",children:[c?.name," denkt nach..."]})]}):e.jsxs("div",{className:"flex flex-col gap-2.5",children:[e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"text-xs font-semibold text-green-700 uppercase tracking-wide",children:"Pro-Argumente"})}),t.filter(u=>u.type==="pro").map((u,f)=>e.jsx(ye,{suggestion:u,onAdd:m,isAdded:h.has(`${u.type}-${u.text}`)},`pro-${f}`)),e.jsx("div",{className:"mt-3 mb-2",children:e.jsx("span",{className:"text-xs font-semibold text-red-700 uppercase tracking-wide",children:"Contra-Argumente"})}),t.filter(u=>u.type==="con").map((u,f)=>e.jsx(ye,{suggestion:u,onAdd:m,isAdded:h.has(`${u.type}-${u.text}`)},`con-${f}`)),t.length>0&&s&&e.jsx("button",{onClick:s,disabled:a,className:"mt-4 py-3 px-4 bg-transparent border-2 border-dashed rounded-lg text-base font-medium cursor-pointer flex items-center justify-center gap-2 w-full transition-all disabled:cursor-not-allowed disabled:opacity-60 hover:bg-slate-50",style:{borderColor:c?.color||"#e2e8f0",color:c?.color||"#64748b"},children:a?e.jsxs(e.Fragment,{children:[e.jsx(V,{size:18,className:"animate-spin"}),"Generiere mehr..."]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{size:18}),"Mehr Inspirationen"]})})]})]})},mt=({topic:r,onSelectPersona:x,activePersona:i,isLoading:a,suggestions:t,onCloseBrainstorm:m,onAddSuggestion:s,onLoadMore:h,addedSuggestions:c})=>{const[u,f]=d.useState(!1),y=r.trim().length>0;return e.jsxs(se,{variant:"elevated",className:"mb-4 p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer gap-2",onClick:()=>f(!u),children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 rounded-md bg-gradient-to-br from-indigo-500 to-violet-500 flex items-center justify-center shrink-0",children:e.jsx(Oe,{size:20,color:"white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 m-0",children:"Brainstorming"}),e.jsx("p",{className:"text-base text-slate-600 m-0 whitespace-nowrap overflow-hidden text-ellipsis",children:"Frag dein inneres Team"})]})]}),u?e.jsx(Ve,{size:22,className:"text-slate-500 shrink-0"}):e.jsx(Ue,{size:22,className:"text-slate-500 shrink-0"})]}),e.jsx(L,{children:u&&e.jsx(w.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 -mx-1 px-1 scrollbar-hide",children:Se.map(z=>e.jsxs("button",{onClick:j=>{j.stopPropagation(),y&&x(z.id)},disabled:!y||a&&i===z.id,className:`flex items-center gap-1.5 px-3 py-2 rounded-md border-2 cursor-pointer transition-all whitespace-nowrap shrink-0 ${i===z.id?`${z.bgColor} ${z.borderColor}`:"bg-white border-slate-200"} ${y?"":"cursor-not-allowed opacity-50"}`,children:[a&&i===z.id?e.jsx(V,{size:14,className:"animate-spin",style:{color:z.color}}):e.jsx("span",{className:"text-lg",children:z.icon}),e.jsx("span",{className:`text-sm font-medium ${i===z.id?z.textColor:"text-slate-600"}`,children:z.name.replace("Der ","").replace("Dein ","")})]},z.id))}),!y&&e.jsx("p",{className:"mt-3 text-sm text-slate-400 italic",children:"Gib zuerst deine Entscheidungsfrage ein, um Vorschl√§ge zu erhalten."}),e.jsx(L,{children:i&&e.jsx(gt,{isOpen:!!i,onClose:m,activePersona:i,isLoading:a,suggestions:t,onAddSuggestion:s,onLoadMore:h,addedSuggestions:c})})]})})})]})},kt=({initialData:r,onAnalysisComplete:x,onCancel:i,isAuthenticated:a,requireAuth:t,savedDecisionId:m,onSaveDraft:s,onUpdateSession:h,onDecisionIdChange:c})=>{const[u,f]=d.useState(!1),[y,z]=d.useState(r?.topic||""),[j,P]=d.useState(r?.context||""),[b,N]=d.useState(r?.pros||[{id:F(),text:"",weight:5}]),[S,B]=d.useState(r?.cons||[{id:F(),text:"",weight:5}]),[H,I]=d.useState(!1),[U,D]=d.useState(null),[Z,X]=d.useState(null),[re,q]=d.useState(!1),[xe,J]=d.useState(!1),$=M.useRef(null),[T,l]=d.useState({activePersona:null,isLoading:!1,suggestions:[]}),[C,k]=d.useState(new Set),v=d.useMemo(()=>b.reduce((n,o)=>n+(o.text.trim()?o.weight:0),0),[b]),G=d.useMemo(()=>S.reduce((n,o)=>n+(o.text.trim()?o.weight:0),0),[S]),ge=b.some(n=>n.text.trim()),me=S.some(n=>n.text.trim()),Y=y.trim()&&(ge||me),ee=d.useCallback(async()=>{if($.current&&clearTimeout($.current),!y.trim()||!s||!h)return;const n={topic:y,context:j,pros:b,cons:S,proScore:v,contraScore:G};J(!0);try{if(m)await h(m,{...n,status:"draft"}),console.log("[DecisionBoard] Auto-saved (update):",m);else{const o=await s(n);o&&c&&c(o),console.log("[DecisionBoard] Auto-saved (create):",o)}}catch(o){console.error("[DecisionBoard] Auto-save failed:",o)}finally{J(!1)}},[y,j,b,S,v,G,m,s,h,c]),te=d.useCallback(()=>{$.current&&clearTimeout($.current),ee()},[ee]);M.useEffect(()=>()=>{$.current&&clearTimeout($.current)},[]);const ke=d.useCallback(()=>{const n=F();N(o=>[...o,{id:n,text:"",weight:5}]),X(n)},[]),Ne=d.useCallback(()=>{const n=F();B(o=>[...o,{id:n,text:"",weight:5}]),X(n)},[]),Ae=d.useCallback((n,o)=>{N(p=>p.map(g=>g.id===n?{...g,...o}:g))},[]),Be=d.useCallback((n,o)=>{B(p=>p.map(g=>g.id===n?{...g,...o}:g))},[]),$e=d.useCallback(n=>{N(o=>o.filter(p=>p.id!==n))},[]),We=d.useCallback(n=>{B(o=>o.filter(p=>p.id!==n))},[]),Ie=d.useCallback(async n=>{l(o=>({...o,activePersona:n,isLoading:!0,suggestions:[]}));try{const o=window.bewerbungstrainerConfig?.geminiApiKey;if(!o)throw new Error("API-Key nicht konfiguriert");const p=j.trim()||null,g=await ue(y,n,o,p,b,S);l(Q=>({...Q,isLoading:!1,suggestions:g.suggestions||[]}))}catch(o){console.error("[DecisionBoard] Brainstorm error:",o),l(p=>({...p,isLoading:!1,suggestions:[]})),D(o.message||"Fehler beim Brainstorming")}},[y,j,b,S]),Re=d.useCallback(()=>{l({activePersona:null,isLoading:!1,suggestions:[]})},[]),Pe=d.useCallback(n=>{const o=`${n.type}-${n.text}`;k(g=>new Set([...g,o]));const p={id:F(),text:n.text,weight:5};n.type==="pro"?N(g=>g.length===1&&!g[0].text.trim()?[p]:[...g,p]):B(g=>g.length===1&&!g[0].text.trim()?[p]:[...g,p])},[]),De=d.useCallback(async()=>{const{activePersona:n,suggestions:o}=T;if(n){l(p=>({...p,isLoading:!0}));try{const p=window.bewerbungstrainerConfig?.geminiApiKey;if(!p)throw new Error("API-Key nicht konfiguriert");const g=o.filter(A=>A.type==="pro").map(A=>({text:A.text})),Q=o.filter(A=>A.type==="con").map(A=>({text:A.text})),O=[...b,...g],Le=[...S,...Q],Me=j.trim()||null,_e=await ue(y,n,p,Me,O,Le);l(A=>({...A,isLoading:!1,suggestions:[...A.suggestions,..._e.suggestions||[]]}))}catch(p){console.error("[DecisionBoard] Load more error:",p),l(g=>({...g,isLoading:!1})),D(p.message||"Fehler beim Laden weiterer Vorschl√§ge")}}},[T,y,j,b,S]),Te=d.useCallback(n=>{P(o=>o.trim()?o.trim()+`

`+n:n)},[]),Ee=d.useCallback(n=>{n.forEach(o=>{const p={id:F(),text:o.text,weight:o.weight||5};o.type==="pro"?N(g=>g.length===1&&!g[0].text.trim()?[p]:[...g,p]):B(g=>g.length===1&&!g[0].text.trim()?[p]:[...g,p])}),setTimeout(()=>ee(),100)},[ee]),Fe=d.useCallback(async()=>{if(Y){I(!0),D(null);try{const n=window.bewerbungstrainerConfig?.geminiApiKey;if(!n)throw new Error("API-Key nicht konfiguriert");const o=b.filter(O=>O.text.trim()),p=S.filter(O=>O.text.trim()),g={topic:y,context:j.trim()||null,pros:o,cons:p,proScore:v,contraScore:G},Q=await rt(g,n);x(g,Q)}catch(n){console.error("[DecisionBoard] Analysis error:",n),D(n.message||"Fehler bei der Analyse")}finally{I(!1)}}},[y,j,b,S,v,G,Y,x]);return e.jsxs("div",{className:"p-4 max-w-[1200px] mx-auto",children:[i&&e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 px-4 py-2 rounded-md border border-slate-200 bg-white text-slate-600 cursor-pointer text-base font-medium transition-all hover:bg-red-50 hover:border-red-500 hover:text-red-700",children:[e.jsx(ie,{size:18}),"Abbrechen"]})}),e.jsx("div",{className:"mb-4 text-center",children:e.jsx("p",{className:"text-sm text-slate-400 max-w-[600px] mx-auto",children:"Analysiere deine Entscheidung objektiv. Gewichte Pro und Contra, und erhalte KI-gest√ºtzte Impulse f√ºr blinde Flecken."})}),e.jsxs(se,{variant:"elevated",className:"mb-4 p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(we,{size:20,className:"text-amber-500"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Deine Entscheidungsfrage"})]}),e.jsx(tt,{value:y,onChange:n=>z(n.target.value),onBlur:te,placeholder:"z.B. Soll ich das Jobangebot annehmen?",className:"text-lg p-4 rounded-lg mb-4"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block text-base font-medium text-slate-600 mb-2",children:"Beschreibe die Situation (optional)"}),e.jsxs("div",{className:"context-input-wrapper flex flex-wrap items-end gap-3",children:[e.jsx(ce,{value:j,onChange:n=>P(n.target.value),onBlur:te,placeholder:"Hintergrund, Rahmenbedingungen, Gef√ºhle, was dich besch√§ftigt...",rows:3,className:"flex-[1_1_300px] min-w-0 text-base px-4 py-3 rounded-lg resize-y min-h-[80px]"}),e.jsx("div",{className:"shrink-0 pb-1",children:e.jsx(nt,{onTranscriptReady:Te})})]})]})]}),e.jsx(mt,{topic:y,onSelectPersona:Ie,activePersona:T.activePersona,isLoading:T.isLoading,suggestions:T.suggestions,onCloseBrainstorm:Re,onAddSuggestion:Pe,onLoadMore:De,addedSuggestions:C}),e.jsx(se,{variant:"elevated",className:`mb-4 p-4 md:p-6 transition-all ${y.trim()?"cursor-pointer opacity-100":"cursor-not-allowed opacity-60"}`,onClick:()=>y.trim()&&q(!0),children:e.jsxs("div",{className:"deep-dive-card-content flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-[1_1_auto] min-w-[200px]",children:[e.jsx("div",{className:"w-10 h-10 rounded-md flex items-center justify-center shrink-0",style:{background:"var(--header-gradient)"},children:e.jsx(be,{size:20,color:"white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 m-0",children:"Deep Dive Interview"}),e.jsx("p",{className:"text-sm text-slate-600 m-0 leading-snug",children:"Entdecke verborgene Argumente durch gezielte Coaching-Fragen"})]})]}),e.jsxs(E,{variant:"solid",size:"sm",disabled:!y.trim(),onClick:n=>{n.stopPropagation(),y.trim()&&q(!0)},className:"shrink-0",style:{background:y.trim()?"var(--header-gradient)":void 0},children:[e.jsx(R,{size:18,className:"mr-1.5"}),"Starten"]})]})}),e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(min(100%,380px),1fr))] gap-4 mb-6",children:[e.jsxs("div",{className:"decision-card-pro bg-white rounded-lg p-6 shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-md bg-green-50 flex items-center justify-center",children:e.jsx(_,{size:20,className:"text-green-700"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-green-700 m-0",children:"PRO"}),e.jsx("p",{className:"text-base text-slate-600 m-0",children:"Was spricht daf√ºr?"})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(L,{mode:"popLayout",children:b.map(n=>e.jsx(fe,{item:n,onUpdate:Ae,onDelete:$e,onBlur:te,color:"green",autoFocus:Z===n.id},n.id))}),e.jsxs(E,{variant:"outline",onClick:ke,className:"border-green-500 text-green-700 border-dashed",children:[e.jsx(ae,{size:18,className:"mr-2"}),"Argument hinzuf√ºgen"]})]})]}),e.jsxs("div",{className:"decision-card-contra bg-white rounded-lg p-6 shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-md bg-red-50 flex items-center justify-center",children:e.jsx(K,{size:20,className:"text-red-700"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-red-700 m-0",children:"CONTRA"}),e.jsx("p",{className:"text-base text-slate-600 m-0",children:"Was spricht dagegen?"})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(L,{mode:"popLayout",children:S.map(n=>e.jsx(fe,{item:n,onUpdate:Be,onDelete:We,onBlur:te,color:"red",autoFocus:Z===n.id},n.id))}),e.jsxs(E,{variant:"outline",onClick:Ne,className:"border-red-500 text-red-700 border-dashed",children:[e.jsx(ae,{size:18,className:"mr-2"}),"Argument hinzuf√ºgen"]})]})]})]}),(ge||me)&&e.jsxs(se,{variant:"elevated",className:"mb-6 p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(de,{size:20,className:"text-primary"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Rationaler Score"})]}),e.jsx(xt,{proScore:v,contraScore:G})]}),U&&e.jsxs(w.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-lg mb-6 text-red-700",children:[e.jsx(he,{size:20}),e.jsx("span",{children:U})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(E,{onClick:Fe,disabled:!Y||H,variant:"solid",size:"lg",className:"px-8 py-4 text-xl",style:{background:Y?"var(--header-gradient)":void 0},children:H?e.jsxs(e.Fragment,{children:[e.jsx(V,{size:22,className:"mr-2.5 animate-spin"}),"Analyse l√§uft..."]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{size:22,className:"mr-2.5"}),"Entscheidung analysieren"]})})}),e.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }

          input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: white;
            border: 2px solid currentColor;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
          }

          input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: white;
            border: 2px solid currentColor;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
          }

          /* Mobile responsive: stack controls below textarea */
          @media (max-width: 480px) {
            .decision-item {
              flex-direction: column !important;
            }
            .decision-item-input-row {
              width: 100% !important;
              flex: 1 1 100% !important;
            }
            .decision-item-controls {
              width: 100% !important;
              justify-content: flex-start !important;
              padding-left: 32px;
            }
          }

          .scrollbar-hide::-webkit-scrollbar {
            display: none;
          }
          .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
          }
        `}),e.jsx(L,{children:u&&e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>f(!1),children:e.jsxs(w.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:n=>n.stopPropagation(),className:"bg-white rounded-xl p-6 max-w-[400px] w-full shadow-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-md bg-red-50 flex items-center justify-center",children:e.jsx(he,{size:22,className:"text-red-500"})}),e.jsx("h3",{className:"text-xl font-semibold text-slate-800 m-0",children:"Session abbrechen?"})]}),e.jsx("p",{className:"text-base text-slate-600 mb-6 leading-relaxed",children:"Alle eingegebenen Daten werden verworfen und nicht gespeichert."}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(E,{variant:"outline",onClick:()=>f(!1),children:"Zur√ºck"}),e.jsxs(E,{variant:"solid",onClick:()=>{f(!1),i()},className:"bg-red-500 hover:bg-red-600 text-white",children:[e.jsx(ie,{size:18,className:"mr-2"}),"Abbrechen"]})]})]})})}),e.jsx(dt,{isOpen:re,onClose:()=>q(!1),topic:y,existingPros:b,existingCons:S,onAddItems:Ee})]})},ne=({b:r})=>e.jsxs("div",{style:{padding:r.space[6],borderRadius:r.radius.xl,backgroundColor:r.cardBgHover,border:`1px solid ${r.borderColor}`},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:r.radius.lg,backgroundColor:r.borderColor,marginBottom:r.space[4],animation:"pulse 1.5s ease-in-out infinite"}}),e.jsx("div",{style:{width:"60%",height:"24px",borderRadius:r.radius.md,backgroundColor:r.borderColor,marginBottom:r.space[3],animation:"pulse 1.5s ease-in-out infinite"}}),e.jsx("div",{style:{width:"100%",height:"16px",borderRadius:r.radius.sm,backgroundColor:r.borderColor,marginBottom:r.space[2],animation:"pulse 1.5s ease-in-out infinite"}}),e.jsx("div",{style:{width:"85%",height:"16px",borderRadius:r.radius.sm,backgroundColor:r.borderColor,animation:"pulse 1.5s ease-in-out infinite"}})]}),je=r=>r&&r.split(/(\*\*[^*]+\*\*)/g).map((i,a)=>i.startsWith("**")&&i.endsWith("**")?e.jsx("strong",{children:i.slice(2,-2)},a):i),ht=({card:r,index:x,b:i})=>{const a={blind_spot:{bgColor:i.warningLight,borderColor:i.warning,iconBg:"#fef08a",iconColor:i.warningDark,bulletColor:i.warningDark,icon:we},challenger:{bgColor:i.errorLight,borderColor:"#fca5a5",iconBg:i.errorLight,iconColor:i.error,bulletColor:i.error,icon:et},intuition:{bgColor:"#f5f3ff",borderColor:"#c4b5fd",iconBg:"#ede9fe",iconColor:"#7c3aed",bulletColor:"#7c3aed",icon:Ye}},t=a[r.type]||a.blind_spot,m=t.icon,s=r.points||(r.content?[r.content]:[]);return e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:x*.15},style:{padding:i.space[6],borderRadius:i.radius.xl,backgroundColor:t.bgColor,border:`2px solid ${t.borderColor}`,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:i.radius.lg,backgroundColor:t.iconBg,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:i.space[4]},children:e.jsx(m,{size:i.iconSize["2xl"],color:t.iconColor})}),e.jsx("h3",{style:{fontSize:i.fontSize.xl,fontWeight:i.fontWeight.bold,color:i.textMain,marginBottom:i.space[3]},children:r.title}),r.type==="challenger"&&r.argument&&e.jsxs("div",{style:{padding:`${i.space[2.5]} ${i.space[3.5]}`,backgroundColor:"rgba(255,255,255,0.6)",borderRadius:i.radius.md,marginBottom:i.space[3],borderLeft:`3px solid ${t.bulletColor}`},children:[e.jsx("span",{style:{fontSize:i.fontSize.sm,color:i.textSecondary,display:"block",marginBottom:"2px"},children:"Hinterfragtes Argument:"}),e.jsxs("span",{style:{fontSize:i.fontSize.md,fontWeight:i.fontWeight.semibold,color:i.textMain},children:['"',r.argument,'"']})]}),r.type==="intuition"&&r.question&&e.jsxs("div",{style:{padding:`${i.space[2.5]} ${i.space[3.5]}`,backgroundColor:"rgba(255,255,255,0.6)",borderRadius:i.radius.md,marginBottom:i.space[3],borderLeft:`3px solid ${t.bulletColor}`},children:[e.jsx("span",{style:{fontSize:i.fontSize.sm,color:i.textSecondary,display:"block",marginBottom:"2px"},children:"Reflexionsfrage:"}),e.jsx("span",{style:{fontSize:i.fontSize.md,fontWeight:i.fontWeight.semibold,color:i.textMain,fontStyle:"italic"},children:je(r.question)})]}),e.jsx("ul",{style:{listStyle:"none",padding:0,margin:0,flex:1},children:s.map((h,c)=>e.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:i.space[2.5],marginBottom:i.space[2.5],fontSize:i.fontSize.md,lineHeight:1.5,color:i.textSecondary},children:[e.jsx("span",{style:{width:"6px",height:"6px",borderRadius:i.radius.full,backgroundColor:t.bulletColor,marginTop:"8px",flexShrink:0}}),e.jsx("span",{children:je(h)})]},c))})]})},pt=({proScore:r,contraScore:x,b:i})=>{const a=r+x,t=a>0?Math.round(r/a*100):50,m=100-t,s=r>x?"pro":r<x?"contra":"neutral";return e.jsxs(oe,{variant:"elevated",padding:"lg",style:{marginBottom:i.space[6]},children:[e.jsx(ve,{children:e.jsx(ze,{icon:de,size:"lg",children:"Rationaler Score"})}),e.jsxs(le,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:i.space[3]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:i.space[2]},children:[e.jsx(_,{size:i.iconSize.lg,color:i.success}),e.jsxs("span",{style:{fontSize:i.fontSize["4xl"],fontWeight:i.fontWeight.bold,color:i.success},children:[t,"%"]}),e.jsxs("span",{style:{color:i.textSecondary,fontSize:i.fontSize.base},children:["(",r," Punkte)"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:i.space[2]},children:[e.jsxs("span",{style:{color:i.textSecondary,fontSize:i.fontSize.base},children:["(",x," Punkte)"]}),e.jsxs("span",{style:{fontSize:i.fontSize["4xl"],fontWeight:i.fontWeight.bold,color:i.error},children:[m,"%"]}),e.jsx(K,{size:i.iconSize.lg,color:i.error})]})]}),e.jsxs("div",{style:{height:"32px",borderRadius:i.radius.xl,overflow:"hidden",display:"flex",backgroundColor:i.cardBgHover,boxShadow:"inset 0 2px 4px rgba(0,0,0,0.1)"},children:[e.jsx(w.div,{initial:{width:0},animate:{width:`${t}%`},transition:{duration:.8,ease:"easeOut"},style:{background:`linear-gradient(90deg, ${i.success} 0%, ${i.successDark} 100%)`,height:"100%"}}),e.jsx(w.div,{initial:{width:0},animate:{width:`${m}%`},transition:{duration:.8,ease:"easeOut"},style:{background:`linear-gradient(90deg, ${i.error} 0%, ${i.errorDark} 100%)`,height:"100%"}})]}),e.jsxs("p",{style:{marginTop:i.space[4],textAlign:"center",fontSize:i.fontSize.md,color:i.textSecondary},children:[s==="pro"&&e.jsxs(e.Fragment,{children:["Die Zahlen sprechen ",e.jsx("strong",{style:{color:i.success},children:"f√ºr"})," deine Entscheidung."]}),s==="contra"&&e.jsxs(e.Fragment,{children:["Die Zahlen sprechen ",e.jsx("strong",{style:{color:i.error},children:"gegen"})," deine Entscheidung."]}),s==="neutral"&&e.jsxs(e.Fragment,{children:["Die Argumente sind ",e.jsx("strong",{children:"ausgeglichen"})," - hier lohnt sich ein genauerer Blick."]})]})]})]})},Nt=({decisionData:r,analysisResult:x,onStartNew:i,onEditDecision:a})=>{const t=Ce(),m=!x;return e.jsxs("div",{style:{padding:t.space[6],maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs(w.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4},style:{marginBottom:t.space[8]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:t.space[4]},children:[e.jsxs(W,{variant:"ghost",onClick:a,children:[e.jsx(Xe,{size:t.iconSize.md,style:{marginRight:t.space[2]}}),"Bearbeiten"]}),e.jsxs(W,{variant:"outline",onClick:i,children:[e.jsx(pe,{size:t.iconSize.md,style:{marginRight:t.space[2]}}),"Neue Analyse"]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"64px",height:"64px",borderRadius:t.radius.xl,background:t.headerGradient,marginBottom:t.space[4],boxShadow:t.coloredShadow(t.primaryAccent,"lg")},children:e.jsx(R,{size:t.iconSize["3xl"],color:t.white})}),e.jsx("h1",{style:{fontSize:t.fontSize["4xl"],fontWeight:t.fontWeight.bold,color:t.textMain,marginBottom:t.space[2]},children:"Deine Entscheidungsanalyse"}),e.jsxs("p",{style:{fontSize:t.fontSize.xl,color:t.textSecondary,fontStyle:"italic"},children:['"',r?.topic,'"']})]})]}),r&&e.jsx(pt,{proScore:r.proScore,contraScore:r.contraScore,b:t}),x?.analysis_summary&&e.jsx(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},children:e.jsx(oe,{variant:"gradient",padding:"lg",style:{marginBottom:t.space[6]},children:e.jsx(le,{children:e.jsx("p",{style:{fontSize:t.fontSize.lg,lineHeight:1.7,color:t.textMain,textAlign:"center",fontStyle:"italic"},children:x.analysis_summary})})})}),e.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.4,delay:.3},style:{marginBottom:t.space[8]},children:[e.jsxs("h2",{style:{fontSize:t.fontSize["2xl"],fontWeight:t.fontWeight.bold,color:t.textMain,marginBottom:t.space[5],display:"flex",alignItems:"center",gap:t.space[2.5]},children:[e.jsx(R,{size:t.iconSize.xl,color:t.primaryAccent}),"KI-Coaching Impulse"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:t.space[5]},children:m?e.jsxs(e.Fragment,{children:[e.jsx(ne,{b:t}),e.jsx(ne,{b:t}),e.jsx(ne,{b:t})]}):x?.cards?.map((s,h)=>e.jsx(ht,{card:s,index:h,b:t},s.type||h))})]}),e.jsxs(oe,{variant:"elevated",padding:"lg",children:[e.jsx(ve,{children:e.jsx(ze,{icon:de,size:"md",children:"Deine Argumente"})}),e.jsx(le,{children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:t.space[6]},children:[e.jsxs("div",{children:[e.jsxs("h4",{style:{fontSize:t.fontSize.lg,fontWeight:t.fontWeight.semibold,color:t.success,marginBottom:t.space[3],display:"flex",alignItems:"center",gap:t.space[2]},children:[e.jsx(_,{size:t.iconSize.md}),"Pro (",r?.proScore," Punkte)"]}),e.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:r?.pros?.map((s,h)=>e.jsxs("li",{style:{padding:`${t.space[2.5]} ${t.space[3.5]}`,backgroundColor:t.successLight,borderRadius:t.radius.md,marginBottom:t.space[2],display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:t.successDark},children:s.text}),e.jsx("span",{style:{backgroundColor:"#dcfce7",color:t.success,padding:`2px ${t.space[2]}`,borderRadius:t.radius.sm,fontSize:t.fontSize.sm,fontWeight:t.fontWeight.semibold},children:s.weight})]},s.id||h))})]}),e.jsxs("div",{children:[e.jsxs("h4",{style:{fontSize:t.fontSize.lg,fontWeight:t.fontWeight.semibold,color:t.error,marginBottom:t.space[3],display:"flex",alignItems:"center",gap:t.space[2]},children:[e.jsx(K,{size:t.iconSize.md}),"Contra (",r?.contraScore," Punkte)"]}),e.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:r?.cons?.map((s,h)=>e.jsxs("li",{style:{padding:`${t.space[2.5]} ${t.space[3.5]}`,backgroundColor:t.errorLight,borderRadius:t.radius.md,marginBottom:t.space[2],display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:t.errorDark},children:s.text}),e.jsx("span",{style:{backgroundColor:"#fee2e2",color:t.error,padding:`2px ${t.space[2]}`,borderRadius:t.radius.sm,fontSize:t.fontSize.sm,fontWeight:t.fontWeight.semibold},children:s.weight})]},s.id||h))})]})]})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:t.space[4],marginTop:t.space[8]},children:[e.jsxs(W,{variant:"outline",size:"lg",onClick:a,children:[e.jsx(Je,{size:t.iconSize.md,style:{marginRight:t.space[2]}}),"Argumente anpassen"]}),e.jsxs(W,{variant:"solid",size:"lg",onClick:i,style:{background:t.headerGradient},children:[e.jsx(pe,{size:t.iconSize.md,style:{marginRight:t.space[2]}}),"Neue Entscheidung"]})]}),e.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
          }
        `})]})};export{Nt as D,kt as a};
