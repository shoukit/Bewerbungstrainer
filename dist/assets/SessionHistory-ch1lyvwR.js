import{j as e,O as G,l as F,z as ge,v as wt,Q as Ne,b as Se,Y as Nt,_ as Ke,m as A,V as _e,M as ye,$ as pt,F as It,a0 as fe,a1 as Me,y as ke,e as zt,A as Ct,p as Ye,a2 as Dt,a3 as Et,a4 as Ce,a5 as _t,a6 as Jt,a7 as Zt,w as At,a8 as ht,a9 as Qt,h as ae,T as Oe,S as De,aa as mt,ab as ut,C as Ee,ac as es,s as ts,ad as ss,a as Xe,H as gt,g as ft,t as bt,ae as is}from"./ui-vendor-B9DEMv6g.js";import{a as d}from"./react-vendor-uDOJF2jQ.js";import{B as Le}from"./button-CGU79vEo.js";import{D as ns,a as as,b as rs,c as ls,d as os,e as cs}from"./dialog-Dg1K-ctH.js";import{b as ds,p as xs,d as ps,e as hs,h as ms,i as us,j as gs,g as fs}from"./index.js";import{u as Je,D as we,g as ve,c as ne,j as q,i as be,k as re,w as H}from"./FeatureInfoButton-DsfjgKw4.js";import{u as Rt}from"./useBranding-CjHnMPMs.js";import{u as Ie}from"./useMobile-YxjH166V.js";import{B as ue,C as K}from"./Button-BHvYxNT_.js";import"./select-native-BMh_kGEB.js";import{R as bs}from"./RoleplaySessionReport-DtnsuCsK.js";import{g as ys,B as js}from"./BriefingWorkbook-CWOSsrO3.js";import{D as Ss,a as vs}from"./DecisionBoardResult-Coacccm7.js";import{I as ks,a as ws}from"./IkigaiResults-C9SKfRXC.js";import"./utils-BEHD0UYf.js";import"./index-CklPxmEV.js";import"./input-B9TvIUbd.js";import"./textarea-Bk12bbFh.js";import"./AudioRecorder-B5vZ1Zkz.js";import"./card-Ct7yzV_G.js";const le=({isOpen:t,onClose:a,onConfirm:r,title:S="L√∂schen best√§tigen",description:x="Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:n=!1,confirmLabel:p="L√∂schen",cancelLabel:u="Abbrechen"})=>{const{branding:j}=Je(),f=j?.["--primary-accent"]||we["--primary-accent"];return e.jsx(ns,{open:t,onOpenChange:a,children:e.jsxs(as,{style:{maxWidth:"400px"},children:[e.jsxs(rs,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(G,{style:{width:"20px",height:"20px",color:"#fff"}})}),e.jsx(ls,{children:S})]}),e.jsx(os,{children:x})]}),e.jsxs(cs,{style:{marginTop:"16px"},children:[e.jsx("button",{onClick:a,disabled:n,style:{minWidth:"100px",height:"40px",padding:"8px 20px",borderRadius:"8px",border:`2px solid ${f}`,backgroundColor:"white",color:f,fontSize:"14px",fontWeight:500,cursor:n?"not-allowed":"pointer",opacity:n?.5:1,transition:"all 0.2s"},children:u}),e.jsx("button",{onClick:r,disabled:n,style:{minWidth:"100px",height:"40px",padding:"8px 20px",borderRadius:"8px",border:"none",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"#fff",fontSize:"14px",fontWeight:500,cursor:n?"not-allowed":"pointer",opacity:n?.5:1,transition:"all 0.2s",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:n?e.jsxs(e.Fragment,{children:[e.jsx(F,{style:{width:"16px",height:"16px",animation:"spin 1s linear infinite"}}),p,"..."]}):p})]})]})})},Ns={auftreten:Qt,selbstbewusstsein:ht,koerpersprache:At,kommunikation:ye,professionalitaet:ht,inhalt:ke},Is=t=>t>=90?"Ausgezeichnet!":t>=80?"Sehr gut!":t>=70?"Gut!":t>=60?"Solide Leistung":t>=50?"Ausbauf√§hig":"Weiter √ºben!",zs=t=>t?new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",Cs=t=>t==="video"?"Wirkungs-Analyse":t==="roleplay"?"Live-Simulation":"Szenario-Training",Ds=({score:t,size:a=120,isHeader:r=!1})=>{const S=Math.min(100,Math.max(0,t||0)),x=(a-12)/2,n=x*2*Math.PI,p=n-S/100*n,u=q(t);return e.jsxs("div",{className:"relative",style:{width:a,height:a},children:[e.jsxs("svg",{width:a,height:a,style:{transform:"rotate(-90deg)"},children:[e.jsx("circle",{cx:a/2,cy:a/2,r:x,fill:"none",stroke:r?"rgba(255,255,255,0.3)":"#e2e8f0",strokeWidth:10}),e.jsx(A.circle,{cx:a/2,cy:a/2,r:x,fill:"none",stroke:u,strokeWidth:10,strokeLinecap:"round",strokeDasharray:n,initial:{strokeDashoffset:n},animate:{strokeDashoffset:p},transition:{duration:1,ease:"easeOut"}})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("span",{style:{fontSize:a/3.5,fontWeight:700,color:u},children:Math.round(t)}),e.jsx("span",{className:`${r?"text-white":"text-slate-500"}`,style:{fontSize:a/10},children:"von 100"})]})]})},Es=({audioUrl:t,durationHint:a})=>{const r=d.useRef(null),[S,x]=d.useState(!1),[n,p]=d.useState(0),[u,j]=d.useState(a||0),[f,z]=d.useState(!0),[s,w]=d.useState(null);d.useEffect(()=>{if(!t)return;z(!0),w(null),j(a||0);const l=new Audio;r.current=l;const R=()=>{const C=l.duration;C&&isFinite(C)&&C>0&&j(C),z(!1)},_=()=>{const C=l.duration;C&&isFinite(C)&&C>0&&j(C)},E=()=>{z(!1);const C=l.duration;C&&isFinite(C)&&C>0&&j(C)};return l.addEventListener("loadedmetadata",R),l.addEventListener("durationchange",_),l.addEventListener("canplaythrough",E),l.addEventListener("timeupdate",()=>p(l.currentTime)),l.addEventListener("play",()=>x(!0)),l.addEventListener("pause",()=>x(!1)),l.addEventListener("ended",()=>x(!1)),l.addEventListener("error",()=>{w("Audio nicht verf√ºgbar"),z(!1)}),l.src=t,l.load(),()=>{l.pause(),l.removeEventListener("loadedmetadata",R),l.removeEventListener("durationchange",_),l.removeEventListener("canplaythrough",E),l.src=""}},[t,a]);const v=()=>{r.current&&(S?r.current.pause():r.current.play())},k=l=>{const R=l.currentTarget.getBoundingClientRect(),_=(l.clientX-R.left)/R.width;r.current&&(r.current.currentTime=_*u)},m=l=>{r.current&&(r.current.currentTime=Math.max(0,Math.min(r.current.currentTime+l,u)))};if(s)return e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg text-slate-500 text-[13px] flex items-center gap-2",children:[e.jsx(ge,{size:16})," ",s]});if(!t)return null;const D=u>0?n/u*100:0;return e.jsxs(K,{className:"p-5",children:[e.jsx("div",{onClick:k,className:"h-2 bg-slate-200 rounded cursor-pointer mb-4",children:e.jsx("div",{className:"h-full bg-primary rounded transition-all duration-100",style:{width:`${D}%`}})}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("button",{onClick:()=>m(-10),className:"p-2 bg-transparent border-none cursor-pointer text-slate-400 hover:text-slate-600",children:e.jsx(Dt,{size:20})}),e.jsx("button",{onClick:v,disabled:f,className:`w-12 h-12 rounded-full bg-primary border-none flex items-center justify-center text-white ${f?"cursor-wait opacity-70":"cursor-pointer"}`,children:f?e.jsx(F,{size:22,className:"animate-spin"}):S?e.jsx(Et,{size:22,fill:"white"}):e.jsx(Ce,{size:22,fill:"white",className:"ml-0.5"})}),e.jsx("button",{onClick:()=>m(10),className:"p-2 bg-transparent border-none cursor-pointer text-slate-400 hover:text-slate-600",children:e.jsx(_t,{size:20})})]}),e.jsxs("div",{className:"text-center mt-2 text-[13px] text-slate-500",children:[be(n)," / ",be(u)]})]})},_s=({sessionId:t,conversationId:a})=>{const r=d.useRef(null),[S,x]=d.useState(!1),[n,p]=d.useState(!1),[u,j]=d.useState(0),[f,z]=d.useState(0),[s,w]=d.useState(null),[v,k]=d.useState(!0);d.useEffect(()=>{if(!a){k(!1),w("Keine Audio-Aufnahme verf√ºgbar");return}const _=us(t);return k(!0),w(null),fetch(_,{headers:{"X-WP-Nonce":ne()},credentials:"same-origin"}).then(E=>{if(!E.ok)throw new Error(`HTTP ${E.status}`);return E.blob()}).then(E=>{const C=URL.createObjectURL(E),I=new Audio(C);r.current=I,I._objectUrl=C,I.addEventListener("loadedmetadata",()=>{z(I.duration),k(!1)}),I.addEventListener("timeupdate",()=>j(I.currentTime)),I.addEventListener("play",()=>x(!0)),I.addEventListener("pause",()=>x(!1)),I.addEventListener("ended",()=>x(!1)),I.addEventListener("error",()=>{w("Audio konnte nicht abgespielt werden."),k(!1)})}).catch(()=>{w("Audio nicht verf√ºgbar."),k(!1)}),()=>{r.current&&(r.current.pause(),r.current._objectUrl&&URL.revokeObjectURL(r.current._objectUrl),r.current=null)}},[t,a]);const m=()=>{r.current&&(S?r.current.pause():r.current.play())},D=()=>{r.current&&(r.current.muted=!n,p(!n))},l=_=>{r.current&&(r.current.currentTime=Math.max(0,Math.min(r.current.currentTime+_,f)))},R=_=>{const E=_.currentTarget.getBoundingClientRect(),C=(_.clientX-E.left)/E.width;r.current&&(r.current.currentTime=C*f)};return v?e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6 text-center",children:[e.jsx(F,{size:24,className:"text-primary animate-spin mx-auto"}),e.jsx("p",{className:"text-[13px] text-slate-500 mt-2",children:"Audio wird geladen..."})]}):s?e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6 text-center",children:[e.jsx(ge,{size:24,className:"text-slate-400 mx-auto"}),e.jsx("p",{className:"text-[13px] text-slate-500 mt-2",children:s})]}):e.jsxs(K,{className:"p-5",children:[e.jsxs("h3",{className:"text-[15px] font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(Ye,{size:18,className:"text-primary"})," Gespr√§chsaufnahme"]}),e.jsx("div",{onClick:R,className:"h-2 bg-slate-200 rounded cursor-pointer mb-4",children:e.jsx("div",{className:"h-full bg-primary rounded transition-all duration-100",style:{width:`${u/f*100||0}%`}})}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("button",{onClick:()=>l(-10),className:"p-2 bg-transparent border-none cursor-pointer text-slate-400 hover:text-slate-600",children:e.jsx(Dt,{size:20})}),e.jsx("button",{onClick:m,className:"w-12 h-12 rounded-full bg-primary border-none cursor-pointer flex items-center justify-center text-white",children:S?e.jsx(Et,{size:22,fill:"white"}):e.jsx(Ce,{size:22,fill:"white",className:"ml-0.5"})}),e.jsx("button",{onClick:()=>l(10),className:"p-2 bg-transparent border-none cursor-pointer text-slate-400 hover:text-slate-600",children:e.jsx(_t,{size:20})}),e.jsx("button",{onClick:D,className:"p-2 bg-transparent border-none cursor-pointer text-slate-400 hover:text-slate-600 ml-auto",children:n?e.jsx(Jt,{size:20}):e.jsx(Zt,{size:20})})]}),e.jsxs("div",{className:"text-center mt-2 text-[13px] text-slate-500",children:[be(u)," / ",be(f)]})]})},As=({entry:t})=>{const a=t.role==="user";return e.jsxs("div",{className:"flex gap-3 mb-4",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex-shrink-0 flex items-center justify-center ${a?"bg-primary":"bg-slate-200"}`,children:e.jsx(At,{size:16,className:a?"text-white":"text-slate-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`text-xs font-semibold mb-1 ${a?"text-primary":"text-slate-400"}`,children:a?"Du":"Interviewer"}),e.jsx("p",{className:"text-sm text-slate-900 leading-relaxed m-0",children:t.text||t.message})]})]})},Rs=({answer:t,index:a})=>{const[r,S]=d.useState(!1),x=t.feedback?typeof t.feedback=="string"?JSON.parse(t.feedback):t.feedback:null,n=t.audio_analysis?typeof t.audio_analysis=="string"?JSON.parse(t.audio_analysis):t.audio_analysis:null,p=t.transcript==="[Keine Sprache erkannt]"||n?.speech_rate==="keine_sprache";return e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.05},children:e.jsxs(K,{className:"mb-4 overflow-hidden p-0",children:[e.jsxs("button",{onClick:()=>S(!r),className:"w-full p-4 bg-transparent border-none cursor-pointer flex items-center gap-3 text-left",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-primary/10 flex items-center justify-center text-primary font-bold text-sm flex-shrink-0",children:a+1}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h4",{className:"text-sm font-semibold text-slate-900 m-0 truncate",children:t.question_text||`Frage ${a+1}`})}),t.overall_score!=null&&e.jsx("span",{className:"text-base font-bold",style:{color:p?"#94a3b8":q(t.overall_score*10)},children:p?"‚Äì":`${Math.round(t.overall_score*10)}%`}),e.jsx(zt,{size:18,className:`text-slate-400 transition-transform ${r?"rotate-180":""}`})]}),e.jsx(Ct,{children:r&&e.jsx(A.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"px-5 pb-5 pt-4 border-t border-slate-100",children:[t.question_text&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"text-[13px] font-semibold text-slate-900 mb-2 flex items-center gap-1.5",children:[e.jsx(ye,{size:14,className:"text-primary"})," Frage / Situation"]}),e.jsx("p",{className:"text-sm text-slate-900 leading-relaxed bg-primary/5 p-3 rounded-lg m-0 border border-primary/10",children:t.question_text})]}),t.audio_url&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"text-[13px] font-semibold text-slate-900 mb-2 flex items-center gap-1.5",children:[e.jsx(Ye,{size:14,className:"text-primary"})," Deine Aufnahme"]}),e.jsx(Es,{audioUrl:t.audio_url,durationHint:t.audio_duration_seconds})]}),t.transcript&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"text-[13px] font-semibold text-slate-900 mb-2 flex items-center gap-1.5",children:[e.jsx(It,{size:14,className:"text-primary"})," Transkript"]}),e.jsxs("p",{className:`text-[13px] leading-relaxed bg-slate-50 p-3 rounded-lg m-0 italic break-words ${p?"text-slate-400":"text-slate-600"}`,children:['"',t.transcript,'"']})]}),x?.scores&&!p&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"text-[13px] font-semibold text-slate-900 mb-2.5 flex items-center gap-1.5",children:[e.jsx(fe,{size:14,className:"text-primary"})," Bewertung"]}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mb-2",children:[{key:"content",label:"Inhalt"},{key:"structure",label:"Struktur"},{key:"relevance",label:"Relevanz"},{key:"delivery",label:"Pr√§sentation"}].map(({key:u,label:j})=>{const f=x.scores[u],z=f!=null?f*10:null;return e.jsxs("div",{className:"p-2.5 bg-slate-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-base font-bold",style:{color:z!=null?q(z):"#94a3b8"},children:z!=null?Math.round(z):"-"}),e.jsx("div",{className:"text-[10px] text-slate-500 mt-0.5",children:j})]},u)})}),(()=>{const u=x.scores.overall,j=u!=null?u*10:null;return e.jsxs("div",{className:"p-3 bg-primary/10 rounded-lg text-center border border-primary/20 flex items-center justify-center gap-3",children:[e.jsx("div",{className:"text-[10px] text-slate-500",children:"Gesamt"}),e.jsx("div",{className:"text-xl font-bold",style:{color:j!=null?q(j):"#94a3b8"},children:j!=null?Math.round(j):"-"})]})})()]}),x?.summary&&e.jsx("p",{className:"text-[13px] text-slate-600 leading-snug mb-3",children:x.summary}),x?.strengths?.length>0&&!p&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("h6",{className:"text-xs font-semibold text-green-600 mb-1.5 flex items-center gap-1",children:[e.jsx(Me,{size:12})," St√§rken"]}),e.jsx("ul",{className:"m-0 pl-4 text-slate-600 text-xs",children:x.strengths.map((u,j)=>e.jsx("li",{className:"mb-1",children:u},j))})]}),x?.improvements?.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("h6",{className:"text-xs font-semibold text-amber-600 mb-1.5 flex items-center gap-1",children:[e.jsx(ge,{size:12})," Verbesserungspotenzial"]}),e.jsx("ul",{className:"m-0 pl-4 text-slate-600 text-xs",children:x.improvements.map((u,j)=>e.jsx("li",{className:"mb-1",children:u},j))})]}),x?.tips?.length>0&&!p&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("h6",{className:"text-xs font-semibold text-primary mb-1.5 flex items-center gap-1",children:[e.jsx(ke,{size:12})," Tipps"]}),e.jsx("ul",{className:"m-0 pl-4 text-slate-600 text-xs",children:x.tips.map((u,j)=>e.jsx("li",{className:"mb-1",children:u},j))})]}),n&&!p&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100",children:[e.jsxs("h5",{className:"text-[13px] font-semibold text-slate-900 mb-3 flex items-center gap-1.5",children:[e.jsx(Ye,{size:14,className:"text-primary"})," Sprechanalyse"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2.5",children:[n.speech_rate&&e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-[11px] text-slate-500 mb-1",children:"Sprechtempo"}),e.jsx("div",{className:"text-sm font-semibold text-slate-900 capitalize",children:n.speech_rate==="optimal"?"‚úì Optimal":n.speech_rate==="zu_schnell"?"‚ö° Zu schnell":n.speech_rate==="zu_langsam"?"üê¢ Zu langsam":n.speech_rate})]}),n.filler_words&&e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-[11px] text-slate-500 mb-1",children:"F√ºllw√∂rter"}),e.jsxs("div",{className:`text-sm font-semibold ${n.filler_words.count<=2?"text-green-600":n.filler_words.count<=5?"text-amber-600":"text-red-600"}`,children:[n.filler_words.count||0," erkannt"]}),n.filler_words.words?.length>0&&e.jsx("div",{className:"text-[11px] text-slate-500 mt-1",children:n.filler_words.words.slice(0,5).join(", ")})]}),n.confidence_score!=null&&e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-[11px] text-slate-500 mb-1",children:"Selbstsicherheit"}),e.jsxs("div",{className:"text-sm font-semibold",style:{color:q(n.confidence_score)},children:[n.confidence_score,"%"]})]}),n.clarity_score!=null&&e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-[11px] text-slate-500 mb-1",children:"Klarheit"}),e.jsxs("div",{className:"text-sm font-semibold",style:{color:q(n.clarity_score)},children:[n.clarity_score,"%"]})]})]}),n.notes&&e.jsx("p",{className:"text-xs text-slate-500 mt-2.5 italic",children:n.notes})]})]})})})]})})},Ts=({isOpen:t,onClose:a,onConfirm:r,isDeleting:S})=>t?e.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black/50",onClick:a,children:e.jsxs(A.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-2xl p-6 max-w-[400px] w-[90%] shadow-2xl",onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-100 flex items-center justify-center",children:e.jsx(G,{size:24,className:"text-red-500"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 m-0",children:"Session l√∂schen?"})]}),e.jsx("p",{className:"text-sm text-slate-600 leading-relaxed mb-6",children:"M√∂chtest du diese Session wirklich l√∂schen? Alle Antworten und Feedback werden unwiderruflich entfernt."}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(ue,{variant:"secondary",onClick:a,disabled:S,children:"Abbrechen"}),e.jsx(ue,{variant:"danger",onClick:r,disabled:S,icon:S?e.jsx(F,{size:16,className:"animate-spin"}):e.jsx(G,{size:16}),children:S?"L√∂schen...":"L√∂schen"})]})]})}):null,Ws=({category:t})=>{const[a,r]=d.useState(!1),S=Ns[t.category]||fe,x=q(t.score);return e.jsxs(K,{className:"mb-2.5 overflow-hidden p-0",children:[e.jsxs("button",{onClick:()=>r(!a),className:"w-full p-3.5 bg-transparent border-none cursor-pointer flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center",style:{backgroundColor:`${x}15`},children:e.jsx(S,{size:18,style:{color:x}})}),e.jsx("div",{className:"flex-1 text-left",children:e.jsx("h4",{className:"text-sm font-semibold text-slate-900 m-0",children:t.label})}),e.jsxs("span",{className:"text-base font-bold",style:{color:x},children:[Math.round(t.score),"%"]}),e.jsx(zt,{size:18,className:`text-slate-400 transition-transform ${a?"rotate-180":""}`})]}),e.jsx(Ct,{children:a&&e.jsx(A.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"px-4 pb-4 pt-3 border-t border-slate-100",children:[t.feedback&&e.jsx("p",{className:"text-[13px] text-slate-600 leading-snug mb-2.5",children:t.feedback}),t.strengths?.length>0&&e.jsxs("div",{className:"mb-2.5",children:[e.jsxs("h6",{className:"text-xs font-semibold text-green-600 mb-1 flex items-center gap-1",children:[e.jsx(Me,{size:12})," St√§rken"]}),e.jsx("ul",{className:"m-0 pl-4 text-xs text-slate-600",children:t.strengths.map((n,p)=>e.jsx("li",{children:n},p))})]}),t.improvements?.length>0&&e.jsxs("div",{children:[e.jsxs("h6",{className:"text-xs font-semibold text-amber-600 mb-1 flex items-center gap-1",children:[e.jsx(ke,{size:12})," Tipps"]}),e.jsx("ul",{className:"m-0 pl-4 text-xs text-slate-600",children:t.improvements.map((n,p)=>e.jsx("li",{children:n},p))})]})]})})})]})},Bs=({session:t,type:a,scenario:r,onBack:S,onContinueSession:x,onRepeatSession:n,onDeleteSession:p})=>{const u=Ie(),[j,f]=d.useState(!1);d.useEffect(()=>{const o=()=>{const h=window.innerWidth;f(h>=768&&h<1200)};return o(),window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]);const[z,s]=d.useState([]),[w,v]=d.useState(!0),[k,m]=d.useState(null),[D,l]=d.useState(!1),[R,_]=d.useState(!1),[E,C]=d.useState(!1),[I,ee]=d.useState(null),[oe,ce]=d.useState(r),M=a==="video",L=a==="simulator",$=a==="roleplay",Y=(()=>{const o=t?.questions||t?.questions_json;if(!o)return!1;try{const h=typeof o=="string"?JSON.parse(o):o;return Array.isArray(h)&&h.length>0}catch{return!1}})(),y=(()=>{if(!L||!Y)return!1;const o=t?.total_questions||0,h=t?.completed_questions||0;return o>0&&h<o})(),O=async()=>{if(p){_(!0);try{await p(t,a)}catch(o){console.error("Failed to delete session:",o),_(!1),l(!1)}}},P=async()=>{if(!(E||!t?.id)){C(!0);try{let o;if(L)o=`${ve()}/simulator/sessions/${t.id}/export-pdf`;else if(M)o=`${ve()}/video-training/sessions/${t.id}/export-pdf`;else if($)o=`${ve()}/sessions/${t.id}/export-pdf`;else throw new Error("Unsupported session type for PDF export");const h=await fetch(o,{method:"POST",headers:{"X-WP-Nonce":ne(),"Content-Type":"application/json"},credentials:"same-origin"}),W=await h.json();if(!h.ok)throw new Error(W.error||`HTTP ${h.status}`);if(!W.success||!W.pdf_base64)throw new Error(W.error||"PDF generation failed");const de=atob(W.pdf_base64),xe=new Array(de.length);for(let pe=0;pe<de.length;pe++)xe[pe]=de.charCodeAt(pe);const V=new Uint8Array(xe),Te=new Blob([V],{type:W.content_type||"application/pdf"}),J=window.URL.createObjectURL(Te),Q=document.createElement("a");Q.href=J,Q.download=W.filename||"Training.pdf",document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),window.URL.revokeObjectURL(J)}catch(o){console.error("Failed to download PDF:",o)}finally{C(!1)}}};d.useEffect(()=>{L&&t?.id?Ae():$&&t?.id?Fe():v(!1)},[t?.id,a]);const Ae=async()=>{try{v(!0);const h=await(await fetch(`${ve()}/simulator/sessions/${t.id}/answers`,{headers:{"X-WP-Nonce":ne()}})).json();h.success&&h.data?.answers?s(h.data.answers):Array.isArray(h.data)&&s(h.data)}catch(o){console.error("Failed to load answers:",o),m("Fehler beim Laden der Antworten")}finally{v(!1)}},Fe=async()=>{try{v(!0);const o=await ds(t.id);if(ee({...t,...o,feedback:hs(o.feedback_json||t.feedback_json),audioAnalysis:ps(o.audio_analysis_json||t.audio_analysis_json),transcript:xs(o.transcript||t.transcript)}),!r&&o.scenario_id)try{const h=await ms(o.scenario_id);ce(h)}catch(h){console.warn("Could not load scenario:",h)}}catch(o){console.error("Failed to load roleplay data:",o),m("Fehler beim Laden der Gespr√§chsdaten")}finally{v(!1)}},X=t?.summary_feedback_json?typeof t.summary_feedback_json=="string"?JSON.parse(t.summary_feedback_json):t.summary_feedback_json:null,Re=t?.category_scores||[],te=t?.analysis||{},je=(()=>{let o=0;return $&&I?.feedback?.rating?.overall?o=I.feedback.rating.overall:o=t?.overall_score||X?.overall_score||0,(L||$)&&o<=10?o*10:o})();return w?e.jsx("div",{className:"w-full min-h-[60vh] flex items-center justify-center p-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx(F,{size:48,className:"text-primary animate-spin mx-auto"}),e.jsx("p",{className:"text-slate-500 mt-4",children:"Analyse wird geladen..."})]})}):k?e.jsx("div",{className:"min-h-[400px] flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-[400px] p-6",children:[e.jsx(ge,{size:48,className:"text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Fehler beim Laden"}),e.jsx("p",{className:"text-slate-600 mb-6",children:k}),e.jsx(ue,{variant:"secondary",onClick:S,children:"Zur√ºck"})]})}):e.jsxs("div",{className:"min-h-screen bg-slate-50 overflow-hidden max-w-full",children:[e.jsx("div",{className:`sticky top-0 z-40 ${u?"px-4 py-5":"px-8 py-6"}`,style:{background:"var(--header-gradient, linear-gradient(135deg, #3A7FA7 0%, #4A9BC7 100%))"},children:e.jsxs("div",{className:"max-w-[1400px] mx-auto",children:[S&&e.jsxs("button",{onClick:S,className:"flex items-center gap-1.5 bg-white/15 border-none rounded-lg px-3 py-2 cursor-pointer text-white text-[13px] mb-4 hover:bg-white/25 transition-colors",children:[e.jsx(wt,{size:16}),"Zur√ºck zur √úbersicht"]}),e.jsxs("div",{className:"flex items-center gap-6",children:[!u&&e.jsx(Ds,{score:je,size:100,isHeader:!0}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap mb-2",children:[e.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide px-2.5 py-1 rounded-full bg-white/20 text-white",children:Cs(a)}),e.jsx("span",{className:"text-xs font-medium px-2.5 py-1 rounded-full bg-white/90",style:{color:q(je)},children:Is(je)})]}),e.jsx("h1",{className:`font-bold text-white m-0 mb-2 ${u?"text-xl":"text-2xl"}`,children:($?oe?.title:r?.title)||t?.scenario_title||t?.position||"Training"}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("span",{className:"flex items-center gap-1.5 text-[13px] text-white/80",children:[e.jsx(Ne,{size:14}),zs(t?.created_at)]}),t?.duration&&e.jsxs("span",{className:"flex items-center gap-1.5 text-[13px] text-white/80",children:[e.jsx(Se,{size:14}),be(t.duration)]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:P,disabled:E,title:"Als PDF herunterladen",className:`flex items-center justify-center bg-white/20 border border-white/30 rounded-lg px-3 py-2.5 text-white outline-none transition-colors hover:bg-white/30 ${E?"cursor-wait opacity-70":"cursor-pointer"}`,children:E?e.jsx(F,{size:16,className:"animate-spin"}):e.jsx(Nt,{size:16})}),!u&&n&&e.jsxs("button",{onClick:()=>n(t,r),className:"flex items-center gap-2 bg-white/20 border border-white/30 rounded-lg px-5 py-2.5 cursor-pointer text-white text-sm font-medium outline-none hover:bg-white/30 transition-colors",children:[e.jsx(Ke,{size:16}),"Erneut √ºben"]}),p&&e.jsx("button",{onClick:()=>l(!0),className:`flex items-center gap-2 bg-red-500/20 border border-red-500/40 rounded-lg cursor-pointer text-white text-sm font-medium outline-none hover:bg-red-500/30 transition-colors ${u?"px-3 py-2.5":"px-4 py-2.5"}`,children:e.jsx(G,{size:16})})]})]})]})}),e.jsx("div",{className:`overflow-hidden ${u?"p-4":"px-8 py-6"}`,children:e.jsxs("div",{className:"grid gap-6 overflow-hidden",style:{gridTemplateColumns:u||j?"1fr":"1fr 400px"},children:[e.jsxs("div",{className:"min-w-0 overflow-hidden",children:[M&&t?.video_url&&e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs(K,{className:"mb-5 p-5",children:[e.jsxs("h3",{className:"text-[15px] font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[e.jsx(_e,{size:18,className:"text-primary"})," Deine Aufnahme"]}),e.jsx("video",{src:t.video_url,controls:!0,className:"w-full max-w-[640px] max-h-[360px] rounded-xl bg-black object-contain"})]})}),L&&z.length>0&&e.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[e.jsxs("h3",{className:"text-base font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(ye,{size:18,className:"text-primary"})," Deine Antworten (",z.length,")"]}),z.map((o,h)=>e.jsx(Rs,{answer:o,index:h},o.id||h)),y&&(x||n)&&e.jsxs("div",{className:"flex gap-3 justify-center flex-wrap mt-6 p-5 bg-slate-50 rounded-xl border border-dashed border-slate-300",children:[e.jsx("p",{className:"w-full text-center text-slate-600 text-sm mb-3",children:"Diese Session ist noch nicht abgeschlossen."}),x&&e.jsx(ue,{onClick:()=>x(t,r),icon:e.jsx(pt,{size:18}),children:"Fortsetzen"}),n&&e.jsx(ue,{variant:"secondary",onClick:()=>n(t,r),icon:e.jsx(Ke,{size:18}),children:"Erneut starten"})]})]}),L&&z.length===0&&e.jsxs("div",{className:"text-center py-12 px-6 bg-slate-50 rounded-2xl",children:[e.jsx(ge,{size:48,className:"text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Keine Antworten vorhanden"}),e.jsx("p",{className:"text-slate-500 mb-6",children:Y?"Diese Session wurde nicht abgeschlossen. Du kannst sie fortsetzen oder erneut starten.":"Diese Session wurde verlassen, bevor Fragen generiert wurden."}),y&&(x||n)&&e.jsxs("div",{className:"flex gap-3 justify-center flex-wrap",children:[x&&e.jsx(ue,{onClick:()=>x(t,r),icon:e.jsx(pt,{size:18}),children:"Fortsetzen"}),n&&e.jsx(ue,{variant:"secondary",onClick:()=>n(t,r),icon:e.jsx(Ke,{size:18}),children:"Erneut starten"})]})]}),$&&I&&e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-5",children:e.jsx(_s,{sessionId:t.id,conversationId:I.conversation_id})}),$&&I?.transcript?.length>0&&e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(K,{className:"p-5",children:[e.jsxs("h3",{className:"text-[15px] font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(It,{size:18,className:"text-primary"})," Gespr√§chsverlauf"]}),e.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:I.transcript.map((o,h)=>e.jsx(As,{entry:o},h))})]})})]}),e.jsxs("div",{className:"min-w-0 overflow-hidden",children:[M&&Re.length>0&&e.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-5",children:[e.jsxs("h3",{className:"text-[15px] font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[e.jsx(fe,{size:16,className:"text-primary"})," Detaillierte Bewertung"]}),Re.map((o,h)=>e.jsx(Ws,{category:o},o.category||h))]}),M&&(te.key_strengths?.length>0||te.actionable_tips?.length>0)&&e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsxs(K,{className:"mb-5 p-5",children:[te.key_strengths?.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-green-600 mb-2.5 flex items-center gap-1.5",children:[e.jsx(Me,{size:16})," Deine St√§rken"]}),e.jsx("ul",{className:"m-0 pl-5",children:te.key_strengths.map((o,h)=>e.jsx("li",{className:"text-[13px] text-slate-600 mb-1.5 leading-snug",children:o},h))})]}),te.actionable_tips?.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-primary mb-2.5 flex items-center gap-1.5",children:[e.jsx(ke,{size:16})," Tipps zur Verbesserung"]}),e.jsx("ul",{className:"m-0 pl-5",children:te.actionable_tips.map((o,h)=>e.jsx("li",{className:"text-[13px] text-slate-600 mb-1.5 leading-snug",children:o},h))})]})]})}),M&&t?.summary_feedback&&e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-2.5",children:"Zusammenfassung"}),e.jsx("p",{className:"text-[13px] text-slate-600 leading-relaxed m-0",children:t.summary_feedback})]})}),L&&X&&e.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[X.summary&&e.jsxs(K,{className:"mb-5 p-5",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-2.5",children:"Zusammenfassung"}),e.jsx("p",{className:"text-[13px] text-slate-600 leading-relaxed m-0",children:X.summary})]}),X.scores&&e.jsxs(K,{className:"mb-5 p-5",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Bewertung"}),e.jsx("div",{className:"grid grid-cols-2 gap-2.5",children:Object.entries(X.scores).map(([o,h])=>{const W=h!=null?h*10:null;return e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-xl font-bold",style:{color:q(W)},children:W!=null?Math.round(W):"-"}),e.jsx("div",{className:"text-[11px] text-slate-500 capitalize",children:o})]},o)})})]}),X.key_takeaways?.length>0&&e.jsxs("div",{className:"bg-green-50 rounded-2xl p-5",children:[e.jsxs("h4",{className:"text-sm font-semibold text-green-600 mb-2.5 flex items-center gap-1.5",children:[e.jsx(ke,{size:16})," Wichtigste Erkenntnisse"]}),e.jsx("ul",{className:"m-0 pl-5 text-[13px] text-slate-900 leading-snug",children:X.key_takeaways.map((o,h)=>e.jsx("li",{className:"mb-1.5",children:o},h))})]})]}),$&&I?.feedback&&e.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[I.feedback.rating&&e.jsxs(K,{className:"mb-5 p-5",children:[e.jsxs("h4",{className:"text-[15px] font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(fe,{size:16,className:"text-primary"})," Bewertungskriterien"]}),e.jsx("div",{className:"flex flex-col gap-2.5",children:Object.entries(I.feedback.rating).filter(([o])=>o!=="overall").map(([o,h])=>{const W=h*10;return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"flex-1 text-[13px] font-medium text-slate-900 capitalize",children:o.replace(/_/g," ")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 h-1.5 bg-slate-200 rounded",children:e.jsx("div",{className:"h-full rounded",style:{width:`${W}%`,backgroundColor:q(W)}})}),e.jsx("span",{className:"text-sm font-semibold min-w-[45px]",style:{color:q(W)},children:Math.round(W)})]})]},o)})})]}),I.feedback.strengths?.length>0&&e.jsxs(K,{className:"mb-5 p-5",children:[e.jsxs("h4",{className:"text-sm font-semibold text-green-600 mb-3 flex items-center gap-1.5",children:[e.jsx(Me,{size:16})," Deine St√§rken"]}),e.jsx("ul",{className:"m-0 pl-5",children:I.feedback.strengths.map((o,h)=>e.jsx("li",{className:"text-[13px] text-slate-600 mb-2 leading-snug",children:o},h))})]}),I.feedback.improvements?.length>0&&e.jsxs(K,{className:"mb-5 p-5",children:[e.jsxs("h4",{className:"text-sm font-semibold text-amber-600 mb-3 flex items-center gap-1.5",children:[e.jsx(ke,{size:16})," Verbesserungspotenzial"]}),e.jsx("ul",{className:"m-0 pl-5",children:I.feedback.improvements.map((o,h)=>e.jsx("li",{className:"text-[13px] text-slate-600 mb-2 leading-snug",children:o},h))})]}),I.feedback.summary&&e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-2.5",children:"Zusammenfassung"}),e.jsx("p",{className:"text-[13px] text-slate-600 leading-relaxed m-0",children:I.feedback.summary})]})]}),$&&!I?.feedback&&e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6 text-center",children:[e.jsx(ge,{size:32,className:"text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-slate-500 m-0",children:"Keine Analyse verf√ºgbar f√ºr dieses Gespr√§ch."})]})]})]})}),e.jsx(Ts,{isOpen:D,onClose:()=>l(!1),onConfirm:O,isDeleting:R})]})},Ls=({briefing:t,onClick:a,onDelete:r,headerGradient:S,headerText:x,primaryAccent:n})=>{const[p,u]=d.useState(!1),[j,f]=d.useState(!1),z=Ie(900),s=ys(t.template_icon),w=k=>{k.stopPropagation(),f(!0)},v=async()=>{u(!0);try{await r(t.id),f(!1)}catch(k){console.error("Error deleting briefing:",k)}finally{u(!1)}};return z?e.jsxs(A.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileTap:{scale:.98},children:[e.jsxs("div",{onClick:a,style:{background:"#fff",borderRadius:"16px",padding:"16px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:`linear-gradient(135deg, ${n}15, ${n}30)`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(s,{style:{width:"22px",height:"22px",color:n}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"15px",fontWeight:600,color:"#0f172a",marginBottom:"4px",lineHeight:"1.3",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.title||"Briefing"}),e.jsx("div",{style:{fontSize:"13px",color:"#64748b"},children:re(t.created_at)})]}),e.jsx("button",{onClick:w,disabled:p,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},title:"L√∂schen",children:p?e.jsx(F,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(G,{size:18})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px",paddingTop:"12px",borderTop:"1px solid #f1f5f9"},children:[e.jsx("span",{style:{backgroundColor:`${n}15`,color:n,padding:"4px 10px",borderRadius:"10px",fontSize:"12px",fontWeight:500,maxWidth:"70%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.template_title}),e.jsx(ae,{size:22,style:{color:"#94a3b8",flexShrink:0}})]})]}),e.jsx(le,{isOpen:j,onClose:()=>f(!1),onConfirm:v,title:"Briefing l√∂schen",description:"M√∂chtest du dieses Briefing wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:p})]}):e.jsxs(A.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsx("div",{onClick:a,style:{background:"#fff",borderRadius:"16px",padding:"20px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",transition:"all 0.2s"},onMouseEnter:k=>{k.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.08)",k.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:k=>{k.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)",k.currentTarget.style.borderColor="#e2e8f0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:`linear-gradient(135deg, ${n}15, ${n}30)`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(s,{style:{width:"24px",height:"24px",color:n}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#0f172a",marginBottom:"4px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.title||"Briefing"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap",fontSize:"13px",color:"#64748b"},children:[e.jsx("span",{style:{backgroundColor:`${n}15`,color:n,padding:"2px 8px",borderRadius:"10px",fontSize:"12px",fontWeight:500},children:t.template_title}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ne,{size:14}),re(t.created_at)]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[e.jsx("button",{onClick:w,disabled:p,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"L√∂schen",children:p?e.jsx(F,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(G,{size:18})}),e.jsx(ae,{size:20,style:{color:"#94a3b8"}})]})]})}),e.jsx(le,{isOpen:j,onClose:()=>f(!1),onConfirm:v,title:"Briefing l√∂schen",description:"M√∂chtest du dieses Briefing wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:p})]})},ie={SIMULATOR:"simulator",ROLEPLAY:"roleplay",VIDEO:"video"},Ms=({session:t,type:a,scenario:r,onClick:S,onContinueSession:x,onDeleteSession:n,headerGradient:p,headerText:u,primaryAccent:j})=>{const[f,z]=d.useState(!1),[s,w]=d.useState(!1),v=Ie(900),k=()=>{let y=null;if(a===ie.SIMULATOR)y=t.overall_score||t.average_score;else if(a===ie.VIDEO)y=t.overall_score;else if(t.feedback_json)try{let O=t.feedback_json;if(typeof O=="string"){let P=O.trim();P.startsWith("```json")?P=P.replace(/```json\s*/g,"").replace(/```\s*$/g,""):P.startsWith("```")&&(P=P.replace(/```\s*/g,"").replace(/```\s*$/g,"")),O=JSON.parse(P)}y=O.rating?.overall||null}catch{y=null}return y==null||isNaN(y)||y===0?null:y},m=()=>a===ie.SIMULATOR||a===ie.VIDEO?t.status:t.feedback_json?"completed":"pending",D=k(),R=m()==="completed",_=t.total_questions>0&&(t.completed_questions||0)<t.total_questions,E=a===ie.SIMULATOR&&_,C=()=>{if(!E)return null;const y=t.completed_questions||0,O=t.total_questions||0;return`${y}/${O} Fragen`},I=y=>{y.stopPropagation(),x&&x(t,r)},ee=y=>{y.stopPropagation(),w(!0)},oe=async()=>{z(!0);try{await n(t,a),w(!1)}catch(y){console.error("Error deleting session:",y)}finally{z(!1)}},M=(()=>{if(D==null||isNaN(D))return null;if(a===ie.SIMULATOR||a===ie.ROLEPLAY){const y=D<=10?D*10:D;return isNaN(y)?null:y}return isNaN(D)?null:D})(),L=y=>{if(!y&&y!==0)return{background:"#f1f5f9",color:"#64748b"};const O=parseFloat(y);return O>=80?{background:"#dcfce7",color:"#166534"}:O>=60?{background:"#fef9c3",color:"#854d0e"}:{background:"#fee2e2",color:"#991b1b"}},Y=(()=>{switch(a){case ie.SIMULATOR:return Oe;case ie.VIDEO:return _e;default:return ye}})();return v?e.jsxs(A.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileTap:{scale:.98},children:[e.jsxs("div",{onClick:S,style:{background:"#fff",borderRadius:"16px",padding:"16px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:p,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Y,{style:{width:"22px",height:"22px",color:u}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"15px",fontWeight:600,color:"#0f172a",marginBottom:"4px",lineHeight:"1.3"},children:r?.title||t.scenario_title||`Session #${t.id}`}),e.jsx("div",{style:{fontSize:"13px",color:"#64748b"},children:re(t.created_at)})]}),n&&e.jsx("button",{onClick:ee,disabled:f,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},title:"L√∂schen",children:f?e.jsx(F,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(G,{size:18})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px",paddingTop:"12px",borderTop:"1px solid #f1f5f9"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[!R&&!E&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"20px",background:"#fef3c7",color:"#92400e",fontSize:"12px",fontWeight:500},children:[e.jsx(Se,{size:12}),"In Bearbeitung"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",borderRadius:"20px",fontSize:"13px",fontWeight:600,...L(M)},children:[e.jsx(fe,{size:13}),M!==null?`${Math.round(M)}%`:"-- %"]}),(t.duration||t.video_duration_seconds)&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:"#64748b"},children:[e.jsx(Se,{size:12}),be(t.duration||t.video_duration_seconds)]}),E&&e.jsx("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"20px",background:"#dbeafe",color:"#1e40af",fontSize:"12px",fontWeight:500},children:C()})]}),E&&x?e.jsxs("button",{onClick:I,style:{display:"flex",alignItems:"center",gap:"6px",padding:"10px 16px",borderRadius:"10px",border:"none",background:j||"#3B82F6",color:"#fff",fontSize:"13px",fontWeight:600,cursor:"pointer",boxShadow:`0 2px 8px ${j||"#3B82F6"}40`,flexShrink:0},children:[e.jsx(Ce,{size:14}),"Fortsetzen"]}):e.jsx(ae,{size:22,style:{color:"#94a3b8",flexShrink:0}})]})]}),e.jsx(le,{isOpen:s,onClose:()=>w(!1),onConfirm:oe,title:"Session l√∂schen",description:"M√∂chtest du diese Session wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:f})]}):e.jsxs(A.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsx("div",{onClick:S,style:{background:"#fff",borderRadius:"16px",padding:"20px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",transition:"all 0.2s"},onMouseEnter:y=>{y.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.08)",y.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:y=>{y.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)",y.currentTarget.style.borderColor="#e2e8f0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:p,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Y,{style:{width:"24px",height:"24px",color:u}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#0f172a",marginBottom:"4px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:r?.title||t.scenario_title||`Session #${t.id}`}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap",fontSize:"13px",color:"#64748b"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ne,{size:14}),re(t.created_at)]}),t.duration||t.video_duration_seconds?e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Se,{size:14}),be(t.duration||t.video_duration_seconds)]}):null]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexShrink:0},children:[E&&x&&e.jsxs("button",{onClick:I,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",borderRadius:"10px",border:"none",background:j||"#3B82F6",color:"#fff",fontSize:"13px",fontWeight:600,cursor:"pointer",boxShadow:`0 2px 8px ${j||"#3B82F6"}40`,transition:"all 0.2s"},onMouseEnter:y=>{y.currentTarget.style.transform="scale(1.02)",y.currentTarget.style.boxShadow=`0 4px 12px ${j||"#3B82F6"}50`},onMouseLeave:y=>{y.currentTarget.style.transform="scale(1)",y.currentTarget.style.boxShadow=`0 2px 8px ${j||"#3B82F6"}40`},children:[e.jsx(Ce,{size:14}),"Fortsetzen"]}),E&&e.jsx("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"20px",background:"#dbeafe",color:"#1e40af",fontSize:"12px",fontWeight:500},children:C()}),!R&&!E&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"20px",background:"#fef3c7",color:"#92400e",fontSize:"12px",fontWeight:500},children:[e.jsx(Se,{size:12}),"In Bearbeitung"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"6px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:600,...L(M)},children:[e.jsx(fe,{size:14}),M!==null?`${Math.round(M)}%`:"-- %"]}),n&&e.jsx("button",{onClick:ee,disabled:f,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"color 0.2s"},onMouseEnter:y=>{y.currentTarget.style.color="#ef4444"},onMouseLeave:y=>{y.currentTarget.style.color="#94a3b8"},title:"L√∂schen",children:f?e.jsx(F,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(G,{size:18})}),e.jsx(ae,{size:20,style:{color:"#94a3b8"}})]})]})}),e.jsx(le,{isOpen:s,onClose:()=>w(!1),onConfirm:oe,title:"Session l√∂schen",description:"M√∂chtest du diese Session wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:f})]})},yt=({proScore:t,contraScore:a})=>{const r=t+a,S=r>0?Math.round(t/r*100):50;return e.jsxs("div",{style:{height:"6px",borderRadius:"3px",overflow:"hidden",display:"flex",backgroundColor:"#f1f5f9",width:"100%",maxWidth:"120px"},children:[e.jsx("div",{style:{background:"linear-gradient(90deg, #22c55e 0%, #16a34a 100%)",width:`${S}%`,height:"100%"}}),e.jsx("div",{style:{background:"linear-gradient(90deg, #ef4444 0%, #dc2626 100%)",width:`${100-S}%`,height:"100%"}})]})},Os=({decision:t,onClick:a,onDelete:r,headerGradient:S,headerText:x,primaryAccent:n})=>{const[p,u]=d.useState(!1),[j,f]=d.useState(!1),z=Ie(900),s=(t.pros||[]).reduce((l,R)=>l+(R.text?.trim()?R.weight||5:0),0),w=(t.cons||[]).reduce((l,R)=>l+(R.text?.trim()?R.weight||5:0),0),v=(t.pros||[]).filter(l=>l.text?.trim()).length,k=(t.cons||[]).filter(l=>l.text?.trim()).length,m=l=>{l.stopPropagation(),f(!0)},D=async()=>{u(!0);try{await r(t.id),f(!1)}catch(l){console.error("Error deleting decision:",l)}finally{u(!1)}};return z?e.jsxs(A.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileTap:{scale:.98},children:[e.jsxs("div",{onClick:a,style:{background:"#fff",borderRadius:"16px",padding:"16px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf615, #8b5cf630)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(De,{style:{width:"22px",height:"22px",color:"#8b5cf6"}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"15px",fontWeight:600,color:"#0f172a",marginBottom:"4px",lineHeight:"1.3",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.topic||"Entscheidung"}),e.jsx("div",{style:{fontSize:"13px",color:"#64748b"},children:re(t.created_at)})]}),e.jsx("button",{onClick:m,disabled:p,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},title:"L√∂schen",children:p?e.jsx(F,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(G,{size:18})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",paddingTop:"12px",borderTop:"1px solid #f1f5f9"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(mt,{size:14,color:"#16a34a"}),e.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:"#16a34a"},children:v})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ut,{size:14,color:"#dc2626"}),e.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:"#dc2626"},children:k})]}),e.jsx(yt,{proScore:s,contraScore:w})]}),e.jsx(ae,{size:22,style:{color:"#94a3b8",flexShrink:0}})]})]}),e.jsx(le,{isOpen:j,onClose:()=>f(!1),onConfirm:D,title:"Entscheidung l√∂schen",description:"M√∂chtest du diese Entscheidung wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:p})]}):e.jsxs(A.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsx("div",{onClick:a,style:{background:"#fff",borderRadius:"16px",padding:"20px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",transition:"all 0.2s"},onMouseEnter:l=>{l.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.08)",l.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:l=>{l.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)",l.currentTarget.style.borderColor="#e2e8f0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf615, #8b5cf630)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(De,{style:{width:"24px",height:"24px",color:"#8b5cf6"}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#0f172a",marginBottom:"6px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.topic||"Entscheidung"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap",fontSize:"13px",color:"#64748b"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(mt,{size:14,color:"#16a34a"}),e.jsxs("span",{style:{fontWeight:500,color:"#16a34a"},children:[v," Pro"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ut,{size:14,color:"#dc2626"}),e.jsxs("span",{style:{fontWeight:500,color:"#dc2626"},children:[k," Contra"]})]})]}),e.jsx(yt,{proScore:s,contraScore:w}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ne,{size:14}),re(t.created_at)]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[e.jsx("button",{onClick:m,disabled:p,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"L√∂schen",children:p?e.jsx(F,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(G,{size:18})}),e.jsx(ae,{size:20,style:{color:"#94a3b8"}})]})]})}),e.jsx(le,{isOpen:j,onClose:()=>f(!1),onConfirm:D,title:"Entscheidung l√∂schen",description:"M√∂chtest du diese Entscheidung wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:p})]})},Fs={love:{icon:ss,color:"#E11D48",label:"Liebe"},talent:{icon:fe,color:"#F59E0B",label:"Talent"},need:{icon:ts,color:"#10B981",label:"Welt"},market:{icon:es,color:"#6366F1",label:"Markt"}},jt=({dimensions:t})=>e.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:Object.entries(Fs).map(([a,r])=>{const S=t?.[a]||[],x=S.length>0,n=r.icon;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:500,backgroundColor:x?`${r.color}15`:"#f1f5f9",color:x?r.color:"#94a3b8",border:x?`1px solid ${r.color}30`:"1px solid #e2e8f0"},children:[e.jsx(n,{size:12}),e.jsx("span",{children:S.length})]},a)})}),$s=({ikigai:t,onDelete:a,onNavigate:r,headerGradient:S,headerText:x,primaryAccent:n})=>{const[p,u]=d.useState(!1),[j,f]=d.useState(!1),z=Ie(900),s={love:t.love_tags||[],talent:t.talent_tags||[],need:t.need_tags||[],market:t.market_tags||[]},w=Object.values(s).filter(l=>l.length>0).length,v=t.status==="completed",k=t.paths?.[0]?.role_title||(v?"Ikigai-Analyse abgeschlossen":"Ikigai-Analyse"),m=l=>{l.stopPropagation(),f(!0)},D=async()=>{u(!0);try{await a(t.id),f(!1)}catch(l){console.error("Error deleting ikigai:",l)}finally{u(!1)}};return z?e.jsxs(A.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileTap:{scale:.98},children:[e.jsxs("div",{onClick:r,style:{background:"#fff",borderRadius:"16px",padding:"16px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:v?"linear-gradient(135deg, #E11D48, #F59E0B, #10B981, #6366F1)":"linear-gradient(135deg, #6366F115, #6366F130)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Ee,{style:{width:"22px",height:"22px",color:v?"white":"#6366F1"}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"15px",fontWeight:600,color:"#0f172a",marginBottom:"4px",lineHeight:"1.3",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:k}),e.jsx("div",{style:{fontSize:"13px",color:"#64748b"},children:re(t.created_at)})]}),e.jsx("button",{onClick:m,disabled:p,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},title:"L√∂schen",children:p?e.jsx(F,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(G,{size:18})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",paddingTop:"12px",borderTop:"1px solid #f1f5f9"},children:[e.jsx(jt,{dimensions:s}),e.jsx(ae,{size:22,style:{color:"#94a3b8",flexShrink:0}})]})]}),e.jsx(le,{isOpen:j,onClose:()=>f(!1),onConfirm:D,title:"Ikigai-Analyse l√∂schen",description:"M√∂chtest du diese Ikigai-Analyse wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:p})]}):e.jsxs(A.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsx("div",{onClick:r,style:{background:"#fff",borderRadius:"16px",padding:"20px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",transition:"all 0.2s"},onMouseEnter:l=>{l.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.08)",l.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:l=>{l.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)",l.currentTarget.style.borderColor="#e2e8f0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:v?"linear-gradient(135deg, #E11D48, #F59E0B, #10B981, #6366F1)":"linear-gradient(135deg, #6366F115, #6366F130)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Ee,{style:{width:"24px",height:"24px",color:v?"white":"#6366F1"}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#0f172a",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:k}),v&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:"10px",fontSize:"11px",fontWeight:600,background:"linear-gradient(135deg, #22c55e, #16a34a)",color:"white"},children:"Abgeschlossen"}),!v&&w>0&&e.jsxs("span",{style:{padding:"2px 8px",borderRadius:"10px",fontSize:"11px",fontWeight:600,background:"#f59e0b20",color:"#f59e0b"},children:[w,"/4 Dimensionen"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap",fontSize:"13px",color:"#64748b"},children:[e.jsx(jt,{dimensions:s}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Ne,{size:14}),re(t.created_at)]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[e.jsx("button",{onClick:m,disabled:p,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"L√∂schen",children:p?e.jsx(F,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(G,{size:18})}),e.jsx(ae,{size:20,style:{color:"#94a3b8"}})]})]})}),e.jsx(le,{isOpen:j,onClose:()=>f(!1),onConfirm:D,title:"Ikigai-Analyse l√∂schen",description:"M√∂chtest du diese Ikigai-Analyse wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:p})]})},Ps=t=>t?new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",Us=t=>t>=90?"Ausgezeichnet!":t>=80?"Sehr gut!":t>=70?"Gut!":t>=60?"Solide Leistung":t>=50?"Ausbauf√§hig":"In Arbeit",St={ikigai:{label:"Ikigai-Kompass",icon:Ee},decision:{label:"Entscheidungs-Board",icon:De},briefing:{label:"Smart Briefing",icon:Xe},simulator:{label:"Szenario-Training",icon:Oe},video:{label:"Wirkungs-Analyse",icon:_e},roleplay:{label:"Live-Simulation",icon:ye}},Gs=({score:t,size:a=80,primaryAccent:r})=>{const S=Math.min(100,Math.max(0,t||0)),x=(a-10)/2,n=x*2*Math.PI,p=n-S/100*n;return e.jsxs("div",{style:{position:"relative",width:a,height:a},children:[e.jsxs("svg",{width:a,height:a,style:{transform:"rotate(-90deg)"},children:[e.jsx("circle",{cx:a/2,cy:a/2,r:x,fill:"none",stroke:"rgba(255,255,255,0.25)",strokeWidth:8}),e.jsx(A.circle,{cx:a/2,cy:a/2,r:x,fill:"none",stroke:"#fff",strokeWidth:8,strokeLinecap:"round",strokeDasharray:n,initial:{strokeDashoffset:n},animate:{strokeDashoffset:p},transition:{duration:1.2,ease:"easeOut"}})]}),e.jsx("div",{style:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:e.jsx(A.span,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{delay:.3,duration:.4},style:{fontSize:a/3,fontWeight:700,color:"#fff",lineHeight:1},children:Math.round(t)})})]})},vt=({type:t,title:a,subtitle:r,score:S,status:x,createdAt:n,duration:p,onBack:u,onDelete:j,onDownload:f,isDeleting:z=!1,isDownloading:s=!1,extraActions:w})=>{Rt();const v=Ie(768),{branding:k}=Je(),m=k?.["--header-gradient"]||we["--header-gradient"],D=k?.["--primary-accent"]||we["--primary-accent"],l=St[t]||St.simulator,R=l.icon,_=S!=null&&S>0;return e.jsx("div",{style:{background:m,padding:v?"20px 16px":"24px 32px",position:"sticky",top:0,zIndex:40},children:e.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[u&&e.jsxs("button",{onClick:u,style:{display:"flex",alignItems:"center",gap:"6px",background:"rgba(255,255,255,0.15)",border:"none",borderRadius:"8px",padding:"8px 12px",cursor:"pointer",color:"#fff",fontSize:"13px",marginBottom:"16px"},children:[e.jsx(wt,{size:16}),"Zur√ºck zur √úbersicht"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px"},children:[!v&&_&&e.jsx(Gs,{score:S,size:80,primaryAccent:D}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap",marginBottom:"8px"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px",padding:"4px 10px",borderRadius:"20px",background:"rgba(255,255,255,0.2)",color:"#fff"},children:[e.jsx(R,{size:14}),l.label]}),_&&e.jsx("span",{style:{fontSize:"12px",fontWeight:500,padding:"4px 10px",borderRadius:"20px",background:"rgba(255,255,255,0.9)",color:q(S,D)},children:Us(S)}),x==="in_progress"&&e.jsx("span",{style:{fontSize:"12px",fontWeight:500,padding:"4px 10px",borderRadius:"20px",background:"rgba(255,255,255,0.9)",color:"#f59e0b"},children:"In Bearbeitung"})]}),e.jsx("h1",{style:{fontSize:v?"20px":"24px",fontWeight:700,color:"#fff",margin:0,marginBottom:r?"4px":"8px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:a}),r&&e.jsx("p",{style:{fontSize:"14px",color:"rgba(255,255,255,0.8)",margin:0,marginBottom:"8px"},children:r}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[n&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"rgba(255,255,255,0.8)"},children:[e.jsx(Ne,{size:14}),Ps(n)]}),p&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"rgba(255,255,255,0.8)"},children:[e.jsx(Se,{size:14}),Math.floor(p/60),":",String(p%60).padStart(2,"0")," Min."]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexShrink:0},children:[f&&e.jsxs("button",{onClick:f,disabled:s,title:"Als PDF herunterladen",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:v?"10px":"10px 16px",background:"rgba(255,255,255,0.15)",border:"none",borderRadius:"8px",cursor:s?"wait":"pointer",color:"#fff",fontSize:"13px",fontWeight:500,opacity:s?.7:1},children:[e.jsx(Nt,{size:16}),!v&&"PDF"]}),w,j&&e.jsxs("button",{onClick:j,disabled:z,title:"L√∂schen",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:v?"10px":"10px 16px",background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"8px",cursor:z?"wait":"pointer",color:"#fff",fontSize:"13px",fontWeight:500,opacity:z?.7:1},children:[e.jsx(G,{size:16}),!v&&"L√∂schen"]})]})]})]})})},kt={love:{key:"love",label:"Liebe",icon:"‚ù§Ô∏è",color:"#E11D48",question:"Vergiss mal Geld und Karriere. Bei welchen T√§tigkeiten vergisst du die Zeit?",placeholder:"Erz√§hle mir, was du wirklich liebst zu tun...",description:"Was du liebst"},talent:{key:"talent",label:"Talent",icon:"‚≠ê",color:"#F59E0B",question:"Worin bist du richtig gut? Was f√§llt dir leicht, w√§hrend andere damit k√§mpfen?",placeholder:"Beschreibe deine St√§rken und F√§higkeiten...",description:"Worin du gut bist"},need:{key:"need",label:"Welt",icon:"üåç",color:"#10B981",question:"Welche Probleme der Welt w√ºrdest du gerne l√∂sen? Wo siehst du Bedarf?",placeholder:"Welchen Beitrag m√∂chtest du leisten...",description:"Was die Welt braucht"},market:{key:"market",label:"Markt",icon:"üí∞",color:"#6366F1",question:"Wof√ºr werden Menschen in deinem Bereich bezahlt? Was ist gefragt?",placeholder:"Welche Berufe oder M√§rkte interessieren dich...",description:"Wof√ºr du bezahlt wirst"}},c={SIMULATOR:"simulator",ROLEPLAY:"roleplay",VIDEO:"video",BRIEFINGS:"briefings",DECISIONS:"decisions",IKIGAI:"ikigai"},qe=[{id:c.BRIEFINGS,label:"Smart Briefings",icon:Xe},{id:c.DECISIONS,label:"Entscheidungs-Kompass",icon:De},{id:c.IKIGAI,label:"Ikigai-Kompass",icon:Ee},{id:c.SIMULATOR,label:"Szenario-Training",icon:Oe},{id:c.VIDEO,label:"Wirkungs-Analyse",icon:_e},{id:c.ROLEPLAY,label:"Live-Simulationen",icon:ye}],xi=c,pi=({onBack:t,onSelectSession:a,isAuthenticated:r,onLoginClick:S,onContinueSession:x,onRepeatSession:n,initialTab:p,onNavigateToModule:u})=>{const{branding:j,demoCode:f,isDemoUser:z}=Je(),s=Rt(),w=j?.["--header-gradient"]||we["--header-gradient"],v=j?.["--header-text"]||we["--header-text"],k=j?.["--primary-accent"]||we["--primary-accent"],[m,D]=d.useState(p||c.BRIEFINGS);d.useEffect(()=>{p&&D(p)},[p]);const[l,R]=d.useState(null),[_,E]=d.useState(null);d.useEffect(()=>{window.scrollTo(0,0)},[m,l]);const[C,I]=d.useState([]),[ee,oe]=d.useState([]),[ce,M]=d.useState([]),[L,$]=d.useState([]),[Y,y]=d.useState([]),[O,P]=d.useState([]),[Ae,Fe]=d.useState([]),[X,Re]=d.useState([]),[te,Ze]=d.useState([]),[je,o]=d.useState(null),[h,W]=d.useState(null),[de,xe]=d.useState(null),[V,Te]=d.useState(null),[J,Q]=d.useState({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),[pe,ze]=d.useState(null),[Tt,Qe]=d.useState(!1),[he,$e]=d.useState(!0),[et,tt]=d.useState(null);d.useEffect(()=>{r?We():$e(!1)},[r]);const We=async()=>{$e(!0),tt(null);try{const i=ve(),g=f?`&demo_code=${encodeURIComponent(f)}`:"",[b,N,B,U,Z,se,me,Yt,Xt]=await Promise.all([gs({limit:50,...f&&{demo_code:f}}).catch(()=>({data:[]})),fetch(`${i}/simulator/sessions?limit=50${g}`,{headers:{"X-WP-Nonce":ne()}}).then(T=>T.json()).catch(()=>({data:[]})),fetch(`${i}/video-training/sessions?limit=50${g}`,{headers:{"X-WP-Nonce":ne()}}).then(T=>T.json()).catch(()=>({data:[]})),H.request(`/smartbriefing/briefings?limit=50${f?`&demo_code=${encodeURIComponent(f)}`:""}`,{method:"GET"}).catch(()=>({success:!1,data:{briefings:[]}})),H.getDecisions().catch(()=>({success:!1,data:{decisions:[]}})),H.getIkigais().catch(()=>({success:!1,data:{ikigais:[]}})),fs().catch(()=>[]),fetch(`${i}/simulator/scenarios`,{headers:{"X-WP-Nonce":ne()}}).then(T=>T.json()).catch(()=>({data:[]})),fetch(`${i}/video-training/scenarios`,{headers:{"X-WP-Nonce":ne()}}).then(T=>T.json()).catch(()=>({data:[]}))]),Ve=(T,Be="sessions")=>Array.isArray(T?.data)?T.data:Array.isArray(T?.data?.[Be])?T.data[Be]:Array.isArray(T?.[Be])?T[Be]:Array.isArray(T)?T:[],He=T=>Array.isArray(T?.data?.scenarios)?T.data.scenarios:Array.isArray(T?.data)?T.data:Array.isArray(T)?T:[];I(Ve(b)),oe(Ve(N)),M(Ve(B)),$(U?.data?.briefings||[]),y(Z?.data?.decisions||[]),P(se?.data?.ikigais||[]),Fe(He(me)),Re(He(Yt)),Ze(He(Xt))}catch(i){console.error("Failed to load sessions:",i),tt(i.message||"Fehler beim Laden der Daten")}finally{$e(!1)}},st=d.useMemo(()=>{const i={};return Ae.forEach(g=>{i[g.id]=g}),i},[Ae]),it=d.useMemo(()=>{const i={};return X.forEach(g=>{i[g.id]=g}),i},[X]),nt=d.useMemo(()=>{const i={};return te.forEach(g=>{i[g.id]=g}),i},[te]),Wt=()=>{switch(m){case c.SIMULATOR:return ee;case c.VIDEO:return ce;case c.BRIEFINGS:return L;case c.DECISIONS:return Y;case c.IKIGAI:return O;default:return C}},Bt=()=>{switch(m){case c.SIMULATOR:return it;case c.VIDEO:return nt;default:return st}},at=C.length+ee.length+ce.length+L.length+Y.length,rt=async i=>{(await H.request(`/smartbriefing/briefings/${i}`,{method:"DELETE"})).success&&$(b=>b.filter(N=>N.id!==i))},Lt=i=>{o(i)},Mt=()=>{o(null)},lt=async i=>{(await H.deleteDecision(i)).success&&y(b=>b.filter(N=>N.id!==i))},ot=async i=>{await H.deleteIkigai(i)&&P(b=>b.filter(N=>N.id!==i))},Ot=i=>{W(i)},ct=()=>{W(null),xe(null)},Ft=i=>{Te(i),Q({love:{input:i.love_input||"",tags:i.love_tags||[]},talent:{input:i.talent_input||"",tags:i.talent_tags||[]},need:{input:i.need_input||"",tags:i.need_tags||[]},market:{input:i.market_input||"",tags:i.market_tags||[]}}),i.status==="completed"&&i.paths?ze({summary:i.summary,paths:i.paths}):ze(null)},Pe=()=>{Te(null),Q({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),ze(null)},$t=async(i,g,b)=>{if(Q(N=>({...N,[i]:{input:g,tags:b}})),V?.id)try{await H.updateIkigai(V.id,{[`${i}_input`]:g,[`${i}_tags`]:b})}catch(N){console.error("[Ikigai] Failed to save dimension:",N)}},Pt=async(i,g)=>{try{return(await H.extractIkigaiKeywords(i,g))?.keywords||[]}catch(b){return console.error("[Ikigai] Failed to extract keywords:",b),[]}},Ut=(i,g)=>{Q(b=>{const N=b[i].tags.filter(B=>B!==g);return{...b,[i]:{...b[i],tags:N}}})},Gt=async()=>{if(Object.values(J).every(g=>g.tags&&g.tags.length>0)){Qe(!0);try{const g=await H.synthesizeIkigaiPaths({love_tags:J.love.tags,talent_tags:J.talent.tags,need_tags:J.need.tags,market_tags:J.market.tags});g&&(ze(g),V?.id&&(await H.updateIkigai(V.id,{summary:g.summary,paths:g.paths,status:"completed"}),P(b=>b.map(N=>N.id===V.id?{...N,summary:g.summary,paths:g.paths,status:"completed"}:N))))}catch(g){console.error("[Ikigai] Failed to synthesize paths:",g)}finally{Qe(!1)}}},Vt=Object.values(J).every(i=>i.tags&&i.tags.length>0),Ht=i=>{y(g=>g.map(b=>b.id===i.id?i:b)),W(i)},Kt=i=>{R(i),E(m)},Ue=()=>{R(null),E(null)},Ge=async(i,g)=>{const b=ve();try{let N,B;switch(g){case c.SIMULATOR:N=`${b}/simulator/sessions/${i.id}`,B=()=>oe(se=>se.filter(me=>me.id!==i.id));break;case c.ROLEPLAY:N=`${b}/sessions/${i.id}`,B=()=>I(se=>se.filter(me=>me.id!==i.id));break;case c.VIDEO:N=`${b}/video-training/sessions/${i.id}`,B=()=>M(se=>se.filter(me=>me.id!==i.id));break;default:throw new Error("Unknown session type")}const Z=await(await fetch(N,{method:"DELETE",headers:{"X-WP-Nonce":ne()}})).json();if(Z.success)B(),l&&Ue();else throw new Error(Z.message||"Delete failed")}catch(N){throw console.error("Failed to delete session:",N),N}},dt=(i,g)=>(g===c.SIMULATOR?it:g===c.VIDEO?nt:st)[i?.scenario_id];if(je)return e.jsx(js,{briefing:je,onBack:Mt,onDelete:rt});if(h){const i={topic:h.topic||"",context:h.context||"",pros:h.pros||[],cons:h.cons||[],proScore:h.pro_score||0,contraScore:h.contra_score||0},g=async(B,U)=>{try{const Z={topic:B.topic,context:B.context||null,pros:B.pros,cons:B.cons,pro_score:B.proScore,contra_score:B.contraScore,analysis:U,status:"completed"};await H.updateDecision(h.id,Z);const se={...h,...Z};Ht(se),xe({data:B,result:U})}catch(Z){console.error("[SessionHistory] Failed to update decision:",Z)}},b=async B=>h.id,N=async(B,U)=>{try{await H.updateDecision(B,{topic:U.topic,context:U.context||null,pros:U.pros,cons:U.cons,pro_score:U.proScore,contra_score:U.contraScore,status:U.status||"draft"})}catch(Z){console.error("[SessionHistory] Failed to update decision:",Z)}};return e.jsxs("div",{style:{minHeight:"100vh",background:s.pageBg},children:[e.jsx(vt,{type:"decision",title:h.topic||"Entscheidung",status:h.status,createdAt:h.created_at,onBack:ct,onDelete:()=>{window.confirm("M√∂chtest du diese Entscheidungs-Analyse wirklich l√∂schen?")&&(lt(h.id),ct())}}),e.jsx("div",{style:{padding:"24px",maxWidth:"900px",margin:"0 auto"},children:de?e.jsx(Ss,{decisionData:de.data,analysisResult:de.result,onStartNew:()=>{xe(null),W(null)},onEditDecision:()=>{xe(null)}}):e.jsx(vs,{initialData:i,onAnalysisComplete:g,isAuthenticated:r,savedDecisionId:h.id,onSaveDraft:b,onUpdateSession:N,onDecisionIdChange:()=>{}})})]})}if(V)return e.jsxs("div",{style:{minHeight:"100vh",background:s.pageBg},children:[e.jsx(vt,{type:"ikigai",title:"Ikigai-Analyse",subtitle:V.status==="completed"?"Berufliche Orientierung":"In Bearbeitung",status:V.status,createdAt:V.created_at,onBack:Pe,onDelete:()=>{window.confirm("M√∂chtest du diese Ikigai-Analyse wirklich l√∂schen?")&&(ot(V.id),Pe())}}),e.jsx("div",{style:{padding:"24px",maxWidth:"900px",margin:"0 auto"},children:pe?e.jsx(ks,{dimensions:J,synthesisResult:pe,onStartNew:Pe,onEdit:()=>ze(null),DIMENSIONS:kt}):e.jsx(ws,{dimensions:J,DIMENSIONS:kt,onExtractKeywords:Pt,onUpdateDimension:$t,onRemoveTag:Ut,allDimensionsFilled:Vt,onSynthesize:Gt,isSynthesizing:Tt})})]});if(l){if(_===c.ROLEPLAY){const b=dt(l,_);return e.jsx(bs,{session:l,scenario:b,onBack:Ue,onRepeat:()=>n?.(l,b,"roleplay"),onDelete:N=>Ge(N,c.ROLEPLAY)})}const g={[c.SIMULATOR]:"simulator",[c.VIDEO]:"video"}[_]||"simulator";return e.jsx(Bs,{session:l,type:_,scenario:dt(l,_),onBack:Ue,onContinueSession:x,onRepeatSession:(b,N)=>n?.(b,N,g),onDeleteSession:Ge})}if(!r)return e.jsxs("div",{style:{padding:s.space[6]},children:[e.jsxs("div",{style:{marginBottom:s.space[8],textAlign:"center"},children:[e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:s.space[3],marginBottom:s.space[3]},children:[e.jsx("div",{style:{width:s.space[12],height:s.space[12],borderRadius:s.radius.lg,background:w,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(gt,{style:{width:s.iconSize["2xl"],height:s.iconSize["2xl"],color:v}})}),e.jsx("h1",{style:{fontSize:s.fontSize["5xl"],fontWeight:s.fontWeight.bold,color:s.textMain,margin:0},children:"Meine Sessions"})]}),e.jsx("p",{style:{fontSize:s.fontSize.lg,color:s.textSecondary,maxWidth:"600px",margin:"0 auto"},children:"Hier findest du deine gespeicherten √úbungen und Fortschritte"})]}),e.jsxs("div",{style:{maxWidth:"500px",margin:`${s.space[15]} auto`,textAlign:"center",padding:s.space[10],backgroundColor:s.cardBg,borderRadius:s.radius["2xl"],boxShadow:s.shadow.md},children:[e.jsx("div",{style:{width:s.space[16],height:s.space[16],borderRadius:s.radius.xl,background:w,display:"flex",alignItems:"center",justifyContent:"center",margin:`0 auto ${s.space[5]}`},children:e.jsx(ft,{style:{width:s.iconSize["3xl"],height:s.iconSize["3xl"],color:v}})}),e.jsx("h2",{style:{fontSize:s.fontSize["3xl"],fontWeight:s.fontWeight.bold,color:s.textMain,marginBottom:s.space[3]},children:"Anmeldung erforderlich"}),e.jsx("p",{style:{fontSize:s.fontSize.md,color:s.textMuted,marginBottom:s.space[6],lineHeight:1.6},children:"Um deine gespeicherten Sessions zu sehen, musst du dich zuerst anmelden."}),e.jsxs("button",{onClick:S,style:{padding:`${s.space[3.5]} ${s.space[8]}`,borderRadius:s.radius.lg,border:"none",background:w,color:v,fontSize:s.fontSize.lg,fontWeight:s.fontWeight.semibold,cursor:"pointer",display:"inline-flex",alignItems:"center",gap:s.space[2.5],boxShadow:s.coloredShadow(k,"md")},children:[e.jsx(ft,{style:{width:s.iconSize.lg,height:s.iconSize.lg}}),"Jetzt anmelden"]})]})]});if(he)return e.jsxs("div",{style:{minHeight:"60vh",display:"flex",alignItems:"center",justifyContent:"center",padding:s.space[10]},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(F,{style:{width:s.iconSize["4xl"],height:s.iconSize["4xl"],color:k,animation:"spin 1s linear infinite",margin:"0 auto"}}),e.jsx("p",{style:{color:s.textMuted,marginTop:s.space[4]},children:"Sessions werden geladen..."})]}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]});if(et)return e.jsx("div",{style:{minHeight:"400px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{textAlign:"center",maxWidth:"400px",padding:s.space[6]},children:[e.jsx(ge,{style:{width:s.iconSize["4xl"],height:s.iconSize["4xl"],color:s.error,margin:`0 auto ${s.space[4]}`}}),e.jsx("h2",{style:{fontSize:s.fontSize["2xl"],fontWeight:s.fontWeight.bold,color:s.textMain,marginBottom:s.space[2]},children:"Fehler beim Laden"}),e.jsx("p",{style:{color:s.textMuted,marginBottom:s.space[6]},children:et}),e.jsx(Le,{onClick:We,children:"Erneut versuchen"})]})});const xt=Wt(),qt=Bt();return e.jsxs("div",{style:{padding:s.space[6]},children:[e.jsxs("div",{style:{marginBottom:s.space[8],textAlign:"center",position:"relative"},children:[e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:s.space[3],marginBottom:s.space[3]},children:[e.jsx("div",{style:{width:s.space[12],height:s.space[12],borderRadius:s.radius.lg,background:w,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(gt,{style:{width:s.iconSize["2xl"],height:s.iconSize["2xl"],color:v}})}),e.jsx("h1",{style:{fontSize:s.fontSize["5xl"],fontWeight:s.fontWeight.bold,color:s.textMain,margin:0},children:"Meine Sessions"})]}),e.jsxs("p",{style:{fontSize:s.fontSize.lg,color:s.textSecondary,maxWidth:"600px",margin:"0 auto"},children:[at," ",at===1?"√úbung":"√úbungen"," gespeichert"]})]}),e.jsx("style",{children:`
        .session-tabs-desktop {
          margin: 0 24px 24px;
          display: flex;
          flex-wrap: wrap;
          gap: 8px;
          background: #f1f5f9;
          padding: 6px;
          border-radius: 14px;
        }
        .session-tab-btn-desktop {
          flex: 1 1 auto;
          min-width: fit-content;
          padding: 12px 16px;
          border-radius: 10px;
          border: none;
          font-size: 14px;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          transition: all 0.2s;
        }
        .session-tabs-mobile {
          margin: 0 16px 16px;
        }
        .session-tabs-mobile-icons {
          display: flex;
          gap: 8px;
          justify-content: center;
          margin-bottom: 12px;
        }
        .session-tab-btn-mobile {
          flex: 1;
          max-width: 80px;
          padding: 12px 8px;
          border-radius: 12px;
          border: none;
          cursor: pointer;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          gap: 4px;
          transition: all 0.2s;
        }
        .session-tab-mobile-label {
          text-align: center;
          font-size: 15px;
          font-weight: 600;
          color: #0f172a;
          padding: 8px 16px;
          background: #fff;
          border-radius: 10px;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }
        .mobile-refresh-btn {
          display: none;
        }
        .desktop-actions {
          margin: 0 24px 24px;
          display: flex;
          justify-content: center;
          flex-wrap: wrap;
          gap: 12px;
        }
        .sessions-list-container {
          margin: 0 24px;
        }
        @media (min-width: 1025px) {
          .session-tabs-mobile { display: none; }
        }
        @media (min-width: 641px) and (max-width: 1023px) {
          .desktop-actions {
            flex-direction: column;
          }
          .desktop-actions button {
            width: 100%;
            justify-content: center;
          }
        }
        @media (min-width: 1024px) {
          .desktop-actions {
            justify-content: flex-end;
          }
        }
        @media (max-width: 1024px) {
          .session-tabs-desktop { display: none; }
        }
        @media (max-width: 640px) {
          .desktop-actions { display: none; }
          .mobile-refresh-btn {
            display: flex !important;
            position: absolute;
            top: 0;
            right: 0;
          }
          .sessions-list-container {
            margin: 0 16px;
          }
        }
      `}),e.jsx("button",{onClick:We,disabled:he,className:"mobile-refresh-btn",style:{padding:s.space[2.5],borderRadius:s.radius.md,border:`1px solid ${s.borderColor}`,background:s.cardBgColor,color:s.textSecondary,cursor:he?"not-allowed":"pointer",opacity:he?.5:1,boxShadow:s.shadow.sm,alignItems:"center",justifyContent:"center"},children:e.jsx(bt,{style:{width:s.iconSize.md,height:s.iconSize.md},className:he?"animate-spin":""})}),e.jsx("div",{className:"session-tabs-desktop",children:qe.map(i=>{const g=i.icon,b=m===i.id,N=i.id===c.SIMULATOR?ee.length:i.id===c.VIDEO?ce.length:i.id===c.BRIEFINGS?L.length:i.id===c.DECISIONS?Y.length:i.id===c.IKIGAI?O.length:C.length;return e.jsxs("button",{onClick:()=>D(i.id),className:"session-tab-btn-desktop",style:{background:b?"#fff":"transparent",color:b?"#0f172a":"#64748b",fontWeight:b?600:500,boxShadow:b?"0 2px 8px rgba(0, 0, 0, 0.08)":"none"},children:[e.jsx(g,{size:18}),e.jsx("span",{children:i.label}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:"10px",background:b?k:"#e2e8f0",color:b?"white":"#64748b",fontSize:"12px",fontWeight:600,minWidth:"24px",textAlign:"center"},children:N})]},i.id)})}),e.jsxs("div",{className:"session-tabs-mobile",children:[e.jsx("div",{className:"session-tabs-mobile-icons",children:qe.map(i=>{const g=i.icon,b=m===i.id,N=i.id===c.SIMULATOR?ee.length:i.id===c.VIDEO?ce.length:i.id===c.BRIEFINGS?L.length:i.id===c.DECISIONS?Y.length:C.length;return e.jsxs("button",{onClick:()=>D(i.id),className:"session-tab-btn-mobile",style:{background:b?"#fff":"#f1f5f9",boxShadow:b?"0 2px 8px rgba(0, 0, 0, 0.1)":"none",border:b?`2px solid ${k}`:"2px solid transparent"},children:[e.jsx(g,{size:20,style:{color:b?k:"#64748b"}}),e.jsx("span",{style:{padding:"2px 6px",borderRadius:"8px",background:b?k:"#e2e8f0",color:b?"white":"#64748b",fontSize:"11px",fontWeight:600,minWidth:"20px",textAlign:"center"},children:N})]},i.id)})}),e.jsx("div",{className:"session-tab-mobile-label",children:qe.find(i=>i.id===m)?.label})]}),e.jsxs("div",{className:"desktop-actions",children:[e.jsxs(Le,{variant:"outline",onClick:We,disabled:he,children:[e.jsx(bt,{style:{width:"16px",height:"16px",marginRight:"8px"},className:he?"animate-spin":""}),"Aktualisieren"]}),u&&e.jsxs(Le,{onClick:()=>{const i={[c.BRIEFINGS]:"smart_briefing",[c.DECISIONS]:"decision_board",[c.IKIGAI]:"ikigai",[c.SIMULATOR]:"simulator",[c.VIDEO]:"video_training",[c.ROLEPLAY]:"dashboard"};u(i[m]||"overview")},style:{background:w,color:v},children:[e.jsx(is,{style:{width:"16px",height:"16px",marginRight:"8px"}}),m===c.BRIEFINGS?"Neues Briefing":m===c.DECISIONS?"Neue Entscheidungs-Analyse":m===c.IKIGAI?"Neue Ikigai-Analyse":m===c.SIMULATOR?"Neues Szenario-Training":m===c.VIDEO?"Neue Wirkungs-Analyse":"Neue Live-Simulation"]})]}),e.jsx("div",{className:"sessions-list-container",children:xt.length===0?e.jsxs("div",{style:{textAlign:"center",padding:`${s.space[15]} ${s.space[6]}`,background:s.cardBg,borderRadius:s.radius["2xl"],boxShadow:s.shadow.sm},children:[m===c.SIMULATOR&&e.jsx(Oe,{style:{width:s.iconSize["4xl"],height:s.iconSize["4xl"],color:s.textMuted,margin:`0 auto ${s.space[4]}`,display:"block"}}),m===c.ROLEPLAY&&e.jsx(ye,{style:{width:s.iconSize["4xl"],height:s.iconSize["4xl"],color:s.textMuted,margin:`0 auto ${s.space[4]}`,display:"block"}}),m===c.VIDEO&&e.jsx(_e,{style:{width:s.iconSize["4xl"],height:s.iconSize["4xl"],color:s.textMuted,margin:`0 auto ${s.space[4]}`,display:"block"}}),m===c.BRIEFINGS&&e.jsx(Xe,{style:{width:s.iconSize["4xl"],height:s.iconSize["4xl"],color:s.textMuted,margin:`0 auto ${s.space[4]}`,display:"block"}}),m===c.DECISIONS&&e.jsx(De,{style:{width:s.iconSize["4xl"],height:s.iconSize["4xl"],color:s.textMuted,margin:`0 auto ${s.space[4]}`,display:"block"}}),m===c.IKIGAI&&e.jsx(Ee,{style:{width:s.iconSize["4xl"],height:s.iconSize["4xl"],color:s.textMuted,margin:`0 auto ${s.space[4]}`,display:"block"}}),e.jsxs("h3",{style:{fontSize:s.fontSize["2xl"],fontWeight:s.fontWeight.semibold,color:s.textSecondary,marginBottom:s.space[2]},children:["Noch keine ",m===c.SIMULATOR?"Szenario-Trainings":m===c.VIDEO?"Wirkungs-Analysen":m===c.BRIEFINGS?"Smart Briefings":m===c.DECISIONS?"Entscheidungs-Analysen":m===c.IKIGAI?"Ikigai-Analysen":"Live-Simulationen"]}),e.jsx("p",{style:{color:s.textMuted,fontSize:s.fontSize.base,marginBottom:s.space[6]},children:m===c.BRIEFINGS?"Erstelle dein erstes Briefing, um dich optimal vorzubereiten.":m===c.DECISIONS?"Nutze den Entscheidungs-Kompass, um deine erste Entscheidung zu analysieren.":m===c.IKIGAI?"Entdecke deinen idealen Karrierepfad mit dem Ikigai-Kompass.":"Starte dein erstes Training, um hier deine Fortschritte zu sehen."}),e.jsxs(Le,{onClick:t,children:[e.jsx(Ce,{style:{width:s.iconSize.sm,height:s.iconSize.sm,marginRight:s.space[2]}}),m===c.BRIEFINGS?"Briefing erstellen":m===c.DECISIONS?"Entscheidung analysieren":m===c.IKIGAI?"Ikigai entdecken":"Training starten"]})]}):e.jsx(A.div,{style:{display:"flex",flexDirection:"column",gap:s.space[3]},initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},children:m===c.BRIEFINGS?L.map(i=>e.jsx(Ls,{briefing:i,onClick:()=>Lt(i),onDelete:rt,headerGradient:w,headerText:v,primaryAccent:k},i.id)):m===c.DECISIONS?Y.map(i=>e.jsx(Os,{decision:i,onClick:()=>Ot(i),onDelete:lt,headerGradient:w,headerText:v,primaryAccent:k},i.id)):m===c.IKIGAI?O.map(i=>e.jsx($s,{ikigai:i,onDelete:ot,onNavigate:()=>Ft(i),headerGradient:w,headerText:v,primaryAccent:k},i.id)):xt.map(i=>{const g=qt[i.scenario_id];return e.jsx(Ms,{session:i,type:m,scenario:g,onClick:()=>Kt(i),onContinueSession:x,onDeleteSession:Ge,headerGradient:w,headerText:v,primaryAccent:k},i.id)})})}),e.jsx("style",{children:"@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"})]})};export{xi as SESSION_TABS,pi as default};
