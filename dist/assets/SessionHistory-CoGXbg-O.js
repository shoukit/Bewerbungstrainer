import{j as e,O as X,L as K,z as Ne,v as Lt,Q as Le,g as Ce,Y as Ot,_ as rt,m as F,V as $e,M as ke,$ as Nt,F as Rt,a0 as ve,a1 as Je,y as _e,C as Tt,A as Ft,e as ct,a2 as Mt,a3 as Pt,a4 as Fe,a5 as $t,a6 as ls,a7 as cs,w as Bt,a8 as vt,a9 as os,b as ds,X as xs,aa as ms,h as le,l as Ze,d as Me,ab as wt,ac as kt,c as Pe,ad as hs,s as us,ae as ps,a as ot,H as St,p as It,t as Dt,af as gs,q as fs}from"./ui-vendor-Dm6q_mjH.js";import{a as c}from"./react-vendor-uDOJF2jQ.js";import{B as J,C as Y,S as Ye,a as bs}from"./select-native-aziB-GZa.js";import{g as Ae,a as me,m as Z,l as we,C as M,n as he,I as U,u as js,w as B}from"./FeatureInfoButton-DP9rw1S0.js";import{D as ys,a as Ns,b as vs,c as ws,d as ks,e as Ss}from"./dialog-17kXcCTd.js";import{b as Is,p as Ds,d as Es,e as Cs,f as As,h as _s,i as zs,g as Ls}from"./index.js";import{u as Oe}from"./useMobile-YxjH166V.js";import{R as Os}from"./RoleplaySessionReport-A4tAyQDf.js";import{g as Rs,B as Ts}from"./BriefingWorkbook-CnIqaNG1.js";import{D as Fs,a as Ms}from"./DecisionBoardResult-DFK8us-d.js";import{I as Ps,a as $s}from"./IkigaiResults-DObtTf7J.js";import"./utils-BEHD0UYf.js";import"./index-CklPxmEV.js";import"./input-D8pZt2c3.js";import"./textarea-BZbawZXu.js";import"./AudioRecorder-B-GUao9Z.js";import"./button-BJJ4Phrm.js";import"./card-DJ81HJlf.js";import"./DeviceSettingsDialog-qbuiGPOe.js";import"./DeviceSetupPage-C_DoUwQb.js";import"./MicrophoneTestDialog-DphhjfUi.js";const ue=({isOpen:t,onClose:a,onConfirm:i,title:u="L√∂schen best√§tigen",description:x="Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:l=!1,confirmLabel:g="L√∂schen",cancelLabel:m="Abbrechen"})=>e.jsx(ys,{open:t,onOpenChange:a,children:e.jsxs(Ns,{className:"max-w-[400px]",children:[e.jsxs(vs,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-[10px] bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center",children:e.jsx(X,{className:"w-5 h-5 text-white"})}),e.jsx(ws,{children:u})]}),e.jsx(ks,{children:x})]}),e.jsxs(Ss,{className:"mt-4",children:[e.jsx("button",{onClick:a,disabled:l,style:{minWidth:"100px",height:"40px",padding:"8px 20px",borderRadius:"8px",border:"1px solid #E2E8F0",backgroundColor:"#FFFFFF",color:"#1E293B",fontSize:"14px",fontWeight:"500",cursor:l?"not-allowed":"pointer",opacity:l?.5:1,transition:"all 0.15s ease"},onMouseEnter:y=>{l||(y.target.style.backgroundColor="#F8FAFC")},onMouseLeave:y=>{y.target.style.backgroundColor="#FFFFFF"},children:m}),e.jsx("button",{onClick:i,disabled:l,style:{minWidth:"100px",height:"40px",padding:"8px 20px",borderRadius:"8px",border:"none",background:"linear-gradient(to bottom right, #EF4444, #DC2626)",color:"#FFFFFF",fontSize:"14px",fontWeight:"500",cursor:l?"not-allowed":"pointer",opacity:l?.5:1,transition:"all 0.15s ease",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:l?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-4 h-4 animate-spin"}),g,"..."]}):g})]})]})}),Bs={auftreten:os,selbstbewusstsein:vt,koerpersprache:Bt,kommunikation:ke,professionalitaet:vt,inhalt:_e},Gs=t=>t>=90?"Ausgezeichnet!":t>=80?"Sehr gut!":t>=70?"Gut!":t>=60?"Solide Leistung":t>=50?"Ausbauf√§hig":"Weiter √ºben!",Us=t=>t?new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",Ws=t=>t==="video"?"Wirkungs-Analyse":t==="roleplay"?"Live-Simulation":"Szenario-Training",Vs=({score:t,size:a=120,isHeader:i=!1})=>{const u=Math.min(100,Math.max(0,t||0)),x=(a-12)/2,l=x*2*Math.PI,g=l-u/100*l,m=Z(t);return e.jsxs("div",{className:"relative",style:{width:a,height:a},children:[e.jsxs("svg",{width:a,height:a,style:{transform:"rotate(-90deg)"},children:[e.jsx("circle",{cx:a/2,cy:a/2,r:x,fill:"none",stroke:i?"rgba(255,255,255,0.3)":M.slate[200],strokeWidth:10}),e.jsx(F.circle,{cx:a/2,cy:a/2,r:x,fill:"none",stroke:m,strokeWidth:10,strokeLinecap:"round",strokeDasharray:l,initial:{strokeDashoffset:l},animate:{strokeDashoffset:g},transition:{duration:1,ease:"easeOut"}})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("span",{style:{fontSize:a/3.5,fontWeight:700,color:m},children:Math.round(t)}),e.jsx("span",{className:`${i?"text-white":"text-slate-500"}`,style:{fontSize:a/10},children:"von 100"})]})]})},Ks=({audioUrl:t,durationHint:a})=>{const i=c.useRef(null),[u,x]=c.useState(!1),[l,g]=c.useState(0),[m,y]=c.useState(a||0),[v,n]=c.useState(!0),[S,E]=c.useState(null);c.useEffect(()=>{if(!t)return;n(!0),E(null),y(a||0);const o=new Audio;i.current=o;const C=()=>{const f=o.duration;f&&isFinite(f)&&f>0&&y(f),n(!1)},R=()=>{const f=o.duration;f&&isFinite(f)&&f>0&&y(f)},O=()=>{n(!1);const f=o.duration;f&&isFinite(f)&&f>0&&y(f)};return o.addEventListener("loadedmetadata",C),o.addEventListener("durationchange",R),o.addEventListener("canplaythrough",O),o.addEventListener("timeupdate",()=>g(o.currentTime)),o.addEventListener("play",()=>x(!0)),o.addEventListener("pause",()=>x(!1)),o.addEventListener("ended",()=>x(!1)),o.addEventListener("error",()=>{E("Audio nicht verf√ºgbar"),n(!1)}),o.src=t,o.load(),()=>{o.pause(),o.removeEventListener("loadedmetadata",C),o.removeEventListener("durationchange",R),o.removeEventListener("canplaythrough",O),o.src=""}},[t,a]);const w=()=>{i.current&&(u?i.current.pause():i.current.play())},I=o=>{const C=o.currentTarget.getBoundingClientRect(),R=(o.clientX-C.left)/C.width;i.current&&(i.current.currentTime=R*m)},z=o=>{i.current&&(i.current.currentTime=Math.max(0,Math.min(i.current.currentTime+o,m)))};if(S)return e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg text-slate-500 text-[13px] flex items-center gap-2",children:[e.jsx(Ne,{size:16})," ",S]});if(!t)return null;const A=m>0?l/m*100:0;return e.jsxs(Y,{className:"p-5",children:[e.jsx("div",{onClick:I,className:"h-2 bg-slate-200 rounded cursor-pointer mb-4",children:e.jsx("div",{className:"h-full bg-primary rounded transition-all duration-100",style:{width:`${A}%`}})}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("button",{onClick:()=>z(-10),className:"p-2 bg-transparent border-none cursor-pointer text-slate-400 hover:text-slate-600",children:e.jsx(Mt,{size:20})}),e.jsx("button",{onClick:w,disabled:v,className:`w-12 h-12 rounded-full bg-primary border-none flex items-center justify-center text-white ${v?"cursor-wait opacity-70":"cursor-pointer"}`,children:v?e.jsx(K,{size:22,className:"animate-spin"}):u?e.jsx(Pt,{size:22,fill:"white"}):e.jsx(Fe,{size:22,fill:"white",className:"ml-0.5"})}),e.jsx("button",{onClick:()=>z(10),className:"p-2 bg-transparent border-none cursor-pointer text-slate-400 hover:text-slate-600",children:e.jsx($t,{size:20})})]}),e.jsxs("div",{className:"text-center mt-2 text-[13px] text-slate-500",children:[we(l)," / ",we(m)]})]})},qs=({sessionId:t,conversationId:a})=>{const i=c.useRef(null),[u,x]=c.useState(!1),[l,g]=c.useState(!1),[m,y]=c.useState(0),[v,n]=c.useState(0),[S,E]=c.useState(null),[w,I]=c.useState(!0);c.useEffect(()=>{if(!a){I(!1),E("Keine Audio-Aufnahme verf√ºgbar");return}const R=_s(t);return I(!0),E(null),fetch(R,{headers:{"X-WP-Nonce":me()},credentials:"same-origin"}).then(O=>{if(!O.ok)throw new Error(`HTTP ${O.status}`);return O.blob()}).then(O=>{const f=URL.createObjectURL(O),N=new Audio(f);i.current=N,N._objectUrl=f,N.addEventListener("loadedmetadata",()=>{n(N.duration),I(!1)}),N.addEventListener("timeupdate",()=>y(N.currentTime)),N.addEventListener("play",()=>x(!0)),N.addEventListener("pause",()=>x(!1)),N.addEventListener("ended",()=>x(!1)),N.addEventListener("error",()=>{E("Audio konnte nicht abgespielt werden."),I(!1)})}).catch(()=>{E("Audio nicht verf√ºgbar."),I(!1)}),()=>{i.current&&(i.current.pause(),i.current._objectUrl&&URL.revokeObjectURL(i.current._objectUrl),i.current=null)}},[t,a]);const z=()=>{i.current&&(u?i.current.pause():i.current.play())},A=()=>{i.current&&(i.current.muted=!l,g(!l))},o=R=>{i.current&&(i.current.currentTime=Math.max(0,Math.min(i.current.currentTime+R,v)))},C=R=>{const O=R.currentTarget.getBoundingClientRect(),f=(R.clientX-O.left)/O.width;i.current&&(i.current.currentTime=f*v)};return w?e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6 text-center",children:[e.jsx(K,{size:24,className:"text-primary animate-spin mx-auto"}),e.jsx("p",{className:"text-[13px] text-slate-500 mt-2",children:"Audio wird geladen..."})]}):S?e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6 text-center",children:[e.jsx(Ne,{size:24,className:"text-slate-400 mx-auto"}),e.jsx("p",{className:"text-[13px] text-slate-500 mt-2",children:S})]}):e.jsxs(Y,{className:"p-5",children:[e.jsxs("h3",{className:"text-[15px] font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(ct,{size:18,className:"text-primary"})," Gespr√§chsaufnahme"]}),e.jsx("div",{onClick:C,className:"h-2 bg-slate-200 rounded cursor-pointer mb-4",children:e.jsx("div",{className:"h-full bg-primary rounded transition-all duration-100",style:{width:`${m/v*100||0}%`}})}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("button",{onClick:()=>o(-10),className:"p-2 bg-transparent border-none cursor-pointer text-slate-400 hover:text-slate-600",children:e.jsx(Mt,{size:20})}),e.jsx("button",{onClick:z,className:"w-12 h-12 rounded-full bg-primary border-none cursor-pointer flex items-center justify-center text-white",children:u?e.jsx(Pt,{size:22,fill:"white"}):e.jsx(Fe,{size:22,fill:"white",className:"ml-0.5"})}),e.jsx("button",{onClick:()=>o(10),className:"p-2 bg-transparent border-none cursor-pointer text-slate-400 hover:text-slate-600",children:e.jsx($t,{size:20})}),e.jsx("button",{onClick:A,className:"p-2 bg-transparent border-none cursor-pointer text-slate-400 hover:text-slate-600 ml-auto",children:l?e.jsx(ls,{size:20}):e.jsx(cs,{size:20})})]}),e.jsxs("div",{className:"text-center mt-2 text-[13px] text-slate-500",children:[we(m)," / ",we(v)]})]})},Hs=({entry:t})=>{const a=t.role==="user";return e.jsxs("div",{className:"flex gap-3 mb-4",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex-shrink-0 flex items-center justify-center ${a?"bg-primary":"bg-slate-200"}`,children:e.jsx(Bt,{size:16,className:a?"text-white":"text-slate-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`text-xs font-semibold mb-1 ${a?"text-primary":"text-slate-400"}`,children:a?"Du":"Interviewer"}),e.jsx("p",{className:"text-sm text-slate-900 leading-relaxed m-0",children:t.text||t.message})]})]})},Ys=({answer:t,index:a})=>{const[i,u]=c.useState(!1),x=t.feedback?typeof t.feedback=="string"?JSON.parse(t.feedback):t.feedback:null,l=t.audio_analysis?typeof t.audio_analysis=="string"?JSON.parse(t.audio_analysis):t.audio_analysis:null,g=t.transcript==="[Keine Sprache erkannt]"||l?.speech_rate==="keine_sprache";return e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.05},children:e.jsxs(Y,{className:"mb-4 overflow-hidden p-0",children:[e.jsxs("button",{onClick:()=>u(!i),className:"w-full p-4 bg-transparent border-none cursor-pointer flex items-center gap-3 text-left",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-primary/10 flex items-center justify-center text-primary font-bold text-sm flex-shrink-0",children:a+1}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h4",{className:"text-sm font-semibold text-slate-900 m-0 truncate",children:t.question_text||`Frage ${a+1}`})}),t.overall_score!=null&&e.jsx("span",{className:"text-base font-bold",style:{color:g?M.slate[400]:Z(t.overall_score*10)},children:g?"‚Äì":`${Math.round(t.overall_score*10)}%`}),e.jsx(Tt,{size:18,className:`text-slate-400 transition-transform ${i?"rotate-180":""}`})]}),e.jsx(Ft,{children:i&&e.jsx(F.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"px-5 pb-5 pt-4 border-t border-slate-100",children:[t.question_text&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"text-[13px] font-semibold text-slate-900 mb-2 flex items-center gap-1.5",children:[e.jsx(ke,{size:14,className:"text-primary"})," Frage / Situation"]}),e.jsx("p",{className:"text-sm text-slate-900 leading-relaxed bg-primary/5 p-3 rounded-lg m-0 border border-primary/10",children:t.question_text})]}),t.audio_url&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"text-[13px] font-semibold text-slate-900 mb-2 flex items-center gap-1.5",children:[e.jsx(ct,{size:14,className:"text-primary"})," Deine Aufnahme"]}),e.jsx(Ks,{audioUrl:t.audio_url,durationHint:t.audio_duration_seconds})]}),t.transcript&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"text-[13px] font-semibold text-slate-900 mb-2 flex items-center gap-1.5",children:[e.jsx(Rt,{size:14,className:"text-primary"})," Transkript"]}),e.jsxs("p",{className:`text-[13px] leading-relaxed bg-slate-50 p-3 rounded-lg m-0 italic break-words ${g?"text-slate-400":"text-slate-600"}`,children:['"',t.transcript,'"']})]}),x?.scores&&!g&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"text-[13px] font-semibold text-slate-900 mb-2.5 flex items-center gap-1.5",children:[e.jsx(ve,{size:14,className:"text-primary"})," Bewertung"]}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mb-2",children:[{key:"content",label:"Inhalt"},{key:"structure",label:"Struktur"},{key:"relevance",label:"Relevanz"},{key:"delivery",label:"Pr√§sentation"}].map(({key:m,label:y})=>{const v=x.scores[m],n=v!=null?v*10:null;return e.jsxs("div",{className:"p-2.5 bg-slate-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-base font-bold",style:{color:n!=null?Z(n):M.slate[400]},children:n!=null?Math.round(n):"-"}),e.jsx("div",{className:"text-[10px] text-slate-500 mt-0.5",children:y})]},m)})}),(()=>{const m=x.scores.overall,y=m!=null?m*10:null;return e.jsxs("div",{className:"p-3 bg-primary/10 rounded-lg text-center border border-primary/20 flex items-center justify-center gap-3",children:[e.jsx("div",{className:"text-[10px] text-slate-500",children:"Gesamt"}),e.jsx("div",{className:"text-xl font-bold",style:{color:y!=null?Z(y):M.slate[400]},children:y!=null?Math.round(y):"-"})]})})()]}),x?.summary&&e.jsx("p",{className:"text-[13px] text-slate-600 leading-snug mb-3",children:x.summary}),x?.strengths?.length>0&&!g&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("h6",{className:"text-xs font-semibold text-green-600 mb-1.5 flex items-center gap-1",children:[e.jsx(Je,{size:12})," St√§rken"]}),e.jsx("ul",{className:"m-0 pl-4 text-slate-600 text-xs",children:x.strengths.map((m,y)=>e.jsx("li",{className:"mb-1",children:m},y))})]}),x?.improvements?.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("h6",{className:"text-xs font-semibold text-amber-600 mb-1.5 flex items-center gap-1",children:[e.jsx(Ne,{size:12})," Verbesserungspotenzial"]}),e.jsx("ul",{className:"m-0 pl-4 text-slate-600 text-xs",children:x.improvements.map((m,y)=>e.jsx("li",{className:"mb-1",children:m},y))})]}),x?.tips?.length>0&&!g&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("h6",{className:"text-xs font-semibold text-primary mb-1.5 flex items-center gap-1",children:[e.jsx(_e,{size:12})," Tipps"]}),e.jsx("ul",{className:"m-0 pl-4 text-slate-600 text-xs",children:x.tips.map((m,y)=>e.jsx("li",{className:"mb-1",children:m},y))})]}),l&&!g&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100",children:[e.jsxs("h5",{className:"text-[13px] font-semibold text-slate-900 mb-3 flex items-center gap-1.5",children:[e.jsx(ct,{size:14,className:"text-primary"})," Sprechanalyse"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2.5",children:[l.speech_rate&&e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-[11px] text-slate-500 mb-1",children:"Sprechtempo"}),e.jsx("div",{className:"text-sm font-semibold text-slate-900 capitalize",children:l.speech_rate==="optimal"?"‚úì Optimal":l.speech_rate==="zu_schnell"?"‚ö° Zu schnell":l.speech_rate==="zu_langsam"?"üê¢ Zu langsam":l.speech_rate})]}),l.filler_words&&e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-[11px] text-slate-500 mb-1",children:"F√ºllw√∂rter"}),e.jsxs("div",{className:`text-sm font-semibold ${l.filler_words.count<=2?"text-green-600":l.filler_words.count<=5?"text-amber-600":"text-red-600"}`,children:[l.filler_words.count||0," erkannt"]}),l.filler_words.words?.length>0&&e.jsx("div",{className:"text-[11px] text-slate-500 mt-1",children:l.filler_words.words.slice(0,5).join(", ")})]}),l.confidence_score!=null&&e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-[11px] text-slate-500 mb-1",children:"Selbstsicherheit"}),e.jsxs("div",{className:"text-sm font-semibold",style:{color:Z(l.confidence_score)},children:[l.confidence_score,"%"]})]}),l.clarity_score!=null&&e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-[11px] text-slate-500 mb-1",children:"Klarheit"}),e.jsxs("div",{className:"text-sm font-semibold",style:{color:Z(l.clarity_score)},children:[l.clarity_score,"%"]})]})]}),l.notes&&e.jsx("p",{className:"text-xs text-slate-500 mt-2.5 italic",children:l.notes})]})]})})})]})})},Xs=({isOpen:t,onClose:a,onConfirm:i,isDeleting:u})=>t?e.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black/50",onClick:a,children:e.jsxs(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-2xl p-6 max-w-[400px] w-[90%] shadow-2xl",onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-100 flex items-center justify-center",children:e.jsx(X,{size:24,className:"text-red-500"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 m-0",children:"Session l√∂schen?"})]}),e.jsx("p",{className:"text-sm text-slate-600 leading-relaxed mb-6",children:"M√∂chtest du diese Session wirklich l√∂schen? Alle Antworten und Feedback werden unwiderruflich entfernt."}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(J,{variant:"secondary",onClick:a,disabled:u,children:"Abbrechen"}),e.jsx(J,{variant:"danger",onClick:i,disabled:u,icon:u?e.jsx(K,{size:16,className:"animate-spin"}):e.jsx(X,{size:16}),children:u?"L√∂schen...":"L√∂schen"})]})]})}):null,Js=({category:t})=>{const[a,i]=c.useState(!1),u=Bs[t.category]||ve,x=Z(t.score);return e.jsxs(Y,{className:"mb-2.5 overflow-hidden p-0",children:[e.jsxs("button",{onClick:()=>i(!a),className:"w-full p-3.5 bg-transparent border-none cursor-pointer flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center",style:{backgroundColor:`${x}15`},children:e.jsx(u,{size:18,style:{color:x}})}),e.jsx("div",{className:"flex-1 text-left",children:e.jsx("h4",{className:"text-sm font-semibold text-slate-900 m-0",children:t.label})}),e.jsxs("span",{className:"text-base font-bold",style:{color:x},children:[Math.round(t.score),"%"]}),e.jsx(Tt,{size:18,className:`text-slate-400 transition-transform ${a?"rotate-180":""}`})]}),e.jsx(Ft,{children:a&&e.jsx(F.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"px-4 pb-4 pt-3 border-t border-slate-100",children:[t.feedback&&e.jsx("p",{className:"text-[13px] text-slate-600 leading-snug mb-2.5",children:t.feedback}),t.strengths?.length>0&&e.jsxs("div",{className:"mb-2.5",children:[e.jsxs("h6",{className:"text-xs font-semibold text-green-600 mb-1 flex items-center gap-1",children:[e.jsx(Je,{size:12})," St√§rken"]}),e.jsx("ul",{className:"m-0 pl-4 text-xs text-slate-600",children:t.strengths.map((l,g)=>e.jsx("li",{children:l},g))})]}),t.improvements?.length>0&&e.jsxs("div",{children:[e.jsxs("h6",{className:"text-xs font-semibold text-amber-600 mb-1 flex items-center gap-1",children:[e.jsx(_e,{size:12})," Tipps"]}),e.jsx("ul",{className:"m-0 pl-4 text-xs text-slate-600",children:t.improvements.map((l,g)=>e.jsx("li",{children:l},g))})]})]})})})]})},Zs=({session:t,type:a,scenario:i,onBack:u,onContinueSession:x,onRepeatSession:l,onDeleteSession:g})=>{const m=Oe(),[y,v]=c.useState(!1);c.useEffect(()=>{const d=()=>{const j=window.innerWidth;v(j>=768&&j<1200)};return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]);const[n,S]=c.useState([]),[E,w]=c.useState(!0),[I,z]=c.useState(null),[A,o]=c.useState(!1),[C,R]=c.useState(!1),[O,f]=c.useState(!1),[N,ce]=c.useState(null),[Q,q]=c.useState(i),W=a==="video",H=a==="simulator",V=a==="roleplay",pe=(()=>{const d=t?.questions||t?.questions_json;if(!d)return!1;try{const j=typeof d=="string"?JSON.parse(d):d;return Array.isArray(j)&&j.length>0}catch{return!1}})(),Se=(()=>{if(!H||!pe)return!1;const d=t?.total_questions||0,j=t?.completed_questions||0;return d>0&&j<d})(),se=async()=>{if(g){R(!0);try{await g(t,a)}catch(d){console.error("Failed to delete session:",d),R(!1),o(!1)}}},ge=async()=>{if(!(O||!t?.id)){f(!0);try{let d;if(H)d=`${Ae()}/simulator/sessions/${t.id}/export-pdf`;else if(W)d=`${Ae()}/video-training/sessions/${t.id}/export-pdf`;else if(V)d=`${Ae()}/sessions/${t.id}/export-pdf`;else throw new Error("Unsupported session type for PDF export");const j=await fetch(d,{method:"POST",headers:{"X-WP-Nonce":me(),"Content-Type":"application/json"},credentials:"same-origin"}),L=await j.json();if(!j.ok)throw new Error(L.error||`HTTP ${j.status}`);if(!L.success||!L.pdf_base64)throw new Error(L.error||"PDF generation failed");const Ie=atob(L.pdf_base64),ee=new Array(Ie.length);for(let be=0;be<Ie.length;be++)ee[be]=Ie.charCodeAt(be);const De=new Uint8Array(ee),Ge=new Blob([De],{type:L.content_type||"application/pdf"}),de=window.URL.createObjectURL(Ge),fe=document.createElement("a");fe.href=de,fe.download=L.filename||"Training.pdf",document.body.appendChild(fe),fe.click(),document.body.removeChild(fe),window.URL.revokeObjectURL(de)}catch(d){console.error("Failed to download PDF:",d)}finally{f(!1)}}};c.useEffect(()=>{H&&t?.id?Be():V&&t?.id?ae():w(!1)},[t?.id,a]);const Be=async()=>{try{w(!0);const j=await(await fetch(`${Ae()}/simulator/sessions/${t.id}/answers`,{headers:{"X-WP-Nonce":me()}})).json();j.success&&j.data?.answers?S(j.data.answers):Array.isArray(j.data)&&S(j.data)}catch(d){console.error("Failed to load answers:",d),z("Fehler beim Laden der Antworten")}finally{w(!1)}},ae=async()=>{try{w(!0);const d=await Is(t.id);if(ce({...t,...d,feedback:Cs(d.feedback_json||t.feedback_json),audioAnalysis:Es(d.audio_analysis_json||t.audio_analysis_json),transcript:Ds(d.transcript||t.transcript)}),!i&&d.scenario_id)try{const j=await As(d.scenario_id);q(j)}catch(j){console.warn("Could not load scenario:",j)}}catch(d){console.error("Failed to load roleplay data:",d),z("Fehler beim Laden der Gespr√§chsdaten")}finally{w(!1)}},k=t?.summary_feedback_json?typeof t.summary_feedback_json=="string"?JSON.parse(t.summary_feedback_json):t.summary_feedback_json:null,P=t?.category_scores||[],$=t?.analysis||{},oe=(()=>{let d=0;return V&&N?.feedback?.rating?.overall?d=N.feedback.rating.overall:d=t?.overall_score||k?.overall_score||0,(H||V)&&d<=10?d*10:d})();return E?e.jsx("div",{className:"w-full min-h-[60vh] flex items-center justify-center p-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx(K,{size:48,className:"text-primary animate-spin mx-auto"}),e.jsx("p",{className:"text-slate-500 mt-4",children:"Analyse wird geladen..."})]})}):I?e.jsx("div",{className:"min-h-[400px] flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-[400px] p-6",children:[e.jsx(Ne,{size:48,className:"text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Fehler beim Laden"}),e.jsx("p",{className:"text-slate-600 mb-6",children:I}),e.jsx(J,{variant:"secondary",onClick:u,children:"Zur√ºck"})]})}):e.jsxs("div",{className:"min-h-screen bg-slate-50 overflow-hidden max-w-full",children:[e.jsx("div",{className:`sticky top-0 z-40 ${m?"px-4 py-5":"px-8 py-6"}`,style:{background:"var(--header-gradient, linear-gradient(135deg, #4F46E5 0%, #7C3AED 100%))"},children:e.jsxs("div",{className:"max-w-[1400px] mx-auto",children:[u&&e.jsxs("button",{onClick:u,className:"flex items-center gap-1.5 bg-white/15 border-none rounded-lg px-3 py-2 cursor-pointer text-white text-[13px] mb-4 hover:bg-white/25 transition-colors",children:[e.jsx(Lt,{size:16}),"Zur√ºck zur √úbersicht"]}),e.jsxs("div",{className:"flex items-center gap-6",children:[!m&&e.jsx(Vs,{score:oe,size:100,isHeader:!0}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap mb-2",children:[e.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide px-2.5 py-1 rounded-full bg-white/20 text-white",children:Ws(a)}),e.jsx("span",{className:"text-xs font-medium px-2.5 py-1 rounded-full bg-white/90",style:{color:Z(oe)},children:Gs(oe)})]}),e.jsx("h1",{className:`font-bold text-white m-0 mb-2 ${m?"text-xl":"text-2xl"}`,children:(V?Q?.title:i?.title)||t?.scenario_title||t?.position||"Training"}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("span",{className:"flex items-center gap-1.5 text-[13px] text-white/80",children:[e.jsx(Le,{size:14}),Us(t?.created_at)]}),t?.duration&&e.jsxs("span",{className:"flex items-center gap-1.5 text-[13px] text-white/80",children:[e.jsx(Ce,{size:14}),we(t.duration)]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:ge,disabled:O,title:"Als PDF herunterladen",className:`flex items-center justify-center bg-white/20 border border-white/30 rounded-lg px-3 py-2.5 text-white outline-none transition-colors hover:bg-white/30 ${O?"cursor-wait opacity-70":"cursor-pointer"}`,children:O?e.jsx(K,{size:16,className:"animate-spin"}):e.jsx(Ot,{size:16})}),!m&&l&&e.jsxs("button",{onClick:()=>l(t,i),className:"flex items-center gap-2 bg-white/20 border border-white/30 rounded-lg px-5 py-2.5 cursor-pointer text-white text-sm font-medium outline-none hover:bg-white/30 transition-colors",children:[e.jsx(rt,{size:16}),"Erneut √ºben"]}),g&&e.jsx("button",{onClick:()=>o(!0),className:`flex items-center gap-2 bg-red-500/20 border border-red-500/40 rounded-lg cursor-pointer text-white text-sm font-medium outline-none hover:bg-red-500/30 transition-colors ${m?"px-3 py-2.5":"px-4 py-2.5"}`,children:e.jsx(X,{size:16})})]})]})]})}),e.jsx("div",{className:`overflow-hidden ${m?"p-4":"px-8 py-6"}`,children:e.jsxs("div",{className:"grid gap-6 overflow-hidden",style:{gridTemplateColumns:m||y?"1fr":"1fr 400px"},children:[e.jsxs("div",{className:"min-w-0 overflow-hidden",children:[W&&t?.video_url&&e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs(Y,{className:"mb-5 p-5",children:[e.jsxs("h3",{className:"text-[15px] font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[e.jsx($e,{size:18,className:"text-primary"})," Deine Aufnahme"]}),e.jsx("video",{src:t.video_url,controls:!0,className:"w-full max-w-[640px] max-h-[360px] rounded-xl bg-black object-contain"})]})}),H&&n.length>0&&e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[e.jsxs("h3",{className:"text-base font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(ke,{size:18,className:"text-primary"})," Deine Antworten (",n.length,")"]}),n.map((d,j)=>e.jsx(Ys,{answer:d,index:j},d.id||j)),Se&&(x||l)&&e.jsxs("div",{className:"flex gap-3 justify-center flex-wrap mt-6 p-5 bg-slate-50 rounded-xl border border-dashed border-slate-300",children:[e.jsx("p",{className:"w-full text-center text-slate-600 text-sm mb-3",children:"Diese Session ist noch nicht abgeschlossen."}),x&&e.jsx(J,{onClick:()=>x(t,i),icon:e.jsx(Nt,{size:18}),children:"Fortsetzen"}),l&&e.jsx(J,{variant:"secondary",onClick:()=>l(t,i),icon:e.jsx(rt,{size:18}),children:"Erneut starten"})]})]}),H&&n.length===0&&e.jsxs("div",{className:"text-center py-12 px-6 bg-slate-50 rounded-2xl",children:[e.jsx(Ne,{size:48,className:"text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Keine Antworten vorhanden"}),e.jsx("p",{className:"text-slate-500 mb-6",children:pe?"Diese Session wurde nicht abgeschlossen. Du kannst sie fortsetzen oder erneut starten.":"Diese Session wurde verlassen, bevor Fragen generiert wurden."}),Se&&(x||l)&&e.jsxs("div",{className:"flex gap-3 justify-center flex-wrap",children:[x&&e.jsx(J,{onClick:()=>x(t,i),icon:e.jsx(Nt,{size:18}),children:"Fortsetzen"}),l&&e.jsx(J,{variant:"secondary",onClick:()=>l(t,i),icon:e.jsx(rt,{size:18}),children:"Erneut starten"})]})]}),V&&N&&e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-5",children:e.jsx(qs,{sessionId:t.id,conversationId:N.conversation_id})}),V&&N?.transcript?.length>0&&e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(Y,{className:"p-5",children:[e.jsxs("h3",{className:"text-[15px] font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(Rt,{size:18,className:"text-primary"})," Gespr√§chsverlauf"]}),e.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:N.transcript.map((d,j)=>e.jsx(Hs,{entry:d},j))})]})})]}),e.jsxs("div",{className:"min-w-0 overflow-hidden",children:[W&&P.length>0&&e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-5",children:[e.jsxs("h3",{className:"text-[15px] font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[e.jsx(ve,{size:16,className:"text-primary"})," Detaillierte Bewertung"]}),P.map((d,j)=>e.jsx(Js,{category:d},d.category||j))]}),W&&($.key_strengths?.length>0||$.actionable_tips?.length>0)&&e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsxs(Y,{className:"mb-5 p-5",children:[$.key_strengths?.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-green-600 mb-2.5 flex items-center gap-1.5",children:[e.jsx(Je,{size:16})," Deine St√§rken"]}),e.jsx("ul",{className:"m-0 pl-5",children:$.key_strengths.map((d,j)=>e.jsx("li",{className:"text-[13px] text-slate-600 mb-1.5 leading-snug",children:d},j))})]}),$.actionable_tips?.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-primary mb-2.5 flex items-center gap-1.5",children:[e.jsx(_e,{size:16})," Tipps zur Verbesserung"]}),e.jsx("ul",{className:"m-0 pl-5",children:$.actionable_tips.map((d,j)=>e.jsx("li",{className:"text-[13px] text-slate-600 mb-1.5 leading-snug",children:d},j))})]})]})}),W&&t?.summary_feedback&&e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-2.5",children:"Zusammenfassung"}),e.jsx("p",{className:"text-[13px] text-slate-600 leading-relaxed m-0",children:t.summary_feedback})]})}),H&&k&&e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[k.summary&&e.jsxs(Y,{className:"mb-5 p-5",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-2.5",children:"Zusammenfassung"}),e.jsx("p",{className:"text-[13px] text-slate-600 leading-relaxed m-0",children:k.summary})]}),k.scores&&e.jsxs(Y,{className:"mb-5 p-5",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Bewertung"}),e.jsx("div",{className:"grid grid-cols-2 gap-2.5",children:Object.entries(k.scores).map(([d,j])=>{const L=j!=null?j*10:null;return e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-xl font-bold",style:{color:Z(L)},children:L!=null?Math.round(L):"-"}),e.jsx("div",{className:"text-[11px] text-slate-500 capitalize",children:d})]},d)})})]}),k.key_takeaways?.length>0&&e.jsxs("div",{className:"bg-green-50 rounded-2xl p-5",children:[e.jsxs("h4",{className:"text-sm font-semibold text-green-600 mb-2.5 flex items-center gap-1.5",children:[e.jsx(_e,{size:16})," Wichtigste Erkenntnisse"]}),e.jsx("ul",{className:"m-0 pl-5 text-[13px] text-slate-900 leading-snug",children:k.key_takeaways.map((d,j)=>e.jsx("li",{className:"mb-1.5",children:d},j))})]})]}),V&&N?.feedback&&e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[N.feedback.rating&&e.jsxs(Y,{className:"mb-5 p-5",children:[e.jsxs("h4",{className:"text-[15px] font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(ve,{size:16,className:"text-primary"})," Bewertungskriterien"]}),e.jsx("div",{className:"flex flex-col gap-2.5",children:Object.entries(N.feedback.rating).filter(([d])=>d!=="overall").map(([d,j])=>{const L=j*10;return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"flex-1 text-[13px] font-medium text-slate-900 capitalize",children:d.replace(/_/g," ")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 h-1.5 bg-slate-200 rounded",children:e.jsx("div",{className:"h-full rounded",style:{width:`${L}%`,backgroundColor:Z(L)}})}),e.jsx("span",{className:"text-sm font-semibold min-w-[45px]",style:{color:Z(L)},children:Math.round(L)})]})]},d)})})]}),N.feedback.strengths?.length>0&&e.jsxs(Y,{className:"mb-5 p-5",children:[e.jsxs("h4",{className:"text-sm font-semibold text-green-600 mb-3 flex items-center gap-1.5",children:[e.jsx(Je,{size:16})," Deine St√§rken"]}),e.jsx("ul",{className:"m-0 pl-5",children:N.feedback.strengths.map((d,j)=>e.jsx("li",{className:"text-[13px] text-slate-600 mb-2 leading-snug",children:d},j))})]}),N.feedback.improvements?.length>0&&e.jsxs(Y,{className:"mb-5 p-5",children:[e.jsxs("h4",{className:"text-sm font-semibold text-amber-600 mb-3 flex items-center gap-1.5",children:[e.jsx(_e,{size:16})," Verbesserungspotenzial"]}),e.jsx("ul",{className:"m-0 pl-5",children:N.feedback.improvements.map((d,j)=>e.jsx("li",{className:"text-[13px] text-slate-600 mb-2 leading-snug",children:d},j))})]}),N.feedback.summary&&e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-2.5",children:"Zusammenfassung"}),e.jsx("p",{className:"text-[13px] text-slate-600 leading-relaxed m-0",children:N.feedback.summary})]})]}),V&&!N?.feedback&&e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6 text-center",children:[e.jsx(Ne,{size:32,className:"text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-slate-500 m-0",children:"Keine Analyse verf√ºgbar f√ºr dieses Gespr√§ch."})]})]})]})}),e.jsx(Xs,{isOpen:A,onClose:()=>o(!1),onConfirm:se,isDeleting:C})]})},ze=({title:t,onSave:a,className:i="",inputClassName:u="",placeholder:x="Titel eingeben..."})=>{const[l,g]=c.useState(!1),[m,y]=c.useState(t||""),[v,n]=c.useState(!1),S=c.useRef(null);c.useEffect(()=>{l&&S.current&&(S.current.focus(),S.current.select())},[l]),c.useEffect(()=>{l||y(t||"")},[t,l]);const E=o=>{o.stopPropagation(),g(!0)},w=o=>{o.stopPropagation(),y(t||""),g(!1)},I=async o=>{o.stopPropagation();const C=m.trim();if(!C||C===t){g(!1),y(t||"");return}n(!0);try{await a(C),g(!1)}catch(R){console.error("Error saving title:",R)}finally{n(!1)}},z=o=>{o.key==="Enter"?I(o):o.key==="Escape"&&w(o)},A=o=>{o.stopPropagation()};return l?e.jsxs("div",{className:"flex items-center gap-2",onClick:o=>o.stopPropagation(),children:[e.jsx("input",{ref:S,type:"text",value:m,onChange:o=>y(o.target.value),onKeyDown:z,onClick:A,placeholder:x,disabled:v,className:`flex-1 px-2 py-1 rounded-lg border border-slate-300 text-sm font-semibold text-slate-900 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary ${u}`,style:{minWidth:"150px"}}),e.jsx("button",{onClick:I,disabled:v,className:"p-1.5 rounded-lg border-none bg-green-500 text-white cursor-pointer flex items-center justify-center hover:bg-green-600 transition-colors disabled:opacity-50",title:"Speichern",children:v?e.jsx(K,{size:14,className:"animate-spin"}):e.jsx(ds,{size:14})}),e.jsx("button",{onClick:w,disabled:v,className:"p-1.5 rounded-lg border-none bg-slate-200 text-slate-600 cursor-pointer flex items-center justify-center hover:bg-slate-300 transition-colors disabled:opacity-50",title:"Abbrechen",children:e.jsx(xs,{size:14})})]}):e.jsxs("div",{className:"flex items-center gap-2 group",children:[e.jsx("span",{className:i,children:t||x}),e.jsx("button",{onClick:E,className:"p-1 rounded-md border-none bg-transparent text-slate-400 cursor-pointer flex items-center justify-center opacity-0 group-hover:opacity-100 hover:text-slate-600 hover:bg-slate-100 transition-all",title:"Umbenennen",children:e.jsx(ms,{size:14})})]})},Qs=({briefing:t,onClick:a,onDelete:i,onRename:u,headerGradient:x,headerText:l,primaryAccent:g})=>{const[m,y]=c.useState(!1),[v,n]=c.useState(!1),[S,E]=c.useState(t.title),w=Oe(900),I=Rs(t.template_icon),z=async C=>{u&&(await u(t.id,C),E(C))},A=C=>{C.stopPropagation(),n(!0)},o=async()=>{y(!0);try{await i(t.id),n(!1)}catch(C){console.error("Error deleting briefing:",C)}finally{y(!1)}};return w?e.jsxs(F.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileTap:{scale:.98},children:[e.jsxs("div",{onClick:a,className:"bg-white rounded-2xl p-4 cursor-pointer border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-primary/10 flex items-center justify-center shrink-0",children:e.jsx(I,{className:"w-[22px] h-[22px] text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[u?e.jsx(ze,{title:S||"Briefing",onSave:z,className:"text-[15px] font-semibold text-slate-900 mb-1 leading-[1.3] line-clamp-2",placeholder:"Briefing"}):e.jsx("h3",{className:"text-[15px] font-semibold text-slate-900 mb-1 leading-[1.3] line-clamp-2",children:S||"Briefing"}),e.jsx("div",{className:"text-[13px] text-slate-500",children:he(t.created_at)})]}),e.jsx("button",{onClick:A,disabled:m,className:"p-2 rounded-lg border-none bg-transparent text-slate-400 cursor-pointer flex items-center justify-center shrink-0 hover:text-slate-600",title:"L√∂schen",children:m?e.jsx(K,{size:18,className:"animate-spin"}):e.jsx(X,{size:18})})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 pt-3 border-t border-slate-100",children:[e.jsx("span",{className:"bg-primary/10 text-primary px-2.5 py-1 rounded-[10px] text-xs font-medium max-w-[70%] overflow-hidden text-ellipsis whitespace-nowrap",children:t.template_title}),e.jsx(le,{size:22,className:"text-slate-400 shrink-0"})]})]}),e.jsx(ue,{isOpen:v,onClose:()=>n(!1),onConfirm:o,title:"Briefing l√∂schen",description:"M√∂chtest du dieses Briefing wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:m})]}):e.jsxs(F.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsx("div",{onClick:a,className:"bg-white rounded-2xl p-5 cursor-pointer border border-slate-200 shadow-sm hover:shadow-lg hover:border-slate-300 transition-all",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center shrink-0",children:e.jsx(I,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[u?e.jsx(ze,{title:S||"Briefing",onSave:z,className:"text-base font-semibold text-slate-900 mb-1 whitespace-nowrap overflow-hidden text-ellipsis",placeholder:"Briefing"}):e.jsx("h3",{className:"text-base font-semibold text-slate-900 mb-1 whitespace-nowrap overflow-hidden text-ellipsis",children:S||"Briefing"}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap text-[13px] text-slate-500",children:[e.jsx("span",{className:"bg-primary/10 text-primary px-2 py-0.5 rounded-[10px] text-xs font-medium",children:t.template_title}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Le,{size:14}),he(t.created_at)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx("button",{onClick:A,disabled:m,className:"p-2 rounded-lg border-none bg-transparent text-slate-400 cursor-pointer flex items-center justify-center hover:text-red-500 transition-colors",title:"L√∂schen",children:m?e.jsx(K,{size:18,className:"animate-spin"}):e.jsx(X,{size:18})}),e.jsx(le,{size:20,className:"text-slate-400"})]})]})}),e.jsx(ue,{isOpen:v,onClose:()=>n(!1),onConfirm:o,title:"Briefing l√∂schen",description:"M√∂chtest du dieses Briefing wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:m})]})},re={SIMULATOR:"simulator",ROLEPLAY:"roleplay",VIDEO:"video"},ea=({session:t,type:a,scenario:i,onClick:u,onContinueSession:x,onDeleteSession:l,onRename:g,headerGradient:m,headerText:y,primaryAccent:v})=>{const[n,S]=c.useState(!1),[E,w]=c.useState(!1),I=Oe(900),z=()=>t.custom_title||i?.title||t.scenario_title||`Session #${t.id}`,[A,o]=c.useState(z());c.useEffect(()=>{o(z())},[t.custom_title,i?.title,t.scenario_title,t.id]);const C=async k=>{if(g){o(k);try{await g(t,a,k)}catch(P){throw o(z()),P}}},R=()=>{let k=null;if(a===re.SIMULATOR)k=t.overall_score||t.average_score;else if(a===re.VIDEO)k=t.overall_score;else if(t.feedback_json)try{let P=t.feedback_json;if(typeof P=="string"){let $=P.trim();$.startsWith("```json")?$=$.replace(/```json\s*/g,"").replace(/```\s*$/g,""):$.startsWith("```")&&($=$.replace(/```\s*/g,"").replace(/```\s*$/g,"")),P=JSON.parse($)}k=P.rating?.overall||null}catch{k=null}return k==null||isNaN(k)||k===0?null:k},O=()=>a===re.SIMULATOR||a===re.VIDEO?t.status:t.feedback_json?"completed":"pending",f=R(),ce=O()==="completed",Q=t.total_questions>0&&(t.completed_questions||0)<t.total_questions,q=a===re.SIMULATOR&&Q,W=()=>{if(!q)return null;const k=t.completed_questions||0,P=t.total_questions||0;return`${k}/${P} Fragen`},H=k=>{k.stopPropagation(),x&&x(t,i)},V=k=>{k.stopPropagation(),w(!0)},pe=async()=>{S(!0);try{await l(t,a),w(!1)}catch(k){console.error("Error deleting session:",k)}finally{S(!1)}},se=(()=>{if(f==null||isNaN(f))return null;if(a===re.SIMULATOR||a===re.ROLEPLAY){const k=f<=10?f*10:f;return isNaN(k)?null:k}return isNaN(f)?null:f})(),ge=k=>{if(!k&&k!==0)return{background:M.slate[100],color:M.slate[500]};const P=parseFloat(k);return P>=80?{background:M.green[100],color:M.green[800]}:P>=60?{background:M.amber[100],color:M.amber[800]}:{background:M.red[100],color:M.red[800]}},ae=(()=>{switch(a){case re.SIMULATOR:return Ze;case re.VIDEO:return $e;default:return ke}})();return I?e.jsxs(F.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileTap:{scale:.98},children:[e.jsxs("div",{onClick:u,className:"bg-white rounded-2xl p-4 cursor-pointer border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl flex items-center justify-center shrink-0",style:{background:m},children:e.jsx(ae,{className:"w-[22px] h-[22px]",style:{color:y}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[g?e.jsx(ze,{title:A,onSave:C,className:"text-[15px] font-semibold text-slate-900 mb-1 leading-[1.3]"}):e.jsx("h3",{className:"text-[15px] font-semibold text-slate-900 mb-1 leading-[1.3]",children:A}),e.jsx("div",{className:"text-[13px] text-slate-500",children:he(t.created_at)})]}),l&&e.jsx("button",{onClick:V,disabled:n,className:"p-3 rounded-xl border-none bg-transparent text-slate-400 cursor-pointer flex items-center justify-center shrink-0 hover:text-slate-600 hover:bg-slate-100 transition-colors min-w-[44px] min-h-[44px]",title:"L√∂schen",children:n?e.jsx(K,{size:18,className:"animate-spin"}):e.jsx(X,{size:18})})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 pt-3 border-t border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[!ce&&!q&&e.jsxs("span",{className:"flex items-center gap-1 px-2.5 py-1 rounded-full bg-amber-100 text-amber-800 text-xs font-medium",children:[e.jsx(Ce,{size:12}),"In Bearbeitung"]}),e.jsxs("span",{className:"flex items-center gap-1 px-2.5 py-1.5 rounded-full text-[13px] font-semibold",style:ge(se),children:[e.jsx(ve,{size:13}),se!==null?`${Math.round(se)}%`:"-- %"]}),(t.duration||t.video_duration_seconds)&&e.jsxs("span",{className:"flex items-center gap-1 text-xs text-slate-500",children:[e.jsx(Ce,{size:12}),we(t.duration||t.video_duration_seconds)]}),q&&e.jsx("span",{className:"flex items-center gap-1 px-2.5 py-1 rounded-full bg-blue-100 text-blue-800 text-xs font-medium",children:W()})]}),q&&x?e.jsxs("button",{onClick:H,className:"flex items-center gap-1.5 px-4 py-2.5 rounded-[10px] border-none bg-primary text-white text-[13px] font-semibold cursor-pointer shadow-md hover:shadow-lg transition-shadow shrink-0",children:[e.jsx(Fe,{size:14}),"Fortsetzen"]}):e.jsx(le,{size:22,className:"text-slate-400 shrink-0"})]})]}),e.jsx(ue,{isOpen:E,onClose:()=>w(!1),onConfirm:pe,title:"Session l√∂schen",description:"M√∂chtest du diese Session wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:n})]}):e.jsxs(F.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsx("div",{onClick:u,className:"bg-white rounded-2xl p-5 cursor-pointer border border-slate-200 shadow-sm hover:shadow-lg hover:border-slate-300 transition-all",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center shrink-0",style:{background:m},children:e.jsx(ae,{className:"w-6 h-6",style:{color:y}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[g?e.jsx(ze,{title:A,onSave:C,className:"text-base font-semibold text-slate-900 mb-1 whitespace-nowrap overflow-hidden text-ellipsis"}):e.jsx("h3",{className:"text-base font-semibold text-slate-900 mb-1 whitespace-nowrap overflow-hidden text-ellipsis",children:A}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap text-[13px] text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Le,{size:14}),he(t.created_at)]}),t.duration||t.video_duration_seconds?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ce,{size:14}),we(t.duration||t.video_duration_seconds)]}):null]})]}),e.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[q&&x&&e.jsxs("button",{onClick:H,className:"flex items-center gap-1.5 px-3.5 py-2 rounded-[10px] border-none bg-primary text-white text-[13px] font-semibold cursor-pointer shadow-md hover:scale-105 hover:shadow-lg transition-all",children:[e.jsx(Fe,{size:14}),"Fortsetzen"]}),q&&e.jsx("span",{className:"flex items-center gap-1 px-2.5 py-1 rounded-full bg-blue-100 text-blue-800 text-xs font-medium",children:W()}),!ce&&!q&&e.jsxs("span",{className:"flex items-center gap-1 px-2.5 py-1 rounded-full bg-amber-100 text-amber-800 text-xs font-medium",children:[e.jsx(Ce,{size:12}),"In Bearbeitung"]}),e.jsxs("span",{className:"flex items-center gap-1 px-3 py-1.5 rounded-full text-sm font-semibold",style:ge(se),children:[e.jsx(ve,{size:14}),se!==null?`${Math.round(se)}%`:"-- %"]}),l&&e.jsx("button",{onClick:V,disabled:n,className:"p-3 rounded-xl border-none bg-transparent text-slate-400 cursor-pointer flex items-center justify-center hover:text-red-500 hover:bg-red-50 transition-colors min-w-[44px] min-h-[44px]",title:"L√∂schen",children:n?e.jsx(K,{size:18,className:"animate-spin"}):e.jsx(X,{size:18})}),e.jsx(le,{size:20,className:"text-slate-400"})]})]})}),e.jsx(ue,{isOpen:E,onClose:()=>w(!1),onConfirm:pe,title:"Session l√∂schen",description:"M√∂chtest du diese Session wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:n})]})},Et=({proScore:t,contraScore:a})=>{const i=t+a,u=i>0?Math.round(t/i*100):50;return e.jsxs("div",{className:"h-1.5 rounded-[3px] overflow-hidden flex bg-slate-100 w-full max-w-[120px]",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 h-full",style:{width:`${u}%`}}),e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 h-full",style:{width:`${100-u}%`}})]})},ta=({decision:t,onClick:a,onDelete:i,onRename:u,headerGradient:x,headerText:l,primaryAccent:g})=>{const[m,y]=c.useState(!1),[v,n]=c.useState(!1),[S,E]=c.useState(t.topic),w=Oe(900),I=async f=>{u&&(await u(t.id,f),E(f))},z=(t.pros||[]).reduce((f,N)=>f+(N.text?.trim()?N.weight||5:0),0),A=(t.cons||[]).reduce((f,N)=>f+(N.text?.trim()?N.weight||5:0),0),o=(t.pros||[]).filter(f=>f.text?.trim()).length,C=(t.cons||[]).filter(f=>f.text?.trim()).length,R=f=>{f.stopPropagation(),n(!0)},O=async()=>{y(!0);try{await i(t.id),n(!1)}catch(f){console.error("Error deleting decision:",f)}finally{y(!1)}};return w?e.jsxs(F.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileTap:{scale:.98},children:[e.jsxs("div",{onClick:a,className:"bg-white rounded-2xl p-4 cursor-pointer border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-purple-500/10 flex items-center justify-center shrink-0",children:e.jsx(Me,{className:"w-[22px] h-[22px] text-purple-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[u?e.jsx(ze,{title:S||"Entscheidung",onSave:I,className:"text-[15px] font-semibold text-slate-900 mb-1 leading-[1.3] line-clamp-2",placeholder:"Entscheidung"}):e.jsx("h3",{className:"text-[15px] font-semibold text-slate-900 mb-1 leading-[1.3] line-clamp-2",children:S||"Entscheidung"}),e.jsx("div",{className:"text-[13px] text-slate-500",children:he(t.created_at)})]}),e.jsx("button",{onClick:R,disabled:m,className:"p-2 rounded-lg border-none bg-transparent text-slate-400 cursor-pointer flex items-center justify-center shrink-0 hover:text-slate-600",title:"L√∂schen",children:m?e.jsx(K,{size:18,className:"animate-spin"}):e.jsx(X,{size:18})})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3 pt-3 border-t border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(wt,{size:14,className:"text-green-600"}),e.jsx("span",{className:"text-[13px] font-medium text-green-600",children:o})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(kt,{size:14,className:"text-red-600"}),e.jsx("span",{className:"text-[13px] font-medium text-red-600",children:C})]}),e.jsx(Et,{proScore:z,contraScore:A})]}),e.jsx(le,{size:22,className:"text-slate-400 shrink-0"})]})]}),e.jsx(ue,{isOpen:v,onClose:()=>n(!1),onConfirm:O,title:"Entscheidung l√∂schen",description:"M√∂chtest du diese Entscheidung wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:m})]}):e.jsxs(F.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsx("div",{onClick:a,className:"bg-white rounded-2xl p-5 cursor-pointer border border-slate-200 shadow-sm hover:shadow-lg hover:border-slate-300 transition-all",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-purple-500/10 flex items-center justify-center shrink-0",children:e.jsx(Me,{className:"w-6 h-6 text-purple-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[u?e.jsx(ze,{title:S||"Entscheidung",onSave:I,className:"text-base font-semibold text-slate-900 mb-1.5 whitespace-nowrap overflow-hidden text-ellipsis",placeholder:"Entscheidung"}):e.jsx("h3",{className:"text-base font-semibold text-slate-900 mb-1.5 whitespace-nowrap overflow-hidden text-ellipsis",children:S||"Entscheidung"}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap text-[13px] text-slate-500",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(wt,{size:14,className:"text-green-600"}),e.jsxs("span",{className:"font-medium text-green-600",children:[o," Pro"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(kt,{size:14,className:"text-red-600"}),e.jsxs("span",{className:"font-medium text-red-600",children:[C," Contra"]})]})]}),e.jsx(Et,{proScore:z,contraScore:A}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Le,{size:14}),he(t.created_at)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx("button",{onClick:R,disabled:m,className:"p-2 rounded-lg border-none bg-transparent text-slate-400 cursor-pointer flex items-center justify-center hover:text-red-500 transition-colors",title:"L√∂schen",children:m?e.jsx(K,{size:18,className:"animate-spin"}):e.jsx(X,{size:18})}),e.jsx(le,{size:20,className:"text-slate-400"})]})]})}),e.jsx(ue,{isOpen:v,onClose:()=>n(!1),onConfirm:O,title:"Entscheidung l√∂schen",description:"M√∂chtest du diese Entscheidung wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:m})]})},sa={love:{icon:ps,color:U.love.color,label:"Liebe"},talent:{icon:ve,color:U.talent.color,label:"Talent"},need:{icon:us,color:U.need.color,label:"Welt"},market:{icon:hs,color:U.market.color,label:"Markt"}},Ct=({dimensions:t})=>e.jsx("div",{className:"flex gap-1.5 flex-wrap",children:Object.entries(sa).map(([a,i])=>{const u=t?.[a]||[],x=u.length>0,l=i.icon;return e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-xl text-xs font-medium",style:{backgroundColor:x?`${i.color}15`:M.slate[100],color:x?i.color:M.slate[400],border:x?`1px solid ${i.color}30`:`1px solid ${M.slate[200]}`},children:[e.jsx(l,{size:12}),e.jsx("span",{children:u.length})]},a)})}),aa=({ikigai:t,onDelete:a,onNavigate:i,headerGradient:u,headerText:x,primaryAccent:l})=>{const[g,m]=c.useState(!1),[y,v]=c.useState(!1),n=Oe(900),S={love:t.love_tags||[],talent:t.talent_tags||[],need:t.need_tags||[],market:t.market_tags||[]},E=Object.values(S).filter(o=>o.length>0).length,w=t.status==="completed",I=t.paths?.[0]?.role_title||(w?"Ikigai-Analyse abgeschlossen":"Ikigai-Analyse"),z=o=>{o.stopPropagation(),v(!0)},A=async()=>{m(!0);try{await a(t.id),v(!1)}catch(o){console.error("Error deleting ikigai:",o)}finally{m(!1)}};return n?e.jsxs(F.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileTap:{scale:.98},children:[e.jsxs("div",{onClick:i,className:"bg-white rounded-2xl p-4 cursor-pointer border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl flex items-center justify-center shrink-0",style:{background:w?`linear-gradient(135deg, ${U.love.color}, ${U.talent.color}, ${U.need.color}, ${U.market.color})`:`linear-gradient(135deg, ${M.indigo[500]}15, ${M.indigo[500]}30)`},children:e.jsx(Pe,{className:`w-[22px] h-[22px] ${w?"text-white":"text-indigo-500"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-[15px] font-semibold text-slate-900 mb-1 leading-[1.3] line-clamp-2",children:I}),e.jsx("div",{className:"text-[13px] text-slate-500",children:he(t.created_at)})]}),e.jsx("button",{onClick:z,disabled:g,className:"p-2 rounded-lg border-none bg-transparent text-slate-400 cursor-pointer flex items-center justify-center shrink-0 hover:text-slate-600",title:"L√∂schen",children:g?e.jsx(K,{size:18,className:"animate-spin"}):e.jsx(X,{size:18})})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3 pt-3 border-t border-slate-100",children:[e.jsx(Ct,{dimensions:S}),e.jsx(le,{size:22,className:"text-slate-400 shrink-0"})]})]}),e.jsx(ue,{isOpen:y,onClose:()=>v(!1),onConfirm:A,title:"Ikigai-Analyse l√∂schen",description:"M√∂chtest du diese Ikigai-Analyse wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:g})]}):e.jsxs(F.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsx("div",{onClick:i,className:"bg-white rounded-2xl p-5 cursor-pointer border border-slate-200 shadow-sm hover:shadow-lg hover:border-slate-300 transition-all",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center shrink-0",style:{background:w?`linear-gradient(135deg, ${U.love.color}, ${U.talent.color}, ${U.need.color}, ${U.market.color})`:`linear-gradient(135deg, ${M.indigo[500]}15, ${M.indigo[500]}30)`},children:e.jsx(Pe,{className:`w-6 h-6 ${w?"text-white":"text-indigo-500"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[e.jsx("h3",{className:"text-base font-semibold text-slate-900 whitespace-nowrap overflow-hidden text-ellipsis",children:I}),w&&e.jsx("span",{className:"px-2 py-0.5 rounded-[10px] text-[11px] font-semibold bg-gradient-to-r from-green-500 to-green-600 text-white",children:"Abgeschlossen"}),!w&&E>0&&e.jsxs("span",{className:"px-2 py-0.5 rounded-[10px] text-[11px] font-semibold bg-amber-500/10 text-amber-500",children:[E,"/4 Dimensionen"]})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap text-[13px] text-slate-500",children:[e.jsx(Ct,{dimensions:S}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Le,{size:14}),he(t.created_at)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx("button",{onClick:z,disabled:g,className:"p-2 rounded-lg border-none bg-transparent text-slate-400 cursor-pointer flex items-center justify-center hover:text-red-500 transition-colors",title:"L√∂schen",children:g?e.jsx(K,{size:18,className:"animate-spin"}):e.jsx(X,{size:18})}),e.jsx(le,{size:20,className:"text-slate-400"})]})]})}),e.jsx(ue,{isOpen:y,onClose:()=>v(!1),onConfirm:A,title:"Ikigai-Analyse l√∂schen",description:"M√∂chtest du diese Ikigai-Analyse wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:g})]})},na=t=>t?new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",ia=t=>t>=90?"Ausgezeichnet!":t>=80?"Sehr gut!":t>=70?"Gut!":t>=60?"Solide Leistung":t>=50?"Ausbauf√§hig":"In Arbeit",At={ikigai:{label:"Ikigai-Kompass",icon:Pe},decision:{label:"Entscheidungs-Board",icon:Me},briefing:{label:"Smart Briefing",icon:ot},simulator:{label:"Szenario-Training",icon:Ze},video:{label:"Wirkungs-Analyse",icon:$e},roleplay:{label:"Live-Simulation",icon:ke}},ra=({score:t,size:a=80})=>{const i=Math.min(100,Math.max(0,t||0)),u=(a-10)/2,x=u*2*Math.PI,l=x-i/100*x;return e.jsxs("div",{className:"relative",style:{width:a,height:a},children:[e.jsxs("svg",{width:a,height:a,className:"-rotate-90",children:[e.jsx("circle",{cx:a/2,cy:a/2,r:u,fill:"none",stroke:"rgba(255,255,255,0.25)",strokeWidth:8}),e.jsx(F.circle,{cx:a/2,cy:a/2,r:u,fill:"none",stroke:"#fff",strokeWidth:8,strokeLinecap:"round",strokeDasharray:x,initial:{strokeDashoffset:x},animate:{strokeDashoffset:l},transition:{duration:1.2,ease:"easeOut"}})]}),e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:e.jsx(F.span,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{delay:.3,duration:.4},className:"font-bold text-white leading-none",style:{fontSize:a/3},children:Math.round(t)})})]})},_t=({type:t,title:a,subtitle:i,score:u,status:x,createdAt:l,duration:g,onBack:m,onDelete:y,onDownload:v,isDeleting:n=!1,isDownloading:S=!1,extraActions:E})=>{const w=Oe(768),I=At[t]||At.simulator,z=I.icon,A=u!=null&&u>0;return e.jsx("div",{className:"sticky top-0 z-40 bg-brand-gradient",style:{padding:w?"20px 16px":"24px 32px"},children:e.jsxs("div",{className:"max-w-[1400px] mx-auto",children:[m&&e.jsxs("button",{onClick:m,className:"flex items-center gap-1.5 bg-white/15 border-none rounded-lg px-3 py-2 cursor-pointer text-white text-[13px] mb-4 hover:bg-white/25 transition-colors",children:[e.jsx(Lt,{size:16}),"Zur√ºck zur √úbersicht"]}),e.jsxs("div",{className:"flex items-center gap-6",children:[!w&&A&&e.jsx(ra,{score:u,size:80}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap mb-2",children:[e.jsxs("span",{className:"flex items-center gap-1.5 text-[11px] font-semibold uppercase tracking-wider px-2.5 py-1 rounded-full bg-white/20 text-white",children:[e.jsx(z,{size:14}),I.label]}),A&&e.jsx("span",{className:"text-xs font-medium px-2.5 py-1 rounded-full bg-white/90",style:{color:Z(u)},children:ia(u)}),x==="in_progress"&&e.jsx("span",{className:"text-xs font-medium px-2.5 py-1 rounded-full bg-white/90 text-amber-600",children:"In Bearbeitung"})]}),e.jsx("h1",{className:"font-bold text-white m-0 truncate",style:{fontSize:w?"20px":"24px",marginBottom:i?"4px":"8px"},children:a}),i&&e.jsx("p",{className:"text-sm text-white/80 m-0 mb-2",children:i}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[l&&e.jsxs("span",{className:"flex items-center gap-1.5 text-[13px] text-white/80",children:[e.jsx(Le,{size:14}),na(l)]}),g&&e.jsxs("span",{className:"flex items-center gap-1.5 text-[13px] text-white/80",children:[e.jsx(Ce,{size:14}),Math.floor(g/60),":",String(g%60).padStart(2,"0")," Min."]})]})]}),e.jsxs("div",{className:"flex gap-3 flex-shrink-0",children:[v&&e.jsxs("button",{onClick:v,disabled:S,title:"Als PDF herunterladen",className:"flex items-center justify-center gap-1.5 bg-white/15 border-none rounded-lg text-white text-[13px] font-medium hover:bg-white/25 transition-colors disabled:opacity-70",style:{padding:w?"10px":"10px 16px",cursor:S?"wait":"pointer"},children:[e.jsx(Ot,{size:16}),!w&&"PDF"]}),E,y&&e.jsxs("button",{onClick:y,disabled:n,title:"L√∂schen",className:"flex items-center justify-center gap-1.5 bg-red-500/20 border border-red-500/40 rounded-lg text-white text-[13px] font-medium hover:bg-red-500/30 transition-colors disabled:opacity-70",style:{padding:w?"10px":"10px 16px",cursor:n?"wait":"pointer"},children:[e.jsx(X,{size:16}),!w&&"L√∂schen"]})]})]})]})})},zt={love:{key:"love",label:"Liebe",icon:"‚ù§Ô∏è",color:U.love.color,question:"Vergiss mal Geld und Karriere. Bei welchen T√§tigkeiten vergisst du die Zeit?",placeholder:"Erz√§hle mir, was du wirklich liebst zu tun...",description:"Was du liebst"},talent:{key:"talent",label:"Talent",icon:"‚≠ê",color:U.talent.color,question:"Worin bist du richtig gut? Was f√§llt dir leicht, w√§hrend andere damit k√§mpfen?",placeholder:"Beschreibe deine St√§rken und F√§higkeiten...",description:"Worin du gut bist"},need:{key:"need",label:"Welt",icon:"üåç",color:U.need.color,question:"Welche Probleme der Welt w√ºrdest du gerne l√∂sen? Wo siehst du Bedarf?",placeholder:"Welchen Beitrag m√∂chtest du leisten...",description:"Was die Welt braucht"},market:{key:"market",label:"Markt",icon:"üí∞",color:U.market.color,question:"Wof√ºr werden Menschen in deinem Bereich bezahlt? Was ist gefragt?",placeholder:"Welche Berufe oder M√§rkte interessieren dich...",description:"Wof√ºr du bezahlt wirst"}},r={SIMULATOR:"simulator",ROLEPLAY:"roleplay",VIDEO:"video",BRIEFINGS:"briefings",DECISIONS:"decisions",IKIGAI:"ikigai"},lt=[{id:r.BRIEFINGS,label:"Smart Briefings",icon:ot},{id:r.DECISIONS,label:"Entscheidungs-Kompass",icon:Me},{id:r.IKIGAI,label:"Ikigai-Kompass",icon:Pe},{id:r.SIMULATOR,label:"Szenario-Training",icon:Ze},{id:r.VIDEO,label:"Wirkungs-Analyse",icon:$e},{id:r.ROLEPLAY,label:"Live-Simulationen",icon:ke}],Ea=r,Te=15,Xe=({currentPage:t,totalPages:a,onPageChange:i,totalItems:u})=>{if(a<=1)return null;const x=(t-1)*Te+1,l=Math.min(t*Te,u);return e.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-slate-200",children:[e.jsxs("span",{className:"text-sm text-slate-500",children:[x,"‚Äì",l," von ",u]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>i(t-1),disabled:t===1,className:"p-2 rounded-lg border border-slate-200 bg-white text-slate-600 disabled:opacity-40 disabled:cursor-not-allowed hover:bg-slate-50 transition-colors",children:e.jsx(fs,{size:18})}),e.jsxs("span",{className:"text-sm font-medium text-slate-700 min-w-[80px] text-center",children:["Seite ",t," / ",a]}),e.jsx("button",{onClick:()=>i(t+1),disabled:t===a,className:"p-2 rounded-lg border border-slate-200 bg-white text-slate-600 disabled:opacity-40 disabled:cursor-not-allowed hover:bg-slate-50 transition-colors",children:e.jsx(le,{size:18})})]})]})},Ca=({onBack:t,onSelectSession:a,isAuthenticated:i,onLoginClick:u,onContinueSession:x,onRepeatSession:l,initialTab:g,onNavigateToModule:m})=>{const{branding:y,demoCode:v}=js(),[n,S]=c.useState(g||r.BRIEFINGS);c.useEffect(()=>{g&&S(g)},[g]);const[E,w]=c.useState(null),[I,z]=c.useState(null);c.useEffect(()=>{window.scrollTo(0,0)},[n,E]);const[A,o]=c.useState([]),[C,R]=c.useState([]),[O,f]=c.useState([]),[N,ce]=c.useState([]),[Q,q]=c.useState([]),[W,H]=c.useState([]),[V,pe]=c.useState([]),[Se,se]=c.useState([]),[ge,Be]=c.useState([]),[ae,k]=c.useState({[r.BRIEFINGS]:1,[r.DECISIONS]:1,[r.IKIGAI]:1,[r.SIMULATOR]:1,[r.VIDEO]:1,[r.ROLEPLAY]:1}),[P,$]=c.useState(null),[G,oe]=c.useState(null),[d,j]=c.useState(null),[L,Ie]=c.useState(null),[ee,De]=c.useState({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),[Ge,de]=c.useState(null),[fe,be]=c.useState(!1),[Re,Qe]=c.useState(!0),[dt,xt]=c.useState(null);c.useEffect(()=>{i?Ue():Qe(!1)},[i]);const Ue=async()=>{Qe(!0),xt(null);try{const s=Ae(),h=v?`&demo_code=${encodeURIComponent(v)}`:"",[p,b,D,T,te,ie,je,is,rs]=await Promise.all([zs({limit:500,...v&&{demo_code:v}}).catch(()=>({data:[]})),fetch(`${s}/simulator/sessions?limit=500${h}`,{headers:{"X-WP-Nonce":me()}}).then(_=>_.json()).catch(()=>({data:[]})),fetch(`${s}/video-training/sessions?limit=500${h}`,{headers:{"X-WP-Nonce":me()}}).then(_=>_.json()).catch(()=>({data:[]})),B.request(`/smartbriefing/briefings?limit=500${v?`&demo_code=${encodeURIComponent(v)}`:""}`,{method:"GET"}).catch(()=>({success:!1,data:{briefings:[]}})),B.getDecisions().catch(()=>({success:!1,data:{decisions:[]}})),B.getIkigais().catch(()=>({success:!1,data:{ikigais:[]}})),Ls().catch(()=>[]),fetch(`${s}/simulator/scenarios`,{headers:{"X-WP-Nonce":me()}}).then(_=>_.json()).catch(()=>({data:[]})),fetch(`${s}/video-training/scenarios`,{headers:{"X-WP-Nonce":me()}}).then(_=>_.json()).catch(()=>({data:[]}))]),at=(_,ye="sessions")=>{let ne=[];Array.isArray(_?.data)?ne=_.data:Array.isArray(_?.data?.[ye])?ne=_.data[ye]:Array.isArray(_?.[ye])?ne=_[ye]:Array.isArray(_)&&(ne=_);const Ee=new Set,xe=ne.filter(He=>He?.id?Ee.has(He.id)?(console.warn("[SessionHistory] Duplicate session ID found:",He.id),!1):(Ee.add(He.id),!0):!0);return xe.length!==ne.length&&console.warn("[SessionHistory] Removed",ne.length-xe.length,"duplicate sessions"),xe},nt=_=>Array.isArray(_?.data?.scenarios)?_.data.scenarios:Array.isArray(_?.data)?_.data:Array.isArray(_)?_:[],it=(_,ye)=>{if(!Array.isArray(_))return[];const ne=new Set,Ee=_.filter(xe=>xe?.id?ne.has(xe.id)?(console.warn(`[SessionHistory] Duplicate ${ye} ID found:`,xe.id),!1):(ne.add(xe.id),!0):!0);return Ee.length!==_.length&&console.warn(`[SessionHistory] Removed ${_.length-Ee.length} duplicate ${ye}`),Ee};o(at(p)),R(at(b)),f(at(D)),ce(it(T?.data?.briefings||[],"briefing")),q(it(te?.data?.decisions||[],"decision")),H(it(ie?.data?.ikigais||[],"ikigai")),pe(nt(je)),se(nt(is)),Be(nt(rs))}catch(s){console.error("Failed to load sessions:",s),xt(s.message||"Fehler beim Laden der Daten")}finally{Qe(!1)}},mt=c.useMemo(()=>{const s={};return V.forEach(h=>{s[h.id]=h}),s},[V]),ht=c.useMemo(()=>{const s={};return Se.forEach(h=>{s[h.id]=h}),s},[Se]),ut=c.useMemo(()=>{const s={};return ge.forEach(h=>{s[h.id]=h}),s},[ge]),Gt=()=>{switch(n){case r.SIMULATOR:return C;case r.VIDEO:return O;case r.BRIEFINGS:return N;case r.DECISIONS:return Q;case r.IKIGAI:return W;default:return A}},Ut=()=>{switch(n){case r.SIMULATOR:return ht;case r.VIDEO:return ut;default:return mt}},pt=A.length+C.length+O.length+N.length+Q.length,We=s=>{k(h=>({...h,[n]:s})),window.scrollTo({top:200,behavior:"smooth"})};c.useEffect(()=>{k(s=>({...s,[n]:1}))},[n]);const Ve=s=>{const p=((ae[n]||1)-1)*Te;return s.slice(p,p+Te)},Ke=s=>Math.ceil(s.length/Te),gt=async s=>{(await B.request(`/smartbriefing/briefings/${s}`,{method:"DELETE"})).success&&ce(p=>p.filter(b=>b.id!==s))},Wt=async(s,h)=>{const p=await B.updateBriefing(s.id,{title:h});return ce(b=>b.map(D=>D.id===s.id?{...D,title:h}:D)),p},Vt=s=>{$(s)},Kt=()=>{$(null)},ft=async s=>{(await B.deleteDecision(s)).success&&q(p=>p.filter(b=>b.id!==s))},qt=async(s,h)=>{const p=await B.updateDecision(s.id,{topic:h});return q(b=>b.map(D=>D.id===s.id?{...D,topic:h}:D)),p},bt=async s=>{await B.deleteIkigai(s)&&H(p=>p.filter(b=>b.id!==s))},Ht=s=>{oe(s)},jt=()=>{oe(null),j(null)},Yt=s=>{Ie(s),De({love:{input:s.love_input||"",tags:s.love_tags||[]},talent:{input:s.talent_input||"",tags:s.talent_tags||[]},need:{input:s.need_input||"",tags:s.need_tags||[]},market:{input:s.market_input||"",tags:s.market_tags||[]}}),s.status==="completed"&&s.paths?de({summary:s.summary,paths:s.paths}):de(null)},et=()=>{Ie(null),De({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),de(null)},Xt=async(s,h,p)=>{if(De(b=>({...b,[s]:{input:h,tags:p}})),L?.id)try{await B.updateIkigai(L.id,{[`${s}_input`]:h,[`${s}_tags`]:p})}catch(b){console.error("[Ikigai] Failed to save dimension:",b)}},Jt=async(s,h)=>{try{return(await B.extractIkigaiKeywords(s,h))?.keywords||[]}catch(p){return console.error("[Ikigai] Failed to extract keywords:",p),[]}},Zt=(s,h)=>{De(p=>{const b=p[s].tags.filter(D=>D!==h);return{...p,[s]:{...p[s],tags:b}}})},Qt=async()=>{if(Object.values(ee).every(h=>h.tags&&h.tags.length>0)){be(!0);try{const h=await B.synthesizeIkigaiPaths({love_tags:ee.love.tags,talent_tags:ee.talent.tags,need_tags:ee.need.tags,market_tags:ee.market.tags});h&&(de(h),L?.id&&(await B.updateIkigai(L.id,{summary:h.summary,paths:h.paths,status:"completed"}),H(p=>p.map(b=>b.id===L.id?{...b,summary:h.summary,paths:h.paths,status:"completed"}:b))))}catch(h){console.error("[Ikigai] Failed to synthesize paths:",h)}finally{be(!1)}}},es=Object.values(ee).every(s=>s.tags&&s.tags.length>0),ts=s=>{q(h=>h.map(p=>p.id===s.id?s:p)),oe(s)},ss=s=>{w(s),z(n)},tt=()=>{w(null),z(null)},st=async(s,h)=>{const p=Ae();try{let b,D;switch(h){case r.SIMULATOR:b=`${p}/simulator/sessions/${s.id}`,D=()=>R(ie=>ie.filter(je=>je.id!==s.id));break;case r.ROLEPLAY:b=`${p}/roleplays/sessions/${s.id}`,D=()=>o(ie=>ie.filter(je=>je.id!==s.id));break;case r.VIDEO:b=`${p}/video-training/sessions/${s.id}`,D=()=>f(ie=>ie.filter(je=>je.id!==s.id));break;default:throw new Error("Unknown session type")}const te=await(await fetch(b,{method:"DELETE",headers:{"X-WP-Nonce":me()}})).json();if(te.success)D(),E&&tt();else throw new Error(te.message||"Delete failed")}catch(b){throw console.error("Failed to delete session:",b),b}},as=async(s,h,p)=>{try{let b;switch(h){case r.SIMULATOR:await B.updateSimulatorSession(s.id,{custom_title:p}),b=D=>D.map(T=>T.id===s.id?{...T,custom_title:p}:T),R(b);break;case r.ROLEPLAY:await B.updateSession(s.id,{custom_title:p}),b=D=>D.map(T=>T.id===s.id?{...T,custom_title:p}:T),o(b);break;case r.VIDEO:await B.updateVideoTraining(s.id,{custom_title:p}),b=D=>D.map(T=>T.id===s.id?{...T,custom_title:p}:T),f(b);break;default:throw new Error("Unknown session type")}}catch(b){throw console.error("Failed to rename session:",b),b}},yt=(s,h)=>(h===r.SIMULATOR?ht:h===r.VIDEO?ut:mt)[s?.scenario_id];if(P)return e.jsx(Ts,{briefing:P,onBack:Kt,onDelete:gt});if(G){const s={topic:G.topic||"",context:G.context||"",pros:G.pros||[],cons:G.cons||[],proScore:G.pro_score||0,contraScore:G.contra_score||0},h=async(D,T)=>{try{const te={topic:D.topic,context:D.context||null,pros:D.pros,cons:D.cons,pro_score:D.proScore,contra_score:D.contraScore,analysis:T,status:"completed"};await B.updateDecision(G.id,te);const ie={...G,...te};ts(ie),j({data:D,result:T})}catch(te){console.error("[SessionHistory] Failed to update decision:",te)}},p=async D=>G.id,b=async(D,T)=>{try{await B.updateDecision(D,{topic:T.topic,context:T.context||null,pros:T.pros,cons:T.cons,pro_score:T.proScore,contra_score:T.contraScore,status:T.status||"draft"})}catch(te){console.error("[SessionHistory] Failed to update decision:",te)}};return e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx(_t,{type:"decision",title:G.topic||"Entscheidung",status:G.status,createdAt:G.created_at,onBack:jt,onDelete:()=>{window.confirm("M√∂chtest du diese Entscheidungs-Analyse wirklich l√∂schen?")&&(ft(G.id),jt())}}),e.jsx("div",{className:"p-6 max-w-[900px] mx-auto",children:d?e.jsx(Fs,{decisionData:d.data,analysisResult:d.result,onStartNew:()=>{j(null),oe(null)},onEditDecision:()=>{j(null)}}):e.jsx(Ms,{initialData:s,onAnalysisComplete:h,isAuthenticated:i,savedDecisionId:G.id,onSaveDraft:p,onUpdateSession:b,onDecisionIdChange:()=>{}})})]})}if(L)return e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx(_t,{type:"ikigai",title:"Ikigai-Analyse",subtitle:L.status==="completed"?"Berufliche Orientierung":"In Bearbeitung",status:L.status,createdAt:L.created_at,onBack:et,onDelete:()=>{window.confirm("M√∂chtest du diese Ikigai-Analyse wirklich l√∂schen?")&&(bt(L.id),et())}}),e.jsx("div",{className:"p-6 max-w-[900px] mx-auto",children:Ge?e.jsx(Ps,{dimensions:ee,synthesisResult:Ge,onStartNew:et,onEdit:()=>de(null),DIMENSIONS:zt}):e.jsx($s,{dimensions:ee,DIMENSIONS:zt,onExtractKeywords:Jt,onUpdateDimension:Xt,onRemoveTag:Zt,allDimensionsFilled:es,onSynthesize:Qt,isSynthesizing:fe})})]});if(E){if(I===r.ROLEPLAY){const p=yt(E,I);return e.jsx(Os,{session:E,scenario:p,onBack:tt,onRepeat:()=>l?.(E,p,"roleplay"),onDelete:b=>st(b,r.ROLEPLAY)})}const h={[r.SIMULATOR]:"simulator",[r.VIDEO]:"video"}[I]||"simulator";return e.jsx(Zs,{session:E,type:I,scenario:yt(E,I),onBack:tt,onContinueSession:x,onRepeatSession:(p,b)=>l?.(p,b,h),onDeleteSession:st})}if(!i)return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center",children:e.jsx(St,{className:"w-7 h-7 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold text-slate-900",children:"Meine Sessions"})]}),e.jsx("p",{className:"text-lg text-slate-500 max-w-[600px] mx-auto",children:"Hier findest du deine gespeicherten √úbungen und Fortschritte"})]}),e.jsxs(Y,{className:"max-w-[500px] mx-auto mt-16 p-10 text-center rounded-2xl shadow-card",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center mx-auto mb-5",children:e.jsx(It,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-3",children:"Anmeldung erforderlich"}),e.jsx("p",{className:"text-slate-500 mb-6 leading-relaxed",children:"Um deine gespeicherten Sessions zu sehen, musst du dich zuerst anmelden."}),e.jsx(J,{onClick:u,size:"lg",icon:e.jsx(It,{className:"w-5 h-5"}),children:"Jetzt anmelden"})]})]});if(Re)return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-3 mb-3",children:[e.jsx(Ye,{className:"w-12 h-12 rounded-2xl"}),e.jsx(Ye,{className:"h-10 w-48"})]}),e.jsx(Ye,{className:"h-5 w-32 mx-auto"})]}),e.jsx("div",{className:"flex justify-center gap-2 mb-8",children:[1,2,3,4,5,6].map(s=>e.jsx(Ye,{className:"h-12 w-28 rounded-xl"},s))}),e.jsx("div",{className:"space-y-3 max-w-4xl mx-auto",children:[1,2,3,4,5].map(s=>e.jsx(bs,{},s))})]});if(dt)return e.jsx("div",{className:"min-h-[400px] flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-[400px] p-6",children:[e.jsx(Ne,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Fehler beim Laden"}),e.jsx("p",{className:"text-slate-500 mb-6",children:dt}),e.jsx(J,{onClick:Ue,children:"Erneut versuchen"})]})});const qe=Gt(),ns=Ut();return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8 text-center relative",children:[e.jsxs("div",{className:"inline-flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center",children:e.jsx(St,{className:"w-7 h-7 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold text-slate-900",children:"Meine Sessions"})]}),e.jsxs("p",{className:"text-lg text-slate-500 max-w-[600px] mx-auto",children:[pt," ",pt===1?"√úbung":"√úbungen"," gespeichert"]}),e.jsx("button",{onClick:Ue,disabled:Re,className:"absolute top-0 right-0 p-2.5 rounded-xl border border-slate-200 bg-white text-slate-500 shadow-sm flex items-center justify-center md:hidden disabled:opacity-50 hover:shadow-md transition-shadow",children:e.jsx(Dt,{className:`w-5 h-5 ${Re?"animate-spin":""}`})})]}),e.jsx("div",{className:"hidden lg:flex flex-wrap gap-2 mx-6 mb-6 bg-slate-100 p-1.5 rounded-2xl",children:lt.map(s=>{const h=s.icon,p=n===s.id,b=s.id===r.SIMULATOR?C.length:s.id===r.VIDEO?O.length:s.id===r.BRIEFINGS?N.length:s.id===r.DECISIONS?Q.length:s.id===r.IKIGAI?W.length:A.length;return e.jsxs("button",{onClick:()=>S(s.id),className:`flex-1 min-w-fit py-3 px-4 rounded-xl border-none text-sm cursor-pointer flex items-center justify-center gap-2 transition-all ${p?"bg-white text-slate-900 font-semibold shadow-md":"bg-transparent text-slate-500 font-medium hover:bg-white/50"}`,children:[e.jsx(h,{size:18}),e.jsx("span",{children:s.label}),e.jsx("span",{className:`py-0.5 px-2 rounded-xl text-xs font-semibold min-w-[24px] text-center ${p?"bg-indigo-500 text-white":"bg-slate-200 text-slate-500"}`,children:b})]},s.id)})}),e.jsxs("div",{className:"lg:hidden mx-4 mb-4",children:[e.jsx("div",{className:"flex gap-2 justify-center mb-3",children:lt.map(s=>{const h=s.icon,p=n===s.id,b=s.id===r.SIMULATOR?C.length:s.id===r.VIDEO?O.length:s.id===r.BRIEFINGS?N.length:s.id===r.DECISIONS?Q.length:s.id===r.IKIGAI?W.length:A.length;return e.jsxs("button",{onClick:()=>S(s.id),className:`flex-1 max-w-[80px] py-3 px-2 rounded-xl border-2 cursor-pointer flex flex-col items-center justify-center gap-1 transition-all ${p?"bg-white shadow-md border-indigo-500":"bg-slate-100 border-transparent hover:bg-white/60"}`,children:[e.jsx(h,{size:20,className:p?"text-indigo-500":"text-slate-500"}),e.jsx("span",{className:`py-0.5 px-1.5 rounded-lg text-[11px] font-semibold min-w-[20px] text-center ${p?"bg-indigo-500 text-white":"bg-slate-200 text-slate-500"}`,children:b})]},s.id)})}),e.jsx("div",{className:"text-center text-[15px] font-semibold text-slate-900 py-2 px-4 bg-white rounded-xl shadow-sm",children:lt.find(s=>s.id===n)?.label})]}),e.jsxs("div",{className:"hidden sm:flex justify-center lg:justify-end flex-wrap gap-3 mx-6 mb-6",children:[e.jsx(J,{variant:"outline",onClick:Ue,disabled:Re,title:"Aktualisieren",children:e.jsx(Dt,{className:`w-4 h-4 ${Re?"animate-spin":""}`})}),m&&e.jsxs(J,{onClick:()=>{const s={[r.BRIEFINGS]:"smart_briefing",[r.DECISIONS]:"decision_board",[r.IKIGAI]:"ikigai",[r.SIMULATOR]:"simulator",[r.VIDEO]:"video_training",[r.ROLEPLAY]:"dashboard"};m(s[n]||"overview")},children:[e.jsx(gs,{className:"w-4 h-4 mr-2"}),n===r.BRIEFINGS?"Neues Briefing":n===r.DECISIONS?"Neue Entscheidungs-Analyse":n===r.IKIGAI?"Neue Ikigai-Analyse":n===r.SIMULATOR?"Neues Szenario-Training":n===r.VIDEO?"Neue Wirkungs-Analyse":"Neue Live-Simulation"]})]}),e.jsx("div",{className:"mx-4 sm:mx-6",children:qe.length===0?e.jsxs(Y,{className:"text-center py-16 px-6 rounded-2xl shadow-card",children:[n===r.SIMULATOR&&e.jsx(Ze,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n===r.ROLEPLAY&&e.jsx(ke,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n===r.VIDEO&&e.jsx($e,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n===r.BRIEFINGS&&e.jsx(ot,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n===r.DECISIONS&&e.jsx(Me,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n===r.IKIGAI&&e.jsx(Pe,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),e.jsxs("h3",{className:"text-xl font-semibold text-slate-600 mb-2",children:["Noch keine ",n===r.SIMULATOR?"Szenario-Trainings":n===r.VIDEO?"Wirkungs-Analysen":n===r.BRIEFINGS?"Smart Briefings":n===r.DECISIONS?"Entscheidungs-Analysen":n===r.IKIGAI?"Ikigai-Analysen":"Live-Simulationen"]}),e.jsx("p",{className:"text-slate-500 mb-6",children:n===r.BRIEFINGS?"Erstelle dein erstes Briefing, um dich optimal vorzubereiten.":n===r.DECISIONS?"Nutze den Entscheidungs-Kompass, um deine erste Entscheidung zu analysieren.":n===r.IKIGAI?"Entdecke deinen idealen Karrierepfad mit dem Ikigai-Kompass.":"Starte dein erstes Training, um hier deine Fortschritte zu sehen."}),e.jsxs(J,{onClick:()=>{if(m){const s={[r.BRIEFINGS]:"smart_briefing",[r.DECISIONS]:"decision_board",[r.IKIGAI]:"ikigai",[r.SIMULATOR]:"simulator",[r.VIDEO]:"video_training",[r.ROLEPLAY]:"dashboard"};m(s[n]||"overview")}else t?.()},children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"}),n===r.BRIEFINGS?"Briefing erstellen":n===r.DECISIONS?"Entscheidung analysieren":n===r.IKIGAI?"Ikigai entdecken":"Training starten"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(F.div,{className:"flex flex-col gap-3",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},children:n===r.BRIEFINGS?Ve(N).map(s=>e.jsx(Qs,{briefing:s,onClick:()=>Vt(s),onDelete:gt,onRename:Wt},s.id)):n===r.DECISIONS?Ve(Q).map(s=>e.jsx(ta,{decision:s,onClick:()=>Ht(s),onDelete:ft,onRename:qt},s.id)):n===r.IKIGAI?Ve(W).map(s=>e.jsx(aa,{ikigai:s,onDelete:bt,onNavigate:()=>Yt(s)},s.id)):Ve(qe).map(s=>{const h=ns[s.scenario_id];return e.jsx(ea,{session:s,type:n,scenario:h,onClick:()=>ss(s),onContinueSession:x,onDeleteSession:st,onRename:as},s.id)})}),n===r.BRIEFINGS?e.jsx(Xe,{currentPage:ae[n]||1,totalPages:Ke(N),totalItems:N.length,onPageChange:We}):n===r.DECISIONS?e.jsx(Xe,{currentPage:ae[n]||1,totalPages:Ke(Q),totalItems:Q.length,onPageChange:We}):n===r.IKIGAI?e.jsx(Xe,{currentPage:ae[n]||1,totalPages:Ke(W),totalItems:W.length,onPageChange:We}):e.jsx(Xe,{currentPage:ae[n]||1,totalPages:Ke(qe),totalItems:qe.length,onPageChange:We})]})})]})};export{Ea as SESSION_TABS,Ca as default};
