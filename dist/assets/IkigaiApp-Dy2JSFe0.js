import{j as t,C as O,aC as P}from"./ui-vendor-BAEfSb-X.js";import{a as s}from"./react-vendor-uDOJF2jQ.js";import{a as T,I as L}from"./IkigaiResults-jZsWqaCh.js";import{u as _,D as G,w as c,c as N,C as u}from"./designTokens-LSOQEIoP.js";import{F as q,a as U}from"./index.js";import"./useBranding-CRmuKfX5.js";import"./useMobile-YxjH166V.js";import"./card-CRd_k1Xo.js";import"./utils-BEHD0UYf.js";import"./button-C27wFDRr.js";import"./AudioRecorder-LFdSK1H4.js";const o={COMPASS:"compass",RESULTS:"results"},I={love:{key:"love",label:"Leidenschaft",title:"Deine Leidenschaft",icon:"â¤ï¸",color:"#E11D48",question:"Stell dir vor, Geld spielt keine Rolle: Womit wÃ¼rdest du deinen Tag verbringen? Bei welchem Thema vergisst du vÃ¶llig die Zeit?",placeholder:"Schreib einfach drauf los: Hobbys, Themen, TÃ¤tigkeiten...",description:"Was treibt dich an?"},talent:{key:"talent",label:"StÃ¤rken",title:"Deine StÃ¤rken",icon:"â­",color:"#F59E0B",question:'WofÃ¼r bitten dich Freunde oder Kollegen oft um Rat? Was erledigst du "mit links", wÃ¤hrend andere daran verzweifeln?',placeholder:"Z.B. Organisieren, ZuhÃ¶ren, Coden, Designen...",description:"Was fÃ¤llt dir leicht?"},need:{key:"need",label:"Mission",title:"Deine Mission",icon:"ðŸŒ",color:"#10B981",question:"Welches Problem in der Gesellschaft oder Wirtschaft nervt dich? Wo wÃ¼rdest du gerne mitanpacken, um Dinge zu verbessern?",placeholder:"Z.B. Nachhaltigkeit, Bildung, bessere Software, Pflege...",description:"Welchen Beitrag leistest du?"},market:{key:"market",label:"Markt",title:"Der Markt",icon:"ðŸ’°",color:"#6366F1",question:"Welche deiner FÃ¤higkeiten sind bares Geld wert? FÃ¼r welche Jobs oder Dienstleistungen existiert ein echtes Budget?",placeholder:"Z.B. Projektmanagement, Beratung, Handwerk...",description:"WofÃ¼r wirst du bezahlt?"}},ne=({isAuthenticated:b,requireAuth:Z,setPendingAction:$,onNavigateToHistory:k})=>{const[f,g]=s.useState(o.COMPASS),[l,x]=s.useState(null),[v,y]=s.useState(!1),{branding:C}=_(),S=C?.["--primary-accent"]||G["--primary-accent"],j=N(u.purple[500],u.purple[400]),[a,p]=s.useState({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),[D,h]=s.useState(null),w=s.useRef(!1);s.useEffect(()=>{window.scrollTo(0,0)},[f]);const m=Object.values(a).every(e=>e.tags&&e.tags.length>0),d=s.useCallback(async()=>{if(l)return l;try{const e=await c.createIkigai();if(e?.id)return x(e.id),w.current=!0,console.log("[Ikigai] Session created with ID:",e.id),e.id}catch(e){console.error("[Ikigai] Failed to create session:",e)}return null},[l]),F=s.useCallback(async(e,n,i)=>{p(r=>({...r,[e]:{input:n,tags:i}}));try{const r=await d();r&&(await c.updateIkigai(r,{[`${e}_input`]:n,[`${e}_tags`]:i}),console.log(`[Ikigai] Dimension ${e} saved`))}catch(r){console.error("[Ikigai] Failed to save dimension:",r)}},[d]),R=s.useCallback(async(e,n)=>{try{const i=await c.extractIkigaiKeywords(e,n);return i?.keywords?i.keywords:[]}catch(i){return console.error("[Ikigai] Failed to extract keywords:",i),[]}},[]),W=s.useCallback(async()=>{if(m){y(!0);try{const e=await c.synthesizeIkigaiPaths({love_tags:a.love.tags,talent_tags:a.talent.tags,need_tags:a.need.tags,market_tags:a.market.tags});if(e){h(e);const n=l||await d();n&&await c.updateIkigai(n,{summary:e.summary,paths:e.paths,status:"completed"}),g(o.RESULTS)}}catch(e){console.error("[Ikigai] Failed to synthesize paths:",e)}finally{y(!1)}}},[m,a,l,d]),z=s.useCallback((e,n)=>{p(i=>{const r=i[e].tags.filter(A=>A!==n);return{...i,[e]:{...i[e],tags:r}}})},[]),B=s.useCallback(()=>{p({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),h(null),x(null),w.current=!1,g(o.COMPASS)},[]),E=s.useCallback(()=>{h(null),g(o.COMPASS)},[]),M=()=>{switch(f){case o.RESULTS:return t.jsx(L,{dimensions:a,synthesisResult:D,onStartNew:B,onEdit:E,DIMENSIONS:I});case o.COMPASS:default:return t.jsx(T,{dimensions:a,DIMENSIONS:I,onExtractKeywords:R,onUpdateDimension:F,onRemoveTag:z,allDimensionsFilled:m,onSynthesize:W,isSynthesizing:v})}};return t.jsxs(t.Fragment,{children:[t.jsx(q,{featureId:"ikigai",showOnMount:!0}),t.jsxs("div",{style:{minHeight:"100%"},children:[t.jsx("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:t.jsx("div",{style:{marginBottom:"24px"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"16px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:j,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(O,{style:{width:"24px",height:"24px",color:"white"}})}),t.jsxs("div",{children:[t.jsx("h1",{style:{fontSize:"28px",fontWeight:700,color:u.slate[900],margin:0},children:"Ikigai-Kompass"}),t.jsx("p",{style:{fontSize:"14px",color:u.slate[600],margin:0},children:"Finde deine berufliche Bestimmung"})]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx(U,{featureId:"ikigai",size:"sm"}),b&&k&&t.jsxs("button",{onClick:k,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",borderRadius:"12px",border:`2px solid ${S}`,backgroundColor:"white",color:S,fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[t.jsx(P,{size:18}),"Meine Ikigai"]})]})]})})}),M()]})]})};export{ne as default};
