import{j as e,M as K,T as kt,S as _e,f as vt,h as zt,a as u,e as Ne,k as p,u as Be,D as pe,C as qe,L as He,d as Ct,w as te,o as Rt}from"./colors-BQukwKjN.js";import{S as It}from"./ScenarioDashboard-CjbyWiRn.js";import{C as re,T as ae,b as Me,A as st,I as me,M as fe,a as nt,X as Bt,c as $t,m as At}from"./index.js";import{P as _t,a as Mt,B as Oe}from"./progress-bar-CpWO5fjg.js";import{U as Tt}from"./user-xMpg0OVz.js";import{B as Et}from"./banknote-CevsS91q.js";import{B as ot}from"./briefcase-DzdxhUru.js";import{u as ye}from"./useBranding-D1dNadPD.js";import{A as Te}from"./arrow-left-BSe0bpeL.js";import{C as Pe}from"./chevron-up-DQD89_pB.js";import{P as $e}from"./plus-b6jIgRO0.js";import{T as it}from"./trash-2-u9VwVFZs.js";import{C as ue}from"./circle-alert-CNsSzecp.js";import{u as Wt}from"./useMobile-B_LXavH3.js";import{M as at,a as lt,A as Ft}from"./MicrophoneTestDialog-v7rvl9mo.js";import{f as Ae}from"./formatting-B67Bmjxp.js";import{V as Lt}from"./volume-2-BJ9lHE2W.js";import{T as ct}from"./thumbs-up-Z0tZ72js.js";import{L as N}from"./lightbulb-DOBxo0V4.js";import{R as Ge}from"./rotate-ccw-DfIQOANW.js";import{T as dt}from"./trophy-DbNEarYw.js";import{S as Dt,P as qt}from"./skip-back-DelP69Lz.js";import{P as Ze}from"./play-0qnAUdHO.js";import{S as Ot}from"./skip-forward-fqNrvCYq.js";import{D as Vt}from"./DeviceSettingsDialog-GYqrtH3C.js";import{F as pt}from"./fullscreen-loader-CsIxbRU5.js";import{C as Ye}from"./check-DiBTcvJw.js";import{C as Se}from"./circle-check-big-BqWFsjNz.js";import{S as Ve}from"./settings-CWRqWhjO.js";import{M as Nt}from"./mic-off-COsMLge5.js";import{S as Ht}from"./square-t2mbcfoG.js";import{S as Pt}from"./star-BkTqDoWb.js";import{D as Gt}from"./DynamicFormField-BnkLaKNG.js";import"./heart-DAOFFmWr.js";import"./message-circle-Dy8g8Sor.js";import"./ScenarioCard-cKuDaMsk.js";import"./dialog-DN230_lK.js";import"./utils-BEHD0UYf.js";import"./search-CwuLAEe2.js";import"./filter-BrCmX0LG.js";import"./designTokens-DbcSlXo4.js";import"./refresh-cw-hxJHsysT.js";import"./DeviceSetupPage-t9IblOmt.js";const Zt={briefcase:ot,banknote:Et,user:Tt,presentation:_t,target:ae,mic:K},Kt=async()=>{const s=await fetch(`${vt()}/simulator/scenarios`,{headers:{"X-WP-Nonce":zt()},credentials:"same-origin"});if(!s.ok)throw new Error("Fehler beim Laden der Szenarien");const a=await s.json();if(a.success&&a.data?.scenarios)return a.data.scenarios;throw new Error("Keine Szenarien gefunden")},Qt=s=>Zt[s.icon]||ot,Ut=s=>[{text:`${s.question_count_min}-${s.question_count_max} Fragen`},{icon:re,text:`${Math.round(s.time_limit_per_question/60)} Min/Frage`}],Xe=({onSelectScenario:s,isAuthenticated:a,requireAuth:m,setPendingScenario:o,onNavigateToHistory:n})=>e.jsx(It,{title:"Szenario-Training",subtitle:"Trainiere wichtige Karriere-Skills mit KI-Feedback",headerIcon:_e,fetchScenarios:Kt,moduleKey:"simulator",historyButtonLabel:"Meine Szenario-Trainings",onNavigateToHistory:n,onSelectScenario:s,renderCardMeta:Ut,getIconForScenario:Qt,cardActionLabel:"Starten",cardActionIcon:kt,categoryField:"category",emptyStateIcon:K,emptyStateTitle:"Keine Trainingsszenarien verfÃ¼gbar.",searchPlaceholder:"Szenarien durchsuchen...",isAuthenticated:a,requireAuth:m,setPendingScenario:o,loadingMessage:"Szenarien werden geladen..."}),Jt=({field:s,value:a,onChange:m,error:o,focusColor:n,branding:c})=>{const y=n||"#4a9ec9",w={width:"100%",padding:`${c.space[3]} ${c.space[4]}`,borderRadius:c.radius.lg,border:`2px solid ${o?p.red[500]:p.slate[200]}`,fontSize:c.fontSize.base,color:p.slate[900],backgroundColor:"white",outline:"none",transition:c.transition.normal},j={borderColor:y,boxShadow:`0 0 0 3px ${y}1a`},h=l=>{Object.assign(l.target.style,j),setTimeout(()=>{const R=l.target;if(R){const v=R.closest("div");v&&v.scrollIntoView({behavior:"smooth",block:"center"})}},300)},d=l=>{l.target.style.borderColor=o?p.red[500]:p.slate[200],l.target.style.boxShadow="none"},r=()=>{switch(s.type){case"text":return e.jsx("input",{type:"text",value:a||"",onChange:l=>m(s.key,l.target.value),placeholder:s.placeholder||"",style:w,onFocus:h,onBlur:d});case"textarea":return e.jsx("textarea",{value:a||"",onChange:l=>m(s.key,l.target.value),placeholder:s.placeholder||"",rows:4,style:{...w,resize:"vertical",minHeight:"100px"},onFocus:h,onBlur:d});case"select":return e.jsxs("select",{value:a||s.default||"",onChange:l=>m(s.key,l.target.value),style:{...w,cursor:"pointer",appearance:"none",backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 12px center",backgroundRepeat:"no-repeat",backgroundSize:"20px",paddingRight:"44px"},onFocus:h,onBlur:d,children:[e.jsx("option",{value:"",children:"Bitte wÃ¤hlen..."}),s.options?.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))]});case"number":return e.jsx("input",{type:"number",value:a||"",onChange:l=>m(s.key,l.target.value),placeholder:s.placeholder||"",min:s.validation?.min,max:s.validation?.max,style:w,onFocus:h,onBlur:d});default:return e.jsx("input",{type:"text",value:a||"",onChange:l=>m(s.key,l.target.value),placeholder:s.placeholder||"",style:w,onFocus:h,onBlur:d})}};return e.jsxs("div",{style:{marginBottom:c.space[5]},children:[e.jsxs("label",{style:{display:"block",marginBottom:c.space[2],fontSize:c.fontSize.sm,fontWeight:600,color:p.slate[700]},children:[s.label,s.required&&e.jsx("span",{style:{color:p.red[500],marginLeft:c.space[1]},children:"*"})]}),r(),o&&e.jsxs("p",{style:{marginTop:c.space[1.5],fontSize:c.fontSize.xs,color:p.red[500],display:"flex",alignItems:"center",gap:c.space[1]},children:[e.jsx(ue,{style:{width:"14px",height:"14px"}}),o]}),s.hint&&!o&&e.jsxs("p",{style:{marginTop:c.space[1.5],fontSize:c.fontSize.xs,color:p.slate[500],display:"flex",alignItems:"center",gap:c.space[1]},children:[e.jsx(me,{style:{width:"14px",height:"14px"}}),s.hint]})]})},Yt=({scenario:s,onBack:a,onNext:m})=>{const[o,n]=u.useState({}),[c,y]=u.useState({}),[w,j]=u.useState([]),[h,d]=u.useState(!1),r=ye(),l=Ne.useMemo(()=>{if(!s?.input_configuration)return[];try{const x=typeof s.input_configuration=="string"?JSON.parse(s.input_configuration):s.input_configuration;return Array.isArray(x)?x.filter(t=>t.user_input!==!1):[]}catch(x){return console.error("Error parsing input_configuration:",x),[]}},[s?.input_configuration]);u.useEffect(()=>{const x={};l.forEach(t=>{t.default&&(x[t.key]=t.default)}),n(x)},[l]);const R=(x,t)=>{n(i=>({...i,[x]:t})),c[x]&&y(i=>{const b={...i};return delete b[x],b})},v=()=>{j(x=>[...x,{key:"",value:""}])},z=(x,t,i)=>{j(b=>{const B=[...b];return B[x]={...B[x],[t]:i},B})},M=x=>{j(t=>t.filter((i,b)=>b!==x))},F=()=>{const x={};return l.forEach(t=>{const i=o[t.key];if(t.required&&(!i||i.trim()==="")){x[t.key]="Dieses Feld ist erforderlich";return}if(!(!i||i.trim()==="")&&t.validation){const{minLength:b,maxLength:B,min:W,max:E,pattern:$}=t.validation;b&&i.length<b&&(x[t.key]=`Mindestens ${b} Zeichen erforderlich`),B&&i.length>B&&(x[t.key]=`Maximal ${B} Zeichen erlaubt`),W!==void 0&&Number(i)<W&&(x[t.key]=`Mindestens ${W}`),E!==void 0&&Number(i)>E&&(x[t.key]=`Maximal ${E}`),$&&!new RegExp($).test(i)&&(x[t.key]="UngÃ¼ltiges Format")}}),y(x),Object.keys(x).length===0},C=x=>{if(x.preventDefault(),!F())return;const t={...o};w.forEach(i=>{i.key&&i.value&&(t[i.key]=i.value)}),m(t)};return u.useEffect(()=>{l.length===0&&m({})},[l,m]),l.length===0?null:e.jsxs("div",{style:{padding:r.space[6],paddingBottom:"200px",maxWidth:"640px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:r.space[8]},children:[e.jsxs("button",{onClick:a,style:{display:"inline-flex",alignItems:"center",gap:r.space[2],padding:`${r.space[2]} ${r.space[3]}`,marginBottom:r.space[4],border:"none",background:"transparent",color:p.slate[600],fontSize:r.fontSize.sm,cursor:"pointer",borderRadius:r.radius.md,transition:r.transition.normal},onMouseEnter:x=>x.target.style.background=p.slate[100],onMouseLeave:x=>x.target.style.background="transparent",children:[e.jsx(Te,{style:{width:"18px",height:"18px"}}),"ZurÃ¼ck zur Ãœbersicht"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:r.space[4]},children:[e.jsx("div",{style:{width:"56px",height:"56px",borderRadius:r.radius.xl,background:r.headerGradient,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(_e,{style:{width:"28px",height:"28px",color:"white"}})}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:r.fontSize["2xl"],fontWeight:700,color:p.slate[900],margin:0},children:s.title}),e.jsx("p",{style:{fontSize:r.fontSize.sm,color:p.slate[600],margin:`${r.space[1]} 0 0 0`},children:"Personalisiere dein Training"})]})]})]}),e.jsx("div",{style:{padding:`${r.space[4]} ${r.space[5]}`,borderRadius:r.radius.lg,backgroundColor:p.slate[100],marginBottom:r.space[6]},children:e.jsx("p",{style:{fontSize:r.fontSize.sm,color:p.slate[700],margin:0,lineHeight:1.6},children:s.description})}),e.jsxs("form",{onSubmit:C,children:[l.map(x=>e.jsx(Jt,{field:x,value:o[x.key],onChange:R,error:c[x.key],focusColor:r.primaryAccent,branding:r},x.key)),s?.allow_custom_variables&&e.jsxs("div",{style:{marginTop:r.space[5],marginBottom:r.space[5],paddingTop:r.space[5],borderTop:`1px solid ${p.slate[200]}`},children:[e.jsxs("button",{type:"button",onClick:()=>d(!h),style:{display:"flex",alignItems:"flex-start",gap:r.space[2],padding:"0",border:"none",background:"none",color:p.slate[500],fontSize:r.fontSize.sm,fontWeight:500,cursor:"pointer",marginBottom:h?r.space[4]:"0",textAlign:"left"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:r.space[2],flexShrink:0},children:[h?e.jsx(Pe,{size:18}):e.jsx(Me,{size:18}),e.jsx($e,{size:16})]}),e.jsx("span",{style:{lineHeight:"1.4"},children:"ZusÃ¤tzliche Variablen hinzufÃ¼gen (optional)"})]}),h&&e.jsxs("div",{style:{backgroundColor:p.slate[50],borderRadius:r.radius.lg,padding:r.space[4]},children:[e.jsx("p",{style:{fontSize:r.fontSize.sm,color:p.slate[500],margin:`0 0 ${r.space[3]} 0`},children:"FÃ¼ge eigene Variablen hinzu, die in das Training einflieÃŸen sollen."}),w.length>0&&e.jsx("div",{style:{marginBottom:r.space[3]},children:w.map((x,t)=>e.jsxs("div",{style:{backgroundColor:"white",border:`1px solid ${p.slate[200]}`,borderRadius:r.radius.md,padding:r.space[3],marginBottom:r.space[3]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:r.space[2]},children:[e.jsx("input",{type:"text",value:x.key||"",onChange:i=>z(t,"key",i.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"_")),placeholder:"variable_name",style:{padding:`${r.space[2]} ${r.space[3]}`,borderRadius:r.radius.md,border:`1px solid ${p.slate[200]}`,fontSize:r.fontSize.sm,fontFamily:"monospace",backgroundColor:p.slate[50],flex:1,marginRight:r.space[2]}}),e.jsx("button",{type:"button",onClick:()=>M(t),style:{padding:r.space[2],border:"none",backgroundColor:"transparent",cursor:"pointer",color:p.red[500],display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(it,{size:16})})]}),e.jsx("textarea",{value:x.value||"",onChange:i=>z(t,"value",i.target.value),placeholder:"Wert der Variable...",rows:2,style:{width:"100%",padding:`${r.space[2]} ${r.space[3]}`,borderRadius:r.radius.md,border:`1px solid ${p.slate[200]}`,fontSize:r.fontSize.sm,resize:"vertical"}})]},t))}),e.jsxs("button",{type:"button",onClick:v,style:{display:"flex",alignItems:"center",gap:r.space[2],padding:`${r.space[2]} ${r.space[3]}`,border:`1px dashed ${p.slate[300]}`,borderRadius:r.radius.md,backgroundColor:"white",color:p.slate[600],fontSize:r.fontSize.sm,cursor:"pointer",width:"100%",justifyContent:"center"},children:[e.jsx($e,{size:16}),"Variable hinzufÃ¼gen"]})]})]}),e.jsxs("div",{style:{padding:`${r.space[4]} ${r.space[5]}`,borderRadius:r.radius.lg,backgroundColor:r.primaryAccentLight,marginTop:r.space[6],marginBottom:r.space[6],display:"flex",gap:r.space[5],flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:r.fontSize.xs,color:p.slate[500],display:"block"},children:"Fragen"}),e.jsxs("span",{style:{fontSize:r.fontSize.base,fontWeight:600,color:p.slate[900]},children:[s.question_count_min,"-",s.question_count_max]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:r.fontSize.xs,color:p.slate[500],display:"block"},children:"Zeit pro Frage"}),e.jsxs("span",{style:{fontSize:r.fontSize.base,fontWeight:600,color:p.slate[900]},children:[Math.round(s.time_limit_per_question/60)," Min"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:r.fontSize.xs,color:p.slate[500],display:"block"},children:"Wiederholen"}),e.jsx("span",{style:{fontSize:r.fontSize.base,fontWeight:600,color:p.slate[900]},children:s.allow_retry?"Erlaubt":"Nicht erlaubt"})]})]}),e.jsxs("button",{type:"submit",style:{width:"100%",padding:`${r.space[4]} ${r.space[6]}`,borderRadius:r.radius.xl,border:"none",background:r.buttonGradient,color:"white",fontSize:r.fontSize.base,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:r.space[2.5],transition:r.transition.normal,boxShadow:`0 4px 12px ${r.primaryAccent}4d`},onMouseEnter:x=>{x.target.style.transform="translateY(-2px)",x.target.style.boxShadow=`0 6px 16px ${r.primaryAccent}66`},onMouseLeave:x=>{x.target.style.transform="none",x.target.style.boxShadow=`0 4px 12px ${r.primaryAccent}4d`},children:["Weiter",e.jsx(st,{style:{width:"20px",height:"20px"}})]})]})]})},Re=({score:s,label:a,size:m="normal",primaryAccent:o,branding:n})=>{const c=s!=null?s*10:null,w=(h=>h>=80?n.success:h>=60?o:h>=40?n.warning:n.error)(c),j=m==="large";return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:n.space[1]},children:[e.jsx("div",{style:{width:j?"80px":"56px",height:j?"80px":"56px",borderRadius:n.radius.full,backgroundColor:`${w}15`,border:`3px solid ${w}`,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{fontSize:j?n.fontSize["5xl"]:n.fontSize["2xl"],fontWeight:n.fontWeight.bold,color:w},children:c!=null?Math.round(c):"-"})}),e.jsx("span",{style:{fontSize:j?n.fontSize.base:n.fontSize.xs,color:n.textSecondary,fontWeight:n.fontWeight.medium},children:a})]})},de=({title:s,icon:a,children:m,defaultOpen:o=!0,primaryAccent:n,branding:c})=>{const[y,w]=u.useState(o);return e.jsxs("div",{style:{borderRadius:c.radius.lg,border:`1px solid ${c.borderColor}`,backgroundColor:c.cardBg,overflow:"hidden",marginBottom:c.space[4]},children:[e.jsxs("button",{onClick:()=>w(!y),style:{width:"100%",padding:`${c.space[4]} ${c.space[5]}`,display:"flex",alignItems:"center",justifyContent:"space-between",border:"none",backgroundColor:"transparent",cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:c.space[3]},children:[e.jsx(a,{style:{width:c.iconSize.lg,height:c.iconSize.lg,color:n}}),e.jsx("span",{style:{fontSize:c.fontSize.md,fontWeight:c.fontWeight.semibold,color:c.textMain},children:s})]}),y?e.jsx(Pe,{style:{width:c.iconSize.lg,height:c.iconSize.lg,color:c.textMuted}}):e.jsx(Me,{style:{width:c.iconSize.lg,height:c.iconSize.lg,color:c.textMuted}})]}),y&&e.jsx("div",{style:{padding:`0 ${c.space[5]} ${c.space[5]} ${c.space[5]}`,borderTop:`1px solid ${c.cardBgHover}`,paddingTop:c.space[4]},children:m})]})},Le=({text:s,type:a,primaryAccent:m,primaryAccentLight:o,branding:n})=>{const c={strength:{icon:ct,color:n.success,bg:n.successLight},improvement:{icon:nt,color:n.warning,bg:n.warningLight},tip:{icon:N,color:m,bg:o}},{icon:y,color:w,bg:j}=c[a]||c.tip;return e.jsxs("div",{style:{display:"flex",gap:n.space[3],padding:n.space[3],borderRadius:n.radius.md,backgroundColor:j,marginBottom:n.space[2]},children:[e.jsx(y,{style:{width:n.iconSize.md,height:n.iconSize.md,color:w,flexShrink:0,marginTop:"2px"}}),e.jsx("span",{style:{fontSize:n.fontSize.base,color:n.textSecondary,lineHeight:1.5},children:s})]})},Xt=({metrics:s,branding:a})=>{if(!s)return null;const o=(c=>{switch(c){case"optimal":return{label:"Optimal",color:a.success};case"zu_schnell":return{label:"Zu schnell",color:a.warning};case"zu_langsam":return{label:"Zu langsam",color:a.warning};default:return{label:c||"N/A",color:a.textMuted}}})(s.speech_rate),n=c=>{switch(c){case"niedrig":return a.success;case"mittel":return a.warning;case"hoch":return a.error;default:return a.textMuted}};return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:a.space[4]},children:[e.jsxs("div",{style:{padding:a.space[4],borderRadius:a.radius.md,backgroundColor:a.cardBgHover},children:[e.jsx("span",{style:{fontSize:a.fontSize.xs,color:a.textMuted,display:"block",marginBottom:a.space[1]},children:"Sprechtempo"}),e.jsx("span",{style:{fontSize:a.fontSize.lg,fontWeight:a.fontWeight.semibold,color:o.color},children:o.label})]}),s.filler_words&&e.jsxs("div",{style:{padding:a.space[4],borderRadius:a.radius.md,backgroundColor:a.cardBgHover},children:[e.jsx("span",{style:{fontSize:a.fontSize.xs,color:a.textMuted,display:"block",marginBottom:a.space[1]},children:"FÃ¼llwÃ¶rter"}),e.jsxs("span",{style:{fontSize:a.fontSize.lg,fontWeight:600,color:n(s.filler_words.severity)},children:[s.filler_words.count||0,s.filler_words.words?.length>0&&e.jsxs("span",{style:{fontSize:"12px",fontWeight:400,marginLeft:"8px"},children:["(",s.filler_words.words.slice(0,3).join(", "),")"]})]})]}),s.confidence_score!==void 0&&e.jsxs("div",{style:{padding:"16px",borderRadius:"10px",backgroundColor:a.cardBgHover},children:[e.jsx("span",{style:{fontSize:"12px",color:a.textMuted,display:"block",marginBottom:"4px"},children:"Selbstbewusstsein"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{flex:1,height:"8px",backgroundColor:a.borderColor,borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${s.confidence_score}%`,height:"100%",backgroundColor:s.confidence_score>=70?a.success:a.warning,borderRadius:"4px"}})}),e.jsxs("span",{style:{fontSize:"14px",fontWeight:600,color:a.textSecondary},children:[s.confidence_score,"%"]})]})]}),s.clarity_score!==void 0&&e.jsxs("div",{style:{padding:"16px",borderRadius:"10px",backgroundColor:a.cardBgHover},children:[e.jsx("span",{style:{fontSize:"12px",color:a.textMuted,display:"block",marginBottom:"4px"},children:"Klarheit"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{flex:1,height:"8px",backgroundColor:a.borderColor,borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${s.clarity_score}%`,height:"100%",backgroundColor:s.clarity_score>=70?a.success:a.warning,borderRadius:"4px"}})}),e.jsxs("span",{style:{fontSize:"14px",fontWeight:600,color:a.textSecondary},children:[s.clarity_score,"%"]})]})]}),s.notes&&e.jsxs("div",{style:{gridColumn:"1 / -1",padding:"12px 16px",borderRadius:"10px",backgroundColor:a.primaryAccentLight,fontSize:"14px",color:a.textSecondary,lineHeight:1.5},children:["ðŸ’¡ ",s.notes]})]})},er=({audioUrl:s,primaryAccent:a,branding:m})=>{const o=u.useRef(null),[n,c]=u.useState(!1),[y,w]=u.useState(0),[j,h]=u.useState(0),[d,r]=u.useState(!0),[l,R]=u.useState(null);u.useEffect(()=>{if(!s)return;r(!0),R(null);const C=new Audio;o.current=C;const x=()=>{const i=C.duration;i&&isFinite(i)&&i>0&&h(i),r(!1)},t=()=>{r(!1);const i=C.duration;i&&isFinite(i)&&i>0&&h(i)};return C.addEventListener("loadedmetadata",x),C.addEventListener("canplaythrough",t),C.addEventListener("timeupdate",()=>w(C.currentTime)),C.addEventListener("play",()=>c(!0)),C.addEventListener("pause",()=>c(!1)),C.addEventListener("ended",()=>c(!1)),C.addEventListener("error",()=>{R("Audio nicht verfÃ¼gbar"),r(!1)}),C.src=s,C.load(),()=>{C.pause(),C.src=""}},[s]);const v=()=>{o.current&&(n?o.current.pause():o.current.play())},z=C=>{const x=C.currentTarget.getBoundingClientRect(),t=(C.clientX-x.left)/x.width;o.current&&j>0&&(o.current.currentTime=t*j)},M=C=>{o.current&&(o.current.currentTime=Math.max(0,Math.min(o.current.currentTime+C,j)))};if(!s)return null;if(l)return e.jsxs("div",{style:{padding:"12px 16px",background:m.cardBgHover,borderRadius:"10px",color:m.textMuted,fontSize:"13px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(ue,{size:16})," ",l]});const F=j>0?y/j*100:0;return e.jsxs("div",{style:{background:m.cardBgHover,borderRadius:"12px",padding:"16px"},children:[e.jsx("div",{onClick:z,style:{height:"6px",background:m.borderColor,borderRadius:"3px",cursor:"pointer",marginBottom:"12px"},children:e.jsx("div",{style:{width:`${F}%`,height:"100%",background:a,borderRadius:"3px",transition:"width 0.1s"}})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},children:[e.jsx("button",{onClick:()=>M(-10),style:{background:"none",border:"none",cursor:"pointer",padding:"6px",color:m.textMuted,display:"flex",alignItems:"center"},children:e.jsx(Dt,{size:20})}),e.jsx("button",{onClick:v,disabled:d,style:{width:"44px",height:"44px",borderRadius:"50%",background:a,border:"none",cursor:d?"wait":"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#ffffff",opacity:d?.7:1},children:d?e.jsx(He,{size:20,color:"#ffffff",style:{animation:"spin 1s linear infinite"}}):n?e.jsx(qt,{size:20,color:"#ffffff",fill:"#ffffff"}):e.jsx(Ze,{size:20,color:"#ffffff",fill:"#ffffff",style:{marginLeft:"2px"}})}),e.jsx("button",{onClick:()=>M(10),style:{background:"none",border:"none",cursor:"pointer",padding:"6px",color:m.textMuted,display:"flex",alignItems:"center"},children:e.jsx(Ot,{size:20})})]}),e.jsxs("div",{style:{textAlign:"center",marginTop:"8px",fontSize:"12px",color:m.textMuted},children:[Ae(y)," / ",Ae(j)]}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]})},tr=({transcript:s,feedback:a,audioMetrics:m,audioUrl:o,onRetry:n,onNext:c,onComplete:y,isLastQuestion:w,hideButtons:j=!1})=>{const{branding:h}=Be(),d=ye(),r=h?.["--button-gradient"]||h?.["--header-gradient"]||pe["--header-gradient"],l=h?.["--primary-accent"]||pe["--primary-accent"],R=h?.["--primary-accent-light"]||pe["--primary-accent-light"],v=typeof a=="string"?JSON.parse(a):a;return e.jsxs("div",{style:{backgroundColor:d.cardBgHover,borderRadius:d.radius.xl,padding:d.space[6]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"20px",marginBottom:"24px",padding:d.space[5],backgroundColor:d.cardBg,borderRadius:d.radius.lg},children:[e.jsx(Re,{score:v?.scores?.overall,label:"Gesamt",size:"large",primaryAccent:l,branding:d}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:d.textMain,margin:"0 0 8px 0"},children:"Feedback zu deiner Antwort"}),e.jsx("p",{style:{fontSize:"14px",color:d.textSecondary,margin:0,lineHeight:1.5},children:v?.summary||"Deine Antwort wurde analysiert."})]})]}),v?.scores&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"32px",padding:"16px",marginBottom:"16px",backgroundColor:d.cardBg,borderRadius:"12px"},children:[e.jsx(Re,{score:v.scores.content,label:"Inhalt",primaryAccent:l,branding:d}),e.jsx(Re,{score:v.scores.structure,label:"Struktur",primaryAccent:l,branding:d}),e.jsx(Re,{score:v.scores.relevance,label:"Relevanz",primaryAccent:l,branding:d})]}),e.jsx(de,{title:"Transkript",icon:fe,defaultOpen:!0,primaryAccent:l,branding:d,children:e.jsxs("div",{style:{padding:"16px",borderRadius:"10px",backgroundColor:d.cardBgHover,fontStyle:"italic",color:d.textSecondary,lineHeight:1.6,fontSize:"14px"},children:['"',s||"Keine Transkription verfÃ¼gbar.",'"']})}),o&&e.jsx(de,{title:"Deine Aufnahme",icon:Lt,defaultOpen:!0,primaryAccent:l,branding:d,children:e.jsx(er,{audioUrl:o,primaryAccent:l,branding:d})}),v?.strengths?.length>0&&e.jsx(de,{title:"StÃ¤rken",icon:ct,defaultOpen:!0,primaryAccent:l,branding:d,children:v.strengths.map((z,M)=>e.jsx(Le,{text:z,type:"strength",primaryAccent:l,primaryAccentLight:R,branding:d},M))}),v?.improvements?.length>0&&e.jsx(de,{title:"Verbesserungen",icon:nt,defaultOpen:!0,primaryAccent:l,branding:d,children:v.improvements.map((z,M)=>e.jsx(Le,{text:z,type:"improvement",primaryAccent:l,primaryAccentLight:R,branding:d},M))}),v?.tips?.length>0&&e.jsx(de,{title:"Tipps",icon:N,defaultOpen:!1,primaryAccent:l,branding:d,children:v.tips.map((z,M)=>e.jsx(Le,{text:z,type:"tip",primaryAccent:l,primaryAccentLight:R,branding:d},M))}),m&&e.jsx(de,{title:"Sprechanalyse",icon:K,defaultOpen:!1,primaryAccent:l,branding:d,children:e.jsx(Xt,{metrics:m,branding:d})}),!j&&e.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"24px",justifyContent:"flex-end",flexWrap:"wrap"},children:[n&&e.jsxs("button",{onClick:n,style:{display:"flex",alignItems:"center",gap:"8px",padding:"14px 24px",borderRadius:"12px",border:`2px solid ${d.borderColor}`,backgroundColor:d.cardBg,color:d.textSecondary,fontSize:"15px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:z=>{z.target.style.borderColor=l,z.target.style.color=l},onMouseLeave:z=>{z.target.style.borderColor=d.borderColor,z.target.style.color=d.textSecondary},children:[e.jsx(Ge,{style:{width:"18px",height:"18px"}}),"Nochmal versuchen"]}),e.jsx("button",{onClick:w?y:c,style:{display:"flex",alignItems:"center",gap:"8px",padding:"14px 24px",borderRadius:"12px",border:"none",background:r,color:"white",fontSize:"15px",fontWeight:600,cursor:"pointer",boxShadow:`0 4px 12px ${l}4d`,transition:"all 0.2s"},onMouseEnter:z=>{z.target.style.transform="translateY(-2px)",z.target.style.boxShadow=`0 6px 16px ${l}66`},onMouseLeave:z=>{z.target.style.transform="none",z.target.style.boxShadow=`0 4px 12px ${l}4d`},children:w?e.jsxs(e.Fragment,{children:[e.jsx(dt,{style:{width:"18px",height:"18px"}}),"Training abschlieÃŸen"]}):e.jsxs(e.Fragment,{children:["NÃ¤chste Frage",e.jsx(qe,{style:{width:"18px",height:"18px"}})]})})]})]})},et={target:ae,clock:re,mic:K,"message-square":fe,lightbulb:N,brain:Oe,info:me,settings:Ve,check:Se,Target:ae,Clock:re,Mic:K,MessageSquare:fe,Lightbulb:N,Brain:Oe},rr=({tips:s,primaryAccent:a,tipsLabel:m,branding:o})=>{const[n,c]=u.useState(!0);return!s||s.length===0?null:e.jsxs("div",{style:{background:o.cardBg,borderRadius:o.radius.xl,border:`1px solid ${o.borderColor}`,overflow:"hidden"},children:[e.jsxs("button",{onClick:()=>c(!n),style:{width:"100%",padding:`${o.space[4]} ${o.space[6]}`,background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:o.space[2],fontSize:o.fontSize.base,fontWeight:o.fontWeight.semibold,color:o.textMain},children:[e.jsx(N,{size:o.iconSize.md,color:a}),m||"Tipps fÃ¼r diese Frage"]}),e.jsx(Me,{size:o.iconSize.md,color:o.textMuted,style:{transform:n?"rotate(180deg)":"none",transition:o.transition.normal}})]}),e.jsx($t,{children:n&&e.jsx(At.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},style:{overflow:"hidden"},children:e.jsx("div",{style:{padding:`0 ${o.space[6]} ${o.space[6]}`},children:s.map((y,w)=>e.jsxs("div",{style:{display:"flex",gap:o.space[3],padding:`${o.space[3]} ${o.space[4]}`,borderRadius:o.radius.md,backgroundColor:o.warningLight,marginBottom:w<s.length-1?o.space[2]:0},children:[e.jsx(N,{style:{width:o.iconSize.sm,height:o.iconSize.sm,color:o.warning,flexShrink:0,marginTop:"2px"}}),e.jsx("p",{style:{fontSize:o.fontSize.base,color:o.textSecondary,margin:0,lineHeight:1.5},children:y.replace(/^Tipp \d+:\s*/i,"")})]},w))})})})]})},sr=({seconds:s,maxSeconds:a,isRecording:m,branding:o})=>{const n=a>0?s/a*100:0,c=n>75,y=n>90;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:o.space[3],padding:`${o.space[3]} ${o.space[4]}`,borderRadius:o.radius.lg,backgroundColor:y?o.errorLight:c?o.warningLight:o.cardBgHover},children:[e.jsx(re,{style:{width:o.iconSize.lg,height:o.iconSize.lg,color:y?o.error:c?o.warning:o.textSecondary}}),e.jsx("span",{style:{fontSize:o.fontSize.xl,fontWeight:o.fontWeight.semibold,fontFamily:"monospace",color:y?o.error:c?o.warning:o.textSecondary},children:Ae(s)}),e.jsxs("span",{style:{fontSize:o.fontSize.base,color:o.textMuted},children:["/ ",Ae(a)]})]})},tt=({onRecordingComplete:s,timeLimit:a,disabled:m,deviceId:o,themedGradient:n,primaryAccent:c,isSubmitting:y,labels:w,onOpenSettings:j,branding:h,isMobile:d})=>{const[r,l]=u.useState("idle"),[R,v]=u.useState(0),[z,M]=u.useState(0),[F,C]=u.useState(!1),x=u.useRef(null),t=u.useRef([]),i=u.useRef(null),b=u.useRef(null),B=u.useRef(null),W=u.useRef(null),E=u.useRef(null),$=u.useRef(0),D=u.useRef(!1);u.useEffect(()=>()=>{Y()},[]),u.useEffect(()=>{r==="recording"&&R>=a&&k()},[R,a,r]);const Y=()=>{i.current&&clearInterval(i.current),W.current&&cancelAnimationFrame(W.current),b.current&&(b.current.close(),b.current=null),E.current&&(E.current.getTracks().forEach(f=>f.stop()),E.current=null)},X=async()=>{try{C(!1),t.current=[],v(0);let f;const _={audio:o?{deviceId:{exact:o}}:!0};try{f=await navigator.mediaDevices.getUserMedia(_)}catch(L){throw console.error("[SIMULATOR] Selected device unavailable:",L),L.name==="OverconstrainedError"||L.name==="NotFoundError"?(C(!1),new Error("Das ausgewÃ¤hlte Mikrofon ist nicht verfÃ¼gbar. Bitte wÃ¤hle ein anderes Mikrofon in den Einstellungen.")):L}E.current=f,b.current=new(window.AudioContext||window.webkitAudioContext),B.current=b.current.createAnalyser(),b.current.createMediaStreamSource(f).connect(B.current),B.current.fftSize=256;const Q=()=>{if(B.current&&D.current){const L=new Uint8Array(B.current.frequencyBinCount);B.current.getByteFrequencyData(L);const be=L.reduce((J,je)=>J+je)/L.length;M(be/255)}W.current=requestAnimationFrame(Q)};D.current=!0,Q();const U=MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":MediaRecorder.isTypeSupported("audio/webm")?"audio/webm":"audio/mp4";x.current=new MediaRecorder(f,{mimeType:U}),x.current.ondataavailable=L=>{L.data.size>0&&t.current.push(L.data)},x.current.onstop=()=>{const L=new Blob(t.current,{type:U});s(L,$.current)},x.current.start(1e3),l("recording"),i.current=setInterval(()=>{v(L=>L+1)},1e3)}catch(f){console.error("Error starting recording:",f),(f.name==="NotAllowedError"||f.name==="PermissionDeniedError")&&C(!0)}},g=()=>{x.current&&x.current.state==="recording"&&(x.current.pause(),l("paused"),D.current=!1,i.current&&(clearInterval(i.current),i.current=null),M(0))},S=()=>{x.current&&x.current.state==="paused"&&(x.current.resume(),l("recording"),D.current=!0,i.current=setInterval(()=>{v(f=>f+1)},1e3))},k=()=>{$.current=R,D.current=!1,i.current&&(clearInterval(i.current),i.current=null),W.current&&(cancelAnimationFrame(W.current),W.current=null),b.current&&(b.current.close(),b.current=null),x.current&&x.current.state!=="inactive"&&x.current.stop(),E.current&&(E.current.getTracks().forEach(f=>f.stop()),E.current=null),l("idle"),M(0),v(0)},A=()=>{r==="idle"?X():r==="recording"?g():r==="paused"&&S()};return F?e.jsxs("div",{style:{padding:"24px",borderRadius:"16px",backgroundColor:h.errorLight,textAlign:"center"},children:[e.jsx(Nt,{style:{width:"48px",height:"48px",color:h.error,marginBottom:"12px"}}),e.jsx("p",{style:{color:h.error,fontWeight:600,margin:0},children:"Mikrofonzugriff verweigert"}),e.jsx("p",{style:{color:h.textSecondary,fontSize:"14px",marginTop:"8px"},children:"Bitte erlaube den Zugriff auf dein Mikrofon in den Browser-Einstellungen."})]}):e.jsxs("div",{style:{padding:"24px",borderRadius:"16px",backgroundColor:h.cardBg,border:`1px solid ${h.borderColor}`,position:"relative"},children:[d&&e.jsx("button",{onClick:j,style:{position:"absolute",top:"12px",right:"12px",padding:"10px",borderRadius:"10px",background:h.cardBgHover,border:`1px solid ${h.borderColor}`,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ve,{size:18,color:h.textMuted})}),e.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"24px"},children:e.jsx(sr,{seconds:R,maxSeconds:a,isRecording:r==="recording",branding:h})}),r==="recording"&&e.jsx("div",{style:{marginBottom:"24px"},children:e.jsx(Ft,{audioLevel:z,isActive:!0,variant:"bars",size:"sm",accentColor:c})}),r==="paused"&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"8px",height:"60px",marginBottom:"24px",color:h.warning},children:[e.jsx(K,{size:24}),e.jsx("span",{style:{fontSize:"16px",fontWeight:600},children:"Aufnahme pausiert"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"12px"},children:[!d&&e.jsx("button",{onClick:j,style:{padding:"14px",borderRadius:"12px",background:h.cardBgHover,border:`1px solid ${h.borderColor}`,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ve,{size:20,color:h.textMuted})}),e.jsxs("button",{onClick:A,disabled:m||y,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",padding:d?"14px 20px":"14px 28px",borderRadius:"12px",border:"none",flex:d?1:"none",background:r==="idle"?m||y?h.borderColor:h.error:r==="recording"?h.warning:h.success,color:"white",fontSize:d?"15px":"16px",fontWeight:600,cursor:m||y?"not-allowed":"pointer",boxShadow:m||y?"none":"0 4px 14px rgba(0, 0, 0, 0.2)"},children:[r==="idle"&&e.jsxs(e.Fragment,{children:[e.jsx(K,{style:{width:"20px",height:"20px"}}),"Aufnahme starten"]}),r==="recording"&&e.jsxs(e.Fragment,{children:[e.jsx(Ht,{style:{width:"18px",height:"18px"}}),"Pausieren"]}),r==="paused"&&e.jsxs(e.Fragment,{children:[e.jsx(Ze,{style:{width:"18px",height:"18px"}}),"Fortsetzen"]})]}),(r==="recording"||r==="paused")&&e.jsxs("button",{onClick:k,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:d?"14px 16px":"14px 24px",borderRadius:"12px",border:"none",flex:d?1:"none",backgroundColor:h.cardBgHover,color:h.textMain,fontSize:d?"15px":"16px",fontWeight:600,cursor:"pointer"},children:[e.jsx(Se,{style:{width:"18px",height:"18px",color:h.success}}),w?.submitButton||"Antwort abgeben"]})]}),r==="idle"&&!y&&e.jsx("p",{style:{textAlign:"center",marginTop:"16px",color:h.textMuted,fontSize:"14px"},children:w?.submitHint||"Klicke auf den Button, um deine Antwort aufzunehmen"}),y&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"24px"},children:[e.jsx(He,{style:{width:"32px",height:"32px",color:c,animation:"spin 1s linear infinite"}}),e.jsx("p",{style:{marginTop:"12px",color:h.textSecondary,fontSize:"14px"},children:w?.analyzing||"Antwort wird analysiert..."})]}),e.jsx("style",{children:`
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.8; } }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
      `})]})},nr=({scenario:s,variables:a,questions:m,onStart:o,onBack:n,selectedMicrophoneId:c,onMicrophoneChange:y,onMicrophoneTest:w,themedGradient:j,primaryAccent:h,primaryAccentLight:d,isLoading:r,branding:l})=>{const R=s?.mode==="SIMULATION",v=R?"Situationen":"Fragen",z=R?"Zeit pro Situation":"Zeit pro Frage",M=[{icon:ae,title:"Strukturiert antworten",description:"Nutze die STAR-Methode (Situation, Task, Action, Result) fÃ¼r Beispiele aus deiner Erfahrung."},{icon:re,title:"Zeit im Blick behalten",description:`Du hast ${Math.round((s.time_limit_per_question||120)/60)} Minuten pro ${R?"Situation":"Frage"}. ${R?"Reagiere":"Antworte"} prÃ¤zise, aber ausfÃ¼hrlich genug.`},{icon:K,title:"Klar und deutlich sprechen",description:"Sprich in normalem Tempo. Kurze Pausen zum Nachdenken sind vÃ¶llig in Ordnung."},{icon:fe,title:"Konkrete Beispiele nennen",description:"Belege deine Aussagen mit konkreten Beispielen und Zahlen wo mÃ¶glich."}],F=s.tips&&Array.isArray(s.tips)&&s.tips.length>0?s.tips.map((i,b)=>typeof i=="string"?{icon:N,title:`Tipp ${b+1}`,description:i}:{icon:et[i.icon]||et[i.icon?.toLowerCase()]||N,title:i.title||`Tipp ${b+1}`,description:i.text||i.description||""}):M,C=Ne.useMemo(()=>{if(!s?.input_configuration)return{};try{const i=typeof s.input_configuration=="string"?JSON.parse(s.input_configuration):s.input_configuration;return Array.isArray(i)?i.reduce((b,B)=>(B.key&&B.label&&(b[B.key]=B.label),b),{}):{}}catch{return{}}},[s?.input_configuration]),x=a?Object.entries(a).filter(([i,b])=>b&&b.trim&&b.trim()!=="").map(([i,b])=>({label:C[i]||i.replace(/_/g," ").replace(/\b\w/g,B=>B.toUpperCase()),value:b})):[],t=i=>{if(!i||!a)return i;let b=i;return Object.entries(a).forEach(([B,W])=>{W&&(b=b.replace(new RegExp(`\\$\\{${B}\\}`,"g"),W),b=b.replace(new RegExp(`\\{${B}\\}`,"g"),W))}),b};return e.jsxs("div",{style:{padding:"24px",maxWidth:"800px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("button",{onClick:n,style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"8px 12px",marginBottom:"16px",border:"none",background:"transparent",color:l.textSecondary,fontSize:"14px",cursor:"pointer",borderRadius:"8px"},children:[e.jsx(Te,{style:{width:"18px",height:"18px"}}),"ZurÃ¼ck"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",background:j,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(N,{style:{width:"32px",height:"32px",color:"white"}})}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"28px",fontWeight:700,color:l.textMain,margin:0},children:"Vorbereitung"}),e.jsxs("p",{style:{fontSize:"16px",color:l.textSecondary,margin:"4px 0 0 0"},children:[s.title,m.length>0?` â€¢ ${m.length} ${v}`:""]})]})]})]}),s.long_description&&e.jsx("div",{style:{padding:"20px 24px",borderRadius:"16px",backgroundColor:l.cardBg,border:`1px solid ${l.borderColor}`,marginBottom:"24px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"14px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:j,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(me,{style:{width:"20px",height:"20px",color:"white"}})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:l.textMain,margin:"0 0 8px 0"},children:"Deine Aufgabe"}),e.jsx("p",{style:{fontSize:"15px",lineHeight:"1.6",color:l.textSecondary,margin:0,whiteSpace:"pre-wrap"},children:t(s.long_description?.replace(/\/n/g,`
`))})]})]})}),x.length>0&&e.jsxs("div",{style:{padding:"20px",borderRadius:"16px",backgroundColor:d,marginBottom:"24px"},children:[e.jsx("h3",{style:{fontSize:"14px",fontWeight:600,color:h,margin:"0 0 12px 0",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Dein Profil"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"16px"},children:x.map((i,b)=>e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:l.textMuted,display:"block"},children:i.label}),e.jsx("span",{style:{fontSize:"15px",fontWeight:500,color:l.textMain},children:i.value})]},b))})]}),e.jsxs("div",{style:{padding:"24px",borderRadius:"16px",backgroundColor:l.cardBg,border:`1px solid ${l.borderColor}`,marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"16px"},children:[e.jsx(K,{style:{width:"22px",height:"22px",color:h}}),e.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:l.textMain,margin:0},children:"Mikrofon testen"})]}),e.jsx(lt,{selectedDeviceId:c,onDeviceChange:y,onTestClick:w})]}),e.jsxs("button",{onClick:o,disabled:r,style:{width:"100%",padding:"18px 28px",borderRadius:"14px",border:"none",background:r?l.borderColor:j,color:"white",fontSize:"18px",fontWeight:600,cursor:r?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",boxShadow:r?"none":`0 4px 12px ${h}4d`,marginBottom:"24px",opacity:r?.7:1},children:[e.jsx(Ze,{style:{width:"24px",height:"24px"}}),"GesprÃ¤ch starten"]}),e.jsxs("div",{style:{padding:"24px",borderRadius:"16px",backgroundColor:l.cardBg,border:`1px solid ${l.borderColor}`,marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"20px"},children:[e.jsx(N,{style:{width:"22px",height:"22px",color:l.warning}}),e.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:l.textMain,margin:0},children:"Tipps fÃ¼r dein GesprÃ¤ch"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:F.map((i,b)=>e.jsxs("div",{style:{display:"flex",gap:"16px",padding:"16px",borderRadius:"12px",backgroundColor:l.cardBgHover},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",backgroundColor:d,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(i.icon,{style:{width:"22px",height:"22px",color:h}})}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"15px",fontWeight:600,color:l.textMain,margin:"0 0 4px 0"},children:i.title}),e.jsx("p",{style:{fontSize:"14px",color:l.textSecondary,margin:0,lineHeight:1.5},children:i.description})]})]},b))})]}),e.jsxs("div",{style:{padding:"16px 20px",borderRadius:"12px",backgroundColor:l.cardBgHover,display:"flex",gap:"24px",flexWrap:"wrap"},children:[m.length>0&&e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:l.textMuted,display:"block"},children:v}),e.jsx("span",{style:{fontSize:"18px",fontWeight:600,color:l.textMain},children:m.length})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:l.textMuted,display:"block"},children:z}),e.jsxs("span",{style:{fontSize:"18px",fontWeight:600,color:l.textMain},children:[Math.round((s.time_limit_per_question||120)/60)," Min"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:l.textMuted,display:"block"},children:"Wiederholen"}),e.jsx("span",{style:{fontSize:"18px",fontWeight:600,color:l.textMain},children:s.allow_retry?"Erlaubt":"Nicht erlaubt"})]})]})]})},or=({session:s,questions:a,scenario:m,variables:o,preloadedQuestions:n,onSessionCreated:c,onComplete:y,onExit:w,startFromQuestion:j=0,initialMicrophoneId:h})=>{const d=Wt(),[r,l]=u.useState(s),[R,v]=u.useState(a||[]),[z,M]=u.useState(!1),[F,C]=u.useState(null),{demoCode:x}=Be(),t=m?.mode==="SIMULATION",i={questionLabel:t?"Situation / Aussage des GegenÃ¼bers:":"Interviewfrage:",questionFallback:t?"Situation":"Frage",questionLoading:t?"Situation wird geladen...":"Frage wird geladen...",answerPlaceholder:t?"Deine Reaktion...":"Deine Antwort...",submitButton:t?"Reaktion abgeben":"Antwort abgeben",submitHint:t?"Klicke auf den Button, um deine Reaktion aufzunehmen":"Klicke auf den Button, um deine Antwort aufzunehmen",analyzing:t?"Reaktion wird analysiert...":"Antwort wird analysiert...",questionCounter:(I,O)=>t?`Situation ${I} von ${O}`:`Frage ${I} von ${O}`,questionsCount:I=>t?`${I} Situationen`:`${I} Fragen`,answeredCount:(I,O)=>t?`${I} von ${O} Situationen`:`${I} von ${O} Fragen`,tipsLabel:t?"Tipps fÃ¼r diese Situation":"Tipps fÃ¼r diese Frage",nextButton:t?"NÃ¤chste Situation":"NÃ¤chste Frage",timePerQuestion:t?"Zeit pro Situation":"Zeit pro Frage",questionsLabel:t?"Situationen":"Fragen",recommendedTime:t?"Empfohlene Reaktionszeit":"Empfohlene Antwortzeit"},b=j>0;n&&n.length>0;const B=b?Array.from({length:j},(I,O)=>O):[],[W,E]=u.useState(b?"interview":"preparation"),[$,D]=u.useState(j||r?.current_question_index||0),[Y,X]=u.useState(null),[g,S]=u.useState(!1),[k,A]=u.useState(!1),[f,_]=u.useState(null),[H,Q]=u.useState([]),[U,L]=u.useState(B),be="karriereheld_selected_microphone",[J,je]=u.useState(()=>{if(h)return h;try{return localStorage.getItem(be)||null}catch{return null}}),[ut,Ke]=u.useState(!1),[xt,Ee]=u.useState(!1);u.useEffect(()=>{if(J)try{localStorage.setItem(be,J)}catch{}},[J]);const[ht,we]=u.useState(!1),[gt,ke]=u.useState(!1),[se,Qe]=u.useState(!1),[xe,ve]=u.useState(null),[G,Ue]=u.useState(!1),{branding:ze}=Be(),T=ye(),ft=ze?.["--header-gradient"]||pe["--header-gradient"],ne=ze?.["--button-gradient"]||ft,le=ze?.["--primary-accent"]||pe["--primary-accent"],mt=ze?.["--primary-accent-light"]||pe["--primary-accent-light"],q=R[$],ee=$===R.length-1,he=$===0,Je=async(I,O)=>{if(O<2){_("Die Aufnahme ist zu kurz. Bitte sprechen Sie mindestens 2 Sekunden.");return}if(I.size<5e3){console.warn("[SimulatorSession] Audio too small:",I.size,"bytes"),_("Die Aufnahme enthÃ¤lt keine verwertbaren Audiodaten. Bitte sprechen Sie wÃ¤hrend der Aufnahme und versuchen Sie es erneut.");return}A(!0),_(null);try{const V=await te.submitSimulatorAnswer(r.id,I,$,q.question,q.category,O);if(!V.success)throw new Error(V.message||"Fehler beim Analysieren der Antwort");if(X(V.data),S(!0),Q(Z=>[...Z.filter(oe=>oe.questionIndex!==$),{questionIndex:$,feedback:V.data}]),L(Z=>Z.includes($)?Z:[...Z,$]),t&&!G){Qe(!0),ve(null);const Z=U.includes($);try{const oe=await te.generateNextTurn(r.id);if(oe.success){const ce=oe.data.next_question;oe.data.is_finished?(ve(ce),v(Z?ie=>{const ge=[...ie];return ge[$+1]=ce,ge.slice(0,$+2)}:ie=>[...ie,ce]),Ue(!0)):(ve(ce),Z?(v(ie=>{const ge=[...ie];return ge[$+1]=ce,ge.slice(0,$+2)}),Ue(!1)):v(ie=>[...ie,ce]))}}catch(oe){console.error("Error generating next turn:",oe)}finally{Qe(!1)}}}catch(V){console.error("Error submitting answer:",V),_(V.message||"Ein Fehler ist aufgetreten")}finally{A(!1)}},We=()=>{X(null),S(!1),_(null)},Fe=()=>{if(X(null),S(!1),_(null),t){if(xe){D(I=>I+1),ve(null);return}if(G){Ce();return}}else ee||D(I=>I+1)},yt=()=>{X(null),S(!1),_(null),he||D(I=>I-1)},St=()=>{we(!0)},Ce=async()=>{we(!1);try{const I=await te.completeSimulatorSession(r.id);I.success?y(I.data):y({session:{...r,status:"completed"}})}catch(I){console.error("Error completing session:",I),y({session:{...r,status:"completed"}})}},bt=()=>{ke(!0)},jt=()=>{ke(!1),w()},wt=async()=>{if(r&&R.length>0){E("interview");return}M(!0),C(null);try{const I=await te.createSimulatorSession({scenario_id:m.id,variables:o,demo_code:x||null,questions:n||null});if(!I.success)throw new Error(I.message||"Fehler beim Erstellen der Session");const O=I.data.session;let V;if(n&&n.length>0)V=n,await te.updateSimulatorSessionQuestions(O.id,V);else{const Z=await te.generateSimulatorQuestions(O.id);if(!Z.success)throw new Error(Z.message||"Fehler beim Generieren der Fragen");V=Z.data.questions}l({...O,questions_json:V}),v(V),c&&c({session:{...O,questions_json:V},questions:V,selectedMicrophoneId:J}),E("interview")}catch(I){console.error("Error creating session:",I),C(I.message||"Ein Fehler ist aufgetreten")}finally{M(!1)}};return W==="preparation"?e.jsxs(e.Fragment,{children:[e.jsx(nr,{scenario:m,variables:o,questions:R,onStart:wt,onBack:w,selectedMicrophoneId:J,onMicrophoneChange:je,onMicrophoneTest:()=>Ke(!0),themedGradient:ne,primaryAccent:le,primaryAccentLight:mt,isLoading:z,branding:T}),e.jsx(at,{isOpen:ut,onClose:()=>Ke(!1),deviceId:J}),F&&e.jsx("div",{style:{position:"fixed",bottom:"24px",left:"50%",transform:"translateX(-50%)",padding:"12px 24px",borderRadius:"12px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",fontSize:"14px",fontWeight:500,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",zIndex:100},children:F}),e.jsx(pt,{isLoading:z,message:t?"Situationen werden generiert...":"Fragen werden generiert...",subMessage:"Die KI erstellt personalisierte Inhalte basierend auf deinen Angaben."})]}):e.jsxs("div",{style:{padding:d?"16px":"24px",maxWidth:"1000px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",justifyContent:"space-between",alignItems:d?"stretch":"center",gap:d?"12px":"0",marginBottom:"24px"},children:[e.jsx("h1",{style:{fontSize:d?"18px":"20px",fontWeight:600,color:"#0f172a",margin:0},children:m?.title}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",justifyContent:d?"space-between":"flex-end"},children:[!(g&&(t&&G&&!xe||!t&&ee))&&e.jsxs("button",{onClick:St,style:{padding:d?"10px 14px":"8px 16px",borderRadius:"8px",background:"#22c55e",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",color:"white",fontSize:"14px",fontWeight:600,boxShadow:"0 2px 8px rgba(34, 197, 94, 0.3)",flex:d?1:"none",justifyContent:"center"},children:[e.jsx(Ye,{size:16}),d?"Beenden":"Training beenden"]}),e.jsxs("button",{onClick:bt,style:{padding:d?"10px 14px":"8px 16px",borderRadius:"8px",background:"#f1f5f9",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",color:"#64748b",fontSize:"14px",flex:d?1:"none",justifyContent:"center"},children:[e.jsx(Bt,{size:16}),"Abbrechen"]})]})]}),ht&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>we(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",maxWidth:"420px",width:"90%",boxShadow:"0 20px 50px rgba(0, 0, 0, 0.2)"},onClick:I=>I.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#dcfce7",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ye,{size:24,color:"#22c55e"})}),e.jsx("h3",{style:{fontSize:"18px",fontWeight:600,color:"#0f172a",margin:0},children:"Training beenden?"})]}),U.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{style:{fontSize:"14px",color:"#64748b",lineHeight:1.6,marginBottom:"8px"},children:["Du hast ",e.jsx("strong",{children:i.answeredCount(U.length,R.length)})," beantwortet."]}),e.jsxs("p",{style:{fontSize:"14px",color:"#64748b",lineHeight:1.6,marginBottom:"24px"},children:["MÃ¶chtest du das Training jetzt mit den bisherigen Antworten abschlieÃŸen oder weitere ",i.questionsLabel," beantworten?"]})]}):e.jsxs("p",{style:{fontSize:"14px",color:"#64748b",lineHeight:1.6,marginBottom:"24px"},children:["Du hast noch keine ",i.questionsLabel," beantwortet. MÃ¶chtest du das Training wirklich beenden?"]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>we(!1),style:{padding:"10px 20px",borderRadius:"10px",border:"1px solid #e2e8f0",background:"white",color:"#64748b",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"Weiter trainieren"}),e.jsx("button",{onClick:Ce,style:{padding:"10px 20px",borderRadius:"10px",border:"none",background:"#22c55e",color:"white",fontSize:"14px",fontWeight:600,cursor:"pointer",boxShadow:"0 2px 8px rgba(34, 197, 94, 0.3)"},children:"Training beenden"})]})]})}),gt&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>ke(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",maxWidth:"420px",width:"90%",boxShadow:"0 20px 50px rgba(0, 0, 0, 0.2)"},onClick:I=>I.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ue,{size:24,color:"#ef4444"})}),e.jsx("h3",{style:{fontSize:"18px",fontWeight:600,color:"#0f172a",margin:0},children:"Training abbrechen?"})]}),e.jsxs("p",{style:{fontSize:"14px",color:"#64748b",lineHeight:1.6,marginBottom:"24px"},children:[e.jsx("strong",{children:"Achtung:"})," Wenn du das Training abbrichst, werden alle deine bisherigen Antworten",U.length>0?` (${U.length} ${i.questionsLabel})`:""," ",e.jsx("strong",{children:"nicht gespeichert"})," und gehen verloren."]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>ke(!1),style:{padding:"10px 20px",borderRadius:"10px",border:"1px solid #e2e8f0",background:"white",color:"#64748b",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"ZurÃ¼ck"}),e.jsx("button",{onClick:jt,style:{padding:"10px 20px",borderRadius:"10px",border:"none",background:"#ef4444",color:"white",fontSize:"14px",fontWeight:600,cursor:"pointer",boxShadow:"0 2px 8px rgba(239, 68, 68, 0.3)"},children:"Abbrechen"})]})]})}),!g&&!t&&e.jsxs("div",{style:{display:"flex",gap:d?"8px":"12px",justifyContent:"center",marginBottom:"16px"},children:[e.jsxs("button",{onClick:yt,disabled:he,style:{display:"flex",alignItems:"center",gap:"6px",padding:d?"10px 14px":"12px 20px",borderRadius:"10px",border:`2px solid ${T.borderColor}`,backgroundColor:T.cardBg,color:he?T.textMuted:T.textSecondary,fontSize:d?"13px":"14px",fontWeight:600,cursor:he?"not-allowed":"pointer",opacity:he?.5:1,flex:d?1:"none",justifyContent:"center"},children:[e.jsx(Ct,{size:16}),"ZurÃ¼ck"]}),e.jsxs("button",{onClick:Fe,disabled:ee,style:{display:"flex",alignItems:"center",gap:"6px",padding:d?"10px 14px":"12px 20px",borderRadius:"10px",border:`2px solid ${T.borderColor}`,backgroundColor:T.cardBg,color:ee?T.textMuted:T.textSecondary,fontSize:d?"13px":"14px",fontWeight:600,cursor:ee?"not-allowed":"pointer",opacity:ee?.5:1,flex:d?1:"none",justifyContent:"center"},children:[d?"Ãœberspringen":"Frage Ã¼berspringen",e.jsx(qe,{size:16})]})]}),e.jsx(Mt,{current:$,total:R.length,answeredQuestions:U,primaryAccent:le,b:T,labels:i}),g?e.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"16px",justifyContent:"flex-end"},children:[m.allow_retry&&e.jsxs("button",{onClick:We,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",borderRadius:"10px",border:`2px solid ${T.borderColor}`,backgroundColor:T.cardBg,color:T.textSecondary,fontSize:"14px",fontWeight:600,cursor:"pointer"},children:[e.jsx(Ge,{size:16}),"Nochmal versuchen"]}),e.jsxs("button",{onClick:t?G&&!xe?Ce:Fe:ee?Ce:Fe,disabled:t&&se&&!G,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",borderRadius:"10px",border:"none",background:t&&se&&!G?T.textMuted:ne,color:"white",fontSize:"14px",fontWeight:600,cursor:t&&se&&!G?"wait":"pointer",boxShadow:t&&se&&!G?"none":`0 4px 12px ${le}4d`,opacity:t&&se&&!G?.7:1},children:[t&&se&&!G?e.jsxs(e.Fragment,{children:[e.jsx(He,{size:16,className:"animate-spin",style:{animation:"spin 1s linear infinite"}}),"GesprÃ¤chspartner tippt..."]}):t?G&&!xe?"Training abschlieÃŸen":i.nextButton:ee?"Training abschlieÃŸen":i.nextButton,!se&&!(t?G&&!xe:ee)&&e.jsx(qe,{size:16})]})]}),e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"20px",border:"1px solid #e2e8f0",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:ne,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"13px",fontWeight:600},children:$+1}),e.jsx("span",{style:{fontSize:"14px",color:"#64748b"},children:q?.category||i.questionFallback})]}),e.jsx("p",{style:{fontSize:"16px",fontWeight:500,color:"#0f172a",margin:0,lineHeight:1.5},children:q?.question||i.questionLoading})]}),e.jsx(tr,{transcript:Y.transcript,feedback:Y.feedback,audioMetrics:Y.audio_analysis,audioUrl:Y.audio_url,hideButtons:!0})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:d?"16px":"24px"},children:[d?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"16px",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"26px",height:"26px",borderRadius:"50%",background:ne,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"12px",fontWeight:600,flexShrink:0},children:$+1}),e.jsx("span",{style:{fontSize:"13px",color:"#64748b"},children:q?.category||i.questionFallback})]}),e.jsx("p",{style:{fontSize:"15px",fontWeight:600,color:"#0f172a",lineHeight:1.5,margin:0},children:q?.question||i.questionLoading}),q?.estimated_answer_time&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:"#64748b",fontSize:"13px",marginTop:"12px"},children:[e.jsx(re,{size:14}),i.recommendedTime,": ca. ",Math.round(q.estimated_answer_time/60)," Min"]})]}),e.jsx(tt,{onRecordingComplete:Je,timeLimit:m.time_limit_per_question||120,disabled:!1,deviceId:J,themedGradient:ne,primaryAccent:le,isSubmitting:k,labels:i,onOpenSettings:()=>Ee(!0),branding:T,isMobile:!0}),f&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"16px",borderRadius:"12px",backgroundColor:T.errorLight},children:[e.jsx(ue,{style:{width:"24px",height:"24px",color:T.error}}),e.jsx("p",{style:{marginTop:"8px",color:T.error,fontWeight:500,fontSize:"14px",textAlign:"center"},children:f}),e.jsx("button",{onClick:We,style:{marginTop:"12px",padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:T.error,color:"white",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"Erneut versuchen"})]})]}):e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[e.jsxs("div",{children:[e.jsx(tt,{onRecordingComplete:Je,timeLimit:m.time_limit_per_question||120,disabled:!1,deviceId:J,themedGradient:ne,primaryAccent:le,isSubmitting:k,labels:i,onOpenSettings:()=>Ee(!0),branding:T,isMobile:!1}),f&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",marginTop:"16px",borderRadius:"12px",backgroundColor:T.errorLight},children:[e.jsx(ue,{style:{width:"24px",height:"24px",color:T.error}}),e.jsx("p",{style:{marginTop:"8px",color:T.error,fontWeight:500,fontSize:"14px",textAlign:"center"},children:f}),e.jsx("button",{onClick:We,style:{marginTop:"12px",padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:T.error,color:"white",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"Erneut versuchen"})]})]}),e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"24px",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:ne,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"13px",fontWeight:600},children:$+1}),e.jsx("span",{style:{fontSize:"14px",color:"#64748b"},children:q?.category||i.questionFallback})]}),e.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:"#0f172a",lineHeight:1.5,marginBottom:"16px"},children:q?.question||i.questionLoading}),q?.estimated_answer_time&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:"#64748b",fontSize:"14px"},children:[e.jsx(re,{size:16}),i.recommendedTime,": ca. ",Math.round(q.estimated_answer_time/60)," Min"]})]})]}),q?.tips&&q.tips.length>0&&e.jsx(rr,{tips:q.tips,primaryAccent:le,tipsLabel:i.tipsLabel,branding:T})]}),e.jsx(Vt,{isOpen:xt,onClose:()=>Ee(!1),mode:"audio",selectedMicrophoneId:J,onMicrophoneChange:je})]})},Ie=({score:s,label:a,primaryAccent:m,b:o})=>{const n=s!=null?s*10:null,c=Rt(n,m);return e.jsxs("div",{style:{textAlign:"center",padding:o.space[4],backgroundColor:p.slate[100],borderRadius:o.radius.lg},children:[e.jsx("div",{style:{fontSize:o.fontSize["4xl"],fontWeight:700,color:c,marginBottom:"4px"},children:n!=null?Math.round(n):"-"}),e.jsx("div",{style:{fontSize:o.fontSize.sm,color:p.slate[600]},children:a})]})},De=({icon:s,value:a,label:m,primaryAccent:o,b:n})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:n.space[3],padding:`${n.space[3]} ${n.space[4]}`,backgroundColor:p.slate[100],borderRadius:n.radius.md},children:[e.jsx(s,{style:{width:"20px",height:"20px",color:o}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:n.fontSize.xl,fontWeight:600,color:p.slate[900]},children:a}),e.jsx("div",{style:{fontSize:n.fontSize.xs,color:p.slate[500]},children:m})]})]}),ir=({session:s,scenario:a,onBackToDashboard:m,onStartNew:o})=>{const n=ye(),c=s.summary_feedback||s.summary_feedback_json,y=c?typeof c=="string"?JSON.parse(c):c:null,w=s.overall_score||y?.overall_score||0,j=w<=10?w*10:w,d=(r=>r>=90?{text:"Ausgezeichnet!",emoji:"ðŸŒŸ"}:r>=80?{text:"Sehr gut!",emoji:"ðŸŽ‰"}:r>=70?{text:"Gut!",emoji:"ðŸ‘"}:r>=60?{text:"Solide Leistung",emoji:"ðŸ‘"}:r>=50?{text:"AusbaufÃ¤hig",emoji:"ðŸ’ª"}:{text:"Weiter Ã¼ben!",emoji:"ðŸ“š"})(j);return e.jsxs("div",{style:{padding:n.space[6],maxWidth:"640px",margin:"0 auto"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:n.headerGradient,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",boxShadow:`0 8px 24px ${n.primaryAccent}4d`},children:e.jsx(dt,{style:{width:"40px",height:"40px",color:"white"}})}),e.jsxs("h1",{style:{fontSize:n.fontSize["5xl"],fontWeight:700,color:p.slate[900],margin:"0 0 8px 0"},children:["Training abgeschlossen! ",d.emoji]}),e.jsxs("p",{style:{fontSize:n.fontSize.lg,color:p.slate[600],margin:0},children:[a?.title||"Skill Training"," - ",d.text]})]}),e.jsxs("div",{style:{padding:n.space[6],borderRadius:n.radius.xl,backgroundColor:"white",border:`1px solid ${p.slate[200]}`,textAlign:"center",marginBottom:n.space[6]},children:[e.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",border:`6px solid ${n.primaryAccent}`,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",backgroundColor:n.primaryAccentLight},children:e.jsx("span",{style:{fontSize:n.fontSize["5xl"],fontWeight:700,color:n.primaryAccent},children:j?Math.round(j):"-"})}),e.jsx("p",{style:{fontSize:n.fontSize.base,color:p.slate[500],margin:0},children:j?"Gesamtbewertung (von 100)":"Keine Fragen beantwortet"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:n.space[3],marginBottom:n.space[6]},children:[e.jsx(De,{icon:Se,value:`${s.completed_questions??0}/${s.total_questions||"-"}`,label:"Fragen",primaryAccent:n.primaryAccent,b:n}),e.jsx(De,{icon:ae,value:y?.average_content_score?Math.round(y.average_content_score*10):"-",label:"Ã˜ Inhalt",primaryAccent:n.primaryAccent,b:n}),e.jsx(De,{icon:Pt,value:y?.average_delivery_score?Math.round(y.average_delivery_score*10):"-",label:"Ã˜ PrÃ¤sentation",primaryAccent:n.primaryAccent,b:n})]}),y?.scores&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:n.space[3],marginBottom:n.space[6]},children:[e.jsx(Ie,{score:y.scores.content,label:"Inhalt",primaryAccent:n.primaryAccent,b:n}),e.jsx(Ie,{score:y.scores.structure,label:"Struktur",primaryAccent:n.primaryAccent,b:n}),e.jsx(Ie,{score:y.scores.relevance,label:"Relevanz",primaryAccent:n.primaryAccent,b:n}),e.jsx(Ie,{score:y.scores.delivery,label:"PrÃ¤sentation",primaryAccent:n.primaryAccent,b:n})]}),y?.summary&&e.jsxs("div",{style:{padding:n.space[5],borderRadius:n.radius.lg,backgroundColor:p.slate[100],marginBottom:n.space[6]},children:[e.jsx("h3",{style:{fontSize:n.fontSize.base,fontWeight:600,color:p.slate[700],margin:"0 0 8px 0"},children:"Zusammenfassung"}),e.jsx("p",{style:{fontSize:n.fontSize.base,color:p.slate[600],margin:0,lineHeight:1.6},children:y.summary})]}),y?.key_takeaways?.length>0&&e.jsxs("div",{style:{padding:n.space[5],borderRadius:n.radius.lg,backgroundColor:p.green[100],marginBottom:n.space[6]},children:[e.jsx("h3",{style:{fontSize:n.fontSize.base,fontWeight:600,color:p.green[500],margin:"0 0 12px 0"},children:"ðŸ’¡ Die wichtigsten Erkenntnisse"}),e.jsx("ul",{style:{margin:0,paddingLeft:n.space[5],color:p.slate[700],fontSize:n.fontSize.base,lineHeight:1.6},children:y.key_takeaways.map((r,l)=>e.jsx("li",{style:{marginBottom:"8px"},children:r},l))})]}),e.jsxs("div",{style:{display:"flex",gap:n.space[3],marginTop:"32px"},children:[e.jsxs("button",{onClick:m,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:n.space[2],padding:`${n.space[3.5]} ${n.space[6]}`,borderRadius:n.radius.lg,border:`2px solid ${p.slate[300]}`,backgroundColor:"white",color:p.slate[700],fontSize:n.fontSize.base,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:r=>{r.target.style.borderColor=n.primaryAccent,r.target.style.color=n.primaryAccent},onMouseLeave:r=>{r.target.style.borderColor=p.slate[300],r.target.style.color=p.slate[700]},children:[e.jsx(Te,{style:{width:"18px",height:"18px"}}),"Zur Ãœbersicht"]}),e.jsxs("button",{onClick:o,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:n.space[2],padding:`${n.space[3.5]} ${n.space[6]}`,borderRadius:n.radius.lg,border:"none",background:n.buttonGradient,color:"white",fontSize:n.fontSize.base,fontWeight:600,cursor:"pointer",boxShadow:`0 4px 12px ${n.primaryAccent}4d`,transition:"all 0.2s"},onMouseEnter:r=>{r.target.style.transform="translateY(-2px)",r.target.style.boxShadow=`0 6px 16px ${n.primaryAccent}66`},onMouseLeave:r=>{r.target.style.transform="none",r.target.style.boxShadow=`0 4px 12px ${n.primaryAccent}4d`},children:[e.jsx(Ge,{style:{width:"18px",height:"18px"}}),"Nochmal Ã¼ben"]})]})]})},P={DASHBOARD:"dashboard",VARIABLES:"variables",SESSION:"session",COMPLETE:"complete"},Jr=({isAuthenticated:s,requireAuth:a,setPendingAction:m,pendingContinueSession:o,clearPendingContinueSession:n,pendingRepeatSession:c,clearPendingRepeatSession:y,onNavigateToHistory:w})=>{const[j,h]=u.useState(P.DASHBOARD),[d,r]=u.useState(null),[l,R]=u.useState(null),[v,z]=u.useState([]),[M,F]=u.useState({}),[C,x]=u.useState(null),[t,i]=u.useState(null),[b,B]=u.useState(null),[W,E]=u.useState(0);u.useEffect(()=>{b&&s&&(r(b),h(P.VARIABLES),B(null))},[b,s]),u.useEffect(()=>{if(o&&s){const{session:f,scenario:_}=o,H=f.questions||f.questions_json,Q=typeof H=="string"?JSON.parse(H):H||[],U=f.completed_questions||f.answered_count||0;r(_||{id:f.scenario_id,title:f.scenario_title}),R(f),z(Q),F({}),E(U),h(P.SESSION),n&&n()}},[o,s,n]),u.useEffect(()=>{if(c&&s){const{session:f,scenario:_}=c,H=f.questions||f.questions_json,Q=typeof H=="string"?JSON.parse(H):H||[];r(_||{id:f.scenario_id,title:f.scenario_title}),z(Q),F({}),E(0),h(P.SESSION),y&&y()}},[c,s,y]),u.useEffect(()=>{window.scrollTo(0,0)},[j]);const $=u.useCallback(f=>{r(f),h(P.VARIABLES)},[]),D=u.useCallback(()=>{r(null),R(null),z([]),F({}),x(null),E(0),i(null),h(P.DASHBOARD)},[]),Y=u.useCallback(f=>{F(f),h(P.SESSION)},[]),X=u.useCallback(f=>{R(f.session),z(f.questions),f.selectedMicrophoneId&&i(f.selectedMicrophoneId)},[]),g=u.useCallback(f=>{x(f.session),h(P.COMPLETE)},[]),S=u.useCallback(()=>{D()},[D]),k=u.useCallback(()=>{R(null),z([]),x(null),E(0),i(null),h(P.VARIABLES)},[]),A=()=>{switch(j){case P.DASHBOARD:return e.jsx(Xe,{onSelectScenario:$,isAuthenticated:s,requireAuth:a,setPendingScenario:B,onNavigateToHistory:w});case P.VARIABLES:return e.jsx(Yt,{scenario:d,onBack:D,onNext:Y});case P.SESSION:return e.jsx(or,{session:l,questions:v,scenario:d,variables:M,preloadedQuestions:v.length>0?v:null,onSessionCreated:X,onComplete:g,onExit:S,startFromQuestion:W,initialMicrophoneId:t});case P.COMPLETE:return e.jsx(ir,{session:C,scenario:d,onBackToDashboard:D,onStartNew:k});default:return e.jsx(Xe,{onSelectScenario:$,isAuthenticated:s,requireAuth:a,setPendingScenario:B,onNavigateToHistory:w})}};return e.jsx("div",{style:{minHeight:"100%"},children:A()})},rt={target:ae,clock:re,mic:K,"message-square":fe,lightbulb:N,brain:Oe,info:me,check:Se,sparkles:_e},ar=[{icon:ae,title:"Strukturiert antworten",description:"Nutze die STAR-Methode (Situation, Task, Action, Result) fÃ¼r Beispiele."},{icon:re,title:"Zeit im Blick",description:"Antworte prÃ¤zise, aber ausfÃ¼hrlich genug."},{icon:K,title:"Klar sprechen",description:"Sprich in normalem Tempo. Pausen sind vÃ¶llig in Ordnung."}],Yr=({scenario:s,onBack:a,onStart:m,preloadedQuestions:o})=>{const[n,c]=u.useState({}),[y,w]=u.useState({}),[j,h]=u.useState(!1),[d,r]=u.useState(null),[l,R]=u.useState(null),[v,z]=u.useState(!1),[M,F]=u.useState([]),[C,x]=u.useState(!1),t=ye(),{demoCode:i}=Be(),b=Ne.useMemo(()=>{if(!s?.input_configuration)return[];try{const g=typeof s.input_configuration=="string"?JSON.parse(s.input_configuration):s.input_configuration;return Array.isArray(g)?g.filter(S=>S.user_input!==!1):[]}catch(g){return console.error("Error parsing input_configuration:",g),[]}},[s?.input_configuration]);u.useEffect(()=>{const g={};b.forEach(S=>{S.default&&(g[S.key]=S.default)}),c(g)},[b]);const B=(g,S)=>{if(!g)return g;let k=g;return Object.entries(S||{}).forEach(([A,f])=>{f&&(k=k.replace(new RegExp(`\\$\\{${A}\\}`,"g"),f),k=k.replace(new RegExp(`\\{${A}\\}`,"g"),f))}),k},W=(g,S)=>{c(k=>({...k,[g]:S})),y[g]&&w(k=>{const A={...k};return delete A[g],A})},E=()=>{F(g=>[...g,{key:"",value:""}])},$=(g,S,k)=>{F(A=>{const f=[...A];return f[g]={...f[g],[S]:k},f})},D=g=>{F(S=>S.filter((k,A)=>A!==g))},Y=()=>{const g={};return b.forEach(S=>{const k=n[S.key];if(S.required&&(!k||k.trim()==="")){g[S.key]="Dieses Feld ist erforderlich";return}if(!(!k||k.trim()==="")&&S.validation){const{minLength:A,maxLength:f,min:_,max:H,pattern:Q}=S.validation;A&&k.length<A&&(g[S.key]=`Mindestens ${A} Zeichen erforderlich`),f&&k.length>f&&(g[S.key]=`Maximal ${f} Zeichen erlaubt`),_!==void 0&&Number(k)<_&&(g[S.key]=`Mindestens ${_}`),H!==void 0&&Number(k)>H&&(g[S.key]=`Maximal ${H}`),Q&&!new RegExp(Q).test(k)&&(g[S.key]="UngÃ¼ltiges Format")}}),w(g),Object.keys(g).length===0},X=async g=>{if(g.preventDefault(),r(null),!!Y()){h(!0);try{const S={...n};M.forEach(_=>{_.key&&_.value&&(S[_.key]=_.value)});const k=await te.createSimulatorSession({scenario_id:s.id,variables:S,demo_code:i||null,questions:o||null});if(!k.success)throw new Error(k.message||"Fehler beim Erstellen der Session");const A=k.data.session;let f;if(o&&o.length>0)f=o,await te.updateSimulatorSessionQuestions(A.id,f);else{const _=await te.generateSimulatorQuestions(A.id);if(!_.success)throw new Error(_.message||"Fehler beim Generieren der Fragen");f=_.data.questions}m({session:{...A,questions_json:f},questions:f,scenario:s,variables:S,selectedMicrophoneId:l})}catch(S){console.error("Error starting session:",S),r(S.message||"Ein Fehler ist aufgetreten")}finally{h(!1)}}};return e.jsxs("div",{style:{padding:t.space[6],paddingBottom:"200px",maxWidth:"640px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("button",{onClick:a,style:{display:"inline-flex",alignItems:"center",gap:t.space[2],padding:`${t.space[2]} ${t.space[3]}`,marginBottom:t.space[4],border:"none",background:"transparent",color:p.slate[600],fontSize:t.fontSize.base,cursor:"pointer",borderRadius:t.radius.sm,transition:t.transition.normal},onMouseEnter:g=>g.target.style.background=p.slate[100],onMouseLeave:g=>g.target.style.background="transparent",children:[e.jsx(Te,{style:{width:"18px",height:"18px"}}),"ZurÃ¼ck zur Ãœbersicht"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t.space[4]},children:[e.jsx("div",{style:{width:"56px",height:"56px",borderRadius:t.radius.lg,background:t.headerGradient,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(_e,{style:{width:"28px",height:"28px",color:"white"}})}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:t.fontSize["4xl"],fontWeight:700,color:p.slate[900],margin:0},children:s.title}),e.jsx("p",{style:{fontSize:t.fontSize.base,color:p.slate[600],margin:"4px 0 0 0"},children:"Konfiguriere dein Training"})]})]})]}),e.jsx("div",{style:{padding:`${t.space[4]} ${t.space[5]}`,borderRadius:t.radius.lg,backgroundColor:p.slate[100],marginBottom:t.space[6]},children:e.jsx("p",{style:{fontSize:t.fontSize.base,color:p.slate[700],margin:0,lineHeight:1.6},children:s.description})}),s.long_description&&e.jsx("div",{style:{padding:`${t.space[5]} ${t.space[6]}`,borderRadius:t.radius.lg,backgroundColor:"white",border:`1px solid ${p.slate[200]}`,marginBottom:t.space[6]},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"14px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:t.radius.md,background:t.headerGradient,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(me,{style:{width:"20px",height:"20px",color:"white"}})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:t.fontSize.md,fontWeight:600,color:p.slate[900],margin:`0 0 ${t.space[2]} 0`},children:"Deine Aufgabe"}),e.jsx("p",{style:{fontSize:t.fontSize.base,lineHeight:"1.6",color:p.slate[700],margin:0,whiteSpace:"pre-wrap"},children:B(s.long_description?.replace(/\/n/g,`
`),n)})]})]})}),(()=>{const g=s.tips&&Array.isArray(s.tips)&&s.tips.length>0?s.tips.map((S,k)=>typeof S=="string"?{icon:N,title:`Tipp ${k+1}`,description:S}:{icon:rt[S.icon]||rt[S.icon?.toLowerCase()]||N,title:S.title||`Tipp ${k+1}`,description:S.text||S.description||""}):ar;return e.jsxs("div",{style:{padding:`${t.space[5]} ${t.space[6]}`,borderRadius:t.radius.lg,backgroundColor:"white",border:`1px solid ${p.slate[200]}`,marginBottom:t.space[6]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t.space[2.5],marginBottom:t.space[4]},children:[e.jsx(N,{style:{width:"20px",height:"20px",color:t.primaryAccent}}),e.jsx("h3",{style:{fontSize:t.fontSize.lg,fontWeight:600,color:p.slate[900],margin:0},children:"Tipps fÃ¼r dein Training"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:t.space[3]},children:g.map((S,k)=>{const A=S.icon;return e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:t.space[3],padding:`${t.space[3]} ${t.space[4]}`,borderRadius:t.radius.md,backgroundColor:p.slate[50]},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:t.radius.sm,background:t.headerGradient,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(A,{style:{width:"16px",height:"16px",color:"white"}})}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontWeight:600,color:p.slate[900],fontSize:t.fontSize.base,margin:"0 0 2px 0"},children:S.title}),e.jsx("p",{style:{fontSize:t.fontSize.sm,color:p.slate[600],lineHeight:1.5,margin:0},children:S.description})]})]},k)})})]})})(),e.jsxs("form",{onSubmit:X,children:[b.length>0?b.map(g=>e.jsx(Gt,{field:g,value:n[g.key],onChange:W,error:y[g.key],focusColor:t.primaryAccent},g.key)):e.jsxs("div",{style:{padding:t.space[6],textAlign:"center",color:p.slate[500]},children:[e.jsx(Se,{style:{width:"32px",height:"32px",marginBottom:t.space[3],opacity:.5}}),e.jsx("p",{style:{margin:0},children:"Keine zusÃ¤tzliche Konfiguration erforderlich."})]}),s?.allow_custom_variables&&e.jsxs("div",{style:{marginTop:t.space[5],marginBottom:t.space[5],paddingTop:t.space[5],borderTop:`1px solid ${p.slate[200]}`},children:[e.jsxs("button",{type:"button",onClick:()=>x(!C),style:{display:"flex",alignItems:"flex-start",gap:t.space[2],padding:"0",border:"none",background:"none",color:p.slate[500],fontSize:t.fontSize.sm,fontWeight:500,cursor:"pointer",marginBottom:C?t.space[4]:"0",textAlign:"left"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:t.space[2],flexShrink:0},children:[C?e.jsx(Pe,{size:18}):e.jsx(Me,{size:18}),e.jsx($e,{size:16})]}),e.jsx("span",{style:{lineHeight:"1.4"},children:"ZusÃ¤tzliche Variablen hinzufÃ¼gen (optional)"})]}),C&&e.jsxs("div",{style:{backgroundColor:p.slate[50],borderRadius:t.radius.lg,padding:t.space[4]},children:[e.jsx("p",{style:{fontSize:t.fontSize.sm,color:p.slate[500],margin:`0 0 ${t.space[3]} 0`},children:"FÃ¼ge eigene Variablen hinzu, die in die Fragen-Generierung und Feedback einflieÃŸen sollen."}),M.length>0&&e.jsx("div",{style:{marginBottom:t.space[3]},children:M.map((g,S)=>e.jsxs("div",{style:{backgroundColor:"white",border:`1px solid ${p.slate[200]}`,borderRadius:t.radius.md,padding:t.space[3],marginBottom:t.space[3]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:t.space[2]},children:[e.jsx("input",{type:"text",value:g.key||"",onChange:k=>$(S,"key",k.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"_")),placeholder:"variable_name",style:{padding:`${t.space[2]} ${t.space[3]}`,borderRadius:t.radius.md,border:`1px solid ${p.slate[200]}`,fontSize:t.fontSize.sm,fontFamily:"monospace",backgroundColor:p.slate[50],flex:1,marginRight:t.space[2]}}),e.jsx("button",{type:"button",onClick:()=>D(S),style:{padding:t.space[2],border:"none",backgroundColor:"transparent",cursor:"pointer",color:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(it,{size:18})})]}),e.jsx("textarea",{value:g.value||"",onChange:k=>$(S,"value",k.target.value),placeholder:"Wert eingeben... (mehrzeilig mÃ¶glich)",rows:3,style:{width:"100%",padding:`${t.space[2]} ${t.space[3]}`,borderRadius:t.radius.md,border:`1px solid ${p.slate[200]}`,fontSize:t.fontSize.sm,resize:"vertical",minHeight:"80px",boxSizing:"border-box"}})]},S))}),e.jsxs("button",{type:"button",onClick:E,style:{display:"flex",alignItems:"center",gap:t.space[1.5],padding:`${t.space[2]} ${t.space[3]}`,border:`1px dashed ${p.slate[300]}`,borderRadius:t.radius.md,background:"transparent",color:p.slate[600],fontSize:t.fontSize.sm,cursor:"pointer",width:"100%",justifyContent:"center"},children:[e.jsx($e,{size:16}),"Variable hinzufÃ¼gen"]})]})]}),e.jsxs("div",{style:{padding:`${t.space[4]} ${t.space[5]}`,borderRadius:t.radius.lg,backgroundColor:t.primaryAccentLight,marginTop:t.space[6],marginBottom:t.space[6],display:"flex",gap:t.space[5],flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:t.fontSize.xs,color:p.slate[500],display:"block"},children:"Fragen"}),e.jsxs("span",{style:{fontSize:t.fontSize.lg,fontWeight:600,color:p.slate[900]},children:[s.question_count_min,"-",s.question_count_max]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:t.fontSize.xs,color:p.slate[500],display:"block"},children:"Zeit pro Frage"}),e.jsxs("span",{style:{fontSize:t.fontSize.lg,fontWeight:600,color:p.slate[900]},children:[Math.round(s.time_limit_per_question/60)," Min"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:t.fontSize.xs,color:p.slate[500],display:"block"},children:"Wiederholen"}),e.jsx("span",{style:{fontSize:t.fontSize.lg,fontWeight:600,color:p.slate[900]},children:s.allow_retry?"Erlaubt":"Nicht erlaubt"})]})]}),e.jsxs("div",{style:{padding:t.space[6],borderRadius:t.radius.xl,backgroundColor:"white",border:`1px solid ${p.slate[200]}`,marginBottom:t.space[6]},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:t.space[2.5],marginBottom:t.space[4]},children:[e.jsx(K,{style:{width:"22px",height:"22px",color:t.primaryAccent}}),e.jsx("h3",{style:{fontSize:t.fontSize.lg,fontWeight:600,color:p.slate[900],margin:0},children:"Mikrofon auswÃ¤hlen"})]}),e.jsx(lt,{selectedDeviceId:l,onDeviceChange:R,onTestClick:()=>z(!0)})]}),d&&e.jsxs("div",{style:{padding:`${t.space[3]} ${t.space[4]}`,borderRadius:t.radius.lg,backgroundColor:p.red[100],color:p.red[500],marginBottom:t.space[5],display:"flex",alignItems:"center",gap:t.space[2]},children:[e.jsx(ue,{style:{width:"18px",height:"18px"}}),d]}),e.jsxs("button",{type:"submit",disabled:j,style:{width:"100%",padding:`${t.space[4]} ${t.space[6]}`,borderRadius:t.radius.lg,border:"none",background:j?p.slate[300]:t.buttonGradient,color:"white",fontSize:t.fontSize.lg,fontWeight:600,cursor:j?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:t.space[2.5],transition:t.transition.normal,boxShadow:j?"none":`0 4px 12px ${t.primaryAccent}4d`},onMouseEnter:g=>{j||(g.target.style.transform="translateY(-2px)",g.target.style.boxShadow=`0 6px 16px ${t.primaryAccent}66`)},onMouseLeave:g=>{g.target.style.transform="none",g.target.style.boxShadow=j?"none":`0 4px 12px ${t.primaryAccent}4d`},children:["Training starten",e.jsx(st,{style:{width:"20px",height:"20px"}})]})]}),e.jsx(at,{isOpen:v,onClose:()=>z(!1),deviceId:l}),e.jsx(pt,{isLoading:j,message:"Fragen werden generiert...",subMessage:"Die KI erstellt personalisierte Fragen basierend auf deinen Angaben."})]})};export{tr as ImmediateFeedback,ir as SessionComplete,Jr as SimulatorApp,Xe as SimulatorDashboard,or as SimulatorSession,Yr as SimulatorWizard};
