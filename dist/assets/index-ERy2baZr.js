import{j as e,O as P,F as A,h as xe,y as M,ae as I,au as Ne,q as we,av as ke,ad as ve,R as G,C as q,c as H,a0 as Z,aw as J,ax as Y,a8 as Q,T as X,as as ee,w as te,U as se,aj as re,B as ae,v as pe,x as he,e as ue,z as ne,a as be,Q as fe,n as ie,ay as oe,Y as ce,t as Se,az as de,l as le,m as ge,X as Ce,aA as Be,aB as ze,aC as Ee,A as De}from"./ui-vendor-B9DEMv6g.js";import{a as r}from"./react-vendor-uDOJF2jQ.js";import{w as L,h as Te,F as Oe}from"./FeatureInfoButton-LVfo9WeN.js";import{S as $e}from"./ScenarioDashboard-DLd69EoI.js";import{B as V,C as K}from"./Button-CE7zPp3G.js";import"./select-native-CL_xNWig.js";import"./dialog-l-KFjSys.js";import{F as Ae}from"./fullscreen-loader-DwH_R4DM.js";import{D as Ie}from"./DynamicFormField-WDzXo7xQ.js";import{a as Le,B as _e}from"./BriefingWorkbook-BfM3v5DG.js";import{u as Fe}from"./useMobile-YxjH166V.js";import"./ScenarioCard-QS9dBRGR.js";import"./useBranding-CH0MjVQt.js";import"./utils-BEHD0UYf.js";import"./index-CklPxmEV.js";const Pe={"file-text":A,briefcase:ae,banknote:re,users:se,user:te,"message-circle":ee,target:X,award:Q,book:Y,clipboard:J,star:Z,lightbulb:M,shield:H,compass:q,rocket:G,heart:ve,folder:ke,"trending-up":we},Me=({onSelectTemplate:t,onShowList:g,onCreateTemplate:f,onEditTemplate:d,isAuthenticated:x,requireAuth:a,setPendingAction:m,demoCode:i})=>{const[h,j]=r.useState(null),[b,c]=r.useState(0),u=r.useCallback(async()=>{const o=new URLSearchParams;i&&o.append("demo_code",i);const p=await L.request(`/smartbriefing/templates?${o.toString()}`,{method:"GET"});if(p.success&&p.data?.templates)return p.data.templates;throw new Error("Unerwartete API-Antwort")},[i,b]),n=()=>{if(!x&&!i){a&&(m(()=>f),a());return}f?.()},N=(o,p)=>{o.stopPropagation(),d?.(p)},v=(o,p)=>{o.stopPropagation(),j(p)},C=async()=>{if(h)try{const o=new URLSearchParams;i&&o.append("demo_code",i),(await L.request(`/smartbriefing/templates/${h.id}?${o.toString()}`,{method:"DELETE"})).success&&c(k=>k+1)}catch(o){console.error("[SmartBriefing] Error deleting template:",o)}finally{j(null)}},l=o=>Pe[o.icon]||A,w=o=>{const p=o.variables_schema?.length||0;return[{text:`${p} Eingabefeld${p!==1?"er":""}`}]},S=o=>o.is_custom?e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:p=>N(p,o),className:"p-1.5 rounded-md border-none bg-transparent text-slate-500 cursor-pointer flex items-center justify-center transition-all hover:bg-slate-100 hover:text-primary",title:"Template bearbeiten",children:e.jsx(Ne,{size:16})}),e.jsx("button",{onClick:p=>v(p,o),className:"p-1.5 rounded-md border-none bg-transparent text-slate-500 cursor-pointer flex items-center justify-center transition-all hover:bg-red-50 hover:text-red-500",title:"Template löschen",children:e.jsx(P,{size:16})})]}):null,E=(x||i)&&f?e.jsxs("button",{onClick:n,className:"flex items-center gap-2 py-2.5 px-4 rounded-xl border-2 border-dashed border-indigo-200 bg-white text-indigo-500 text-sm font-medium cursor-pointer transition-all whitespace-nowrap hover:border-indigo-400 hover:bg-indigo-50 hover:shadow-sm",children:[e.jsx(I,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"persönliches Template"}),e.jsx("span",{className:"sm:hidden",children:"Template"})]}):null,O=()=>e.jsx("div",{className:"mt-12 py-5 px-6 bg-indigo-50 rounded-2xl border border-indigo-100",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(M,{size:20,className:"text-indigo-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-1",children:"So funktioniert Smart Briefing"}),e.jsx("p",{className:"text-[13px] text-slate-600 leading-relaxed",children:"Wähle ein Template aus, gib deine spezifischen Informationen ein (z.B. Unternehmen, Position), und erhalte ein maßgeschneidertes Briefing mit Insider-Wissen, Fachbegriffen und cleveren Rückfragen."})]})]})}),_=h&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>j(null),children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-[400px] w-full shadow-2xl transform transition-all",onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-red-50 flex items-center justify-center",children:e.jsx(P,{size:24,className:"text-red-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Template löschen?"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Diese Aktion kann nicht rückgängig gemacht werden."})]})]}),e.jsx("div",{className:"bg-slate-50 rounded-xl p-3 mb-5",children:e.jsx("p",{className:"text-sm text-slate-700",children:e.jsx("strong",{children:h.title})})}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(V,{variant:"secondary",onClick:()=>j(null),children:"Abbrechen"}),e.jsx(V,{variant:"danger",onClick:C,children:"Löschen"})]})]})});return e.jsxs(e.Fragment,{children:[e.jsx(Te,{featureId:"smartbriefing",showOnMount:!0}),e.jsx($e,{title:"Smart Briefing",subtitle:"Dein KI-gestützter Vorbereitungs-Assistent",headerIcon:A,headerActions:e.jsx(Oe,{featureId:"smartbriefing",size:"sm"}),fetchScenarios:u,moduleKey:"briefings",historyButtonLabel:"Meine Briefings",onNavigateToHistory:g,onSelectScenario:t,renderCardMeta:w,getIconForScenario:l,getCardCustomActions:S,cardActionLabel:"Briefing erstellen",cardActionIcon:xe,categoryField:"category",emptyStateIcon:A,emptyStateTitle:"Keine Templates gefunden",emptyStateMessage:"Es wurden noch keine Briefing-Templates erstellt.",searchPlaceholder:"Briefings durchsuchen...",filterActions:E,renderInfoBox:O,extraContent:_,isAuthenticated:x,requireAuth:a,setPendingAction:m,demoCode:i,loadingMessage:"Templates werden geladen..."},b)]})},Re=({variable:t,index:g,onChange:f,onDelete:d})=>e.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-3 mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("input",{type:"text",value:t.key||"",onChange:x=>f(g,"key",x.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"_")),placeholder:"variable_name",className:"flex-1 py-2 px-3 rounded-md border border-slate-200 text-sm font-mono bg-slate-50 mr-2 outline-none focus:border-primary focus:ring-2 focus:ring-primary/10"}),e.jsx("button",{type:"button",onClick:()=>d(g),className:"p-2 border-none bg-transparent cursor-pointer text-red-500 flex items-center justify-center hover:bg-red-50 rounded-md transition-colors",children:e.jsx(P,{size:18})})]}),e.jsx("textarea",{value:t.value||"",onChange:x=>f(g,"value",x.target.value),placeholder:"Wert eingeben... (mehrzeilig möglich)",rows:3,className:"w-full py-2.5 px-3 rounded-md border border-slate-200 text-sm resize-y min-h-[80px] box-border outline-none focus:border-primary focus:ring-2 focus:ring-primary/10"})]}),Ve=({template:t,onBack:g,onBriefingGenerated:f,isAuthenticated:d})=>{const[x,a]=r.useState({}),[m,i]=r.useState({}),[h,j]=r.useState(!1),[b,c]=r.useState(null),[u,n]=r.useState([]),[N,v]=r.useState(!1),C=Le(t?.icon);r.useEffect(()=>{if(t?.variables_schema){const o={};t.variables_schema.forEach(p=>{p.default&&(o[p.key]=p.default)}),a(o)}n([]),v(!1)},[t]);const l=()=>{n([...u,{key:"",value:""}])},w=(o,p,k)=>{const T=[...u];T[o][p]=k,n(T)},S=o=>{n(u.filter((p,k)=>k!==o))},E=(o,p)=>{a(k=>({...k,[o]:p})),m[o]&&i(k=>{const T={...k};return delete T[o],T})},O=()=>{const o={};return t?.variables_schema?.forEach(p=>{p.required&&!x[p.key]&&(o[p.key]="Dieses Feld ist erforderlich")}),o},_=async o=>{o.preventDefault();const p=O();if(Object.keys(p).length>0){i(p);return}j(!0),c(null);try{const k={};u.forEach(s=>{s.key&&s.value&&(k[s.key]=s.value)});const T={template_id:t.id,variables:x};Object.keys(k).length>0&&(T.custom_variables=k);const F=await L.request("/smartbriefing/generate",{method:"POST",body:JSON.stringify(T)});if(F.success&&F.data?.briefing)f(F.data.briefing);else throw new Error("Unerwartete API-Antwort")}catch(k){console.error("[SmartBriefing] Error generating briefing:",k),c(k.message||"Fehler beim Generieren des Briefings")}finally{j(!1)}};return t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 pt-8 max-w-[700px] mx-auto",children:[e.jsxs("button",{onClick:g,disabled:h,className:`flex items-center gap-2 py-2 border-none bg-transparent text-slate-500 text-sm font-medium cursor-pointer mb-6 transition-opacity ${h?"opacity-50 cursor-not-allowed":"hover:text-slate-700"}`,children:[e.jsx(pe,{size:18}),e.jsx("span",{className:"leading-relaxed",children:"Zurück zur Übersicht"})]}),e.jsx(K,{className:"p-6 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-xl bg-primary/10 flex items-center justify-center flex-shrink-0",children:e.jsx(C,{size:28,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-[22px] font-bold text-slate-900 mb-1",children:t.title}),e.jsx("p",{className:"text-sm text-slate-500",children:t.description})]})]})}),e.jsxs(K,{className:"p-6",children:[e.jsx("h2",{className:"text-base font-semibold text-slate-900 mb-5 pb-4 border-b border-slate-100",children:"Deine Angaben"}),e.jsxs("form",{onSubmit:_,children:[t.variables_schema?.map(o=>e.jsx(Ie,{field:o,value:x[o.key],onChange:E,error:m[o.key]},o.key)),t.allow_custom_variables&&e.jsxs("div",{className:"mt-6 mb-5 pt-5 border-t border-slate-100",children:[e.jsxs("button",{type:"button",onClick:()=>v(!N),className:`flex items-start gap-2 p-0 border-none bg-transparent text-slate-500 text-sm font-medium cursor-pointer text-left ${N?"mb-4":""}`,children:[e.jsxs("span",{className:"flex items-center gap-2 flex-shrink-0",children:[N?e.jsx(he,{size:18}):e.jsx(ue,{size:18}),e.jsx(I,{size:16})]}),e.jsx("span",{className:"leading-relaxed",children:"Zusätzliche Variablen hinzufügen (optional)"})]}),N&&e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[e.jsx("p",{className:"text-[13px] text-slate-500 mb-3",children:"Füge eigene Variablen hinzu, die in die Briefing-Generierung einfließen sollen."}),u.length>0&&e.jsx("div",{className:"mb-3",children:u.map((o,p)=>e.jsx(Re,{variable:o,index:p,onChange:w,onDelete:S},p))}),e.jsxs("button",{type:"button",onClick:l,className:"flex items-center gap-1.5 py-2 px-3 border border-dashed border-slate-300 rounded-lg bg-white text-slate-500 text-[13px] cursor-pointer w-full justify-center hover:border-primary hover:text-primary transition-colors",children:[e.jsx(I,{size:14}),"Variable hinzufügen"]})]})]}),b&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-5 flex items-start gap-3",children:[e.jsx(ne,{size:20,className:"text-red-500 flex-shrink-0"}),e.jsx("p",{className:"text-red-700 text-sm",children:b})]}),e.jsx(V,{type:"submit",disabled:h,size:"lg",fullWidth:!0,icon:e.jsx(be,{size:20}),children:"Briefing generieren"})]})]})]}),e.jsx(Ae,{isLoading:h,message:"Smart Briefing wird erstellt...",subMessage:"Die KI analysiert deine Angaben und erstellt ein maßgeschneidertes Briefing."})]}):null},Ke={"file-text":A,briefcase:ae,banknote:re,users:se,user:te,"message-circle":ee,target:X,award:Q,book:Y,clipboard:J,star:Z,lightbulb:M,shield:H,compass:q,rocket:G},Ue=({content:t})=>{if(!t)return null;const g=d=>{const x=d.split(`
`),a=[];let m=[],i=null;const h=()=>{m.length>0&&(a.push(e.jsx("ul",{className:"my-3 pl-6 list-none",children:m.map((j,b)=>e.jsxs("li",{className:"mb-2 text-[15px] leading-relaxed text-gray-700 relative pl-5",children:[e.jsx("span",{className:"absolute left-0 text-primary font-bold",children:i==="number"?`${b+1}.`:"•"}),f(j)]},b))},`list-${a.length}`)),m=[],i=null)};return x.forEach((j,b)=>{const c=j.trim();if(!c){h();return}if(c.startsWith("### ")){h(),a.push(e.jsx("h3",{className:`text-lg font-bold text-slate-900 my-6 mb-3 pt-4 flex items-center gap-2 ${b>0?"border-t border-slate-100":""}`,children:f(c.substring(4))},`h3-${b}`));return}if(c.startsWith("## ")){h(),a.push(e.jsx("h2",{className:"text-xl font-bold text-slate-900 my-7 mb-3.5",children:f(c.substring(3))},`h2-${b}`));return}if(c.startsWith("# ")){h(),a.push(e.jsx("h1",{className:"text-2xl font-bold text-slate-900 my-8 mb-4",children:f(c.substring(2))},`h1-${b}`));return}if(c.startsWith("- ")||c.startsWith("* ")){i!=="bullet"&&(h(),i="bullet"),m.push(c.substring(2));return}const u=c.match(/^(\d+)\.\s/);if(u){i!=="number"&&(h(),i="number"),m.push(c.substring(u[0].length));return}h(),a.push(e.jsx("p",{className:"my-3 text-[15px] leading-relaxed text-gray-700",children:f(c)},`p-${b}`))}),h(),a},f=d=>{const x=[];let a=d,m=0;for(;a.length>0;){const i=a.match(/\*\*(.+?)\*\*/),h=a.match(new RegExp("(?<!\\*)\\*([^*]+)\\*(?!\\*)|_([^_]+)_")),j=a.match(/`([^`]+)`/),b=[{match:i,type:"bold"},{match:h,type:"italic"},{match:j,type:"code"}].filter(u=>u.match);if(b.length===0){x.push(a);break}const c=b.reduce((u,n)=>(u.match?.index??1/0)<(n.match?.index??1/0)?u:n);switch(c.match.index>0&&x.push(a.substring(0,c.match.index)),c.type){case"bold":x.push(e.jsx("strong",{className:"font-semibold text-slate-900",children:c.match[1]},m++));break;case"italic":x.push(e.jsx("em",{className:"italic",children:c.match[1]||c.match[2]},m++));break;case"code":x.push(e.jsx("code",{className:"bg-slate-100 px-1.5 py-0.5 rounded text-[13px] font-mono text-primary",children:c.match[1]},m++));break}a=a.substring(c.match.index+c.match[0].length)}return x};return e.jsx("div",{children:g(t)})},We=({briefing:t,template:g,onBack:f,onCreateNew:d,onGenerateAnother:x})=>{const a=Fe(),[m,i]=r.useState(!1),h=r.useRef(null),j=Ke[g?.icon||t?.template_icon]||A,b=n=>n?new Date(n).toLocaleDateString("de-DE",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",c=async()=>{try{await navigator.clipboard.writeText(t.content_markdown),i(!0),setTimeout(()=>i(!1),2e3)}catch(n){console.error("[SmartBriefing] Failed to copy:",n)}},u=()=>{const n=`${g?.title||t?.template_title}
${"=".repeat(50)}

Erstellt am: ${b(t.created_at)}

${t.content_markdown}`,N=new Blob([n],{type:"text/plain;charset=utf-8"}),v=URL.createObjectURL(N),C=document.createElement("a");C.href=v,C.download=`briefing-${t.id}.txt`,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(v)};return t?e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx("div",{className:`bg-brand-gradient sticky top-0 z-40 ${a?"px-4 py-5":"px-8 py-6"}`,children:e.jsxs("div",{className:"max-w-[1400px] mx-auto",children:[f&&e.jsxs("button",{onClick:f,className:"flex items-center gap-1.5 bg-white/15 border-none rounded-lg px-3 py-2 cursor-pointer text-white text-[13px] mb-4 hover:bg-white/25 transition-colors",children:[e.jsx(pe,{size:16}),"Zurück zur Übersicht"]}),e.jsxs("div",{className:`flex items-center gap-6 ${a?"flex-col items-start gap-4":""}`,children:[e.jsx("div",{className:`rounded-full bg-white/20 flex items-center justify-center flex-shrink-0 ${a?"w-[70px] h-[70px]":"w-[90px] h-[90px]"}`,children:e.jsx(j,{size:a?32:40,color:"#fff"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap mb-2",children:[e.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide px-2.5 py-1 rounded-full bg-white/20 text-white",children:"Smart Briefing"}),e.jsxs("span",{className:"text-xs font-medium px-2.5 py-1 rounded-full bg-white/90 text-primary flex items-center gap-1",children:[e.jsx(be,{size:12}),"Fertig!"]})]}),e.jsx("h1",{className:`font-bold text-white m-0 mb-2 ${a?"text-xl":"text-2xl"}`,children:g?.title||t?.template_title}),e.jsx("div",{className:"flex items-center gap-4 flex-wrap",children:e.jsxs("span",{className:"flex items-center gap-1.5 text-[13px] text-white/80",children:[e.jsx(fe,{size:14}),b(t.created_at)]})})]}),!a&&e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:c,className:`flex items-center gap-2 rounded-xl px-5 py-2.5 cursor-pointer text-white text-sm font-medium border border-white/30 transition-colors ${m?"bg-green-500/30":"bg-white/20 hover:bg-white/30"}`,children:[m?e.jsx(ie,{size:16}):e.jsx(oe,{size:16}),m?"Kopiert!":"Kopieren"]}),e.jsxs("button",{onClick:u,className:"flex items-center gap-2 bg-white/20 border border-white/30 rounded-xl px-5 py-2.5 cursor-pointer text-white text-sm font-medium hover:bg-white/30 transition-colors",children:[e.jsx(ce,{size:16}),"Speichern"]})]})]})]})}),e.jsxs("div",{className:`max-w-[900px] mx-auto ${a?"p-4":"px-8 py-6"}`,children:[a&&e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("button",{onClick:c,className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-3 rounded-xl border text-[13px] font-medium cursor-pointer transition-colors ${m?"bg-green-50 border-green-200 text-green-700":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:[m?e.jsx(ie,{size:16}):e.jsx(oe,{size:16}),m?"Kopiert!":"Kopieren"]}),e.jsxs("button",{onClick:u,className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-3 rounded-xl border border-slate-200 bg-white text-slate-600 text-[13px] font-medium cursor-pointer hover:bg-slate-50 transition-colors",children:[e.jsx(ce,{size:16}),"Speichern"]})]}),e.jsx("div",{ref:h,className:"bg-white rounded-2xl shadow-sm overflow-hidden border border-slate-200",children:e.jsx("div",{className:a?"p-5":"p-8",children:e.jsx(Ue,{content:t.content_markdown})})}),e.jsxs("div",{className:"flex gap-3 mt-6 flex-wrap",children:[e.jsxs("button",{onClick:x,className:"flex-1 min-w-[200px] flex items-center justify-center gap-2 px-6 py-3.5 rounded-xl border-2 border-primary bg-white text-primary text-[15px] font-semibold cursor-pointer transition-all hover:bg-primary/5",children:[e.jsx(Se,{size:18}),"Mit anderen Angaben neu generieren"]}),e.jsxs("button",{onClick:d,className:"flex-1 min-w-[200px] flex items-center justify-center gap-2 px-6 py-3.5 rounded-xl border-none bg-brand-gradient text-white text-[15px] font-semibold cursor-pointer transition-all shadow-primary/40 shadow-lg hover:shadow-xl",children:[e.jsx(I,{size:18}),"Neues Briefing erstellen"]})]})]})]}):null},Ge={"file-text":A,briefcase:ae,banknote:re,users:se,user:te,"message-circle":ee,target:X,award:Q,book:Y,clipboard:J,star:Z,lightbulb:M,shield:H,compass:q,rocket:G},qe=t=>t?new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",He=({briefing:t,onOpen:g,onDelete:f,isDeleting:d})=>{const[x,a]=r.useState(!1),[m,i]=r.useState(!1),h=Ge[t.template_icon]||A,j=b=>{b.stopPropagation(),m?(f(t.id),i(!1)):(i(!0),setTimeout(()=>i(!1),3e3))};return e.jsxs(K,{onClick:()=>g(t),onMouseEnter:()=>a(!0),onMouseLeave:()=>{a(!1),i(!1)},className:`p-5 cursor-pointer transition-all duration-300 relative ${x?"border-primary shadow-lg -translate-y-0.5":"border-slate-200 hover:border-slate-300"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("div",{className:"w-11 h-11 rounded-[10px] bg-primary/10 flex items-center justify-center",children:e.jsx(h,{size:22,className:"text-primary"})}),e.jsx("button",{onClick:j,disabled:d,className:`p-2 rounded-lg border-none cursor-pointer transition-all ${m?"bg-red-50 text-red-500":x?"bg-slate-100 text-slate-400":"bg-transparent text-slate-400"} ${x||m?"opacity-100":"opacity-0"} ${d?"cursor-not-allowed":""}`,children:d?e.jsx(le,{size:18,className:"animate-spin"}):e.jsx(P,{size:18})})]}),e.jsx("h3",{className:"text-base font-semibold text-slate-900 mb-1 leading-tight truncate",children:t.title||"Unbenanntes Briefing"}),e.jsx("p",{className:"text-[13px] text-slate-500 mb-3",children:t.template_title}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400 text-xs",children:[e.jsx(fe,{size:14}),qe(t.created_at)]}),e.jsxs("div",{className:"flex items-center gap-1 text-primary text-[13px] font-medium",children:["Öffnen",e.jsx(xe,{size:16})]})]}),m&&e.jsx("div",{className:"absolute top-2 right-2 bg-red-50 border border-red-200 rounded-lg py-2 px-3 text-xs text-red-600 font-medium z-10",onClick:b=>b.stopPropagation(),children:"Nochmal klicken zum Löschen"})]})},Ze=({onOpenBriefing:t,onCreateNew:g,isAuthenticated:f})=>{const[d,x]=r.useState([]),[a,m]=r.useState(!0),[i,h]=r.useState(null),[j,b]=r.useState(null);r.useEffect(()=>{(async()=>{if(!f){m(!1);return}try{m(!0),h(null);const n=await L.request("/smartbriefing/briefings",{method:"GET"});if(n.success&&n.data?.briefings){const N=n.data.briefings.filter(v=>v.status==="completed");x(N)}else throw new Error("Unerwartete API-Antwort")}catch(n){console.error("[SmartBriefing] Error fetching briefings:",n),h(n.message||"Fehler beim Laden der Briefings")}finally{m(!1)}})()},[f]);const c=async u=>{try{if(b(u),(await L.request(`/smartbriefing/briefings/${u}`,{method:"DELETE"})).success)x(N=>N.filter(v=>v.id!==u));else throw new Error("Fehler beim Löschen")}catch(n){console.error("[SmartBriefing] Error deleting briefing:",n),h(n.message||"Fehler beim Löschen des Briefings")}finally{b(null)}};return f?e.jsxs("div",{className:"p-6 max-w-[1200px] mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Meine Briefings"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[d.length," gespeicherte Briefings"]})]}),e.jsx(V,{onClick:g,icon:e.jsx(I,{size:18}),children:"Neues Briefing"})]}),a&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsx(le,{size:40,className:"text-primary animate-spin"}),e.jsx("p",{className:"mt-4 text-slate-500",children:"Briefings werden geladen..."})]}),i&&!a&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 flex items-start gap-3",children:[e.jsx(ne,{size:24,className:"text-red-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base text-red-600 font-medium mb-1",children:"Fehler beim Laden"}),e.jsx("p",{className:"text-sm text-red-700",children:i})]})]}),!a&&!i&&e.jsx(e.Fragment,{children:d.length===0?e.jsxs(K,{className:"py-12 px-6 text-center",children:[e.jsx(de,{size:48,className:"text-slate-300 mx-auto mb-4"}),e.jsx("h2",{className:"text-lg text-slate-500 mb-2",children:"Noch keine Briefings"}),e.jsx("p",{className:"text-sm text-slate-400 mb-6",children:"Erstelle dein erstes Briefing, um loszulegen."}),e.jsx(V,{onClick:g,icon:e.jsx(I,{size:18}),children:"Briefing erstellen"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:d.map(u=>e.jsx(He,{briefing:u,onOpen:t,onDelete:c,isDeleting:j===u.id},u.id))})})]}):e.jsx("div",{className:"p-6 max-w-[800px] mx-auto",children:e.jsxs(K,{className:"py-12 px-6 text-center",children:[e.jsx(de,{size:48,className:"text-slate-300 mx-auto mb-4"}),e.jsx("h2",{className:"text-lg text-slate-500 mb-2",children:"Anmeldung erforderlich"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Melde dich an, um deine gespeicherten Briefings zu sehen."})]})})},Je=[{key:"file-text",icon:A,label:"Dokument"},{key:"briefcase",icon:ae,label:"Koffer"},{key:"banknote",icon:re,label:"Geld"},{key:"users",icon:se,label:"Team"},{key:"user",icon:te,label:"Person"},{key:"target",icon:X,label:"Ziel"},{key:"lightbulb",icon:M,label:"Idee"},{key:"star",icon:Z,label:"Stern"},{key:"shield",icon:H,label:"Schutz"},{key:"compass",icon:q,label:"Kompass"},{key:"rocket",icon:G,label:"Rakete"},{key:"message-circle",icon:ee,label:"Nachricht"},{key:"award",icon:Q,label:"Auszeichnung"},{key:"book",icon:Y,label:"Buch"},{key:"clipboard",icon:J,label:"Checkliste"}],me=[{value:"text",label:"Einzeiliges Textfeld"},{value:"textarea",label:"Mehrzeiliges Textfeld"},{value:"select",label:"Dropdown-Auswahl"}],W=()=>`var_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Ye=()=>({id:W(),key:"",label:"",type:"text",required:!0,placeholder:"",options:[]}),Qe=()=>({id:W(),value:"",label:""}),Xe=({variable:t,index:g,total:f,onChange:d,onDelete:x,onMoveUp:a,onMoveDown:m})=>{const[i,h]=r.useState(!0),[j,b]=r.useState(t.label);r.useEffect(()=>{b(t.label)},[t.label]);const c=(l,w)=>{d({...t,[l]:w})},u=()=>{const l=[...t.options||[],Qe()];d({...t,options:l})},n=(l,w,S)=>{const E=t.options.map(O=>O.id===l?{...O,[w]:S}:O);d({...t,options:E})},N=l=>{const w=t.options.filter(S=>S.id!==l);d({...t,options:w})},v=l=>l.toLowerCase().replace(/[äöüß]/g,w=>({ä:"ae",ö:"oe",ü:"ue",ß:"ss"})[w]).replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),C=()=>{if(j!==t.label){const l={label:j};(!t.key||t.key===v(t.label))&&(l.key=v(j)),d({...t,...l})}};return e.jsxs("div",{className:"bg-slate-50 rounded-xl border border-slate-200 mb-3 overflow-hidden",children:[e.jsxs("div",{className:`flex items-center gap-2 px-4 py-3 bg-white cursor-pointer ${i?"border-b border-slate-200":""}`,onClick:()=>h(!i),children:[e.jsx(Ee,{size:16,className:"text-slate-400 cursor-grab"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"font-semibold text-slate-900 text-sm",children:t.label||`Variable ${g+1}`}),t.key&&e.jsxs("span",{className:"ml-2 text-slate-500 text-xs",children:["$","{","$",t.key,"}"]})]}),e.jsx("span",{className:"px-2 py-0.5 rounded text-[11px] font-medium bg-primary/10 text-primary",children:me.find(l=>l.value===t.type)?.label||t.type}),e.jsxs("div",{className:"flex gap-0.5",children:[e.jsx("button",{onClick:l=>{l.stopPropagation(),a()},disabled:g===0,className:`p-1 border-none bg-transparent ${g===0?"cursor-not-allowed opacity-30":"cursor-pointer opacity-100"}`,children:e.jsx(he,{size:16,className:"text-slate-500"})}),e.jsx("button",{onClick:l=>{l.stopPropagation(),m()},disabled:g===f-1,className:`p-1 border-none bg-transparent ${g===f-1?"cursor-not-allowed opacity-30":"cursor-pointer opacity-100"}`,children:e.jsx(ue,{size:16,className:"text-slate-500"})})]}),e.jsx("button",{onClick:l=>{l.stopPropagation(),x()},className:"p-1.5 border-none bg-transparent cursor-pointer text-red-500",title:"Variable löschen",children:e.jsx(P,{size:16})})]}),e.jsx(De,{children:i&&e.jsx(ge.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},children:e.jsxs("div",{className:"p-4 flex flex-col gap-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Feldbezeichnung *"}),e.jsx("input",{type:"text",value:j,onChange:l=>b(l.target.value),onBlur:C,placeholder:"z.B. Unternehmen",className:"w-full px-3 py-2.5 rounded-lg border border-slate-200 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Variablenname *"}),e.jsx("input",{type:"text",value:t.key,onChange:l=>c("key",l.target.value),placeholder:"z.B. unternehmen",className:"w-full px-3 py-2.5 rounded-lg border border-slate-200 text-sm font-mono"})]})]}),e.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-3 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Feldtyp"}),e.jsx("select",{value:t.type,onChange:l=>c("type",l.target.value),className:"w-full px-3 py-2.5 rounded-lg border border-slate-200 text-sm bg-white",children:me.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})]}),e.jsxs("label",{className:"flex items-center gap-2 py-2.5 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.required,onChange:l=>c("required",l.target.checked),className:"w-4 h-4 accent-primary"}),e.jsx("span",{className:"text-sm text-slate-600",children:"Pflichtfeld"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Platzhalter-Text (optional)"}),e.jsx("input",{type:"text",value:t.placeholder,onChange:l=>c("placeholder",l.target.value),placeholder:"z.B. BMW AG, Siemens, etc.",className:"w-full px-3 py-2.5 rounded-lg border border-slate-200 text-sm"})]}),t.type==="select"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-2",children:"Auswahloptionen"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[(t.options||[]).map((l,w)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"text",value:l.value,onChange:S=>n(l.id,"value",S.target.value),placeholder:"Wert",className:"flex-1 px-2.5 py-2 rounded-md border border-slate-200 text-[13px] font-mono"}),e.jsx("input",{type:"text",value:l.label,onChange:S=>n(l.id,"label",S.target.value),placeholder:"Anzeigename",className:"flex-[2] px-2.5 py-2 rounded-md border border-slate-200 text-[13px]"}),e.jsx("button",{onClick:()=>N(l.id),className:"p-1.5 border-none bg-transparent cursor-pointer text-red-500",children:e.jsx(P,{size:14})})]},l.id)),e.jsxs("button",{onClick:u,className:"flex items-center gap-1.5 px-3 py-2 border border-dashed border-slate-300 rounded-md bg-transparent text-slate-500 text-[13px] cursor-pointer mt-1 hover:bg-slate-50 transition-colors",children:[e.jsx(I,{size:14}),"Option hinzufügen"]})]})]})]})})})]})},et=({selectedIcon:t,onSelect:g})=>e.jsx("div",{className:"flex flex-wrap gap-3",children:Je.map(({key:f,icon:d,label:x})=>{const a=t===f;return e.jsx("button",{onClick:()=>g(f),title:x,className:`w-[60px] h-[60px] rounded-xl border-2 flex items-center justify-center cursor-pointer transition-all ${a?"border-primary bg-primary/10":"border-slate-200 bg-white hover:border-primary/40"}`,children:e.jsx(d,{size:28,className:a?"text-primary":"text-slate-500"})},f)})}),tt=({isOpen:t,onClose:g,onSave:f,editTemplate:d=null,demoCode:x})=>{const[a,m]=r.useState(""),[i,h]=r.useState(""),[j,b]=r.useState("file-text"),[c,u]=r.useState(""),[n,N]=r.useState([]),[v,C]=r.useState(!1),[l,w]=r.useState(null),[S,E]=r.useState("basics");r.useEffect(()=>{d?(m(d.title||""),h(d.description||""),b(d.icon||"file-text"),u(d.system_prompt||""),N((d.variables_schema||[]).map(s=>({...s,id:s.id||W(),options:(s.options||[]).map(y=>({...y,id:y.id||W()}))})))):(m(""),h(""),b("file-text"),u(""),N([])),E("basics"),w(null)},[d,t]);const O=()=>{N([...n,Ye()])},_=(s,y)=>{const B=[...n];B[s]=y,N(B)},o=s=>{N(n.filter((y,B)=>B!==s))},p=s=>{if(s===0)return;const y=[...n];[y[s-1],y[s]]=[y[s],y[s-1]],N(y)},k=s=>{if(s===n.length-1)return;const y=[...n];[y[s],y[s+1]]=[y[s+1],y[s]],N(y)},T=()=>{if(!a.trim())return w("Bitte gib einen Titel ein."),E("basics"),!1;if(!c.trim())return w("Bitte gib einen System-Prompt ein."),E("prompt"),!1;for(const s of n){if(!s.key.trim()||!s.label.trim())return w("Alle Variablen benötigen einen Namen und eine Bezeichnung."),E("variables"),!1;if(s.type==="select"&&(!s.options||s.options.length===0))return w(`Variable "${s.label}" benötigt mindestens eine Auswahloption.`),E("variables"),!1}return!0},F=async()=>{if(w(null),!!T()){C(!0);try{const s=n.map($=>({key:$.key,label:$.label,type:$.type,required:$.required,placeholder:$.placeholder,...$.type==="select"?{options:$.options.map(U=>({value:U.value,label:U.label}))}:{}})),y={title:a.trim(),description:i.trim(),icon:j,system_prompt:c,variables_schema:s,...x?{demo_code:x}:{}};let B;if(d?B=await L.request(`/smartbriefing/templates/${d.id}`,{method:"PUT",body:JSON.stringify(y)}):B=await L.request("/smartbriefing/templates",{method:"POST",body:JSON.stringify(y)}),B.success)f?.(B.data.template),g();else throw new Error(B.message||"Fehler beim Speichern")}catch(s){console.error("[CreateTemplateDialog] Save error:",s),w(s.message||"Fehler beim Speichern des Templates")}finally{C(!1)}}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ge.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-2xl w-full max-w-[700px] max-h-[90vh] flex flex-col shadow-2xl overflow-hidden",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"px-6 py-5 border-b border-slate-200 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"m-0 text-xl font-bold text-slate-900",children:d?"Template bearbeiten":"Neues Template erstellen"}),e.jsx("p",{className:"mt-1 mb-0 text-sm text-slate-500",children:"Erstelle ein persönliches Briefing-Template"})]}),e.jsx("button",{onClick:g,className:"p-2 border-none bg-slate-100 rounded-lg cursor-pointer hover:bg-slate-200 transition-colors",children:e.jsx(Ce,{size:20,className:"text-slate-500"})})]}),e.jsx("div",{className:"flex border-b border-slate-200 px-6",children:[{key:"basics",label:"Grundlagen"},{key:"variables",label:"Eingabefelder"},{key:"prompt",label:"KI-Anweisung"}].map(s=>e.jsx("button",{onClick:()=>E(s.key),className:`px-5 py-3 border-none bg-transparent text-sm font-semibold cursor-pointer -mb-px transition-all ${S===s.key?"text-primary border-b-[3px] border-primary":"text-slate-500 border-b-[3px] border-transparent hover:text-slate-700"}`,children:s.label},s.key))}),e.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[l&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg px-4 py-3 mb-4 flex items-center gap-2",children:[e.jsx(ne,{size:18,className:"text-red-500 flex-shrink-0"}),e.jsx("span",{className:"text-red-700 text-sm",children:l})]}),S==="basics"&&e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-1.5",children:"Titel *"}),e.jsx("input",{type:"text",value:a,onChange:s=>m(s.target.value),placeholder:"z.B. Projektpräsentation Vorbereitung",className:"w-full px-3.5 py-3 rounded-xl border border-slate-200 text-[15px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-1.5",children:"Beschreibung"}),e.jsx("textarea",{value:i,onChange:s=>h(s.target.value),placeholder:"Kurze Beschreibung, wofür dieses Template verwendet wird...",rows:3,className:"w-full px-3.5 py-3 rounded-xl border border-slate-200 text-sm resize-y"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"Symbol"}),e.jsx(et,{selectedIcon:j,onSelect:b})]})]}),S==="variables"&&e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Be,{size:16,className:"text-slate-500"}),e.jsx("span",{className:"text-[13px] text-slate-500",children:"Definiere die Eingabefelder, die der Nutzer beim Erstellen eines Briefings ausfüllen soll."})]})}),n.map((s,y)=>e.jsx(Xe,{variable:s,index:y,total:n.length,onChange:B=>_(y,B),onDelete:()=>o(y),onMoveUp:()=>p(y),onMoveDown:()=>k(y)},s.id)),e.jsxs("button",{onClick:O,className:"flex items-center justify-center gap-2 w-full px-3.5 py-3.5 rounded-xl border-2 border-dashed border-slate-300 bg-white text-slate-500 text-sm font-medium cursor-pointer transition-all hover:border-primary hover:text-primary",children:[e.jsx(I,{size:18}),"Eingabefeld hinzufügen"]}),n.length===0&&e.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"Noch keine Eingabefelder definiert."})]}),S==="prompt"&&e.jsxs("div",{children:[e.jsx("div",{className:"bg-sky-50 rounded-xl p-4 mb-4 border border-sky-200",children:e.jsxs("div",{className:"flex items-start gap-2.5",children:[e.jsx(M,{size:18,className:"text-sky-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"m-0 mb-1.5 text-sm font-semibold text-sky-900",children:"Tipps für effektive Prompts"}),e.jsxs("ul",{className:"m-0 pl-4 text-[13px] text-sky-900 leading-relaxed",children:[e.jsxs("li",{children:["Verwende ",e.jsxs("code",{className:"bg-sky-100 px-1 py-0.5 rounded",children:["$","{variablenname}"]})," um auf Eingabefelder zu verweisen"]}),e.jsx("li",{children:'Beschreibe die Rolle der KI (z.B. "Du bist ein erfahrener Karriere-Coach...")'}),e.jsx("li",{children:"Definiere die Struktur des gewünschten Outputs"}),e.jsx("li",{children:"Gib Beispiele für den Ton und Stil"})]})]})]})}),n.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"Verfügbare Variablen: "}),n.map(s=>e.jsxs("code",{className:"inline-block px-1.5 py-0.5 mr-1.5 mb-1 bg-slate-100 rounded text-xs font-mono text-slate-600 cursor-pointer hover:bg-slate-200",onClick:()=>{const y=`\${${s.key}}`;u(B=>B+y)},title:"Klicken zum Einfügen",children:["$","{"+s.key+"}"]},s.id))]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-1.5",children:"System-Prompt *"}),e.jsx("textarea",{value:c,onChange:s=>u(s.target.value),placeholder:`Du bist ein erfahrener Experte für...

Erstelle ein strukturiertes Briefing für den Nutzer basierend auf folgenden Informationen:
- Position: \${position}
- Unternehmen: \${unternehmen}

Das Briefing soll folgende Abschnitte enthalten:
1. ...
2. ...

Formatiere jeden Abschnitt mit einem Titel und 5-8 konkreten Bullet Points.`,rows:15,className:"w-full px-3.5 py-3.5 rounded-xl border border-slate-200 text-sm font-mono resize-y leading-relaxed"})]})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-slate-200 flex justify-between items-center gap-3",children:[e.jsx("button",{onClick:g,className:"px-6 py-3 rounded-xl border border-slate-200 bg-white text-slate-600 text-sm font-medium cursor-pointer hover:bg-slate-50 transition-colors",children:"Abbrechen"}),e.jsx("button",{onClick:F,disabled:v,className:`flex items-center gap-2 px-6 py-3 rounded-xl border-none bg-brand-gradient text-white text-sm font-semibold transition-all ${v?"cursor-not-allowed opacity-70":"cursor-pointer opacity-100"}`,children:v?e.jsxs(e.Fragment,{children:[e.jsx(le,{size:18,className:"animate-spin"}),"Speichern..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ze,{size:18}),d?"Speichern":"Template erstellen"]})})]})]})}):null},z={DASHBOARD:"dashboard",FORM:"form",RESULT:"result",LIST:"list",WORKBOOK:"workbook"},ft=({isAuthenticated:t,requireAuth:g,setPendingAction:f,onNavigateToSimulator:d,onNavigateToHistory:x,demoCode:a})=>{const[m,i]=r.useState(z.DASHBOARD),[h,j]=r.useState(null),[b,c]=r.useState(null),[u,n]=r.useState(null),[N,v]=r.useState(null),[C,l]=r.useState(!1),[w,S]=r.useState(null),[E,O]=r.useState(0);r.useEffect(()=>{N&&t&&(j(N),i(z.FORM),v(null))},[N,t]),r.useEffect(()=>{window.scrollTo(0,0)},[m]);const _=r.useCallback(D=>{j(D),i(z.FORM)},[]),o=r.useCallback(()=>{j(null),c(null),n(null),i(z.DASHBOARD)},[]),p=r.useCallback(D=>{c(D),n(D),i(z.WORKBOOK)},[]),k=r.useCallback(()=>{c(null),n(null),j(null),i(z.DASHBOARD)},[]),T=r.useCallback(()=>{c(null),n(null),i(z.FORM)},[]);r.useCallback(()=>{i(z.LIST)},[]);const F=r.useCallback(D=>{n(D),i(z.WORKBOOK)},[]);r.useCallback(()=>{n(null),i(z.LIST)},[]);const s=r.useCallback(D=>{d&&d(D)},[d]),y=r.useCallback(async D=>{try{if((await L.request(`/smartbriefing/briefings/${D.id}`,{method:"DELETE"})).success)n(null),i(z.DASHBOARD);else throw new Error("Fehler beim Löschen")}catch(R){throw console.error("[SmartBriefing] Error deleting briefing:",R),R}},[]),B=r.useCallback(()=>{S(null),l(!0)},[]),$=r.useCallback(D=>{S(D),l(!0)},[]),U=r.useCallback(()=>{l(!1),S(null)},[]),je=r.useCallback(D=>{O(R=>R+1)},[]),ye=()=>{switch(m){case z.FORM:return e.jsx(Ve,{template:h,onBack:o,onBriefingGenerated:p,isAuthenticated:t});case z.RESULT:return e.jsx(We,{briefing:b,template:h,onBack:o,onCreateNew:k,onGenerateAnother:T});case z.LIST:return e.jsx(Ze,{onOpenBriefing:F,onCreateNew:k,isAuthenticated:t});case z.WORKBOOK:return e.jsx(_e,{briefing:u,onBack:o,onDelete:y,onStartSimulation:d?s:null});case z.DASHBOARD:default:return e.jsx(Me,{onSelectTemplate:_,onShowList:x,onCreateTemplate:B,onEditTemplate:$,isAuthenticated:t,requireAuth:g,setPendingAction:f,demoCode:a},E)}};return e.jsxs("div",{className:"min-h-full",children:[ye(),e.jsx(tt,{isOpen:C,onClose:U,onSave:je,editTemplate:w,demoCode:a})]})};export{Ze as BriefingList,We as BriefingResult,_e as BriefingWorkbook,ft as SmartBriefingApp,Me as SmartBriefingDashboard,Ve as SmartBriefingForm};
