import{h as ut,i as gt,a as u,b as ze}from"./react-vendor-uDOJF2jQ.js";import{j as n,A as ce,m as O,k as ft,B as mt,c as ht,d as pt,a as Ge,l as be,V as qe,M as We,R as bt,D as xt,H as yt,g as Ke,U as wt,S as St,G as Se,X as Je,n as vt,C as He,o as Ve,p as Xe,h as Ze,q as kt,T as Tt,b as Ct,I as Et}from"./ui-vendor-5MgJaMcm.js";var ge={},Le;function At(){if(Le)return ge;Le=1;var t=ut();return ge.createRoot=t.createRoot,ge.hydrateRoot=t.hydrateRoot,ge}var Nt=At();const ur=gt(Nt),he={"--app-bg-color":"linear-gradient(135deg, #f8fafc 0%, #eef2ff 50%, #f5f3ff 100%)","--sidebar-bg-color":"#1e293b","--sidebar-text-color":"#f8fafc","--sidebar-text-muted":"#94a3b8","--sidebar-active-bg":"rgba(99, 102, 241, 0.15)","--sidebar-active-text":"#818cf8","--sidebar-hover-bg":"rgba(255, 255, 255, 0.05)","--card-bg-color":"#ffffff","--primary-accent":"#6366f1","--primary-accent-light":"#eef2ff","--primary-accent-hover":"#4f46e5","--button-gradient":"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)","--button-gradient-hover":"linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%)","--button-solid":"#6366f1","--button-solid-hover":"#4f46e5","--button-text":"#ffffff","--header-gradient":"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)","--header-text":"#ffffff","--icon-primary":"#6366f1","--icon-secondary":"#8b5cf6","--icon-muted":"#94a3b8","--text-main":"#0f172a","--text-secondary":"#475569","--text-muted":"#94a3b8","--border-color":"#e2e8f0","--border-color-light":"#f1f5f9","--focus-ring":"rgba(99, 102, 241, 0.3)"},jt={"vertriebs-mueller":{id:"vertriebs-mueller",slug:"vertriebs-mueller",name:"Vertriebsakademie MÃ¼ller",branding:{"--app-bg-color":"linear-gradient(135deg, #fef3c7 0%, #fff7ed 50%, #fffbeb 100%)","--sidebar-bg-color":"#1e3a5f","--sidebar-text-color":"#ffffff","--sidebar-text-muted":"#94a3b8","--sidebar-active-bg":"rgba(251, 191, 36, 0.2)","--sidebar-active-text":"#fbbf24","--sidebar-hover-bg":"rgba(255, 255, 255, 0.1)","--card-bg-color":"#ffffff","--primary-accent":"#d97706","--primary-accent-light":"#fef3c7","--primary-accent-hover":"#b45309","--button-gradient":"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)","--button-gradient-hover":"linear-gradient(135deg, #d97706 0%, #b45309 100%)","--button-solid":"#d97706","--button-solid-hover":"#b45309","--button-text":"#ffffff","--header-gradient":"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)","--header-text":"#ffffff","--icon-primary":"#d97706","--icon-secondary":"#f59e0b","--icon-muted":"#a8a29e","--text-main":"#1c1917","--text-secondary":"#57534e","--text-muted":"#a8a29e","--border-color":"#e7e5e4","--border-color-light":"#f5f5f4","--focus-ring":"rgba(217, 119, 6, 0.3)"},logo_url:null,modules:[]},"sales-academy-pro":{id:"sales-academy-pro",slug:"sales-academy-pro",name:"Sales Academy Pro",branding:{"--app-bg-color":"linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 50%, #f0fdfa 100%)","--sidebar-bg-color":"#064e3b","--sidebar-text-color":"#ffffff","--sidebar-text-muted":"#a7f3d0","--sidebar-active-bg":"rgba(52, 211, 153, 0.2)","--sidebar-active-text":"#34d399","--sidebar-hover-bg":"rgba(255, 255, 255, 0.1)","--card-bg-color":"#ffffff","--primary-accent":"#059669","--primary-accent-light":"#d1fae5","--primary-accent-hover":"#047857","--button-gradient":"linear-gradient(135deg, #10b981 0%, #059669 100%)","--button-gradient-hover":"linear-gradient(135deg, #059669 0%, #047857 100%)","--button-solid":"#059669","--button-solid-hover":"#047857","--button-text":"#ffffff","--header-gradient":"linear-gradient(135deg, #10b981 0%, #059669 100%)","--header-text":"#ffffff","--icon-primary":"#059669","--icon-secondary":"#10b981","--icon-muted":"#6ee7b7","--text-main":"#022c22","--text-secondary":"#065f46","--text-muted":"#6ee7b7","--border-color":"#a7f3d0","--border-color-light":"#d1fae5","--focus-ring":"rgba(5, 150, 105, 0.3)"},logo_url:null,modules:[]},"techsales-institute":{id:"techsales-institute",slug:"techsales-institute",name:"TechSales Institute",branding:{"--app-bg-color":"linear-gradient(135deg, #faf5ff 0%, #f3e8ff 50%, #ede9fe 100%)","--sidebar-bg-color":"#3b0764","--sidebar-text-color":"#ffffff","--sidebar-text-muted":"#c4b5fd","--sidebar-active-bg":"rgba(167, 139, 250, 0.2)","--sidebar-active-text":"#a78bfa","--sidebar-hover-bg":"rgba(255, 255, 255, 0.1)","--card-bg-color":"#ffffff","--primary-accent":"#7c3aed","--primary-accent-light":"#ede9fe","--primary-accent-hover":"#6d28d9","--button-gradient":"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)","--button-gradient-hover":"linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)","--button-solid":"#7c3aed","--button-solid-hover":"#6d28d9","--button-text":"#ffffff","--header-gradient":"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)","--header-text":"#ffffff","--icon-primary":"#7c3aed","--icon-secondary":"#8b5cf6","--icon-muted":"#a78bfa","--text-main":"#1e1b4b","--text-secondary":"#4c1d95","--text-muted":"#a78bfa","--border-color":"#ddd6fe","--border-color-light":"#ede9fe","--focus-ring":"rgba(124, 58, 237, 0.3)"},logo_url:null,modules:[]},"engarde-training":{id:"engarde-training",slug:"engarde-training",name:"En Garde Verhandlungstraining",branding:{"--app-bg-color":"linear-gradient(135deg, #fafafa 0%, #f5f5f5 50%, #fafafa 100%)","--sidebar-bg-color":"#333333","--sidebar-text-color":"#ffffff","--sidebar-text-muted":"#9ca3af","--sidebar-active-bg":"rgba(234, 88, 12, 0.2)","--sidebar-active-text":"#f97316","--sidebar-hover-bg":"rgba(255, 255, 255, 0.1)","--card-bg-color":"#ffffff","--primary-accent":"#ea580c","--primary-accent-light":"#fff7ed","--primary-accent-hover":"#c2410c","--button-gradient":"linear-gradient(135deg, #f97316 0%, #ea580c 100%)","--button-gradient-hover":"linear-gradient(135deg, #ea580c 0%, #c2410c 100%)","--button-solid":"#ea580c","--button-solid-hover":"#c2410c","--button-text":"#ffffff","--header-gradient":"linear-gradient(135deg, #f97316 0%, #ea580c 100%)","--header-text":"#ffffff","--icon-primary":"#ea580c","--icon-secondary":"#f97316","--icon-muted":"#9ca3af","--text-main":"#1f2937","--text-secondary":"#4b5563","--text-muted":"#9ca3af","--border-color":"#e5e7eb","--border-color-light":"#f3f4f6","--focus-ring":"rgba(234, 88, 12, 0.3)"},logo_url:null,modules:[]},staerkentrainer:{id:"staerkentrainer",slug:"staerkentrainer",name:"StÃ¤rkentrainer",branding:{"--app-bg-color":"linear-gradient(135deg, #fafafa 0%, #f5f7f2 50%, #fafafa 100%)","--sidebar-bg-color":"#2d2d2d","--sidebar-text-color":"#ffffff","--sidebar-text-muted":"#a3a3a3","--sidebar-active-bg":"rgba(106, 128, 50, 0.2)","--sidebar-active-text":"#8aa83a","--sidebar-hover-bg":"rgba(255, 255, 255, 0.1)","--card-bg-color":"#ffffff","--primary-accent":"#6a8032","--primary-accent-light":"#f0f4e8","--primary-accent-hover":"#556827","--button-gradient":"linear-gradient(135deg, #8aa83a 0%, #6a8032 100%)","--button-gradient-hover":"linear-gradient(135deg, #6a8032 0%, #556827 100%)","--button-solid":"#6a8032","--button-solid-hover":"#556827","--button-text":"#ffffff","--header-gradient":"linear-gradient(135deg, #8aa83a 0%, #6a8032 100%)","--header-text":"#ffffff","--icon-primary":"#6a8032","--icon-secondary":"#8aa83a","--icon-muted":"#a3a3a3","--text-main":"#1a1a1a","--text-secondary":"#525252","--text-muted":"#a3a3a3","--border-color":"#e5e5e5","--border-color-light":"#f5f5f5","--focus-ring":"rgba(106, 128, 50, 0.3)"},logo_url:null,modules:[]},"leadership-id":{id:"leadership-id",slug:"leadership-id",name:"Joachim Simon - Leadership ID",branding:{"--app-bg-color":"linear-gradient(135deg, #fafafa 0%, #f0f7f9 50%, #fafafa 100%)","--sidebar-bg-color":"#1a5f7a","--sidebar-text-color":"#ffffff","--sidebar-text-muted":"#8ecfe0","--sidebar-active-bg":"rgba(255, 255, 255, 0.2)","--sidebar-active-text":"#ffffff","--sidebar-hover-bg":"rgba(255, 255, 255, 0.1)","--card-bg-color":"#ffffff","--primary-accent":"#1a5f7a","--primary-accent-light":"#e0f2f7","--primary-accent-hover":"#134a5f","--button-gradient":"linear-gradient(135deg, #2980a8 0%, #1a5f7a 100%)","--button-gradient-hover":"linear-gradient(135deg, #1a5f7a 0%, #134a5f 100%)","--button-solid":"#1a5f7a","--button-solid-hover":"#134a5f","--button-text":"#ffffff","--header-gradient":"linear-gradient(135deg, #2980a8 0%, #1a5f7a 100%)","--header-text":"#ffffff","--icon-primary":"#1a5f7a","--icon-secondary":"#2980a8","--icon-muted":"#8ecfe0","--text-main":"#1a1a1a","--text-secondary":"#525252","--text-muted":"#9ca3af","--border-color":"#e5e7eb","--border-color-light":"#f3f4f6","--focus-ring":"rgba(26, 95, 122, 0.3)"},logo_url:null,modules:[]}};function ve(t){if(!t)return null;const e=t.toLowerCase().trim();return jt[e]||null}function Be(){if(typeof window>"u")return null;const t=new URLSearchParams(window.location.search);return t.get("partner")||t.get("pid")||null}function Pt(t,e){return!t||!t.modules||!Array.isArray(t.modules)||t.modules.length===0?!0:t.modules.includes(e)}function De(t,e,r){if(!t||!Array.isArray(t))return[];if(!e||e.slug==="default"||e.id==="default")return t;const s=e.visible_scenarios;if(!s||Array.isArray(s)||typeof s!="object")return[];const i=s[r];return!i||!Array.isArray(i)?[]:i.includes("__all__")?t:i.length===0?[]:t.filter(a=>{const f=Number(a.id);return i.includes(f)})}function $t(t,e){return!e||!e.modules||!Array.isArray(e.modules)||e.modules.length===0?t:t.filter(r=>{const s=String(r.id||"").toLowerCase(),i=String(r.slug||"").toLowerCase(),a=String(r.title||"").toLowerCase();return e.modules.some(f=>{const l=String(f).toLowerCase();return s.includes(l)||i.includes(l)||a.includes(l)||l.includes(s)||l.includes(i)||l.includes(a)})})}function ye(){return typeof window<"u"&&window.bewerbungstrainerConfig?.apiUrl?`${window.bewerbungstrainerConfig.apiUrl.replace("/bewerbungstrainer/v1","")}/karriereheld/v1`:typeof window<"u"?`${window.location.origin}/wp-json/karriereheld/v1`:"/wp-json/karriereheld/v1"}async function It(t){const e=ye(),r=t?`${e}/config?partner_slug=${encodeURIComponent(t)}`:`${e}/config`;try{const s=await fetch(r,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"same-origin"});if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);const i=await s.json();return i.success&&i.data?i.data:(console.warn("âš ï¸ [Partners] API returned no data, using mock fallback"),ve(t)||null)}catch(s){console.error("âŒ [Partners] Failed to fetch config from API:",s.message);const i=ve(t);return i||null}}async function Ft(t,e){const s=`${ye()}/login`;try{const i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({username:t,password:e})}),a=await i.json();return i.ok&&a.success?(a.data.nonce&&window.bewerbungstrainerConfig?(window.bewerbungstrainerConfig.nonce=a.data.nonce,window.bewerbungstrainerConfig.currentUser={id:a.data.user.id,name:a.data.user.displayName,firstName:a.data.user.firstName}):a.data.nonce||(console.warn("âš ï¸ [Partners] Server did not return a new nonce! API calls may fail."),console.warn("âš ï¸ [Partners] Current nonce:",window.bewerbungstrainerConfig?.nonce?.substring(0,10)+"...")),{success:!0,user:a.data.user,nonce:a.data.nonce}):(console.warn("âš ï¸ [Partners] Login failed:",a.error?.message),{success:!1,error:a.error?.message||"Login fehlgeschlagen"})}catch(i){return console.error("âŒ [Partners] Login request failed:",i.message),{success:!1,error:"Verbindungsfehler. Bitte versuchen Sie es erneut."}}}async function fe(){const e=`${ye()}/logout`;try{const s=await(await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin"})).json();return s.success&&window.bewerbungstrainerConfig&&(window.bewerbungstrainerConfig.currentUser={id:0,name:"",firstName:""}),s}catch(r){return console.error("âŒ [Partners] Logout request failed:",r.message),{success:!1,error:r.message}}}async function Me(){const e=`${ye()}/user`;try{const r=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json",...window.bewerbungstrainerConfig?.nonce&&{"X-WP-Nonce":window.bewerbungstrainerConfig.nonce}},credentials:"same-origin"});if(!r.ok)return null;const s=await r.json();return s.success&&s.data?.user?s.data.user:null}catch(r){return console.error("âŒ [Partners] Failed to get current user:",r.message),null}}const Ce={"karriere-placement":{id:"karriere-placement",name:"Karriere & Placement",description:"Vom Berufseinstieg bis zum Jobwechsel - optimal vorbereitet ins VorstellungsgesprÃ¤ch",icon:"ðŸŽ¯",color:"#3b82f6",focus:"Job bekommen",targetGroup:"B2C / Arbeitsamt"},"corporate-essentials":{id:"corporate-essentials",name:"Corporate Essentials",description:"Grundlegende Kommunikations- und GesprÃ¤chskompetenzen fÃ¼r den Berufsalltag",icon:"ðŸ¢",color:"#6366f1",focus:"Professionell kommunizieren",targetGroup:"B2B Allgemein"},"high-performance-sales":{id:"high-performance-sales",name:"High Performance Sales",description:"Vertriebstraining fÃ¼r maximale Abschlussquoten und Kundengewinnung",icon:"ðŸ’°",color:"#10b981",focus:"Umsatz machen",targetGroup:"B2B Vertrieb"},"coaching-toolkit":{id:"coaching-toolkit",name:"Coaching Toolkit",description:"Werkzeuge und Techniken fÃ¼r effektives Coaching und Mitarbeiterentwicklung",icon:"ðŸ› ï¸",color:"#f59e0b",focus:"Menschen entwickeln",targetGroup:"B2B HR / Coaches"},"leadership-academy":{id:"leadership-academy",name:"Leadership Academy",description:"FÃ¼hrungskompetenzen fÃ¼r Manager und Teamleiter",icon:"ðŸ‘”",color:"#8b5cf6",focus:"Menschen fÃ¼hren",targetGroup:"B2B HR / FÃ¼hrungskrÃ¤fte"},"social-care":{id:"social-care",name:"Social & Care",description:"Kommunikation im sozialen und pflegerischen Bereich",icon:"ðŸ’š",color:"#ec4899",focus:"Helfen & SchÃ¼tzen",targetGroup:"Public / Health"},"customer-care":{id:"customer-care",name:"Customer Care & Resilience",description:"Kundenservice, Beschwerdemanagement und Deeskalation",icon:"ðŸ›¡ï¸",color:"#ef4444",focus:"Deeskalieren & LÃ¶sen",targetGroup:"B2B Service"}},_t=Object.values(Ce);function Lt(t){return Ce[t]||null}function Bt(t,e){if(!t?.target_audience||!e)return console.log(`[SETUP-FILTER] "${t?.title}" excluded: no target_audience="${t?.target_audience}" or setupId="${e}"`),!1;const r=Lt(e);if(!r)return console.log(`[SETUP-FILTER] "${t?.title}" excluded: setup "${e}" not found in config`),!1;const s=t.target_audience.split(";").map(l=>l.trim().toLowerCase()),i=r.id?.toLowerCase(),a=r.name?.toLowerCase(),f=s.some(l=>l===i||l===a||l===e.toLowerCase());return console.log(`[SETUP-FILTER] "${t?.title}" target_audience="${t.target_audience}" setupId="${e}" â†’ ${f?"INCLUDED":"EXCLUDED"}`),f}function Dt(t,e){if(!t||!Array.isArray(t))return[];if(!e)return console.log(`[SETUP-FILTER] No setupId provided, returning all ${t.length} scenarios`),t;console.log(`[SETUP-FILTER] Filtering ${t.length} scenarios by setupId="${e}"`);const r=t.filter(s=>Bt(s,e));return console.log(`[SETUP-FILTER] Result: ${r.length} scenarios match setupId="${e}"`),r}const Ye=u.createContext(null),Mt=3e3;let we=!1;const xe="bewerbungstrainer_partner_cache",Ut=t=>{if(typeof window>"u"||!t)return null;try{const e=localStorage.getItem(xe);if(e){const r=JSON.parse(e);if(r&&r.slug===t)return console.log("ðŸ·ï¸ [PartnerContext] Using cached partner config for:",t),r}}catch(e){console.warn("ðŸ·ï¸ [PartnerContext] Failed to read cached partner config:",e)}return null},Ot=t=>{if(!(typeof window>"u"||!t))try{localStorage.setItem(xe,JSON.stringify(t)),console.log("ðŸ·ï¸ [PartnerContext] Cached partner config for:",t.slug)}catch(e){console.warn("ðŸ·ï¸ [PartnerContext] Failed to cache partner config:",e)}};function gr({children:t}){const[e,r]=u.useState(()=>{const h=typeof window<"u"?Be():null;return Ut(h)}),[s,i]=u.useState(!0),[a,f]=u.useState(we),[l,S]=u.useState(null),[x,y]=u.useState(!0);u.useEffect(()=>{if(we){f(!0);return}const h=setTimeout(()=>{f(!0),we=!0},Mt);return()=>clearTimeout(h)},[]);const d=!a||s,[m,k]=u.useState(null),[j,T]=u.useState(!1),[B,w]=u.useState(!1),[F,D]=u.useState(!0),[v,_]=u.useState(()=>typeof window<"u"&&localStorage.getItem("bewerbungstrainer_demo_code")||null),[M,W]=u.useState(!1),[o,J]=u.useState(()=>typeof window<"u"&&localStorage.getItem("bewerbungstrainer_selected_setup")||null),R=u.useCallback(()=>{if(l){const h={};return l.forEach(p=>{h[p.slug]={id:p.slug,name:p.name,description:p.description,icon:p.icon,color:p.color,focus:p.focus,targetGroup:p.target_group}}),h}return Ce},[l]),g=u.useCallback(()=>l?l.map(h=>({id:h.slug,name:h.name,description:h.description,icon:h.icon,color:h.color,focus:h.focus,targetGroup:h.target_group})):_t,[l]),N=async()=>{try{const h=window.bewerbungstrainerConfig?.apiUrl||"/wp-json/bewerbungstrainer/v1",p=await fetch(`${h}/setups`,{method:"GET",credentials:"same-origin"});if(p.ok){const b=await p.json();if(b.success&&b.data?.setups)return S(b.data.setups),b.data.setups}}catch(h){console.error("Failed to load setups from API:",h)}return y(!1),null},A=async()=>{const h=R();try{const p=window.bewerbungstrainerConfig?.apiUrl||"/wp-json/bewerbungstrainer/v1",b=await fetch(`${p}/user/setup`,{method:"GET",credentials:"same-origin",headers:{"X-WP-Nonce":window.bewerbungstrainerConfig?.nonce||""}});if(b.ok){const C=await b.json();if(C.success&&C.data?.setup_id&&h[C.data.setup_id])return J(C.data.setup_id),localStorage.setItem("bewerbungstrainer_selected_setup",C.data.setup_id),C.data.setup_id}}catch(p){console.error("Failed to load setup from user profile:",p)}return null};u.useEffect(()=>{N().then(()=>y(!1))},[]),u.useEffect(()=>{(async()=>{const p=Be();if(!p){e&&(r(null),localStorage.removeItem(xe)),i(!1);return}try{const b=await It(p);b?(r(b),Ot(b)):(console.warn("ðŸ·ï¸ [PartnerContext] Partner not found:",p),r(null),localStorage.removeItem(xe))}catch(b){if(console.error("ðŸ·ï¸ [PartnerContext] Error loading partner config:",b),!e&&p){const C=ve(p);C&&r(C)}}i(!1)})()},[]);const q=async()=>{try{const h=window.bewerbungstrainerConfig?.apiUrl||"/wp-json/bewerbungstrainer/v1",p=await fetch(`${h}/admin/check`,{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json","X-WP-Nonce":window.bewerbungstrainerConfig?.nonce||""}});return p.ok&&(await p.json()).data?.isAdmin||!1}catch{return!1}};u.useEffect(()=>{(async()=>{const p=window.bewerbungstrainerConfig,b=localStorage.getItem("bewerbungstrainer_demo_pending"),C=localStorage.getItem("bewerbungstrainer_demo_code"),z=p?.currentUser?.login?.toLowerCase()==="demo";if(b==="true"&&z&&!C){localStorage.removeItem("bewerbungstrainer_demo_pending");try{await fe()}catch(I){console.error("ðŸ” [PartnerContext] Error logging out demo user:",I)}D(!1);return}if(p?.currentUser?.id&&p.currentUser.id>0){if(z&&!C){try{await fe()}catch(K){console.error("ðŸ” [PartnerContext] Error logging out demo user:",K)}D(!1);return}k({id:p.currentUser.id,displayName:p.currentUser.name,firstName:p.currentUser.firstName}),T(!0),z&&C&&(W(!0),_(C));const I=await q();w(I),z||await A()}else try{const I=await Me();if(I){const K=I.login?.toLowerCase()==="demo";if(K&&!C){await fe(),D(!1);return}k(I),T(!0),K&&C&&(W(!0),_(C));const ne=await q();w(ne),K||await A()}}catch{}D(!1)})()},[]),u.useEffect(()=>{H(e)},[e]);const H=h=>{const p=document.documentElement,b=document.getElementById("bewerbungstrainer-app")||document.getElementById("root"),C=h?.branding||he;Object.entries(C).forEach(([z,I])=>{p.style.setProperty(z,I)}),b&&Object.entries(C).forEach(([z,I])=>{b.style.setProperty(z,I)})},Y=h=>$t(h,e),P=(h,p)=>De(h,e,p),Q=h=>Pt(e,h),$=()=>e?.branding||he,ee=()=>e?.logo_url||null,Ne=u.useCallback(async(h,p)=>{const b=await Ft(h,p);if(b.success){let C=!1;const z=[200,400,600];for(let K=0;K<z.length;K++){await new Promise(ne=>setTimeout(ne,z[K]));try{if((await fetch(`${window.bewerbungstrainerConfig?.apiUrl||"/wp-json/bewerbungstrainer/v1"}/user/info`,{method:"GET",headers:{"X-WP-Nonce":b.nonce},credentials:"same-origin"})).ok){C=!0;break}}catch{}}C||console.warn("âš ï¸ [PartnerContext] Cookie could not be verified, proceeding anyway"),b.nonce&&window.bewerbungstrainerConfig&&(console.log("ðŸ” [PartnerContext] Updating global nonce after login"),window.bewerbungstrainerConfig.nonce=b.nonce),k(b.user),T(!0);const I=await q();w(I)}else console.warn("âš ï¸ [PartnerContext] Login failed:",b.error);return b},[]),je=u.useCallback(async()=>{const h=await fe();return k(null),T(!1),w(!1),_(null),W(!1),typeof window<"u"&&localStorage.removeItem("bewerbungstrainer_demo_code"),h},[]),de=u.useCallback(h=>{if(h){const p=h.toUpperCase();_(p),W(!0),typeof window<"u"&&localStorage.setItem("bewerbungstrainer_demo_code",p)}else _(null),W(!1),typeof window<"u"&&localStorage.removeItem("bewerbungstrainer_demo_code")},[]),Pe=u.useCallback(()=>{de(null)},[de]),ue=u.useCallback(async h=>{const p=R(),b=h&&p[h]?h:null;if(J(b),typeof window<"u"&&(b?localStorage.setItem("bewerbungstrainer_selected_setup",b):localStorage.removeItem("bewerbungstrainer_selected_setup")),j&&!M)try{const C=window.bewerbungstrainerConfig?.apiUrl||"/wp-json/bewerbungstrainer/v1";await fetch(`${C}/user/setup`,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json","X-WP-Nonce":window.bewerbungstrainerConfig?.nonce||""},body:JSON.stringify({setup_id:b})})}catch(C){console.error("Failed to save setup to user profile:",C)}},[j,M,R]),$e=u.useCallback(()=>{ue(null)},[ue]),Ie=u.useCallback(()=>{const h=R();return o&&h[o]?h[o]:null},[o,R]),Fe=u.useCallback((h,p)=>{let b=De(h,e,p);return o&&(b=Dt(b,o)),b},[e,o]),_e=u.useCallback(async()=>{try{const h=await Me();return h?(k(h),T(!0),h):(k(null),T(!1),null)}catch(h){return console.error("âŒ [PartnerContext] Failed to refresh user:",h),null}},[]),dt=u.useMemo(()=>({partner:e,isLoading:d,isWhiteLabel:!!e,filterScenarios:Y,filterScenariosByType:P,checkModuleAllowed:Q,getBranding:$,getLogoUrl:ee,branding:e?.branding||he,logoUrl:e?.logo_url||null,partnerName:e?.name||"Karriereheld",appName:e?.app_name||null,dashboardSubtitle:e?.dashboard_subtitle||null,user:m,isAuthenticated:j,isAdmin:B,authLoading:F,login:Ne,logout:je,refreshUser:_e,demoCode:v,isDemoUser:M,setDemoCode:de,clearDemoCode:Pe,selectedSetup:o,currentSetup:Ie(),setSelectedSetup:ue,clearSelectedSetup:$e,filterScenariosBySetupAndPartner:Fe,availableSetups:g(),SCENARIO_SETUPS:R(),setupsLoading:x}),[e,d,Y,P,Q,$,ee,m,j,B,F,Ne,je,_e,v,M,de,Pe,o,Ie,ue,$e,Fe,g,R,x]);return n.jsx(Ye.Provider,{value:dt,children:t})}function re(){const t=u.useContext(Ye);if(!t)throw new Error("usePartner must be used within a PartnerProvider");return t}function Qe(){const{user:t,isAuthenticated:e,isAdmin:r,authLoading:s,login:i,logout:a,refreshUser:f}=re();return{user:t,isAuthenticated:e,isAdmin:r,isLoading:s,login:i,logout:a,refreshUser:f}}const c={indigo:{400:"#818CF8",500:"#6366F1",600:"#4F46E5"},violet:{500:"#8B5CF6",600:"#7C3AED"},blue:{50:"#EFF6FF",200:"#BFDBFE",300:"#93C5FD",400:"#60A5FA",500:"#3B82F6",600:"#2563EB"},sky:{400:"#38BDF8"},teal:{50:"#F0FDFA",400:"#2DD4BF",500:"#14B8A6"},emerald:{500:"#10B981"},slate:{50:"#F8FAFC",100:"#F1F5F9",200:"#E2E8F0",300:"#CBD5E1",400:"#94A3B8",500:"#64748B",700:"#334155",800:"#1E293B",900:"#0F172A"},green:{50:"#F0FDF4",100:"#DCFCE7",200:"#BBF7D0",300:"#86EFAC",400:"#4ADE80",500:"#22C55E",600:"#16A34A",700:"#15803D",800:"#166534"},amber:{50:"#FFFBEB",100:"#FEF3C7",200:"#FDE68A",400:"#FBBF24",500:"#F59E0B",600:"#D97706",800:"#92400E"},red:{50:"#FEF2F2",100:"#FEE2E2",200:"#FECACA",300:"#FCA5A5",400:"#F87171",500:"#EF4444",600:"#DC2626",700:"#B91C1C",800:"#991B1B"},purple:{50:"#FAF5FF",400:"#C084FC",500:"#A855F7",600:"#9333EA"},cyan:{500:"#06B6D4",600:"#0891B2"},orange:{500:"#F97316"},pink:{500:"#EC4899"},rose:{500:"#F43F5E"},yellow:{500:"#EAB308"},white:"#FFFFFF"},fr={header:`linear-gradient(135deg, ${c.indigo[600]} 0%, ${c.violet[600]} 100%)`,button:`linear-gradient(135deg, ${c.indigo[600]} 0%, ${c.indigo[500]} 100%)`};function mr(t,e){return t>=80?c.green[500]:t>=60?e||c.indigo[500]:t>=40?c.amber[500]:c.red[500]}const me={success:{bg:c.emerald[500]},error:{bg:c.red[500]},info:{bg:c.blue[500]},warning:{bg:c.amber[500]}},hr={love:{color:"#E11D48"},talent:{color:c.amber[500]},need:{color:c.emerald[500]},market:{color:c.indigo[500]}},pr={trackLightRgba:"rgba(255,255,255,0.25)"},br=[c.indigo[500],c.violet[500],c.purple[500],c.pink[500],c.rose[500],c.orange[500],c.yellow[500],c.green[500],c.indigo[600],c.cyan[500]];function pe(t,e=1){const r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(!r)return t;const s=parseInt(r[1],16),i=parseInt(r[2],16),a=parseInt(r[3],16);return`rgba(${s}, ${i}, ${a}, ${e})`}function V(t,e,r=135){return`linear-gradient(${r}deg, ${t} 0%, ${e} 100%)`}const et=u.createContext(null),Ue={success:{bgColor:me.success.bg,icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})},error:{bgColor:me.error.bg,icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})},info:{bgColor:me.info.bg,icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},warning:{bgColor:me.warning.bg,icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}};function Rt({id:t,message:e,type:r="success",duration:s=3e3,onDismiss:i}){const a=Ue[r]||Ue.info;return u.useEffect(()=>{if(s>0){const f=setTimeout(()=>{i(t)},s);return()=>clearTimeout(f)}},[t,s,i]),n.jsxs(O.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},transition:{duration:.2},className:"flex items-center gap-3 px-5 py-3.5 text-white rounded-xl shadow-2xl text-[15px] font-medium min-w-[280px] max-w-[400px]",style:{backgroundColor:a.bgColor},children:[n.jsx("span",{className:"flex-shrink-0",children:a.icon}),n.jsx("span",{className:"flex-1",children:e}),n.jsx("button",{onClick:()=>i(t),className:"bg-white/20 border-none rounded-md p-1 cursor-pointer flex items-center justify-center text-white flex-shrink-0 hover:bg-white/30 transition-colors",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}function zt({toasts:t,onDismiss:e}){return n.jsx("div",{className:"fixed top-5 left-1/2 -translate-x-1/2 z-[9999] flex flex-col gap-2.5 items-center",children:n.jsx(ce,{children:t.map(r=>n.jsx(Rt,{...r,onDismiss:e},r.id))})})}function xr({children:t}){const[e,r]=u.useState([]),s=u.useCallback((y,d="success",m=3e3)=>{const k=Date.now()+Math.random();return r(j=>[...j,{id:k,message:y,type:d,duration:m}]),k},[]),i=u.useCallback(y=>{r(d=>d.filter(m=>m.id!==y))},[]),a=u.useCallback((y,d)=>s(y,"success",d),[s]),f=u.useCallback((y,d)=>s(y,"error",d),[s]),l=u.useCallback((y,d)=>s(y,"info",d),[s]),S=u.useCallback((y,d)=>s(y,"warning",d),[s]),x={addToast:s,dismissToast:i,showSuccess:a,showError:f,showInfo:l,showWarning:S};return n.jsxs(et.Provider,{value:x,children:[t,n.jsx(zt,{toasts:e,onDismiss:i})]})}function tt(){const t=u.useContext(et);if(!t)throw new Error("useToast must be used within a ToastProvider");return t}const rt=({isOpen:t,onClose:e,onConfirm:r,colors:s})=>t?n.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center",children:[n.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/50",onClick:e}),n.jsx(O.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative bg-white rounded-2xl shadow-2xl p-6 mx-4 max-w-sm w-full",children:n.jsxs("div",{className:"flex flex-col items-center text-center",children:[n.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mb-4",style:{backgroundColor:`${c.amber[100]}`},children:n.jsx(Tt,{className:"w-6 h-6",style:{color:c.amber[600]}})}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Abmelden?"}),n.jsx("p",{className:"text-slate-600 text-sm mb-6",children:"MÃ¶chten Sie sich wirklich abmelden?"}),n.jsxs("div",{className:"flex gap-3 w-full",children:[n.jsx("button",{onClick:e,className:"flex-1 px-4 py-2.5 rounded-xl font-medium text-sm transition-colors border cursor-pointer",style:{backgroundColor:"transparent",borderColor:c.slate[200],color:c.slate[700]},onMouseEnter:i=>{i.currentTarget.style.backgroundColor=c.slate[50]},onMouseLeave:i=>{i.currentTarget.style.backgroundColor="transparent"},children:"Abbrechen"}),n.jsx("button",{onClick:r,className:"flex-1 px-4 py-2.5 rounded-xl font-medium text-sm transition-colors border-none cursor-pointer",style:{backgroundColor:s?.primaryAccent||c.indigo[500],color:"white"},onMouseEnter:i=>{i.currentTarget.style.opacity="0.9"},onMouseLeave:i=>{i.currentTarget.style.opacity="1"},children:"Abmelden"})]})]})})]}):null,te={indigo:{600:c.indigo[600]},violet:{500:c.violet[500]}},E={sidebarBg:c.slate[800],sidebarText:c.slate[50],sidebarTextMuted:c.slate[400],sidebarActiveBg:pe(c.indigo[500],.15),sidebarActiveText:c.indigo[400],sidebarHoverBg:"rgba(255, 255, 255, 0.05)",primaryAccent:c.indigo[500],borderColor:"rgba(255, 255, 255, 0.1)",borderColorLight:"rgba(255, 255, 255, 0.05)"},nt=t=>t?{sidebarBg:t["--sidebar-bg-color"]||E.sidebarBg,sidebarText:t["--sidebar-text-color"]||E.sidebarText,sidebarTextMuted:t["--sidebar-text-muted"]||E.sidebarTextMuted,sidebarActiveBg:t["--sidebar-active-bg"]||E.sidebarActiveBg,sidebarActiveText:t["--sidebar-active-text"]||E.sidebarActiveText,sidebarHoverBg:t["--sidebar-hover-bg"]||E.sidebarHoverBg,primaryAccent:t["--primary-accent"]||E.primaryAccent,borderColor:t["--border-color"]||E.borderColor,borderColorLight:t["--border-color-light"]||E.borderColorLight}:null,st=[{id:"overview",moduleId:"overview",label:"Ãœbersicht",shortLabel:"Ãœbersicht",icon:ft,description:"Alle TrainingsmÃ¶glichkeiten",alwaysVisible:!0},{id:"ki_coach",moduleId:"ki_coach",label:"KI-Coach",shortLabel:"Coach",icon:mt,description:"Dein persÃ¶nlicher Trainings-Coach"},{id:"ikigai",moduleId:"ikigai",label:"Ikigai-Kompass",shortLabel:"Ikigai",icon:ht,description:"Finde deinen idealen Karrierepfad"},{id:"decision_board",moduleId:"decision_board",label:"Entscheidungs-Kompass",shortLabel:"Entscheidung",icon:pt,description:"KI-gestÃ¼tzte Entscheidungshilfe"},{id:"smart_briefing",moduleId:"smart_briefing",label:"Smart Briefing",shortLabel:"Briefing",icon:Ge,description:"KI-Vorbereitungs-Assistent"},{id:"simulator",moduleId:"simulator",label:"Szenario-Training",shortLabel:"Szenario",icon:be,description:"Frage-Antwort Training mit KI-Feedback"},{id:"video_training",moduleId:"video_training",label:"Wirkungs-Analyse",shortLabel:"Wirkung",icon:qe,description:"Video-Aufnahme mit Wirkungs-Analyse"},{id:"dashboard",moduleId:"roleplay",label:"Live-Simulationen",shortLabel:"Live",icon:We,description:"Live Simulationen mit KI-Interviewer"},{id:"gym",moduleId:"gym",label:"Rhetorik-Gym",shortLabel:"Gym",icon:xt,description:"Spielerisch Rhetorik trainieren",subItems:[{id:"gym_klassiker",label:"Der FÃ¼llwort-Killer",shortLabel:"Klassiker",icon:bt,description:"60s Elevator Pitch"}]},{id:"history",moduleId:"history",label:"Meine Sessions",shortLabel:"Sessions",icon:yt,description:"Vergangene Ãœbungen ansehen"},{id:"usage_limits",moduleId:"roleplay",label:"Mein Kontingent",shortLabel:"Kontingent",icon:Ke,description:"VerfÃ¼gbare GesprÃ¤chsminuten"}],it=[{id:"admin",label:"Administration",shortLabel:"Admin",icon:St,description:"Inhalte verwalten",adminOnly:!0,subItems:[{id:"admin_roleplays",label:"Live-Simulationen",shortLabel:"Live",icon:We,description:"Simulations-Szenarien verwalten"},{id:"admin_simulator",label:"Szenario-Training",shortLabel:"Simulator",icon:be,description:"Simulator-Szenarien verwalten"},{id:"admin_video",label:"Wirkungs-Analyse",shortLabel:"Wirkung",icon:qe,description:"Wirkungs-Analysen verwalten"},{id:"admin_partners",label:"Partner-Branding",shortLabel:"Partner",icon:wt,description:"White-Label Partner verwalten"}]}],Gt=({isCollapsed:t,onToggleCollapse:e,activeView:r,onNavigate:s,headerOffset:i=0,onLoginClick:a})=>{const[f,l]=u.useState([]),[S,x]=u.useState(!1),{branding:y,isWhiteLabel:d,partnerName:m,logoUrl:k,checkModuleAllowed:j}=re(),{user:T,isAuthenticated:B,isAdmin:w,logout:F}=Qe(),{showSuccess:D}=tt(),v=nt(y),_=u.useMemo(()=>{const g=st.filter(N=>{if(N.alwaysVisible)return!0;const A=N.moduleId||N.id;return j(A)});return w?[...g,...it]:g},[j,w]),M=()=>{x(!0)},W=async()=>{x(!1),await F(),D("Sie wurden erfolgreich abgemeldet",3e3)},o=u.useMemo(()=>v?{sidebarBg:v.sidebarBg,sidebarText:v.sidebarText,sidebarTextMuted:v.sidebarTextMuted,activeBg:v.sidebarActiveBg,activeText:v.sidebarActiveText,hoverBg:v.sidebarHoverBg,primaryAccent:v.primaryAccent,borderColor:v.borderColor,borderColorLight:v.borderColorLight}:{sidebarBg:E.sidebarBg,sidebarText:E.sidebarText,sidebarTextMuted:E.sidebarTextMuted,activeBg:E.sidebarActiveBg,activeText:E.sidebarActiveText,hoverBg:E.sidebarHoverBg,primaryAccent:E.primaryAccent,borderColor:E.borderColor,borderColorLight:E.borderColorLight},[v]),J=g=>{l(N=>N.includes(g)?N.filter(A=>A!==g):[...N,g])},R=g=>{g.subItems&&!t?J(g.id):s(g.id)};return n.jsxs(O.aside,{initial:!1,animate:{width:t?72:280},transition:{duration:.3,ease:[.4,0,.2,1]},className:"fixed left-0 bottom-0 z-40 flex flex-col shadow-lg",style:{top:i,backgroundColor:o.sidebarBg,borderRight:`1px solid ${o.borderColor}`},children:[n.jsx("div",{className:"h-16 flex items-center justify-between px-4",style:{borderBottom:`1px solid ${o.borderColorLight}`},children:n.jsx(ce,{mode:"wait",children:t?n.jsx(O.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},className:"w-10 h-10 rounded-xl flex items-center justify-center shadow mx-auto overflow-hidden",style:{background:d?o.primaryAccent:`linear-gradient(135deg, ${te.indigo[600]} 0%, ${te.violet[500]} 100%)`},children:k?n.jsx("img",{src:k,alt:m,className:"w-full h-full object-contain"}):n.jsx(Se,{className:"w-5 h-5 text-white"})},"logo-collapsed"):n.jsxs(O.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},className:"flex items-center gap-3",children:[k?n.jsx("img",{src:k,alt:m,className:"w-10 h-10 rounded-xl object-contain"}):n.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center shadow",style:{background:d?o.primaryAccent:`linear-gradient(135deg, ${te.indigo[600]} 0%, ${te.violet[500]} 100%)`},children:n.jsx(Se,{className:"w-5 h-5 text-white"})}),n.jsx("div",{className:"flex flex-col",children:d?n.jsx("span",{className:"font-bold text-sm leading-snug",style:{color:o.sidebarText},children:m}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"font-bold text-sm leading-tight",style:{color:o.sidebarText},children:"Karriere"}),n.jsx("span",{className:"font-bold text-sm leading-tight",style:{color:o.primaryAccent},children:"Navigation"})]})})]},"logo-full")})}),n.jsx("nav",{className:"flex-1 py-2 px-3 overflow-y-auto scrollbar-dark",children:_.map(g=>{const N=g.icon,A=r===g.id||g.id==="dashboard"&&r==="roleplay"||g.id==="gym"&&r.startsWith("gym")||g.id==="admin"&&r.startsWith("admin"),q=g.subItems&&g.subItems.length>0,H=f.includes(g.id),Y=g.adminOnly;return n.jsxs("div",{children:[Y&&n.jsx("div",{className:"my-3",style:{borderTop:`1px solid ${o.borderColor}`},children:!t&&n.jsx("span",{className:"block text-xs font-semibold uppercase tracking-wide mt-3 mb-2 pl-3",style:{color:o.sidebarTextMuted},children:"Admin"})}),n.jsxs("button",{onClick:()=>R(g),className:"w-full rounded-xl flex items-center gap-3 relative mb-1 transition-all duration-200 text-left border-none cursor-pointer",style:{padding:t?"12px":"12px 16px",justifyContent:t?"center":"flex-start",backgroundColor:A?o.activeBg:"transparent",color:A?o.activeText:o.sidebarText,fontWeight:A?600:400,fontSize:"14px"},onMouseEnter:P=>{A||(P.currentTarget.style.backgroundColor=o.hoverBg)},onMouseLeave:P=>{A||(P.currentTarget.style.backgroundColor="transparent")},children:[A&&n.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-8 rounded-r-full",style:{backgroundColor:o.primaryAccent}}),n.jsx(N,{className:"w-5 h-5 shrink-0",style:{color:A?o.primaryAccent:o.sidebarTextMuted}}),!t&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex flex-col overflow-hidden flex-1 min-w-0",children:[n.jsx("span",{className:"whitespace-nowrap overflow-hidden text-ellipsis",style:{color:A?o.activeText:o.sidebarText},children:g.label}),n.jsx("span",{className:"text-xs leading-snug",style:{color:o.sidebarTextMuted},children:g.description})]}),q&&n.jsx(He,{className:"w-4 h-4 transition-transform duration-200",style:{color:o.sidebarTextMuted,transform:H?"rotate(180deg)":"rotate(0deg)"}})]})]}),q&&!t&&n.jsx(ce,{children:H&&n.jsx(O.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"overflow-hidden ml-4",children:g.subItems.map(P=>{const Q=P.icon,$=r===P.id;return n.jsxs("button",{onClick:()=>s(P.id),className:"w-full rounded-lg flex items-center gap-2.5 mb-0.5 transition-all duration-200 text-left border-none cursor-pointer",style:{padding:"10px 14px",backgroundColor:$?o.activeBg:"transparent",color:$?o.activeText:o.sidebarText,fontWeight:$?600:400,fontSize:"13px"},onMouseEnter:ee=>{$||(ee.currentTarget.style.backgroundColor=o.hoverBg)},onMouseLeave:ee=>{$||(ee.currentTarget.style.backgroundColor="transparent")},children:[n.jsx(Q,{className:"w-4 h-4 shrink-0",style:{color:$?o.primaryAccent:o.sidebarTextMuted}}),n.jsx("span",{className:"whitespace-nowrap",style:{color:$?o.activeText:o.sidebarText},children:P.label})]},P.id)})})})]},g.id)})}),n.jsx("div",{className:"p-3",style:{borderTop:`1px solid ${o.borderColorLight}`},children:B&&T?n.jsxs("div",{className:"mb-2",children:[!t&&n.jsxs("div",{className:"flex items-center gap-2.5 p-2.5 rounded-xl mb-2",style:{border:`1px solid ${o.borderColor}`},children:[n.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center text-white font-semibold text-sm shrink-0",style:{backgroundColor:o.primaryAccent},children:(T.firstName||T.displayName||"U").charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[n.jsx("div",{className:"font-semibold text-sm whitespace-nowrap overflow-hidden text-ellipsis",style:{color:o.sidebarText},children:T.displayName||T.firstName||"Benutzer"}),T.email&&n.jsx("div",{className:"text-xs opacity-70 whitespace-nowrap overflow-hidden text-ellipsis",style:{color:o.sidebarText},children:T.email})]})]}),n.jsxs("button",{onClick:M,className:"w-full rounded-xl flex items-center gap-2.5 transition-all duration-200 border-none cursor-pointer text-sm",style:{padding:"10px 12px",justifyContent:t?"center":"flex-start",color:o.sidebarText,backgroundColor:"transparent"},onMouseEnter:g=>{g.currentTarget.style.backgroundColor=o.hoverBg},onMouseLeave:g=>{g.currentTarget.style.backgroundColor="transparent"},title:"Abmelden",children:[n.jsx(Ve,{className:"w-[18px] h-[18px] shrink-0"}),!t&&n.jsx("span",{children:"Abmelden"})]})]}):n.jsxs("button",{onClick:a,className:"w-full rounded-xl flex items-center gap-2.5 transition-all duration-200 cursor-pointer text-sm font-medium mb-2",style:{padding:"10px 12px",justifyContent:t?"center":"flex-start",color:o.sidebarText,backgroundColor:"transparent",border:`1px solid ${o.borderColor}`},onMouseEnter:g=>{g.currentTarget.style.backgroundColor=o.hoverBg},onMouseLeave:g=>{g.currentTarget.style.backgroundColor="transparent"},title:"Anmelden",children:[n.jsx(Xe,{className:"w-[18px] h-[18px] shrink-0"}),!t&&n.jsx("span",{children:"Anmelden"})]})}),n.jsx("div",{className:"px-3 pb-3",children:n.jsx("button",{onClick:e,className:"w-full rounded-xl flex items-center gap-3 transition-all duration-200 border-none cursor-pointer text-sm",style:{padding:"12px",justifyContent:t?"center":"flex-start",color:o.sidebarTextMuted,backgroundColor:"transparent"},onMouseEnter:g=>{g.currentTarget.style.backgroundColor=o.hoverBg,g.currentTarget.style.color=o.sidebarText},onMouseLeave:g=>{g.currentTarget.style.backgroundColor="transparent",g.currentTarget.style.color=o.sidebarTextMuted},children:t?n.jsx(Ze,{className:"w-5 h-5"}):n.jsxs(n.Fragment,{children:[n.jsx(kt,{className:"w-5 h-5"}),n.jsx("span",{children:"Einklappen"})]})})}),n.jsx(rt,{isOpen:S,onClose:()=>x(!1),onConfirm:W,colors:o})]})},qt=({activeView:t,onNavigate:e,headerOffset:r=0,onLoginClick:s})=>{const[i,a]=u.useState(!1),[f,l]=u.useState([]),[S,x]=u.useState(!1),{branding:y,isWhiteLabel:d,partnerName:m,logoUrl:k,checkModuleAllowed:j}=re(),{user:T,isAuthenticated:B,isAdmin:w,logout:F}=Qe(),{showSuccess:D}=tt(),v=nt(y),_=u.useMemo(()=>{const g=st.filter(N=>{const A=N.moduleId||N.id;return j(A)});return w?[...g,...it]:g},[j,w]),M=()=>{x(!0)},W=async()=>{x(!1),a(!1),await F(),D("Sie wurden erfolgreich abgemeldet",3e3)},o=u.useMemo(()=>v?{headerBg:v.sidebarBg,headerText:v.sidebarText,headerTextMuted:v.sidebarTextMuted,menuBg:c.white,activeBg:v.sidebarActiveBg,activeText:v.sidebarActiveText,hoverBg:v.sidebarHoverBg,primaryAccent:v.primaryAccent,borderColor:v.borderColor,textMain:c.slate[700],textMuted:c.slate[400]}:{headerBg:E.sidebarBg,headerText:E.sidebarText,headerTextMuted:E.sidebarTextMuted,menuBg:c.white,activeBg:E.sidebarActiveBg,activeText:E.sidebarActiveText,hoverBg:c.slate[50],primaryAccent:E.primaryAccent,borderColor:E.borderColor,textMain:c.slate[700],textMuted:c.slate[400]},[v]),J=g=>{e(g),a(!1)},R=g=>{l(N=>N.includes(g)?N.filter(A=>A!==g):[...N,g])};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"fixed left-0 right-0 h-14 flex items-center justify-between px-4 z-50 shadow-sm transition-[top] duration-150",style:{top:r,backgroundColor:o.headerBg,borderBottom:`1px solid ${o.borderColor}`},children:[n.jsxs("div",{className:"flex items-center gap-2.5",children:[k?n.jsx("img",{src:k,alt:m,className:"w-9 h-9 rounded-lg object-contain"}):n.jsx("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center",style:{background:d?o.primaryAccent:`linear-gradient(135deg, ${te.indigo[600]} 0%, ${te.violet[500]} 100%)`},children:n.jsx(Se,{className:"w-[18px] h-[18px] text-white"})}),n.jsx("span",{className:"font-bold text-[15px]",style:{color:o.headerText},children:d?m:"Karriere Navigation"})]}),n.jsx("button",{onClick:()=>a(!i),className:"w-14 h-14 rounded-xl border-none flex items-center justify-center cursor-pointer",style:{backgroundColor:i?o.hoverBg:"transparent"},children:i?n.jsx(Je,{className:"w-10 h-10",style:{color:o.headerText}}):n.jsx(vt,{className:"w-10 h-10",style:{color:o.headerText}})})]}),n.jsx(ce,{children:i&&n.jsxs(n.Fragment,{children:[n.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>a(!1),className:"fixed left-0 right-0 bottom-0 z-40 bg-black/30",style:{top:r+56}}),n.jsxs(O.nav,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"fixed left-0 right-0 z-[45] p-2 shadow-lg rounded-b-2xl max-h-[70vh] overflow-y-auto scrollbar-dark",style:{top:r+56,backgroundColor:o.menuBg},children:[_.map(g=>{const N=g.icon,A=t===g.id||g.id==="dashboard"&&t==="roleplay"||g.id==="gym"&&t.startsWith("gym")||g.id==="admin"&&t.startsWith("admin"),q=g.subItems&&g.subItems.length>0,H=f.includes(g.id),Y=g.adminOnly;return n.jsxs("div",{children:[Y&&n.jsx("div",{className:"mx-2 my-3",style:{borderTop:`1px solid ${o.borderColor}`},children:n.jsx("span",{className:"block text-xs font-semibold uppercase tracking-wide mt-3 mb-2 pl-2",style:{color:o.textMuted},children:"Admin"})}),n.jsxs("button",{onClick:()=>q?R(g.id):J(g.id),className:"w-full flex items-center gap-3 rounded-xl mb-1 text-left border-none cursor-pointer",style:{padding:"14px 16px",backgroundColor:A?o.activeBg:"transparent",color:A?o.activeText:o.textMain,fontSize:"15px",fontWeight:A?600:500},children:[n.jsx(N,{className:"w-[22px] h-[22px]",style:{color:A?o.primaryAccent:o.textMuted}}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{children:g.label}),n.jsx("div",{className:"text-xs font-normal",style:{color:o.textMuted},children:g.description})]}),q&&n.jsx(He,{className:"w-[18px] h-[18px] transition-transform duration-200",style:{color:o.textMuted,transform:H?"rotate(180deg)":"rotate(0deg)"}})]}),q&&H&&n.jsx("div",{className:"ml-5 mb-2",children:g.subItems.map(P=>{const Q=P.icon,$=t===P.id;return n.jsxs("button",{onClick:()=>J(P.id),className:"w-full flex items-center gap-2.5 rounded-lg mb-1 text-left border-none cursor-pointer",style:{padding:"12px 14px",backgroundColor:$?o.activeBg:"transparent",color:$?o.activeText:o.textMain,fontSize:"14px",fontWeight:$?600:400},children:[n.jsx(Q,{className:"w-[18px] h-[18px]",style:{color:$?o.primaryAccent:o.textMuted}}),n.jsx("span",{children:P.label})]},P.id)})})]},g.id)}),n.jsx("div",{className:"mt-4 pt-4",style:{borderTop:`1px solid ${o.borderColor}`},children:B&&T?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl mb-2",style:{border:`1px solid ${o.borderColor}`},children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold text-base shrink-0",style:{backgroundColor:o.primaryAccent},children:(T.firstName||T.displayName||"U").charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-semibold text-[15px]",style:{color:o.textMain},children:T.displayName||T.firstName||"Benutzer"}),T.email&&n.jsx("div",{className:"text-[13px] opacity-70",style:{color:o.textMain},children:T.email})]})]}),n.jsxs("button",{onClick:M,className:"w-full flex items-center gap-3 rounded-xl border-none cursor-pointer text-left",style:{padding:"12px 16px",backgroundColor:"transparent",color:o.textMain,fontSize:"15px",fontWeight:500},children:[n.jsx(Ve,{className:"w-5 h-5"}),n.jsx("span",{children:"Abmelden"})]})]}):n.jsxs("button",{onClick:()=>{s&&s(),a(!1)},className:"w-full flex items-center gap-3 rounded-xl cursor-pointer text-left",style:{padding:"14px 16px",border:`1px solid ${o.borderColor}`,backgroundColor:"transparent",color:o.textMain,fontSize:"15px",fontWeight:600},children:[n.jsx(Xe,{className:"w-5 h-5"}),n.jsx("span",{children:"Anmelden"})]})})]})]})}),n.jsx(rt,{isOpen:S,onClose:()=>x(!1),onConfirm:W,colors:o})]})},yr=({children:t,activeView:e,onNavigate:r,headerOffset:s=0,onLoginClick:i})=>{const[a,f]=u.useState(!1),[l,S]=u.useState(!1),{branding:x}=re(),y=u.useMemo(()=>{if(x){const m=x["--app-bg-start"]||c.slate[50],k=x["--app-bg-mid"]||c.blue[50],j=x["--app-bg-end"]||c.teal[50];return`linear-gradient(135deg, ${m} 0%, ${k} 50%, ${j} 100%)`}return`linear-gradient(135deg, ${c.slate[50]} 0%, ${c.blue[50]} 50%, ${c.teal[50]} 100%)`},[x]);u.useEffect(()=>{const m=()=>{S(window.innerWidth<768)};m(),window.addEventListener("resize",m);const k=localStorage.getItem("sidebar-collapsed");return k!==null&&f(JSON.parse(k)),()=>window.removeEventListener("resize",m)},[]);const d=()=>{const m=!a;f(m),localStorage.setItem("sidebar-collapsed",JSON.stringify(m))};return l?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 -z-10",style:{background:y}}),n.jsxs("div",{style:{minHeight:s>0?`calc(100vh - ${s}px)`:"100vh"},children:[n.jsx(qt,{activeView:e,onNavigate:r,headerOffset:s,onLoginClick:i}),n.jsx("main",{"data-main-content":!0,className:"pt-14",style:{minHeight:s>0?`calc(100vh - ${s}px)`:"100vh"},children:t})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 -z-10",style:{background:y}}),n.jsxs("div",{style:{minHeight:s>0?`calc(100vh - ${s}px)`:"100vh"},children:[n.jsx(Gt,{isCollapsed:a,onToggleCollapse:d,activeView:e,onNavigate:r,headerOffset:s,onLoginClick:i}),n.jsx(O.main,{"data-main-content":!0,initial:!1,animate:{marginLeft:a?72:280},transition:{duration:.3,ease:[.4,0,.2,1]},style:{minHeight:s>0?`calc(100vh - ${s}px)`:"100vh"},children:t})]})]})},oe={xs:"0 1px 2px rgba(0, 0, 0, 0.05)",sm:"0 2px 8px rgba(0, 0, 0, 0.06)",md:"0 4px 12px rgba(0, 0, 0, 0.08)",lg:"0 10px 25px rgba(0, 0, 0, 0.12)",xl:"0 20px 40px rgba(0, 0, 0, 0.15)",none:"none"},ot=(t,e="md")=>{const r={sm:"33",md:"4d",lg:"66"};return`0 4px ${{sm:"8px",md:"12px",lg:"16px"}[e]} ${t}${r[e]}`},L={sm:"8px",md:"10px",lg:"12px",xl:"16px","2xl":"20px",full:"9999px",none:"0"},Wt={sm:640,md:768,lg:900,xl:1024,"2xl":1280},ie={"2xs":"11px",xs:"12px",sm:"13px",base:"14px",md:"15px",lg:"16px",xl:"18px","2xl":"20px","3xl":"22px","4xl":"24px","5xl":"28px"},Z={normal:400,medium:500,semibold:600,bold:700},G={1:"4px",1.5:"6px",2:"8px",2.5:"10px",3:"12px",3.5:"14px",4:"16px",5:"20px",6:"24px",7:"28px",8:"32px",10:"40px",12:"48px",15:"60px",16:"64px"},Kt={fast:"0.1s ease",normal:"0.2s ease",slow:"0.3s ease",slower:"0.4s ease"},Jt={base:0,raised:10,sticky:20,dropdown:30,modal:40,overlay:50,tooltip:60,toast:70},Ht={xs:12,sm:16,md:18,lg:20,xl:22,"2xl":24,"3xl":32,"4xl":48},Vt={card:{borderRadius:L.xl,padding:G[6],shadow:oe.md},cardSm:{borderRadius:L.lg,padding:G[4],shadow:oe.sm},dialog:{borderRadius:L.xl,padding:G[6],shadow:oe.xl},button:{borderRadius:L.lg,paddingX:G[6],paddingY:G[3],fontSize:ie.base,fontWeight:Z.semibold},buttonSm:{borderRadius:L.md,paddingX:G[4],paddingY:G[2],fontSize:ie.sm,fontWeight:Z.medium},input:{borderRadius:L.md,padding:G[3],fontSize:ie.base},badge:{borderRadius:L.full,paddingX:G[3],paddingY:G[1.5],fontSize:ie.xs,fontWeight:Z.medium}},Xt=()=>{const{branding:t}=re();return u.useMemo(()=>{const e=r=>t?.[r]||he[r];return{headerGradient:e("--header-gradient"),headerText:e("--header-text"),buttonGradient:t?.["--button-gradient"]||e("--header-gradient"),buttonGradientHover:e("--button-gradient-hover"),buttonSolid:e("--button-solid"),buttonSolidHover:e("--button-solid-hover"),buttonText:e("--button-text")||"#ffffff",primaryAccent:e("--primary-accent"),primaryAccentLight:e("--primary-accent-light"),primaryAccentHover:e("--primary-accent-hover"),primaryAccentDark:e("--primary-accent-hover"),appBgColor:e("--app-bg-color"),cardBgColor:e("--card-bg-color")||"#ffffff",cardBgHover:e("--card-bg-hover")||"#f8fafc",sidebarBgColor:e("--sidebar-bg-color"),sidebarTextColor:e("--sidebar-text-color"),sidebarTextMuted:e("--sidebar-text-muted"),sidebarActiveBg:e("--sidebar-active-bg"),sidebarActiveText:e("--sidebar-active-text"),sidebarHoverBg:e("--sidebar-hover-bg"),textMain:e("--text-main")||"#0f172a",textSecondary:e("--text-secondary")||"#475569",textMuted:e("--text-muted")||"#94a3b8",textPrimary:e("--text-main")||"#0f172a",borderColor:e("--border-color")||"#e2e8f0",borderColorLight:e("--border-color-light")||"#f1f5f9",iconPrimary:e("--icon-primary"),iconSecondary:e("--icon-secondary"),iconMuted:e("--icon-muted")||"#94a3b8",iconColor:e("--icon-primary"),iconActiveColor:e("--icon-secondary"),focusRing:e("--focus-ring")||"rgba(58, 127, 167, 0.3)",success:"#10b981",successLight:"#d1fae5",successDark:"#059669",error:"#ef4444",errorLight:"#fee2e2",errorDark:"#dc2626",warning:"#f59e0b",warningLight:"#fef3c7",warningDark:"#d97706",info:"#3b82f6",infoLight:"#dbeafe",infoDark:"#2563eb",overlayLight:"rgba(255, 255, 255, 0.8)",overlayDark:"rgba(0, 0, 0, 0.5)",backdropBlur:"rgba(255, 255, 255, 0.9)",white:"#ffffff",transparent:"transparent",disabledBg:"#cbd5e1",shadow:oe,radius:L,breakpoint:Wt,fontSize:ie,fontWeight:Z,space:G,transition:Kt,zIndex:Jt,iconSize:Ht,component:Vt,coloredShadow:ot,raw:t}},[t])},wr=()=>{const t=Xt();return u.useMemo(()=>({primaryButton:{background:t.buttonGradient,color:t.buttonText,border:"none",borderRadius:L.lg,fontWeight:Z.semibold,cursor:"pointer"},primaryButtonHover:{background:t.buttonGradientHover},secondaryButton:{background:"transparent",color:t.primaryAccent,border:`1px solid ${t.primaryAccent}`,borderRadius:L.lg,fontWeight:Z.medium,cursor:"pointer"},ghostButton:{background:t.cardBgHover,color:t.textSecondary,border:"none",borderRadius:L.lg,cursor:"pointer"},card:{background:t.cardBgColor,borderRadius:L.xl,border:`1px solid ${t.borderColor}`,boxShadow:oe.xs},gradientHeader:{background:t.headerGradient,color:t.headerText},accentBadge:{background:`${t.primaryAccent}15`,color:t.primaryAccent,borderRadius:L.full,fontWeight:Z.medium},successState:{background:t.successLight,color:t.successDark,border:`1px solid ${t.success}33`},errorState:{background:t.errorLight,color:t.errorDark,border:`1px solid ${t.error}33`},warningState:{background:t.warningLight,color:t.warningDark,border:`1px solid ${t.warning}33`},infoState:{background:t.infoLight,color:t.infoDark,border:`1px solid ${t.info}33`},textMain:{color:t.textMain},textSecondary:{color:t.textSecondary},textMuted:{color:t.textMuted},bgWhite:{backgroundColor:t.cardBgColor},bgCard:{backgroundColor:t.cardBgColor},bgHover:{backgroundColor:t.cardBgHover}}),[t])};function Oe(t){const e=t?.message||String(t);return e.includes("Cookie")||e.includes("cookie")||e.includes("nonce")?"Sitzung abgelaufen. Bitte lade die Seite neu (F5) und melde dich erneut an.":e.includes("Failed to fetch")||e.includes("NetworkError")||e.includes("ERR_")?"Keine Internetverbindung. Bitte prÃ¼fe deine Netzwerkverbindung und versuche es erneut.":e.includes("timeout")||e.includes("Timeout")?"Die Anfrage hat zu lange gedauert. Bitte versuche es erneut.":e.includes("500")||e.includes("502")||e.includes("503")||e.includes("504")?"Der Server ist vorÃ¼bergehend nicht erreichbar. Bitte versuche es spÃ¤ter erneut.":e.includes("401")||e.includes("403")?"Sitzung abgelaufen. Bitte lade die Seite neu und melde dich erneut an.":e.includes("404")?"Die angeforderte Ressource wurde nicht gefunden.":e}class Zt{constructor(){this.config=window.bewerbungstrainerConfig||{apiUrl:"/wp-json/bewerbungstrainer/v1",nonce:"",currentUser:{id:0,name:"",firstName:""},uploadsUrl:"",elevenlabsAgentId:"",elevenlabsApiKey:"",geminiApiKey:""},this.apiUrl=this.config.apiUrl}getNonce(){const e=window.bewerbungstrainerConfig?.nonce||"";return e||console.warn("[WordPressAPI] No nonce available - user may not be logged in"),e}async request(e,r={}){const s=`${this.apiUrl}${e}`,a={headers:{"Content-Type":"application/json","X-WP-Nonce":this.getNonce()},credentials:"same-origin"},f={...a,...r,headers:{...a.headers,...r.headers}};try{const l=await fetch(s,f);if(!l.ok){const x=await l.json().catch(()=>({message:"Unknown error"}));throw new Error(x.message||`HTTP ${l.status}: ${l.statusText}`)}return await l.json()}catch(l){console.error("API Request Error:",l);const S=new Error(Oe(l));throw S.originalError=l,S}}async publicRequest(e,r={}){const s=`${this.apiUrl}${e}`,i={headers:{"Content-Type":"application/json"}},a={...i,...r,headers:{...i.headers,...r.headers}};try{const f=await fetch(s,a);if(!f.ok){const S=await f.json().catch(()=>({message:"Unknown error"}));throw new Error(S.message||`HTTP ${f.status}: ${f.statusText}`)}return await f.json()}catch(f){console.error("Public API Request Error:",f);const l=new Error(Oe(f));throw l.originalError=f,l}}async getUserInfo(){return this.request("/user/info",{method:"GET"})}async getSettings(){return this.request("/settings",{method:"GET"})}async createSession(e){return this.request("/sessions",{method:"POST",body:JSON.stringify(e)})}async getSessions(e={}){const r=new URLSearchParams(e).toString(),s=r?`/sessions?${r}`:"/sessions";return this.request(s,{method:"GET"})}async getSession(e){return this.request(`/sessions/${e}`,{method:"GET"})}async updateSession(e,r){return this.request(`/sessions/${e}`,{method:"PUT",body:JSON.stringify(r)})}async deleteSession(e){return this.request(`/sessions/${e}`,{method:"DELETE"})}async saveAudioFromElevenLabs(e,r){return this.request("/audio/save-elevenlabs",{method:"POST",body:JSON.stringify({conversation_id:e,session_id:r})})}async uploadAudio(e,r){return this.request("/audio/upload",{method:"POST",body:JSON.stringify({audio_data:e,session_id:r})})}getCurrentUser(){return this.config.currentUser}getElevenLabsAgentId(){return this.config.elevenlabsAgentId||void 0}getElevenLabsApiKey(){return this.config.elevenlabsApiKey||void 0}getGeminiApiKey(){return this.config.geminiApiKey||void 0}isWordPress(){return typeof window.bewerbungstrainerConfig<"u"}async generateQuestions(e){return this.request("/video-training/generate-questions",{method:"POST",body:JSON.stringify(e)})}async createVideoTraining(e){return this.request("/video-training",{method:"POST",body:JSON.stringify(e)})}async uploadVideo(e,r,s){const i=new FormData;return i.append("video",r),i.append("timeline",JSON.stringify(s)),this.request(`/video-training/${e}/upload`,{method:"POST",headers:{"X-WP-Nonce":this.getNonce()},body:i})}async analyzeVideoTraining(e){return this.request(`/video-training/${e}/analyze`,{method:"POST"})}async getVideoTraining(e){return this.request(`/video-training/${e}`,{method:"GET"})}async getVideoTrainings(e={}){const r=new URLSearchParams(e).toString(),s=r?`/video-training?${r}`:"/video-training";return this.request(s,{method:"GET"})}async deleteVideoTraining(e){return this.request(`/video-training/${e}`,{method:"DELETE"})}async updateVideoTraining(e,r){return this.request(`/video-training/sessions/${e}`,{method:"PUT",body:JSON.stringify(r)})}async getSimulatorScenarios(e={}){const r=new URLSearchParams(e).toString(),s=r?`/simulator/scenarios?${r}`:"/simulator/scenarios";return this.request(s,{method:"GET"})}async getSimulatorScenario(e){return this.request(`/simulator/scenarios/${e}`,{method:"GET"})}async createSimulatorSession(e){return this.request("/simulator/sessions",{method:"POST",body:JSON.stringify(e)})}async generateSimulatorQuestions(e,r=3){let s;for(let i=1;i<=r;i++)try{return await this.request(`/simulator/sessions/${e}/questions`,{method:"POST"})}catch(a){if(s=a,console.warn(`âš ï¸ [SimulatorAPI] Question generation failed on attempt ${i}:`,a.message),i<r){const f=Math.pow(2,i-1)*1e3;await new Promise(l=>setTimeout(l,f))}}throw console.error(`âŒ [SimulatorAPI] Question generation failed after ${r} attempts`),s}async updateSimulatorSessionQuestions(e,r){return this.request(`/simulator/sessions/${e}`,{method:"PUT",body:JSON.stringify({questions_json:r})})}async submitSimulatorAnswer(e,r,s,i,a=null,f=null){const l=new FormData;l.append("audio",r,"answer.webm"),l.append("question_index",s),l.append("question_text",i),a&&l.append("question_category",a),f!==null&&f>0&&l.append("audio_duration",f);const S=`${this.apiUrl}/simulator/sessions/${e}/answer`,x=await fetch(S,{method:"POST",headers:{"X-WP-Nonce":this.getNonce()},credentials:"same-origin",body:l});if(!x.ok){const y=await x.json().catch(()=>({message:"Unknown error"}));throw new Error(y.message||`HTTP ${x.status}: ${x.statusText}`)}return x.json()}async submitSimulatorAnswerBase64(e,r,s,i,a,f=null){return this.request(`/simulator/sessions/${e}/answer`,{method:"POST",body:JSON.stringify({audio_base64:r,audio_mime_type:s,question_index:i,question_text:a,question_category:f})})}async updateSimulatorSession(e,r){return this.request(`/simulator/sessions/${e}`,{method:"PUT",body:JSON.stringify(r)})}async getSimulatorSession(e){return this.request(`/simulator/sessions/${e}`,{method:"GET"})}async getSimulatorSessions(e={}){const r=new URLSearchParams(e).toString(),s=r?`/simulator/sessions?${r}`:"/simulator/sessions";return this.request(s,{method:"GET"})}async deleteSimulatorSession(e){return this.request(`/simulator/sessions/${e}`,{method:"DELETE"})}async generateNextTurn(e){return this.request(`/simulator/sessions/${e}/next-turn`,{method:"POST",body:JSON.stringify({})})}async getSimulatorSessionAnswers(e){return this.request(`/simulator/sessions/${e}/answers`,{method:"GET"})}async completeSimulatorSession(e){return this.request(`/simulator/sessions/${e}/complete`,{method:"POST"})}async getScenarioTemplates(e={}){const r=new URLSearchParams(e).toString(),s=r?`/game/templates?${r}`:"/game/templates";return this.request(s,{method:"GET"})}async getScenarioTemplate(e){return this.request(`/game/templates/${e}`,{method:"GET"})}async getScenarioCategories(){return this.request("/game/templates/categories",{method:"GET"})}async createGameSession(e){return this.request("/game/sessions",{method:"POST",body:JSON.stringify(e)})}async getGameSessions(e={}){const r=new URLSearchParams(e).toString(),s=r?`/game/sessions?${r}`:"/game/sessions";return this.request(s,{method:"GET"})}async getGameSession(e){return this.request(`/game/sessions/${e}`,{method:"GET"})}async updateGameSession(e,r){return this.request(`/game/sessions/${e}`,{method:"PUT",body:JSON.stringify(r)})}async deleteGameSession(e){return this.request(`/game/sessions/${e}`,{method:"DELETE"})}async getGameStats(){return this.request("/game/stats",{method:"GET"})}async getGameLeaderboard(e={}){const r=new URLSearchParams(e).toString(),s=r?`/game/leaderboard?${r}`:"/game/leaderboard";return this.request(s,{method:"GET"})}async getGameHighscore(e=null){const r=e?`?game_type=${e}`:"";return this.request(`/game/highscore${r}`,{method:"GET"})}async checkAdminStatus(){return this.request("/admin/check",{method:"GET"})}async adminGetRoleplayScenarios(){return this.request("/admin/roleplays",{method:"GET"})}async adminCreateRoleplayScenario(e){return this.request("/admin/roleplays",{method:"POST",body:JSON.stringify(e)})}async adminUpdateRoleplayScenario(e,r){return this.request(`/admin/roleplays/${e}`,{method:"PUT",body:JSON.stringify(r)})}async adminDeleteRoleplayScenario(e){return this.request(`/admin/roleplays/${e}`,{method:"DELETE"})}async adminGetPartners(){return this.request("/admin/partners",{method:"GET"})}async adminCreatePartner(e){return this.request("/admin/partners",{method:"POST",body:JSON.stringify(e)})}async adminUpdatePartner(e,r){return this.request(`/admin/partners/${e}`,{method:"PUT",body:JSON.stringify(r)})}async adminDeletePartner(e){return this.request(`/admin/partners/${e}`,{method:"DELETE"})}async adminGetSimulatorScenarios(){return this.request("/admin/simulator-scenarios",{method:"GET"})}async adminGetVideoTrainingScenarios(){return this.request("/admin/video-training-scenarios",{method:"GET"})}async logPrompt(e,r,s,i={},a=null,f=!1){try{const l={scenario:e,description:r,prompt:s,metadata:i};a&&(l.response=a,l.is_error=f),await this.request("/log-prompt",{method:"POST",body:JSON.stringify(l)})}catch(l){console.warn(`âš ï¸ [WordPressAPI] Failed to log prompt: ${l.message}`)}}async getCategories(){try{const e=await this.publicRequest("/categories",{method:"GET"});return e.success&&e.data?.categories?e.data.categories:(console.warn("[WordPressAPI] Unexpected categories response format"),[])}catch(e){return console.error("[WordPressAPI] Failed to fetch categories:",e),[]}}async getCategory(e){try{const r=await this.request(`/categories/${e}`,{method:"GET"});return r.success&&r.data?.category?r.data.category:null}catch(r){return console.error("[WordPressAPI] Failed to fetch category:",r),null}}async getUsageLimits(e=null){try{const r=e?`?demo_code=${encodeURIComponent(e)}`:"";return(await this.request(`/usage-limits${r}`,{method:"GET"})).data}catch(r){throw console.error("âŒ [WordPressAPI] Failed to get usage limits:",r),r}}async getDecisions(){try{return await this.request("/decisions",{method:"GET"})}catch(e){return console.error("âŒ [WordPressAPI] Failed to get decisions:",e),{success:!1,data:{decisions:[]}}}}async getDecision(e){try{const r=await this.request(`/decisions/${e}`,{method:"GET"});return r.success&&r.data?.decision?r.data.decision:null}catch(r){return console.error("âŒ [WordPressAPI] Failed to get decision:",r),null}}async createDecision(e){const r=await this.request("/decisions",{method:"POST",body:JSON.stringify(e)});if(r.success&&r.data?.decision)return r.data.decision;throw new Error(r.message||"Fehler beim Erstellen der Entscheidung")}async updateDecision(e,r){const s=await this.request(`/decisions/${e}`,{method:"PUT",body:JSON.stringify(r)});if(s.success&&s.data?.decision)return s.data.decision;throw new Error(s.message||"Fehler beim Aktualisieren der Entscheidung")}async deleteDecision(e){const r=await this.request(`/decisions/${e}`,{method:"DELETE"});if(r.success)return!0;throw new Error(r.message||"Fehler beim LÃ¶schen der Entscheidung")}async updateBriefing(e,r){const s=await this.request(`/smartbriefing/briefings/${e}`,{method:"PUT",body:JSON.stringify(r)});if(s.success&&s.data?.briefing)return s.data.briefing;throw new Error(s.message||"Fehler beim Aktualisieren des Briefings")}async getIkigais(){try{return await this.request("/ikigai",{method:"GET"})}catch(e){return console.error("[WordPressAPI] Failed to get ikigais:",e),{success:!1,data:{ikigais:[]}}}}async getIkigai(e){try{const r=await this.request(`/ikigai/${e}`,{method:"GET"});return r.success&&r.data?.ikigai?r.data.ikigai:null}catch(r){return console.error("[WordPressAPI] Failed to get ikigai:",r),null}}async getCurrentIkigai(){try{const e=await this.request("/ikigai/current",{method:"GET"});return e.success&&e.data?.ikigai?e.data.ikigai:null}catch(e){return console.error("[WordPressAPI] Failed to get current ikigai:",e),null}}async createIkigai(){const e=await this.request("/ikigai",{method:"POST",body:JSON.stringify({})});if(e.success&&e.data?.ikigai)return e.data.ikigai;throw new Error(e.message||"Fehler beim Erstellen der Ikigai-Analyse")}async updateIkigai(e,r){const s=await this.request(`/ikigai/${e}`,{method:"PUT",body:JSON.stringify(r)});if(s.success&&s.data?.ikigai)return s.data.ikigai;throw new Error(s.message||"Fehler beim Aktualisieren der Ikigai-Analyse")}async deleteIkigai(e){const r=await this.request(`/ikigai/${e}`,{method:"DELETE"});if(r.success)return!0;throw new Error(r.message||"Fehler beim LÃ¶schen der Ikigai-Analyse")}async extractIkigaiKeywords(e,r){const s=await this.request("/ikigai/extract",{method:"POST",body:JSON.stringify({dimension:e,user_input:r})});if(s.success&&s.data?.keywords)return{keywords:s.data.keywords};throw new Error(s.message||"Fehler beim Extrahieren der Keywords")}async synthesizeIkigaiPaths(e){const r=await this.request("/ikigai/synthesize",{method:"POST",body:JSON.stringify(e)});if(r.success&&r.data)return{summary:r.data.summary,paths:r.data.paths};throw new Error(r.message||"Fehler beim Erstellen der Karrierepfade")}async transcribeAudio(e,r="audio/webm"){try{const s=await this.request("/audio/transcribe",{method:"POST",body:JSON.stringify({audio_base64:e,mime_type:r})});if(s.success&&s.data)return s.data;throw new Error(s.message||"Transkription fehlgeschlagen")}catch(s){throw console.error("âŒ [WordPressAPI] Failed to transcribe audio:",s),s}}async getRecentActivities(e=6){try{const r=[],[s,i,a,f,l,S,x]=await Promise.allSettled([this.getSessions({limit:3}),this.getSimulatorSessions({limit:3}),this.getVideoTrainings({limit:3}),this.getGameSessions({limit:3}),this.request("/smartbriefing/briefings?limit=3",{method:"GET"}),this.getIkigais(),this.getDecisions()]);s.status==="fulfilled"&&Array.isArray(s.value)&&s.value.forEach(d=>{r.push({id:`roleplay_${d.id}`,type:"roleplay",title:d.position||"Live-Simulation",created_at:d.created_at,score:d.score})}),i.status==="fulfilled"&&i.value?.data?.sessions?i.value.data.sessions.forEach(d=>{r.push({id:`simulator_${d.id}`,type:"simulator",title:d.scenario_title||"Szenario-Training",created_at:d.created_at,score:d.overall_score})}):i.status==="fulfilled"&&Array.isArray(i.value)&&i.value.forEach(d=>{r.push({id:`simulator_${d.id}`,type:"simulator",title:d.scenario_title||"Szenario-Training",created_at:d.created_at,score:d.overall_score})}),a.status==="fulfilled"&&a.value?.data?.sessions?a.value.data.sessions.forEach(d=>{r.push({id:`video_${d.id}`,type:"video",title:d.scenario_title||"Wirkungs-Analyse",created_at:d.created_at,score:d.overall_score})}):a.status==="fulfilled"&&Array.isArray(a.value)&&a.value.forEach(d=>{r.push({id:`video_${d.id}`,type:"video",title:d.scenario_title||"Wirkungs-Analyse",created_at:d.created_at,score:d.overall_score})}),f.status==="fulfilled"&&f.value?.data?.sessions?f.value.data.sessions.forEach(d=>{r.push({id:`game_${d.id}`,type:"game",title:d.topic||"Rhetorik-Gym",created_at:d.created_at,score:d.score})}):f.status==="fulfilled"&&Array.isArray(f.value)&&f.value.forEach(d=>{r.push({id:`game_${d.id}`,type:"game",title:d.topic||"Rhetorik-Gym",created_at:d.created_at,score:d.score})}),l.status==="fulfilled"&&(l.value?.data?.briefings||l.value?.briefings||[]).slice(0,3).forEach(m=>{r.push({id:`briefing_${m.id}`,type:"briefing",title:m.title||"Smart Briefing",created_at:m.created_at})}),S.status==="fulfilled"&&(S.value?.data?.ikigais||[]).slice(0,3).forEach(m=>{r.push({id:`ikigai_${m.id}`,type:"ikigai",title:"Ikigai-Analyse",created_at:m.created_at})}),x.status==="fulfilled"&&(x.value?.data?.decisions||[]).slice(0,3).forEach(m=>{r.push({id:`decision_${m.id}`,type:"decision",title:m.topic||"Entscheidung",created_at:m.created_at})});const y=d=>{if(!d)return new Date(0);const m=d.replace(" ","T").replace(/Z$/,"").replace(/[+-]\d{2}:\d{2}$/,"");return new Date(m)};return r.sort((d,m)=>y(m.created_at)-y(d.created_at)),r.slice(0,e)}catch(r){return console.error("[WordPressAPI] Failed to get recent activities:",r),[]}}async getPreference(e,r=null){try{const s=r?`?demo_code=${encodeURIComponent(r)}`:"",i=await this.request(`/preferences/${e}${s}`,{method:"GET"});return i.success?i.value:null}catch(s){return console.error("[WordPressAPI] Failed to get preference:",s),null}}async setPreference(e,r,s=null){try{const i=s?`?demo_code=${encodeURIComponent(s)}`:"";return(await this.request(`/preferences/${e}${i}`,{method:"POST",body:JSON.stringify({value:r})})).success===!0}catch(i){return console.error("[WordPressAPI] Failed to set preference:",i),!1}}async getAllPreferences(e=null){try{const r=e?`?demo_code=${encodeURIComponent(e)}`:"",s=await this.request(`/preferences${r}`,{method:"GET"});return s.success&&s.preferences?s.preferences:{}}catch(r){return console.error("[WordPressAPI] Failed to get all preferences:",r),{}}}}const Ee=new Zt;function Sr(){return window.bewerbungstrainerConfig?.nonce||""}function vr(){return window.bewerbungstrainerConfig?.apiUrl||"/wp-json/bewerbungstrainer/v1"}function kr(t=5){return Ee.getRecentActivities(t)}const ke={FEATURE_INFO_DISMISSED:"feature_info_dismissed"},le="karriereheld_feature_info_dismissed";let ae=null;async function Yt(){ae&&await ae}function Qt(t){try{return JSON.parse(localStorage.getItem(le)||"{}")[t]===!0}catch{return!1}}function er(t,e=!0){try{const r=JSON.parse(localStorage.getItem(le)||"{}");r[t]=e,localStorage.setItem(le,JSON.stringify(r))}catch(r){console.error("Failed to save feature info preference to localStorage:",r)}}function at(){try{return JSON.parse(localStorage.getItem(le)||"{}")}catch{return{}}}function tr(t){try{localStorage.setItem(le,JSON.stringify(t||{}))}catch(e){console.error("Failed to save feature info preferences to localStorage:",e)}}async function Tr(t,e){if(!t&&!e){console.log("[UserPrefs] No user context, using localStorage only");return}ae=(async()=>{try{console.log("[UserPrefs] Syncing preferences from API...");const r=await Ee.getAllPreferences(e);if(r[ke.FEATURE_INFO_DISMISSED]){const s=r[ke.FEATURE_INFO_DISMISSED],a={...at(),...s};tr(a),console.log("[UserPrefs] Synced feature_info_dismissed from API:",a)}}catch(r){console.error("[UserPrefs] Failed to sync preferences from API:",r)}finally{ae=null}})(),await ae}async function rr(t,e){if(!(!t&&!e))try{const r=at();await Ee.setPreference(ke.FEATURE_INFO_DISMISSED,r,e),console.log("[UserPrefs] Saved feature_info_dismissed to API")}catch(r){console.error("[UserPrefs] Failed to save preferences to API:",r)}}function Re(t){return Qt(t)}function nr(t,e,r=!1,s=null){er(t,e),rr(r,s)}const ct={smartbriefing:{id:"smartbriefing",title:"Smart Briefings",subtitle:"Intelligente Wissenspakete",icon:"ðŸ“‹",color:c.purple[500],gradient:V(c.purple[500],c.purple[400]),description:"Smart Briefings generiert mithilfe von KI personalisierte Wissenspakete fÃ¼r bevorstehende berufliche GesprÃ¤che. Basierend auf Ihren Eingaben erstellt das System ein strukturiertes Briefing mit relevanten Informationen, Formulierungshilfen und strategischen Tipps.",benefits:[{icon:"â±ï¸",text:"Zeitersparnis: In Sekunden statt Stunden vorbereitet"},{icon:"ðŸ“Š",text:"Strukturierte Vorbereitung in logischen Abschnitten"},{icon:"âœï¸",text:"Interaktives Workbook mit persÃ¶nlichen Notizen"},{icon:"ðŸ’¾",text:"Jederzeit abrufbar fÃ¼r die Wiederholung"}],learningGoals:["Fundiertes Wissen Ã¼ber Zielunternehmen aufbauen","Typische Fragen und Antwortstrategien kennenlernen","Selbstvertrauen durch grÃ¼ndliche Vorbereitung gewinnen","Eigene StÃ¤rken strukturiert aufbereiten"],duration:"~10 Sekunden Generierung",idealFor:"Vor jedem wichtigen GesprÃ¤ch"},simulator:{id:"simulator",title:"Szenario-Training",subtitle:"Strukturiertes Lernen mit Sofort-Feedback",icon:"ðŸŽ¯",color:c.green[500],gradient:V(c.green[500],c.teal[400]),description:"Das Szenario-Training ist ein gefÃ¼hrtes Frage-Antwort-Format, bei dem Sie vordefinierte Interview-Fragen beantworten und nach jeder einzelnen Antwort sofortiges, detailliertes Feedback erhalten. Dies ermÃ¶glicht gezieltes Lernen in Ihrem eigenen Tempo.",benefits:[{icon:"âš¡",text:"Sofortiges Feedback direkt nach jeder Antwort"},{icon:"ðŸ”„",text:"WiederholungsmÃ¶glichkeit bis die Antwort sitzt"},{icon:"ðŸ’¡",text:"Konkrete VerbesserungsvorschlÃ¤ge"},{icon:"ðŸ“ˆ",text:"Fortschrittsverfolgung Ã¼ber alle Fragen"}],learningGoals:["Klassische Interview-Fragen souverÃ¤n beantworten","Die STAR-Methode verinnerlichen","Eigene Erfahrungen Ã¼berzeugend prÃ¤sentieren","SchwÃ¤chen identifizieren und gezielt verbessern"],duration:"~15-30 Minuten",idealFor:"AnfÃ¤nger und systematische Lerner"},roleplay:{id:"roleplay",title:"Live-Simulation",subtitle:"Realistische Echtzeit-GesprÃ¤che",icon:"ðŸŽ™ï¸",color:c.amber[500],gradient:V(c.amber[500],c.amber[400]),description:"Die Live-Simulation ermÃ¶glicht echte, bidirektionale SprachgesprÃ¤che mit einem KI-gesteuerten Interviewer. Sie sprechen Ã¼ber Ihr Mikrofon und erhalten in Echtzeit gesprochene Antworten und Nachfragen â€“ genau wie in einem echten VorstellungsgesprÃ¤ch.",benefits:[{icon:"ðŸŽ­",text:"Realistische Drucksituation mit spontanen Reaktionen"},{icon:"ðŸŽšï¸",text:"Verschiedene Interviewer-Stile wÃ¤hlbar"},{icon:"ðŸ“",text:"Echtzeit-Transkript fÃ¼r spÃ¤tere Analyse"},{icon:"ðŸ”Š",text:"Paraverbale Analyse von Tempo und TonalitÃ¤t"}],learningGoals:["Spontanes Reagieren auf unerwartete Fragen","Unter Zeitdruck strukturiert antworten","NervositÃ¤t in GesprÃ¤chssituationen reduzieren","Eigene Sprechgewohnheiten erkennen"],duration:"~10-15 Minuten",idealFor:"Fortgeschrittene, die unter Druck Ã¼ben wollen"},videotraining:{id:"videotraining",title:"Wirkungs-Analyse",subtitle:"Video-Training mit KÃ¶rpersprache-Feedback",icon:"ðŸŽ¬",color:c.red[400],gradient:V(c.red[400],c.red[300]),description:"Die Wirkungs-Analyse ist ein videobasiertes Training, bei dem Sie Ihre Antworten per Webcam aufnehmen. Die KI analysiert nicht nur das Gesprochene, sondern auch KÃ¶rpersprache, Mimik und Auftreten â€“ und gibt konkretes Feedback zur Gesamtwirkung.",benefits:[{icon:"ðŸ“¹",text:"Sichtbare Selbstwahrnehmung durch Video"},{icon:"ðŸ§˜",text:"Ganzheitliche Analyse von KÃ¶rpersprache"},{icon:"ðŸ‘ï¸",text:"Feedback zu Augenkontakt und Mimik"},{icon:"ðŸ’ª",text:"Verbesserung der GesamtprÃ¤senz"}],learningGoals:["Eigene KÃ¶rpersprache bewusst wahrnehmen","NervÃ¶se Ticks identifizieren und reduzieren","Selbstbewusstes Auftreten entwickeln","PrÃ¤senz vor der Kamera verbessern"],duration:"~15-30 Minuten",idealFor:"Wer an seiner PrÃ¤senz arbeiten will"},rhetorikgym:{id:"rhetorikgym",title:"Rhetorik-Gym",subtitle:"Spielerisches Sprechtraining",icon:"ðŸ‹ï¸",color:c.blue[500],gradient:V(c.blue[500],c.teal[500]),description:"Das Rhetorik-Gym ist ein gamifiziertes Kurzformat (60-90 Sekunden), das gezielt FÃ¼llwÃ¶rter reduziert und die SprechflÃ¼ssigkeit verbessert. Mit Punktesystem, Highscores und schnellem Feedback macht es SpaÃŸ, die eigene Redegewandtheit zu trainieren.",benefits:[{icon:"âš¡",text:"Kurze, intensive Ãœbungen fÃ¼r zwischendurch"},{icon:"ðŸŽ®",text:"Motivierendes Punktesystem mit Highscores"},{icon:"ðŸ”¢",text:"FÃ¼llwort-ZÃ¤hler macht Unbewusstes sichtbar"},{icon:"â±ï¸",text:"Tempo-Feedback fÃ¼r optimales Sprechen"}],learningGoals:["FÃ¼llwÃ¶rter drastisch reduzieren","FlÃ¼ssiger und selbstsicherer sprechen","Optimales Sprechtempo finden","Spontan zu beliebigen Themen sprechen"],duration:"60-90 Sekunden",idealFor:"Alle, regelmÃ¤ÃŸig zwischendurch"},ikigai:{id:"ikigai",title:"Ikigai-Kompass",subtitle:"Finde deine berufliche Bestimmung",icon:"ðŸ§­",color:c.purple[500],gradient:V(c.purple[500],c.purple[400]),description:"Der Ikigai-Kompass hilft Ihnen, den Schnittpunkt Ihrer Talente, Leidenschaften und beruflichen MÃ¶glichkeiten zu finden. Durch gefÃ¼hrte Reflexionsfragen entdecken Sie, was Sie wirklich antreibt und wo Ihre StÃ¤rken liegen.",benefits:[{icon:"ðŸ’¡",text:"Klarheit Ã¼ber eigene StÃ¤rken und Werte"},{icon:"ðŸŽ¯",text:"Fokus auf das, was wirklich wichtig ist"},{icon:"ðŸ—ºï¸",text:"Orientierung fÃ¼r Karriereentscheidungen"},{icon:"âœ¨",text:"Motivation durch Sinnfindung"}],learningGoals:["Eigene StÃ¤rken und Talente identifizieren","Berufliche Leidenschaften erkennen","Werte und PrioritÃ¤ten klÃ¤ren","Karriereziele definieren"],duration:"~15-20 Minuten",idealFor:"Alle vor wichtigen Karriereentscheidungen"},decisionboard:{id:"decisionboard",title:"Entscheidungs-Board",subtitle:"Strukturierte Entscheidungsfindung",icon:"âš–ï¸",color:c.teal[500],gradient:V(c.teal[500],c.teal[400]),description:"Das Entscheidungs-Board unterstÃ¼tzt Sie bei komplexen Karriereentscheidungen. Durch strukturierte Bewertung von Pro- und Contra-Argumenten sowie gewichteten Kriterien gelangen Sie zu fundierten Entscheidungen.",benefits:[{icon:"ðŸ“Š",text:"Strukturierte Analyse aller Optionen"},{icon:"âš–ï¸",text:"Gewichtete Bewertungskriterien"},{icon:"ðŸ§ ",text:"Reduzierung von emotionalen Fehlentscheidungen"},{icon:"ðŸ“‹",text:"Dokumentation fÃ¼r spÃ¤tere Reflexion"}],learningGoals:["Entscheidungen systematisch analysieren","PrioritÃ¤ten setzen und gewichten","Emotionen und Fakten trennen","Selbstbewusst Entscheidungen treffen"],duration:"~10-15 Minuten",idealFor:"Bei wichtigen Karriereentscheidungen"}},sr=24,U="[FEATURE_INFO_MODAL]",Te="karriereheld_feature_info_session_shown",X=new Set,se=new Map;let lt=!1;const Cr=t=>{lt=t,console.log(`${U} ðŸ” Login modal state: ${t?"OPEN":"CLOSED"}`)},ir=t=>{try{return JSON.parse(sessionStorage.getItem(Te)||"{}")[t]===!0}catch{return!1}},or=t=>{try{const e=JSON.parse(sessionStorage.getItem(Te)||"{}");e[t]=!0,sessionStorage.setItem(Te,JSON.stringify(e))}catch{}},ar=({featureId:t,isOpen:e,onClose:r,showOnMount:s=!1})=>{const[i,a]=u.useState(!1),[f,l]=u.useState(!1),S=u.useRef(!1),x=u.useRef(Math.random().toString(36).substr(2,9)),{isAuthenticated:y,demoCode:d}=re(),m=ct[t];u.useEffect(()=>{const w=x.current,F=se.get(t);return console.log(`${U} ðŸ”µ MOUNT featureId="${t}" mountId=${w} showOnMount=${s} existingInstance=${F||"none"}`),se.set(t,w),()=>{console.log(`${U} ðŸ”´ UNMOUNT featureId="${t}" mountId=${w}`),se.get(t)===w&&se.delete(t),X.delete(t)}},[t,s]),u.useEffect(()=>{if(!s||!m||S.current)return;let w=!0;return(async()=>{if(await Yt(),!w){console.log(`${U} âš ï¸ Component unmounted during sync wait, skipping`);return}const D=Re(t),v=ir(t),_=X.has(t),M=lt;if(console.log(`${U} ðŸ”„ Auto-show effect for "${t}":`,{showOnMount:s,hasFeature:!!m,isDismissed:D,hasAutoShownRef:S.current,isSessionShown:v,isGloballyOpen:_,loginModalIsOpen:M,willShow:!D&&!S.current&&!v&&!_&&!M}),M){console.log(`${U} â›” Login modal is open, skipping auto-show for "${t}"`);return}!D&&!S.current&&!v&&!_&&(console.log(`${U} âœ… Will auto-show "${t}" in 400ms`),S.current=!0,or(t),X.add(t),setTimeout(()=>{w&&!f?(console.log(`${U} ðŸŽ‰ Timer fired for "${t}": isMounted=${w}`),l(!0)):w||(console.log(`${U} âš ï¸ Component unmounted before timer, skipping open`),X.delete(t))},400))})(),()=>{console.log(`${U} ðŸ§¹ Cleanup for "${t}"`),w=!1}},[s,t,m,f]),u.useEffect(()=>{e!==void 0&&(l(e),e&&t&&a(Re(t)))},[e,t]),u.useEffect(()=>{if(f)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[f]);const k=()=>{console.log(`${U} ðŸšª handleClose for "${t}"`),m&&nr(t,i,y,d),l(!1),X.delete(t),r?.()};if(!m)return t&&console.warn(`FeatureInfoModal: Unknown feature ID "${t}"`),null;if(!f)return null;const j=x.current,T=se.get(t);if(T&&T!==j)return console.log(`${U} â›” Blocking render - another instance (${T}) owns this modal`),null;X.has(t)||X.add(t);const B=n.jsx(ce,{mode:"wait",children:n.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:k,className:"fixed inset-0 w-full h-full backdrop-blur-lg z-[999999] flex items-center justify-center p-4 pt-[calc(16px+env(safe-area-inset-top,0px))] pb-[calc(16px+env(safe-area-inset-bottom,0px))] box-border",style:{backgroundColor:pe(c.slate[900],.7),contain:"layout"},children:n.jsxs(O.div,{initial:{opacity:0,scale:.9,y:30},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:30},transition:{type:"spring",damping:25,stiffness:350},onClick:w=>w.stopPropagation(),className:"bg-white rounded-2xl max-w-[500px] w-full max-h-[min(calc(100vh-100px),700px)] overflow-hidden shadow-2xl border border-slate-200 flex flex-col",children:[n.jsxs("div",{className:"px-6 pt-6 pb-8 relative overflow-hidden flex-shrink-0",style:{background:m.gradient},children:[n.jsx("div",{className:"absolute -top-10 -right-10 w-[120px] h-[120px] rounded-full bg-white/10 pointer-events-none"}),n.jsx("div",{className:"absolute -bottom-5 left-1/4 w-[60px] h-[60px] rounded-full bg-white/[0.08] pointer-events-none"}),n.jsx("button",{onClick:k,className:"absolute top-3 right-3 w-11 h-11 rounded-full bg-white/25 border-none cursor-pointer flex items-center justify-center text-white transition-all z-10 hover:bg-white/40",children:n.jsx(Je,{size:sr,strokeWidth:2.5})}),n.jsxs("div",{className:"relative z-[1]",children:[n.jsx("div",{className:"text-[44px] mb-3 drop-shadow-md",children:m.icon}),n.jsx("h2",{className:"text-white text-2xl font-bold m-0 drop-shadow-sm",children:m.title}),n.jsx("p",{className:"text-white/90 text-sm mt-1 mb-0 font-medium",children:m.subtitle})]})]}),n.jsxs("div",{className:"p-5 px-6 flex-1 overflow-y-auto min-h-0 overflow-touch",children:[n.jsx("p",{className:"text-slate-600 text-sm leading-relaxed m-0 mb-5",children:m.description}),n.jsxs("div",{className:"mb-5",children:[n.jsxs("h3",{className:"text-slate-900 text-[11px] font-semibold uppercase tracking-wide m-0 mb-2.5 flex items-center gap-2",children:[n.jsx(Ge,{size:14,style:{color:m.color}}),"Vorteile"]}),n.jsx("div",{className:"flex flex-col gap-2",children:m.benefits.map((w,F)=>n.jsxs("div",{className:"flex items-center gap-2.5 px-3 py-2.5 bg-slate-50 rounded-lg border border-slate-200",children:[n.jsx("span",{className:"text-lg flex-shrink-0",children:w.icon}),n.jsx("span",{className:"text-slate-700 text-[13px]",children:w.text})]},F))})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("h3",{className:"text-slate-900 text-[11px] font-semibold uppercase tracking-wide m-0 mb-2.5 flex items-center gap-2",children:[n.jsx(be,{size:14,style:{color:m.color}}),"Lernziele"]}),n.jsx("div",{className:"flex flex-col gap-2",children:m.learningGoals.map((w,F)=>n.jsxs("div",{className:"flex items-center gap-2.5 text-slate-600 text-[13px]",children:[n.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:pe(m.color,.15)},children:n.jsx(Ct,{size:12,style:{color:m.color}})}),w]},F))})]}),n.jsxs("div",{className:"flex gap-2 flex-wrap",children:[n.jsxs("div",{className:"flex items-center gap-1.5 px-3.5 py-1.5 rounded-full text-xs font-medium",style:{backgroundColor:pe(m.color,.1),color:m.color},children:[n.jsx(Ke,{size:14}),m.duration]}),n.jsxs("div",{className:"flex items-center gap-1.5 px-3.5 py-1.5 bg-slate-100 rounded-full text-slate-600 text-xs font-medium",children:[n.jsx(be,{size:14}),m.idealFor]})]})]}),n.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-slate-200 gap-4 flex-wrap bg-white flex-shrink-0",children:[n.jsxs("label",{className:"flex items-center gap-2.5 cursor-pointer text-slate-500 text-[13px]",children:[n.jsx("input",{type:"checkbox",checked:i,onChange:w=>a(w.target.checked),className:"w-[18px] h-[18px] cursor-pointer",style:{accentColor:m.color}}),"Nicht mehr automatisch anzeigen"]}),n.jsxs("button",{onClick:k,className:"text-white border-none rounded-xl px-6 py-3 text-[15px] font-semibold cursor-pointer flex items-center gap-1.5 transition-all flex-shrink-0",style:{background:m.gradient,boxShadow:ot(m.color,"md")},children:["Los geht's",n.jsx(Ze,{size:18})]})]})]},"modal-content")},"modal-backdrop")});return s?ze.createPortal(B,document.body):B},Er=(t,e=!1)=>{if(t==null||isNaN(t))return"0:00";const r=Math.max(0,Math.floor(t)),s=Math.floor(r/3600),i=Math.floor(r%3600/60),a=r%60;return s>0||e?`${s}:${i.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`:`${i}:${a.toString().padStart(2,"0")}`},Ae=t=>{if(!t)return new Date(0);if(t instanceof Date)return t;const e=String(t).replace(" ","T").replace(/Z$/,"").replace(/[+-]\d{2}:\d{2}$/,"");return new Date(e)},cr=(t,e={})=>{if(!t)return"-";try{const r=Ae(t);if(isNaN(r.getTime()))return"-";const s={day:"2-digit",month:"short",year:"numeric"};return r.toLocaleDateString("de-DE",{...s,...e})}catch{return"-"}},Ar=t=>{if(!t)return"-";try{const e=Ae(t);return isNaN(e.getTime())?"-":e.toLocaleDateString("de-DE",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"-"}},Nr=t=>{if(!t)return"-";try{const e=Ae(t);if(isNaN(e.getTime()))return"-";const s=new Date-e,i=Math.floor(s/1e3),a=Math.floor(i/60),f=Math.floor(a/60),l=Math.floor(f/24);return i<0||i<60?"Gerade eben":a<60?`vor ${a} ${a===1?"Minute":"Minuten"}`:f<24?`vor ${f} ${f===1?"Stunde":"Stunden"}`:l<7?`vor ${l} ${l===1?"Tag":"Tagen"}`:cr(t)}catch{return"-"}},jr=({featureId:t,size:e="md",className:r="",style:s={}})=>{const[i,a]=u.useState(!1),[f,l]=u.useState(!1),[S,x]=u.useState(null),y=ct[t];if(u.useEffect(()=>{x(document.body)},[]),!y)return console.warn(`FeatureInfoButton: Unknown feature ID "${t}"`),null;const d={sm:20,md:24,lg:28},m=d[e]||d.md,k=y.color||c.indigo[500],j=B=>{B.stopPropagation(),B.preventDefault(),a(!0)},T=()=>{a(!1)};return n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:j,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),className:`${r} border-none bg-transparent cursor-pointer flex items-center justify-center transition-all flex-shrink-0 p-1 rounded-full hover:bg-slate-100`,title:`Info Ã¼ber ${y.title}`,style:{opacity:f?.8:1,transform:f?"scale(1.1)":"scale(1)",...s},children:n.jsx(Et,{size:m,color:k,strokeWidth:2})}),S&&i&&ze.createPortal(n.jsx(ar,{featureId:t,isOpen:i,onClose:T}),S)]})};export{c as C,he as D,jr as F,fr as G,hr as I,gr as P,ur as R,yr as S,xr as T,Sr as a,Xt as b,wr as c,Qe as d,kr as e,Nr as f,vr as g,pe as h,Cr as i,Nt as j,ar as k,Er as l,mr as m,Ar as n,pr as o,br as p,V as q,G as r,Tr as s,ie as t,re as u,Kt as v,Ee as w,Z as x,L as y,oe as z};
