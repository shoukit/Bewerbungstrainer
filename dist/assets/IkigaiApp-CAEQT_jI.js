import{j as t,C as T,aC as A}from"./ui-vendor-BAEfSb-X.js";import{a as s}from"./react-vendor-uDOJF2jQ.js";import{a as L,I as _}from"./IkigaiResults-jZsWqaCh.js";import{u as G,D as N,w as c,c as U,C as u}from"./designTokens-LSOQEIoP.js";import{F as Z,a as $}from"./index.js";import"./useBranding-CRmuKfX5.js";import"./useMobile-YxjH166V.js";import"./card-CRd_k1Xo.js";import"./utils-BEHD0UYf.js";import"./button-C27wFDRr.js";import"./AudioRecorder-LFdSK1H4.js";const o={COMPASS:"compass",RESULTS:"results"},v={love:{key:"love",label:"Leidenschaft",title:"Deine Leidenschaft",icon:"â¤ï¸",color:"#E11D48",question:"Stell dir vor, Geld spielt keine Rolle: Womit wÃ¼rdest du deinen Tag verbringen? Bei welchem Thema vergisst du vÃ¶llig die Zeit?",placeholder:"Schreib einfach drauf los: Hobbys, Themen, TÃ¤tigkeiten...",description:"Was treibt dich an?"},talent:{key:"talent",label:"StÃ¤rken",title:"Deine StÃ¤rken",icon:"â­",color:"#F59E0B",question:'WofÃ¼r bitten dich Freunde oder Kollegen oft um Rat? Was erledigst du "mit links", wÃ¤hrend andere daran verzweifeln?',placeholder:"Z.B. Organisieren, ZuhÃ¶ren, Coden, Designen...",description:"Was fÃ¤llt dir leicht?"},need:{key:"need",label:"Mission",title:"Deine Mission",icon:"ðŸŒ",color:"#10B981",question:"Welches Problem in der Gesellschaft oder Wirtschaft nervt dich? Wo wÃ¼rdest du gerne mitanpacken, um Dinge zu verbessern?",placeholder:"Z.B. Nachhaltigkeit, Bildung, bessere Software, Pflege...",description:"Welchen Beitrag leistest du?"},market:{key:"market",label:"Markt",title:"Der Markt",icon:"ðŸ’°",color:"#6366F1",question:"Welche deiner FÃ¤higkeiten sind bares Geld wert? FÃ¼r welche Jobs oder Dienstleistungen existiert ein echtes Budget?",placeholder:"Z.B. Projektmanagement, Beratung, Handwerk...",description:"WofÃ¼r wirst du bezahlt?"}},ne=({isAuthenticated:k,requireAuth:g,setPendingAction:V,onNavigateToHistory:x})=>{const[y,p]=s.useState(o.COMPASS),[l,S]=s.useState(null),[C,w]=s.useState(!1),{branding:j}=G(),I=j?.["--primary-accent"]||N["--primary-accent"],D=U(u.purple[500],u.purple[400]),[a,h]=s.useState({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),[F,m]=s.useState(null),b=s.useRef(!1);s.useEffect(()=>{window.scrollTo(0,0)},[y]),s.useEffect(()=>{!k&&g&&g()},[k,g]);const f=Object.values(a).every(e=>e.tags&&e.tags.length>0),d=s.useCallback(async()=>{if(l)return l;try{const e=await c.createIkigai();if(e?.id)return S(e.id),b.current=!0,console.log("[Ikigai] Session created with ID:",e.id),e.id}catch(e){console.error("[Ikigai] Failed to create session:",e)}return null},[l]),R=s.useCallback(async(e,n,i)=>{h(r=>({...r,[e]:{input:n,tags:i}}));try{const r=await d();r&&(await c.updateIkigai(r,{[`${e}_input`]:n,[`${e}_tags`]:i}),console.log(`[Ikigai] Dimension ${e} saved`))}catch(r){console.error("[Ikigai] Failed to save dimension:",r)}},[d]),W=s.useCallback(async(e,n)=>{try{const i=await c.extractIkigaiKeywords(e,n);return i?.keywords?i.keywords:[]}catch(i){return console.error("[Ikigai] Failed to extract keywords:",i),[]}},[]),E=s.useCallback(async()=>{if(f){w(!0);try{const e=await c.synthesizeIkigaiPaths({love_tags:a.love.tags,talent_tags:a.talent.tags,need_tags:a.need.tags,market_tags:a.market.tags});if(e){m(e);const n=l||await d();n&&await c.updateIkigai(n,{summary:e.summary,paths:e.paths,status:"completed"}),p(o.RESULTS)}}catch(e){console.error("[Ikigai] Failed to synthesize paths:",e)}finally{w(!1)}}},[f,a,l,d]),z=s.useCallback((e,n)=>{h(i=>{const r=i[e].tags.filter(P=>P!==n);return{...i,[e]:{...i[e],tags:r}}})},[]),B=s.useCallback(()=>{h({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),m(null),S(null),b.current=!1,p(o.COMPASS)},[]),M=s.useCallback(()=>{m(null),p(o.COMPASS)},[]),O=()=>{switch(y){case o.RESULTS:return t.jsx(_,{dimensions:a,synthesisResult:F,onStartNew:B,onEdit:M,DIMENSIONS:v});case o.COMPASS:default:return t.jsx(L,{dimensions:a,DIMENSIONS:v,onExtractKeywords:W,onUpdateDimension:R,onRemoveTag:z,allDimensionsFilled:f,onSynthesize:E,isSynthesizing:C})}};return t.jsxs(t.Fragment,{children:[t.jsx(Z,{featureId:"ikigai",showOnMount:!0}),t.jsxs("div",{style:{minHeight:"100%"},children:[t.jsx("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:t.jsx("div",{style:{marginBottom:"24px"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"16px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:D,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(T,{style:{width:"24px",height:"24px",color:"white"}})}),t.jsxs("div",{children:[t.jsx("h1",{style:{fontSize:"28px",fontWeight:700,color:u.slate[900],margin:0},children:"Ikigai-Kompass"}),t.jsx("p",{style:{fontSize:"14px",color:u.slate[600],margin:0},children:"Finde deine berufliche Bestimmung"})]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx($,{featureId:"ikigai",size:"sm"}),x&&t.jsxs("button",{onClick:x,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",borderRadius:"12px",border:`2px solid ${I}`,backgroundColor:"white",color:I,fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[t.jsx(A,{size:18}),"Meine Ikigai"]})]})]})})}),O()]})]})};export{ne as default};
