import{j as e,c as S,m as x,ad as U,a0 as Z,U as $,B as q,ae as V,f as J,H as Q,h as W,a as _,g as X}from"./ui-vendor-BaF13Yzb.js";import{a}from"./react-vendor-uDOJF2jQ.js";import{B as O}from"./select-native-DR-o3jUm.js";import{w as b,k as Y,q as A,C as m}from"./FeatureInfoButton-DPifsdNw.js";import"./dialog-CNQsgZ9g.js";import{F,u as ee}from"./useScrollToTop-K5i3tQYV.js";import{a as te,I as se}from"./IkigaiResults-CPBpUfzk.js";import"./utils-BEHD0UYf.js";import"./index-CklPxmEV.js";import"./useMobile-YxjH166V.js";import"./card-UDie9F3m.js";import"./button-C1ZSt5wu.js";import"./AudioRecorder-T7UH3cZs.js";import"./index.js";import"./DeviceSettingsDialog-C9tbMaH5.js";import"./DeviceSetupPage-BBz4UMLX.js";import"./MicrophoneTestDialog-jrZ0XnNc.js";const ae=[{key:"love",label:"Was du liebst",icon:U,color:m.rose[500],description:"Deine Leidenschaften und Interessen"},{key:"talent",label:"Was du kannst",icon:Z,color:m.amber[500],description:"Deine FÃ¤higkeiten und StÃ¤rken"},{key:"need",label:"Was die Welt braucht",icon:$,color:m.emerald[500],description:"Wie du anderen helfen kannst"},{key:"market",label:"WofÃ¼r du bezahlt werden kannst",icon:q,color:m.blue[500],description:"Deine beruflichen MÃ¶glichkeiten"}],ie=({onStartNew:p,onContinueSession:D,onNavigateToHistory:v,isAuthenticated:u,requireAuth:g,setPendingAction:r})=>{const[l,j]=a.useState([]),[z,w]=a.useState(!1),f=A(m.purple[500],m.purple[400]);a.useEffect(()=>{u&&o()},[u]);const o=async()=>{w(!0);try{const s=await b.getIkigais();if(s?.data?.ikigais){const c=s.data.ikigais.sort((N,C)=>new Date(C.created_at)-new Date(N.created_at)).slice(0,5);j(c)}}catch(s){console.error("[IkigaiDashboard] Failed to load sessions:",s)}finally{w(!1)}},k=a.useCallback(()=>{if(!u){r&&r({type:"ikigai_start"}),g&&g(()=>{p()});return}p()},[u,g,r,p]),B=s=>new Date(s).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}),y=s=>s.status==="completed"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-700",children:[e.jsx(_,{className:"w-3 h-3"}),"Abgeschlossen"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-700",children:[e.jsx(X,{className:"w-3 h-3"}),"In Bearbeitung"]});return e.jsxs(e.Fragment,{children:[e.jsx(Y,{featureId:"ikigai",showOnMount:!0}),e.jsxs("div",{className:"min-h-full",children:[e.jsx(F,{featureId:"ikigai",icon:S,title:"Ikigai-Kompass",subtitle:"Finde deine berufliche Bestimmung",gradient:f,historyLabel:"Meine Ikigai",onNavigateToHistory:v,showHistoryButton:u&&l.length>0}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl mx-auto mb-6 flex items-center justify-center",style:{background:f},children:e.jsx(S,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Entdecke dein Ikigai"}),e.jsx("p",{className:"text-slate-600 max-w-2xl mx-auto leading-relaxed",children:'Ikigai ist ein japanisches Konzept fÃ¼r den "Grund des Seins" â€“ die perfekte Schnittmenge aus dem, was du liebst, was du kannst, was die Welt braucht und wofÃ¼r du bezahlt werden kannst. Finde deinen einzigartigen Karrierepfad.'})]}),e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-10",children:ae.map((s,c)=>e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1+c*.05},className:"bg-white rounded-xl p-4 border border-slate-200 text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl mx-auto mb-3 flex items-center justify-center",style:{backgroundColor:`${s.color}15`},children:e.jsx(s.icon,{className:"w-6 h-6",style:{color:s.color}})}),e.jsx("h3",{className:"font-semibold text-slate-800 text-sm mb-1",children:s.label}),e.jsx("p",{className:"text-xs text-slate-500",children:s.description})]},s.key))}),e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-center mb-12",children:[e.jsxs(O,{onClick:k,size:"lg",className:"px-8 py-4 text-lg font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all",style:{background:f,color:"white"},children:[e.jsx(V,{className:"w-5 h-5 mr-2"}),"Neues Ikigai starten",e.jsx(J,{className:"w-5 h-5 ml-2"})]}),!u&&e.jsx("p",{className:"text-sm text-slate-500 mt-3",children:"Anmeldung erforderlich zum Starten"})]}),u&&l.length>0&&e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[e.jsx(Q,{className:"w-5 h-5 text-slate-400"}),"Letzte Ikigai-Analysen"]}),l.length>=5&&e.jsxs(O,{variant:"ghost",size:"sm",onClick:v,className:"text-slate-600 hover:text-slate-800",children:["Alle anzeigen",e.jsx(W,{className:"w-4 h-4 ml-1"})]})]}),e.jsx("div",{className:"space-y-3",children:l.map((s,c)=>e.jsx(x.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5+c*.05},className:"bg-white rounded-xl p-4 border border-slate-200 hover:border-purple-300 hover:shadow-md transition-all cursor-pointer group",onClick:()=>D(s),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{background:`${m.purple[500]}15`},children:e.jsx(S,{className:"w-5 h-5",style:{color:m.purple[500]}})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:s.summary?s.summary.substring(0,50)+(s.summary.length>50?"...":""):"Ikigai-Analyse"}),e.jsx("p",{className:"text-sm text-slate-500",children:B(s.created_at)})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[y(s),e.jsx(W,{className:"w-5 h-5 text-slate-400 group-hover:text-purple-500 transition-colors"})]})]})},s.id))})]}),e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-12 bg-gradient-to-br from-purple-50 to-violet-50 rounded-2xl p-6 border border-purple-100",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5 text-purple-500"}),"So funktioniert's"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500 text-white flex items-center justify-center font-bold text-sm flex-shrink-0",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:"Dimensionen ausfÃ¼llen"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Beantworte Fragen zu den vier Ikigai-Bereichen"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500 text-white flex items-center justify-center font-bold text-sm flex-shrink-0",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:"KI-Analyse"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Die KI extrahiert SchlÃ¼sselwÃ¶rter aus deinen Antworten"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500 text-white flex items-center justify-center font-bold text-sm flex-shrink-0",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:"Karrierepfade"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Erhalte personalisierte BerufsvorschlÃ¤ge"})]})]})]})]})]})]})]})},R={love:{key:"love",label:"Leidenschaft",title:"Deine Leidenschaft",icon:"â¤ï¸",color:"#E11D48",question:"Stell dir vor, Geld spielt keine Rolle: Womit wÃ¼rdest du deinen Tag verbringen? Bei welchem Thema vergisst du vÃ¶llig die Zeit?",placeholder:"Schreib einfach drauf los: Hobbys, Themen, TÃ¤tigkeiten...",description:"Was treibt dich an?"},talent:{key:"talent",label:"StÃ¤rken",title:"Deine StÃ¤rken",icon:"â­",color:"#F59E0B",question:'WofÃ¼r bitten dich Freunde oder Kollegen oft um Rat? Was erledigst du "mit links", wÃ¤hrend andere daran verzweifeln?',placeholder:"Z.B. Organisieren, ZuhÃ¶ren, Coden, Designen...",description:"Was fÃ¤llt dir leicht?"},need:{key:"need",label:"Mission",title:"Deine Mission",icon:"ðŸŒ",color:"#10B981",question:"Welches Problem in der Gesellschaft oder Wirtschaft nervt dich? Wo wÃ¼rdest du gerne mitanpacken, um Dinge zu verbessern?",placeholder:"Z.B. Nachhaltigkeit, Bildung, bessere Software, Pflege...",description:"Welchen Beitrag leistest du?"},market:{key:"market",label:"Markt",title:"Der Markt",icon:"ðŸ’°",color:"#6366F1",question:"Welche deiner FÃ¤higkeiten sind bares Geld wert? FÃ¼r welche Jobs oder Dienstleistungen existiert ein echtes Budget?",placeholder:"Z.B. Projektmanagement, Beratung, Handwerk...",description:"WofÃ¼r wirst du bezahlt?"}};Object.values(R).map(p=>p.color);const d={DASHBOARD:"dashboard",COMPASS:"compass",RESULTS:"results"},we=({isAuthenticated:p,requireAuth:D,setPendingAction:v,onNavigateToHistory:u})=>{const[g,r]=a.useState(d.DASHBOARD),[l,j]=a.useState(null),[z,w]=a.useState(!1),f=A(m.purple[500],m.purple[400]),[o,k]=a.useState({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),[B,y]=a.useState(null),s=a.useRef(!1);ee({dependencies:[g]});const c=Object.values(o).every(t=>t.tags&&t.tags.length>0),N=a.useCallback(()=>{k({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),y(null),j(null),s.current=!1,r(d.COMPASS)},[]),C=a.useCallback(async t=>{try{j(t.id),s.current=!0,k({love:{input:t.love_input||"",tags:t.love_tags||[]},talent:{input:t.talent_input||"",tags:t.talent_tags||[]},need:{input:t.need_input||"",tags:t.need_tags||[]},market:{input:t.market_input||"",tags:t.market_tags||[]}}),t.status==="completed"&&t.paths?(y({summary:t.summary,paths:t.paths}),r(d.RESULTS)):r(d.COMPASS)}catch(i){console.error("[Ikigai] Failed to load session:",i)}},[]),E=a.useCallback(()=>{r(d.DASHBOARD)},[]),I=a.useCallback(async()=>{if(l)return l;try{const t=await b.createIkigai();if(t?.id)return j(t.id),s.current=!0,console.log("[Ikigai] Session created with ID:",t.id),t.id}catch(t){console.error("[Ikigai] Failed to create session:",t)}return null},[l]),M=a.useCallback(async(t,i,n)=>{k(h=>({...h,[t]:{input:i,tags:n}}));try{const h=await I();h&&(await b.updateIkigai(h,{[`${t}_input`]:i,[`${t}_tags`]:n}),console.log(`[Ikigai] Dimension ${t} saved`))}catch(h){console.error("[Ikigai] Failed to save dimension:",h)}},[I]),L=a.useCallback(async(t,i)=>{try{const n=await b.extractIkigaiKeywords(t,i);return n?.keywords?n.keywords:[]}catch(n){return console.error("[Ikigai] Failed to extract keywords:",n),[]}},[]),T=a.useCallback(async()=>{if(c){w(!0);try{const t=await b.synthesizeIkigaiPaths({love_tags:o.love.tags,talent_tags:o.talent.tags,need_tags:o.need.tags,market_tags:o.market.tags});if(t){y(t);const i=l||await I();i&&await b.updateIkigai(i,{summary:t.summary,paths:t.paths,status:"completed"}),r(d.RESULTS)}}catch(t){console.error("[Ikigai] Failed to synthesize paths:",t)}finally{w(!1)}}},[c,o,l,I]),H=a.useCallback((t,i)=>{k(n=>{const h=n[t].tags.filter(K=>K!==i);return{...n,[t]:{...n[t],tags:h}}})},[]),P=a.useCallback(()=>{y(null),r(d.COMPASS)},[]),G=()=>{switch(g){case d.DASHBOARD:return e.jsx(ie,{onStartNew:N,onContinueSession:C,onNavigateToHistory:u,isAuthenticated:p,requireAuth:D,setPendingAction:v});case d.RESULTS:return e.jsxs(e.Fragment,{children:[e.jsx(F,{featureId:"ikigai",icon:S,title:"Ikigai-Kompass",subtitle:"Deine Ergebnisse",gradient:f,showBackButton:!0,onBack:E}),e.jsx(se,{dimensions:o,synthesisResult:B,onStartNew:N,onEdit:P,DIMENSIONS:R})]});case d.COMPASS:default:return e.jsxs(e.Fragment,{children:[e.jsx(F,{featureId:"ikigai",icon:S,title:"Ikigai-Kompass",subtitle:"Finde deine berufliche Bestimmung",gradient:f,showBackButton:!0,onBack:E}),e.jsx(te,{dimensions:o,DIMENSIONS:R,onExtractKeywords:L,onUpdateDimension:M,onRemoveTag:H,allDimensionsFilled:c,onSynthesize:T,isSynthesizing:z})]})}};return e.jsx("div",{className:"min-h-full",children:G()})};export{we as default};
