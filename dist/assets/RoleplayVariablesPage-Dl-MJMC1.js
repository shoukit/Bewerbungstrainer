import{j as e,v as _,a as N,I as y,w as k,g as E,e as R}from"./ui-vendor-CgXEyNXi.js";import{a as m,d as S}from"./react-vendor-uDOJF2jQ.js";import{D as C}from"./DynamicFormField-DtwEBajw.js";import"./useBranding-CdMCaedJ.js";import"./FeatureInfoButton-CyErgWRh.js";const O=({scenario:t,onBack:u,onNext:d,primaryAccent:b,headerGradient:x,buttonGradient:V})=>{const[o,p]=m.useState({}),[h,f]=m.useState({}),a=s=>{if(!s)return s;let r=s;if(Object.entries(o).forEach(([l,i])=>{const c=new RegExp(`\\{\\{${l}\\}\\}`,"g");r=r.replace(c,i||"")}),t?.interviewer_profile){const l={interviewer_name:t.interviewer_profile.name,interviewer_role:t.interviewer_profile.role,interviewer_properties:t.interviewer_profile.properties,interviewer_objections:t.interviewer_profile.typical_objections,interviewer_questions:t.interviewer_profile.important_questions};Object.entries(l).forEach(([i,c])=>{if(c){const w=new RegExp(`\\{\\{${i}\\}\\}`,"g");r=r.replace(w,c)}})}return r},n=S.useMemo(()=>t?.variables_schema?t.variables_schema.filter(s=>s.user_input!==!1):[],[t?.variables_schema]);m.useEffect(()=>{if(t?.variables_schema){const s={};t.variables_schema.forEach(r=>{r.default&&(s[r.key]=r.default)}),p(s)}},[t?.variables_schema]);const j=(s,r)=>{p(l=>({...l,[s]:r})),h[s]&&f(l=>{const i={...l};return delete i[s],i})},g=()=>{const s={};return n.forEach(r=>{const l=o[r.key];r.required&&(!l||l.toString().trim()==="")&&(s[r.key]=`${r.label} ist ein Pflichtfeld`)}),f(s),Object.keys(s).length===0},v=s=>{s.preventDefault(),g()&&d(o)};return m.useEffect(()=>{if(n.length===0){const s={};t?.variables_schema?.forEach(r=>{r.default&&(s[r.key]=r.default)}),d(s)}},[n,t,d]),n.length===0?null:e.jsxs("div",{className:"p-6 pb-[200px] max-w-[640px] mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("button",{onClick:u,className:"inline-flex items-center gap-2 px-3 py-2 mb-4 border-none bg-transparent text-slate-600 text-sm cursor-pointer rounded-md transition-colors hover:bg-slate-100",children:[e.jsx(_,{className:"w-[18px] h-[18px]"}),"Zurück zur Übersicht"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center",style:{background:x},children:e.jsx(N,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900 m-0",children:t.title}),e.jsx("p",{className:"text-sm text-slate-600 mt-1 mb-0",children:"Personalisiere dein Rollenspiel"})]})]})]}),t.long_description&&e.jsx("div",{className:"p-5 px-6 rounded-xl bg-white border border-slate-200 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3.5",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0",style:{background:x},children:e.jsx(y,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-slate-900 m-0 mb-2",children:"Deine Aufgabe"}),e.jsx("p",{className:"text-sm leading-relaxed text-slate-700 m-0 whitespace-pre-wrap",children:a(t.long_description?.replace(/\/n/g,`
`))})]})]})}),!t.long_description&&t.description&&e.jsx("div",{className:"p-4 px-5 rounded-lg bg-slate-100 mb-6",children:e.jsx("p",{className:"text-sm text-slate-700 m-0 leading-relaxed",children:a(t.description)})}),t.interviewer_profile&&e.jsxs("div",{className:"p-4 px-5 rounded-lg border border-slate-200 mb-6 flex items-center gap-4",children:[t.interviewer_profile.image_url?e.jsx("img",{src:t.interviewer_profile.image_url,alt:a(t.interviewer_profile.name),className:"w-12 h-12 rounded-full object-cover"}):e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center bg-primary/10",children:e.jsx(k,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold text-slate-900 m-0",children:["Dein Gesprächspartner: ",a(t.interviewer_profile.name)]}),t.interviewer_profile.role&&e.jsx("p",{className:"text-sm text-slate-600 mt-0.5 mb-0",children:a(t.interviewer_profile.role)})]})]}),e.jsxs("form",{onSubmit:v,children:[n.map(s=>e.jsx(C,{field:s,value:o[s.key],onChange:j,error:h[s.key],focusColor:b},s.key)),e.jsxs("div",{className:"p-4 px-5 rounded-lg bg-primary/10 mt-6 mb-6 flex gap-5 flex-wrap",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-xs text-slate-500 block",children:[e.jsx(E,{className:"w-3 h-3 inline mr-1"}),"Dauer"]}),e.jsx("span",{className:"text-base font-semibold text-slate-900",children:"ca. 10 Min"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-slate-500 block",children:"Typ"}),e.jsx("span",{className:"text-base font-semibold text-slate-900",children:"Live-Gespräch"})]})]}),e.jsxs("button",{type:"submit",className:"w-full px-6 py-4 rounded-xl border-none text-white text-base font-semibold cursor-pointer flex items-center justify-center gap-2.5 transition-all duration-200 hover:-translate-y-0.5 hover:shadow-lg bg-gradient-to-r from-indigo-500 to-violet-500 shadow-primary",children:["Weiter",e.jsx(R,{className:"w-5 h-5"})]})]})]})};export{O as default};
