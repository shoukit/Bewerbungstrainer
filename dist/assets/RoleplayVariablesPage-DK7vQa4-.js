import{j as s,w as S,a as V,I as F,x as N,g as A,f as D}from"./ui-vendor-CDZVYibh.js";import{a as p,d as k}from"./react-vendor-uDOJF2jQ.js";import{D as G}from"./DynamicFormField-Dc4-YiSj.js";import"./FeatureInfoButton-CGuK80BJ.js";const M=r=>r?r.split(/(\*\*.*?\*\*)/g).map((n,h)=>n.startsWith("**")&&n.endsWith("**")?s.jsx("strong",{children:n.slice(2,-2)},h):n):null,T=({scenario:r,onBack:f,onNext:n,primaryAccent:h,headerGradient:b,buttonGradient:W})=>{const[u,g]=p.useState({}),[a,v]=p.useState({}),[j,w]=p.useState({}),i=k.useMemo(()=>{const e=[],t=r?.interviewer_profile?.editable_fields||{},l=r?.interviewer_profile||{};return t.name&&e.push({key:"interviewer_name",label:"Name des Gesprächspartners",value:l.name||""}),t.role&&e.push({key:"interviewer_role",label:"Rolle/Position",value:l.role||""}),t.image&&e.push({key:"interviewer_image",label:"Profilbild URL",value:l.image_url||"",type:"url"}),t.properties&&e.push({key:"interviewer_properties",label:"Eigenschaften",value:l.properties||"",type:"textarea"}),t.objections&&e.push({key:"interviewer_objections",label:"Typische Einwände",value:l.typical_objections||"",type:"textarea"}),t.questions&&e.push({key:"interviewer_questions",label:"Wichtige Fragen",value:l.important_questions||"",type:"textarea"}),e},[r?.interviewer_profile]);p.useEffect(()=>{if(i.length>0){const e={};i.forEach(t=>{e[t.key]=t.value}),v(e)}},[i]);const c=()=>{const e=r?.interviewer_profile||{};return{name:a.interviewer_name??e.name,role:a.interviewer_role??e.role,image_url:a.interviewer_image??e.image_url,properties:a.interviewer_properties??e.properties,typical_objections:a.interviewer_objections??e.typical_objections,important_questions:a.interviewer_questions??e.important_questions}},y=e=>{if(!e)return e;let t=e;const l=(d,m)=>{const I=new RegExp(`\\{\\{${d}\\}\\}`,"g");t=t.replace(I,m||"");const P=new RegExp(`\\$\\{${d}\\}`,"g");t=t.replace(P,m||"")};Object.entries(u).forEach(([d,m])=>{l(d,m)});const o=c(),R={interviewer_name:o.name,interviewer_role:o.role,interviewer_properties:o.properties,interviewer_objections:o.typical_objections,interviewer_questions:o.important_questions};return Object.entries(R).forEach(([d,m])=>{m&&l(d,m)}),t},x=k.useMemo(()=>r?.variables_schema?r.variables_schema.filter(e=>e.user_input!==!1):[],[r?.variables_schema]);p.useEffect(()=>{if(r?.variables_schema){const e={};r.variables_schema.forEach(t=>{t.default&&(e[t.key]=t.default)}),g(e)}},[r?.variables_schema]);const E=(e,t)=>{g(l=>({...l,[e]:t})),j[e]&&w(l=>{const o={...l};return delete o[e],o})},_=(e,t)=>{v(l=>({...l,[e]:t}))},q=()=>{const e={};return x.forEach(t=>{const l=u[t.key];t.required&&(!l||l.toString().trim()==="")&&(e[t.key]=`${t.label} ist ein Pflichtfeld`)}),w(e),Object.keys(e).length===0},C=e=>{if(e.preventDefault(),!q())return;const t={...u,...a};n(t)};return p.useEffect(()=>{if(x.length===0&&i.length===0){const e={};r?.variables_schema?.forEach(t=>{t.default&&(e[t.key]=t.default)}),n(e)}},[x,i,r,n]),x.length===0&&i.length===0?null:s.jsxs("div",{className:"p-6 pb-[200px] max-w-[640px] mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("button",{onClick:f,className:"inline-flex items-center gap-2 px-3 py-2 mb-4 border-none bg-transparent text-slate-600 text-sm cursor-pointer rounded-md transition-colors hover:bg-slate-100",children:[s.jsx(S,{className:"w-[18px] h-[18px]"}),"Zurück zur Übersicht"]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center",style:{background:b},children:s.jsx(V,{className:"w-7 h-7 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-slate-900 m-0",children:r.title}),s.jsx("p",{className:"text-sm text-slate-600 mt-1 mb-0",children:"Personalisiere dein Rollenspiel"})]})]})]}),r.long_description&&s.jsx("div",{className:"p-5 px-6 rounded-xl bg-white border border-slate-200 mb-6",children:s.jsxs("div",{className:"flex items-start gap-3.5",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0",style:{background:b},children:s.jsx(F,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-base font-semibold text-slate-900 m-0 mb-2",children:"Deine Aufgabe"}),s.jsx("div",{className:"text-sm leading-relaxed text-slate-700 m-0 whitespace-pre-wrap",children:M(y(r.long_description?.replace(/\/n/g,`
`)))})]})]})}),!r.long_description&&r.description&&s.jsx("div",{className:"p-4 px-5 rounded-lg bg-slate-100 mb-6",children:s.jsx("p",{className:"text-sm text-slate-700 m-0 leading-relaxed",children:y(r.description)})}),r.interviewer_profile&&i.length===0&&s.jsxs("div",{className:"p-4 px-5 rounded-lg border border-slate-200 mb-6 flex items-center gap-4",children:[c().image_url?s.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0",children:s.jsx("img",{src:c().image_url,alt:c().name,className:"w-full h-full object-cover"})}):s.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center bg-primary/10",children:s.jsx(N,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-semibold text-slate-900 m-0",children:["Dein Gesprächspartner: ",c().name]}),c().role&&s.jsx("p",{className:"text-sm text-slate-600 mt-0.5 mb-0",children:c().role})]})]}),s.jsxs("form",{onSubmit:C,children:[x.map(e=>s.jsx(G,{field:e,value:u[e.key],onChange:E,error:j[e.key],focusColor:h},e.key)),i.length>0&&s.jsxs("div",{className:"mt-6 p-5 rounded-xl border border-slate-200 bg-slate-50",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{background:b},children:s.jsx(N,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-base font-semibold text-slate-900 m-0",children:"KI-Gesprächspartner anpassen"}),s.jsx("p",{className:"text-sm text-slate-600 m-0",children:"Passe die Eigenschaften deines Gesprächspartners an"})]})]}),i.map(e=>s.jsxs("div",{className:"mb-4 last:mb-0",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:e.label}),e.type==="textarea"?s.jsx("textarea",{value:a[e.key]||"",onChange:t=>_(e.key,t.target.value),rows:3,className:`w-full px-3 py-2.5 border border-slate-300 rounded-lg text-sm
                               focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary
                               transition-colors bg-white`,placeholder:e.value}):s.jsx("input",{type:e.type||"text",value:a[e.key]||"",onChange:t=>_(e.key,t.target.value),className:`w-full px-3 py-2.5 border border-slate-300 rounded-lg text-sm
                               focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary
                               transition-colors bg-white`,placeholder:e.value})]},e.key))]}),s.jsxs("div",{className:"p-4 px-5 rounded-lg bg-primary/10 mt-6 mb-6 flex gap-5 flex-wrap",children:[s.jsxs("div",{children:[s.jsxs("span",{className:"text-xs text-slate-500 block",children:[s.jsx(A,{className:"w-3 h-3 inline mr-1"}),"Dauer"]}),s.jsx("span",{className:"text-base font-semibold text-slate-900",children:"ca. 10 Min"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-slate-500 block",children:"Typ"}),s.jsx("span",{className:"text-base font-semibold text-slate-900",children:"Live-Gespräch"})]})]}),s.jsxs("button",{type:"submit",className:"w-full px-6 py-4 rounded-xl border-none text-white text-base font-semibold cursor-pointer flex items-center justify-center gap-2.5 transition-all duration-200 hover:-translate-y-0.5 hover:shadow-lg bg-gradient-to-r from-indigo-500 to-violet-500 shadow-primary",children:["Weiter",s.jsx(D,{className:"w-5 h-5"})]})]})]})};export{T as default};
