import{j as r}from"./ui-vendor-BAEfSb-X.js";import{a as t}from"./react-vendor-uDOJF2jQ.js";import{a as M,I as T}from"./IkigaiResults-DmNnBPwf.js";import{w as c}from"./designTokens-CcQu6x4k.js";import{F as W}from"./index.js";import"./useBranding-BMC8w-Oq.js";import"./useMobile-YxjH166V.js";import"./card-CRd_k1Xo.js";import"./utils-BEHD0UYf.js";import"./button-DeT9Q7zb.js";import"./AudioRecorder-Q8z5yEUy.js";const o={COMPASS:"compass",RESULTS:"results"},w={love:{key:"love",label:"Leidenschaft",title:"Deine Leidenschaft",icon:"â¤ï¸",color:"#E11D48",question:"Stell dir vor, Geld spielt keine Rolle: Womit wÃ¼rdest du deinen Tag verbringen? Bei welchem Thema vergisst du vÃ¶llig die Zeit?",placeholder:"Schreib einfach drauf los: Hobbys, Themen, TÃ¤tigkeiten...",description:"Was treibt dich an?"},talent:{key:"talent",label:"StÃ¤rken",title:"Deine StÃ¤rken",icon:"â­",color:"#F59E0B",question:'WofÃ¼r bitten dich Freunde oder Kollegen oft um Rat? Was erledigst du "mit links", wÃ¤hrend andere daran verzweifeln?',placeholder:"Z.B. Organisieren, ZuhÃ¶ren, Coden, Designen...",description:"Was fÃ¤llt dir leicht?"},need:{key:"need",label:"Mission",title:"Deine Mission",icon:"ðŸŒ",color:"#10B981",question:"Welches Problem in der Gesellschaft oder Wirtschaft nervt dich? Wo wÃ¼rdest du gerne mitanpacken, um Dinge zu verbessern?",placeholder:"Z.B. Nachhaltigkeit, Bildung, bessere Software, Pflege...",description:"Welchen Beitrag leistest du?"},market:{key:"market",label:"Markt",title:"Der Markt",icon:"ðŸ’°",color:"#6366F1",question:"Welche deiner FÃ¤higkeiten sind bares Geld wert? FÃ¼r welche Jobs oder Dienstleistungen existiert ein echtes Budget?",placeholder:"Z.B. Projektmanagement, Beratung, Handwerk...",description:"WofÃ¼r wirst du bezahlt?"}},$=({isAuthenticated:P,requireAuth:A,setPendingAction:B,onNavigateToHistory:j})=>{const[m,u]=t.useState(o.COMPASS),[l,p]=t.useState(null),[I,S]=t.useState(!1),[a,g]=t.useState({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),[y,h]=t.useState(null),f=t.useRef(!1);t.useEffect(()=>{window.scrollTo(0,0)},[m]);const k=Object.values(a).every(e=>e.tags&&e.tags.length>0),d=t.useCallback(async()=>{if(l)return l;try{const e=await c.createIkigai();if(e?.id)return p(e.id),f.current=!0,console.log("[Ikigai] Session created with ID:",e.id),e.id}catch(e){console.error("[Ikigai] Failed to create session:",e)}return null},[l]),b=t.useCallback(async(e,i,s)=>{g(n=>({...n,[e]:{input:i,tags:s}}));try{const n=await d();n&&(await c.updateIkigai(n,{[`${e}_input`]:i,[`${e}_tags`]:s}),console.log(`[Ikigai] Dimension ${e} saved`))}catch(n){console.error("[Ikigai] Failed to save dimension:",n)}},[d]),v=t.useCallback(async(e,i)=>{try{const s=await c.extractIkigaiKeywords(e,i);return s?.keywords?s.keywords:[]}catch(s){return console.error("[Ikigai] Failed to extract keywords:",s),[]}},[]),C=t.useCallback(async()=>{if(k){S(!0);try{const e=await c.synthesizeIkigaiPaths({love_tags:a.love.tags,talent_tags:a.talent.tags,need_tags:a.need.tags,market_tags:a.market.tags});if(e){h(e);const i=l||await d();i&&await c.updateIkigai(i,{summary:e.summary,paths:e.paths,status:"completed"}),u(o.RESULTS)}}catch(e){console.error("[Ikigai] Failed to synthesize paths:",e)}finally{S(!1)}}},[k,a,l,d]),D=t.useCallback((e,i)=>{g(s=>{const n=s[e].tags.filter(R=>R!==i);return{...s,[e]:{...s[e],tags:n}}})},[]),x=t.useCallback(()=>{g({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),h(null),p(null),f.current=!1,u(o.COMPASS)},[]),E=t.useCallback(()=>{h(null),u(o.COMPASS)},[]),F=()=>{switch(m){case o.RESULTS:return r.jsx(T,{dimensions:a,synthesisResult:y,onStartNew:x,onEdit:E,DIMENSIONS:w});case o.COMPASS:default:return r.jsx(M,{dimensions:a,DIMENSIONS:w,onExtractKeywords:v,onUpdateDimension:b,onRemoveTag:D,allDimensionsFilled:k,onSynthesize:C,isSynthesizing:I})}};return r.jsxs(r.Fragment,{children:[r.jsx(W,{featureId:"ikigai",showOnMount:!0}),r.jsx("div",{style:{minHeight:"100%"},children:F()})]})};export{$ as default};
