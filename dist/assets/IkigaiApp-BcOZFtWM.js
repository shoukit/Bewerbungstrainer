import{j as e,c as I,m as g,ag as X,a2 as ee,U as te,r as se,e as ae,ah as ie,f as ne,H as re,h as A,a as G,g as le}from"./ui-vendor-4RzMPcHM.js";import{a}from"./react-vendor-uDOJF2jQ.js";import{B as P}from"./select-native-CVzvlCkd.js";import{w as y,k as oe,q as H,C as m}from"./FeatureInfoButton-DkKoIptM.js";import"./dialog-BxKlTEi_.js";import{C as ce}from"./card-Cxxtg4gu.js";import{F as O}from"./FeatureAppHeader-DhQnpzey.js";import{M as de,a as me}from"./MicrophoneTestDialog-BpH4sJX2.js";import{a as ue,I as he}from"./IkigaiResults-C77k567l.js";import{u as pe}from"./useScrollToTop-PegBaEbR.js";import"./utils-BEHD0UYf.js";import"./index-CklPxmEV.js";import"./useMobile-YxjH166V.js";import"./button-DzjOrDtB.js";import"./AudioRecorder-J8TfGKYv.js";import"./index.js";import"./DeviceSettingsDialog-BZyO7Z7l.js";import"./DeviceSetupPage-B-mu0raW.js";const ge=[{key:"love",label:"Was du liebst",icon:X,color:m.rose[500],description:"Deine Leidenschaften und Interessen"},{key:"talent",label:"Was du kannst",icon:ee,color:m.amber[500],description:"Deine FÃ¤higkeiten und StÃ¤rken"},{key:"need",label:"Was die Welt braucht",icon:te,color:m.emerald[500],description:"Wie du anderen helfen kannst"},{key:"market",label:"WofÃ¼r du bezahlt werden kannst",icon:se,color:m.blue[500],description:"Deine beruflichen MÃ¶glichkeiten"}],xe=({onStartNew:x,onContinueSession:M,onNavigateToHistory:v,isAuthenticated:u,requireAuth:b,setPendingAction:l,selectedMicrophoneId:n,onMicrophoneChange:w,onTestMicrophone:B})=>{const[f,F]=a.useState([]),[E,o]=a.useState(!1),j=H(m.purple[500],m.purple[400]);a.useEffect(()=>{u&&R()},[u]);const R=async()=>{o(!0);try{const s=await y.getIkigais();if(s?.data?.ikigais){const h=s.data.ikigais.sort((k,S)=>new Date(S.created_at)-new Date(k.created_at)).slice(0,5);F(h)}}catch(s){console.error("[IkigaiDashboard] Failed to load sessions:",s)}finally{o(!1)}},N=a.useCallback(()=>{if(!u){l&&l({type:"ikigai_start"}),b&&b(()=>{x()});return}x()},[u,b,l,x]),D=s=>new Date(s).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}),c=s=>s.status==="completed"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-700",children:[e.jsx(G,{className:"w-3 h-3"}),"Abgeschlossen"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-700",children:[e.jsx(le,{className:"w-3 h-3"}),"In Bearbeitung"]});return e.jsxs(e.Fragment,{children:[e.jsx(oe,{featureId:"ikigai",showOnMount:!0}),e.jsxs("div",{className:"min-h-full",children:[e.jsx(O,{featureId:"ikigai",icon:I,title:"Ikigai-Kompass",subtitle:"Finde deine berufliche Bestimmung",gradient:j,historyLabel:"Meine Ikigai",onNavigateToHistory:v,showHistoryButton:u&&f.length>0}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl mx-auto mb-6 flex items-center justify-center",style:{background:j},children:e.jsx(I,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Entdecke dein Ikigai"}),e.jsx("p",{className:"text-slate-600 max-w-2xl mx-auto leading-relaxed",children:'Ikigai ist ein japanisches Konzept fÃ¼r den "Grund des Seins" â€“ die perfekte Schnittmenge aus dem, was du liebst, was du kannst, was die Welt braucht und wofÃ¼r du bezahlt werden kannst. Finde deinen einzigartigen Karrierepfad.'})]}),e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-10",children:ge.map((s,h)=>e.jsxs(g.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1+h*.05},className:"bg-white rounded-xl p-4 border border-slate-200 text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl mx-auto mb-3 flex items-center justify-center",style:{backgroundColor:`${s.color}15`},children:e.jsx(s.icon,{className:"w-6 h-6",style:{color:s.color}})}),e.jsx("h3",{className:"font-semibold text-slate-800 text-sm mb-1",children:s.label}),e.jsx("p",{className:"text-xs text-slate-500",children:s.description})]},s.key))}),e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},className:"mb-8",children:e.jsxs(ce,{className:"p-5 bg-white border border-slate-200 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center gap-2.5 mb-4",children:[e.jsx(ae,{className:"w-[22px] h-[22px] text-purple-500"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Mikrofon testen"})]}),e.jsx(de,{selectedDeviceId:n,onDeviceChange:w,onTestClick:B})]})}),e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-center mb-12",children:[e.jsxs(P,{onClick:N,size:"lg",className:"px-8 py-4 text-lg font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all",style:{background:j,color:"white"},children:[e.jsx(ie,{className:"w-5 h-5 mr-2"}),"Neues Ikigai starten",e.jsx(ne,{className:"w-5 h-5 ml-2"})]}),!u&&e.jsx("p",{className:"text-sm text-slate-500 mt-3",children:"Anmeldung erforderlich zum Starten"})]}),u&&f.length>0&&e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[e.jsx(re,{className:"w-5 h-5 text-slate-400"}),"Letzte Ikigai-Analysen"]}),f.length>=5&&e.jsxs(P,{variant:"ghost",size:"sm",onClick:v,className:"text-slate-600 hover:text-slate-800",children:["Alle anzeigen",e.jsx(A,{className:"w-4 h-4 ml-1"})]})]}),e.jsx("div",{className:"space-y-3",children:f.map((s,h)=>e.jsx(g.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5+h*.05},className:"bg-white rounded-xl p-4 border border-slate-200 hover:border-purple-300 hover:shadow-md transition-all cursor-pointer group",onClick:()=>M(s),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center shrink-0",style:{background:`${m.purple[500]}15`},children:e.jsx(I,{className:"w-5 h-5",style:{color:m.purple[500]}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2 mb-0.5",children:c(s)}),e.jsx("p",{className:"font-medium text-slate-800 truncate",children:s.summary||"Ikigai-Analyse"}),e.jsx("p",{className:"text-sm text-slate-500",children:D(s.created_at)})]}),e.jsx(A,{className:"w-5 h-5 text-slate-400 group-hover:text-purple-500 transition-colors shrink-0"})]})},s.id))})]}),e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-12 bg-gradient-to-br from-purple-50 to-violet-50 rounded-2xl p-6 border border-purple-100",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5 text-purple-500"}),"So funktioniert's"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500 text-white flex items-center justify-center font-bold text-sm flex-shrink-0",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:"Dimensionen ausfÃ¼llen"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Beantworte Fragen zu den vier Ikigai-Bereichen"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500 text-white flex items-center justify-center font-bold text-sm flex-shrink-0",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:"KI-Analyse"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Die KI extrahiert SchlÃ¼sselwÃ¶rter aus deinen Antworten"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500 text-white flex items-center justify-center font-bold text-sm flex-shrink-0",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:"Karrierepfade"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Erhalte personalisierte BerufsvorschlÃ¤ge"})]})]})]})]})]})]})]})},z={love:{key:"love",label:"Leidenschaft",title:"Deine Leidenschaft",icon:"â¤ï¸",color:"#E11D48",question:"Stell dir vor, Geld spielt keine Rolle: Womit wÃ¼rdest du deinen Tag verbringen? Bei welchem Thema vergisst du vÃ¶llig die Zeit?",placeholder:"Schreib einfach drauf los: Hobbys, Themen, TÃ¤tigkeiten...",description:"Was treibt dich an?"},talent:{key:"talent",label:"StÃ¤rken",title:"Deine StÃ¤rken",icon:"â­",color:"#F59E0B",question:'WofÃ¼r bitten dich Freunde oder Kollegen oft um Rat? Was erledigst du "mit links", wÃ¤hrend andere daran verzweifeln?',placeholder:"Z.B. Organisieren, ZuhÃ¶ren, Coden, Designen...",description:"Was fÃ¤llt dir leicht?"},need:{key:"need",label:"Mission",title:"Deine Mission",icon:"ðŸŒ",color:"#10B981",question:"Welches Problem in der Gesellschaft oder Wirtschaft nervt dich? Wo wÃ¼rdest du gerne mitanpacken, um Dinge zu verbessern?",placeholder:"Z.B. Nachhaltigkeit, Bildung, bessere Software, Pflege...",description:"Welchen Beitrag leistest du?"},market:{key:"market",label:"Markt",title:"Der Markt",icon:"ðŸ’°",color:"#6366F1",question:"Welche deiner FÃ¤higkeiten sind bares Geld wert? FÃ¼r welche Jobs oder Dienstleistungen existiert ein echtes Budget?",placeholder:"Z.B. Projektmanagement, Beratung, Handwerk...",description:"WofÃ¼r wirst du bezahlt?"}};Object.values(z).map(x=>x.color);const L="karriereheld_selected_microphone",d={DASHBOARD:"dashboard",COMPASS:"compass",RESULTS:"results"},Oe=({isAuthenticated:x,requireAuth:M,setPendingAction:v,onNavigateToHistory:u})=>{const[b,l]=a.useState(d.DASHBOARD),[n,w]=a.useState(null),[B,f]=a.useState(!1),[F,E]=a.useState(!1),[o,j]=a.useState(()=>{try{return localStorage.getItem(L)||null}catch{return null}}),[R,N]=a.useState(!1);a.useEffect(()=>{if(o)try{localStorage.setItem(L,o),console.log("[Ikigai] Microphone saved to localStorage:",o)}catch{}},[o]);const D=H(m.purple[500],m.purple[400]),[c,s]=a.useState({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),[h,k]=a.useState(null),S=a.useRef(!1);pe({dependencies:[b]});const _=Object.values(c).every(t=>t.tags&&t.tags.length>0),T=a.useCallback(()=>{s({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),k(null),w(null),S.current=!1,l(d.COMPASS)},[]),K=a.useCallback(async t=>{try{w(t.id),S.current=!0,s({love:{input:t.love_input||"",tags:t.love_tags||[]},talent:{input:t.talent_input||"",tags:t.talent_tags||[]},need:{input:t.need_input||"",tags:t.need_tags||[]},market:{input:t.market_input||"",tags:t.market_tags||[]}}),t.status==="completed"&&t.paths?(k({summary:t.summary,paths:t.paths}),l(d.RESULTS)):l(d.COMPASS)}catch(i){console.error("[Ikigai] Failed to load session:",i)}},[]),W=a.useCallback(()=>{l(d.DASHBOARD)},[]),C=a.useCallback(async()=>{if(n)return n;try{const t=await y.createIkigai();if(t?.id)return w(t.id),S.current=!0,console.log("[Ikigai] Session created with ID:",t.id),t.id}catch(t){console.error("[Ikigai] Failed to create session:",t)}return null},[n]),U=a.useCallback(async(t,i,r)=>{s(p=>({...p,[t]:{input:i,tags:r}}));try{const p=await C();p&&(await y.updateIkigai(p,{[`${t}_input`]:i,[`${t}_tags`]:r}),console.log(`[Ikigai] Dimension ${t} saved`))}catch(p){console.error("[Ikigai] Failed to save dimension:",p)}},[C]),Z=a.useCallback(async(t,i)=>{try{const r=await y.extractIkigaiKeywords(t,i);return r?.keywords?r.keywords:[]}catch(r){return console.error("[Ikigai] Failed to extract keywords:",r),[]}},[]),$=a.useCallback(async()=>{if(_){f(!0);try{const t=await y.synthesizeIkigaiPaths({love_tags:c.love.tags,talent_tags:c.talent.tags,need_tags:c.need.tags,market_tags:c.market.tags});if(t){k(t);const i=n||await C();i&&await y.updateIkigai(i,{summary:t.summary,paths:t.paths,status:"completed"}),l(d.RESULTS)}}catch(t){console.error("[Ikigai] Failed to synthesize paths:",t)}finally{f(!1)}}},[_,c,n,C]),q=a.useCallback((t,i)=>{s(r=>{const p=r[t].tags.filter(Q=>Q!==i);return{...r,[t]:{...r[t],tags:p}}})},[]),V=a.useCallback(()=>{k(null),l(d.COMPASS)},[]),J=a.useCallback(async()=>{if(!n){console.error("[Ikigai] Cannot generate more paths: No saved session ID");return}E(!0);try{const t=await y.generateMoreIkigaiPaths(n);t?.allPaths&&(k(i=>({...i,paths:t.allPaths})),console.log("[Ikigai] Generated more paths:",t.newPaths?.length||0,"new paths"))}catch(t){console.error("[Ikigai] Failed to generate more paths:",t)}finally{E(!1)}},[n]),Y=()=>{switch(b){case d.DASHBOARD:return e.jsx(xe,{onStartNew:T,onContinueSession:K,onNavigateToHistory:u,isAuthenticated:x,requireAuth:M,setPendingAction:v,selectedMicrophoneId:o,onMicrophoneChange:j,onTestMicrophone:()=>N(!0)});case d.RESULTS:return e.jsxs(e.Fragment,{children:[e.jsx(O,{featureId:"ikigai",icon:I,title:"Ikigai-Kompass",subtitle:"Deine Ergebnisse",gradient:D,showBackButton:!0,onBack:W}),e.jsx(he,{dimensions:c,synthesisResult:h,onStartNew:T,onEdit:V,onGenerateMore:n?J:null,isGeneratingMore:F,DIMENSIONS:z})]});case d.COMPASS:default:return e.jsxs(e.Fragment,{children:[e.jsx(O,{featureId:"ikigai",icon:I,title:"Ikigai-Kompass",subtitle:"Finde deine berufliche Bestimmung",gradient:D,showBackButton:!0,onBack:W}),e.jsx(ue,{dimensions:c,DIMENSIONS:z,onExtractKeywords:Z,onUpdateDimension:U,onRemoveTag:q,allDimensionsFilled:_,onSynthesize:$,isSynthesizing:B,selectedMicrophoneId:o,onMicrophoneChange:j})]})}};return e.jsxs("div",{className:"min-h-full",children:[Y(),e.jsx(me,{isOpen:R,onClose:()=>N(!1),deviceId:o})]})};export{Oe as default};
