import{j as e,p as P,Y as he,Q as Ye,a4 as ze,b as we,a5 as Vt,y as qe,a6 as U,m as E,V as $e,M as je,a7 as ct,F as jt,w as ge,q as _e,x as be,e as St,A as kt,n as Xe,a8 as vt,a9 as wt,aa as Ie,ab as It,ac as qt,ad as Kt,r as zt,v as pt,ae as Yt,h as oe,T as Ze,S as Ae,af as xt,ag as ht,C as Le,ah as Xt,N as Zt,ai as Jt,H as gt,g as ft,O as ut,a as Ct,aj as Qt}from"./ui-vendor-DceLfMgS.js";import{a as x}from"./react-vendor-uDOJF2jQ.js";import{B as Ee}from"./button-CkRsmUDc.js";import{D as ei,a as ti,b as ii,c as ni,d as si,e as ri}from"./dialog-Dgsc9AjD.js";import{b as oi,p as ai,d as li,e as di,h as ci,i as pi,j as xi,g as hi}from"./roleplay-feedback-adapter-C7skwWhW.js";import{g as me,b as re,f as Z,u as Bt,D as Te,w as q}from"./colors-BoNy0q8t.js";import{u as Rt}from"./useBranding-vyTCBMMQ.js";import{f as fe,a as ae}from"./formatting-B67Bmjxp.js";import{u as Ce}from"./useMobile-YxjH166V.js";import{R as gi}from"./RoleplaySessionReport-DsEL7g2D.js";import{g as fi,B as ui}from"./BriefingWorkbook-BkwUamFT.js";import{D as yi,a as mi}from"./DecisionBoardResult-CJgeNqeU.js";import{I as bi,a as ji}from"./IkigaiResults-_wz00kt0.js";import"./designTokens-DbcSlXo4.js";import"./utils-BEHD0UYf.js";import"./gemini-NRR8YfWJ.js";import"./audio-BZs8f3gH.js";import"./card-CDygNAxq.js";import"./input-DiAaxk0a.js";import"./textarea-Dst_4ahf.js";import"./AudioRecorder-BaM5p1Nh.js";const Si={auftreten:Yt,selbstbewusstsein:pt,koerpersprache:zt,kommunikation:je,professionalitaet:pt,inhalt:be},ki=(i,p)=>{const o=i;return o>=90?"Ausgezeichnet!":o>=80?"Sehr gut!":o>=70?"Gut!":o>=60?"Solide Leistung":o>=50?"Ausbauf√§hig":"Weiter √ºben!"},vi=i=>i?new Date(i).toLocaleDateString("de-DE",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",wi=i=>i==="video"?"Wirkungs-Analyse":i==="roleplay"?"Live-Simulation":"Szenario-Training",Ii=({score:i,size:p=120,primaryAccent:o,isHeader:r=!1,branding:l})=>{const h=Math.min(100,Math.max(0,i||0)),d=(p-12)/2,n=d*2*Math.PI,S=n-h/100*n,g=Z(i,o);return e.jsxs("div",{style:{position:"relative",width:p,height:p},children:[e.jsxs("svg",{width:p,height:p,style:{transform:"rotate(-90deg)"},children:[e.jsx("circle",{cx:p/2,cy:p/2,r:d,fill:"none",stroke:r?"rgba(255,255,255,0.3)":l.borderColor,strokeWidth:10}),e.jsx(E.circle,{cx:p/2,cy:p/2,r:d,fill:"none",stroke:g,strokeWidth:10,strokeLinecap:"round",strokeDasharray:n,initial:{strokeDashoffset:n},animate:{strokeDashoffset:S},transition:{duration:1,ease:"easeOut"}})]}),e.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsx("span",{style:{fontSize:p/3.5,fontWeight:700,color:g},children:Math.round(i)}),e.jsx("span",{style:{fontSize:p/10,color:r?"#ffffff":l.textMuted},children:"von 100"})]})]})},zi=({audioUrl:i,primaryAccent:p,durationHint:o,branding:r})=>{const l=x.useRef(null),[h,d]=x.useState(!1),[n,S]=x.useState(0),[g,R]=x.useState(o||0),[t,f]=x.useState(!0),[I,v]=x.useState(null);x.useEffect(()=>{if(!i)return;f(!0),v(null),R(o||0);const w=new Audio;l.current=w;const T=()=>{const C=w.duration;C&&isFinite(C)&&C>0&&R(C),f(!1)},A=()=>{const C=w.duration;C&&isFinite(C)&&C>0&&R(C)},L=()=>{f(!1);const C=w.duration;C&&isFinite(C)&&C>0&&R(C)};return w.addEventListener("loadedmetadata",T),w.addEventListener("durationchange",A),w.addEventListener("canplaythrough",L),w.addEventListener("timeupdate",()=>S(w.currentTime)),w.addEventListener("play",()=>d(!0)),w.addEventListener("pause",()=>d(!1)),w.addEventListener("ended",()=>d(!1)),w.addEventListener("error",()=>{v("Audio nicht verf√ºgbar"),f(!1)}),w.src=i,w.load(),()=>{w.pause(),w.removeEventListener("loadedmetadata",T),w.removeEventListener("durationchange",A),w.removeEventListener("canplaythrough",L),w.src=""}},[i,o]);const b=()=>{l.current&&(h?l.current.pause():l.current.play())},B=w=>{const T=w.currentTarget.getBoundingClientRect(),A=(w.clientX-T.left)/T.width;l.current&&(l.current.currentTime=A*g)},k=w=>{l.current&&(l.current.currentTime=Math.max(0,Math.min(l.current.currentTime+w,g)))};if(I)return e.jsxs("div",{style:{padding:"12px",background:r.cardBgHover,borderRadius:"10px",color:r.textMuted,fontSize:"13px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(he,{size:16})," ",I]});if(!i)return null;const F=g>0?n/g*100:0;return e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"20px",border:`1px solid ${r.borderColor}`},children:[e.jsx("div",{onClick:B,style:{height:"8px",background:r.borderColor,borderRadius:"4px",cursor:"pointer",marginBottom:"16px"},children:e.jsx("div",{style:{width:`${F}%`,height:"100%",background:p||"#0d9488",borderRadius:"4px",transition:"width 0.1s"}})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px"},children:[e.jsx("button",{onClick:()=>k(-10),style:{background:"none",border:"none",cursor:"pointer",padding:"8px",color:r.textMuted},children:e.jsx(vt,{size:20})}),e.jsx("button",{onClick:b,disabled:t,style:{width:"48px",height:"48px",borderRadius:"50%",background:p||"#0d9488",border:"none",cursor:t?"wait":"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#ffffff",opacity:t?.7:1},children:t?e.jsx(P,{size:22,color:"#ffffff",style:{animation:"spin 1s linear infinite"}}):h?e.jsx(wt,{size:22,color:"#ffffff",fill:"#ffffff",strokeWidth:2}):e.jsx(Ie,{size:22,color:"#ffffff",fill:"#ffffff",strokeWidth:2,style:{marginLeft:"2px"}})}),e.jsx("button",{onClick:()=>k(10),style:{background:"none",border:"none",cursor:"pointer",padding:"8px",color:r.textMuted},children:e.jsx(It,{size:20})})]}),e.jsxs("div",{style:{textAlign:"center",marginTop:"8px",fontSize:"13px",color:r.textMuted},children:[fe(n)," / ",fe(g)]}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]})},Ci=({sessionId:i,conversationId:p,primaryAccent:o,branding:r})=>{const l=x.useRef(null),[h,d]=x.useState(!1),[n,S]=x.useState(!1),[g,R]=x.useState(0),[t,f]=x.useState(0),[I,v]=x.useState(null),[b,B]=x.useState(!0);x.useEffect(()=>{if(!p){B(!1),v("Keine Audio-Aufnahme verf√ºgbar");return}const A=pi(i);return B(!0),v(null),fetch(A,{headers:{"X-WP-Nonce":re()},credentials:"same-origin"}).then(L=>{if(!L.ok)throw new Error(`HTTP ${L.status}`);return L.blob()}).then(L=>{const C=URL.createObjectURL(L),$=new Audio(C);l.current=$,$._objectUrl=C,$.addEventListener("loadedmetadata",()=>{f($.duration),B(!1)}),$.addEventListener("timeupdate",()=>R($.currentTime)),$.addEventListener("play",()=>d(!0)),$.addEventListener("pause",()=>d(!1)),$.addEventListener("ended",()=>d(!1)),$.addEventListener("error",()=>{v("Audio konnte nicht abgespielt werden."),B(!1)})}).catch(()=>{v("Audio nicht verf√ºgbar."),B(!1)}),()=>{l.current&&(l.current.pause(),l.current._objectUrl&&URL.revokeObjectURL(l.current._objectUrl),l.current=null)}},[i,p]);const k=()=>{l.current&&(h?l.current.pause():l.current.play())},F=()=>{l.current&&(l.current.muted=!n,S(!n))},w=A=>{l.current&&(l.current.currentTime=Math.max(0,Math.min(l.current.currentTime+A,t)))},T=A=>{const L=A.currentTarget.getBoundingClientRect(),C=(A.clientX-L.left)/L.width;l.current&&(l.current.currentTime=C*t)};return b?e.jsxs("div",{style:{background:r.cardBgHover,borderRadius:"16px",padding:"24px",textAlign:"center"},children:[e.jsx(P,{size:24,color:o,style:{animation:"spin 1s linear infinite",margin:"0 auto"}}),e.jsx("p",{style:{fontSize:"13px",color:r.textMuted,marginTop:"8px"},children:"Audio wird geladen..."})]}):I?e.jsxs("div",{style:{background:r.cardBgHover,borderRadius:"16px",padding:"24px",textAlign:"center"},children:[e.jsx(he,{size:24,color:r.textMuted,style:{margin:"0 auto"}}),e.jsx("p",{style:{fontSize:"13px",color:r.textMuted,marginTop:"8px"},children:I})]}):e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"20px",border:`1px solid ${r.borderColor}`},children:[e.jsxs("h3",{style:{fontSize:"15px",fontWeight:600,color:r.textMain,marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Xe,{size:18,color:o})," Gespr√§chsaufnahme"]}),e.jsx("div",{onClick:T,style:{height:"8px",background:r.borderColor,borderRadius:"4px",cursor:"pointer",marginBottom:"16px"},children:e.jsx("div",{style:{width:`${g/t*100||0}%`,height:"100%",background:o,borderRadius:"4px",transition:"width 0.1s"}})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px"},children:[e.jsx("button",{onClick:()=>w(-10),style:{background:"none",border:"none",cursor:"pointer",padding:"8px",color:r.textMuted},children:e.jsx(vt,{size:20})}),e.jsx("button",{onClick:k,style:{width:"48px",height:"48px",borderRadius:"50%",background:o,border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff"},children:h?e.jsx(wt,{size:22,color:"#ffffff",fill:"#ffffff",strokeWidth:2}):e.jsx(Ie,{size:22,color:"#ffffff",fill:"#ffffff",strokeWidth:2,style:{marginLeft:"2px"}})}),e.jsx("button",{onClick:()=>w(10),style:{background:"none",border:"none",cursor:"pointer",padding:"8px",color:r.textMuted},children:e.jsx(It,{size:20})}),e.jsx("button",{onClick:F,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",color:r.textMuted,marginLeft:"auto"},children:n?e.jsx(qt,{size:20}):e.jsx(Kt,{size:20})})]}),e.jsxs("div",{style:{textAlign:"center",marginTop:"8px",fontSize:"13px",color:r.textMuted},children:[fe(g)," / ",fe(t)]})]})},Bi=({entry:i,index:p,primaryAccent:o,branding:r})=>{const l=i.role==="user";return e.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",flexShrink:0,background:l?o:r.disabledBg,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(zt,{size:16,color:l?"#fff":r.textSecondary})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:600,color:l?o:r.textMuted,marginBottom:"4px"},children:l?"Du":"Interviewer"}),e.jsx("p",{style:{fontSize:"14px",color:r.textMain,lineHeight:1.6,margin:0},children:i.text||i.message})]})]})},Ri=({answer:i,index:p,primaryAccent:o,branding:r})=>{const[l,h]=x.useState(!1),d=i.feedback?typeof i.feedback=="string"?JSON.parse(i.feedback):i.feedback:null,n=i.audio_analysis?typeof i.audio_analysis=="string"?JSON.parse(i.audio_analysis):i.audio_analysis:null,S=i.transcript==="[Keine Sprache erkannt]"||n?.speech_rate==="keine_sprache";return e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:p*.05},style:{background:"#fff",borderRadius:"16px",border:`1px solid ${r.borderColor}`,overflow:"hidden",marginBottom:"16px"},children:[e.jsxs("button",{onClick:()=>h(!l),style:{width:"100%",padding:"16px 20px",background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",textAlign:"left",overflow:"hidden"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"8px",background:`${o}15`,display:"flex",alignItems:"center",justifyContent:"center",color:o,fontWeight:700,fontSize:"14px",flexShrink:0},children:p+1}),e.jsx("div",{style:{flex:1,minWidth:0,overflow:"hidden"},children:e.jsx("h4",{style:{fontSize:"14px",fontWeight:600,color:r.textMain,margin:0,lineHeight:1.4,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:i.question_text||`Frage ${p+1}`})}),i.overall_score!==null&&i.overall_score!==void 0&&e.jsx("span",{style:{fontSize:"16px",fontWeight:700,color:S?r.textMuted:Z(i.overall_score*10,o)},children:S?"‚Äì":`${Math.round(i.overall_score*10)}%`}),e.jsx(St,{size:18,color:r.textMuted,style:{transform:l?"rotate(180deg)":"none",transition:"transform 0.2s"}})]}),e.jsx(kt,{children:l&&e.jsx(E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},style:{overflow:"hidden"},children:e.jsxs("div",{style:{padding:"0 20px 20px",borderTop:`1px solid ${r.borderColor}`,paddingTop:"16px"},children:[i.question_text&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("h5",{style:{fontSize:"13px",fontWeight:600,color:r.textMain,marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(je,{size:14,color:o})," Frage / Situation"]}),e.jsx("p",{style:{fontSize:"14px",color:r.textMain,lineHeight:1.6,background:`${o}08`,padding:"12px 16px",borderRadius:"10px",margin:0,border:`1px solid ${o}20`},children:i.question_text})]}),i.audio_url&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("h5",{style:{fontSize:"13px",fontWeight:600,color:r.textMain,marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Xe,{size:14,color:o})," Deine Aufnahme"]}),e.jsx(zi,{audioUrl:i.audio_url,primaryAccent:o,durationHint:i.audio_duration_seconds,branding:r})]}),i.transcript&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("h5",{style:{fontSize:"13px",fontWeight:600,color:r.textMain,marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(jt,{size:14,color:o})," Transkript"]}),e.jsxs("p",{style:{fontSize:"13px",color:S?r.textMuted:r.textSecondary,lineHeight:1.6,background:r.cardBgHover,padding:"12px 16px",borderRadius:"10px",margin:0,fontStyle:"italic",wordBreak:"break-word",overflowWrap:"break-word"},children:['"',i.transcript,'"']})]}),d?.scores&&!S&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("h5",{style:{fontSize:"13px",fontWeight:600,color:r.textMain,marginBottom:"10px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(ge,{size:14,color:o})," Bewertung"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"8px",marginBottom:"8px"},children:[{key:"content",label:"Inhalt"},{key:"structure",label:"Struktur"},{key:"relevance",label:"Relevanz"},{key:"delivery",label:"Pr√§sentation"}].map(({key:g,label:R})=>{const t=d.scores[g],f=t!=null?t*10:null;return e.jsxs("div",{style:{padding:"10px 8px",background:r.cardBgHover,borderRadius:"8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:700,color:f!=null?Z(f,o):r.textMuted},children:f!=null?Math.round(f):"-"}),e.jsx("div",{style:{fontSize:"10px",color:r.textMuted,marginTop:"2px"},children:R})]},g)})}),(()=>{const g=d.scores.overall,R=g!=null?g*10:null;return e.jsxs("div",{style:{padding:"12px 16px",background:`${o}15`,borderRadius:"8px",textAlign:"center",border:`1px solid ${o}30`,display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},children:[e.jsx("div",{style:{fontSize:"10px",color:r.textMuted},children:"Gesamt"}),e.jsx("div",{style:{fontSize:"20px",fontWeight:700,color:R!=null?Z(R,o):r.textMuted},children:R!=null?Math.round(R):"-"})]})})()]}),d?.summary&&e.jsx("p",{style:{fontSize:"13px",color:r.textSecondary,lineHeight:1.5,marginBottom:"12px"},children:d.summary}),d?.strengths?.length>0&&!S&&e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("h6",{style:{fontSize:"12px",fontWeight:600,color:r.success,marginBottom:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(_e,{size:12})," St√§rken"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"18px",color:r.textSecondary,fontSize:"12px"},children:d.strengths.map((g,R)=>e.jsx("li",{style:{marginBottom:"4px"},children:g},R))})]}),d?.improvements?.length>0&&e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("h6",{style:{fontSize:"12px",fontWeight:600,color:r.warning,marginBottom:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(he,{size:12})," Verbesserungspotenzial"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"18px",color:r.textSecondary,fontSize:"12px"},children:d.improvements.map((g,R)=>e.jsx("li",{style:{marginBottom:"4px"},children:g},R))})]}),d?.tips?.length>0&&!S&&e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("h6",{style:{fontSize:"12px",fontWeight:600,color:o,marginBottom:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(be,{size:12})," Tipps"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"18px",color:r.textSecondary,fontSize:"12px"},children:d.tips.map((g,R)=>e.jsx("li",{style:{marginBottom:"4px"},children:g},R))})]}),n&&!S&&e.jsxs("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:`1px solid ${r.borderColor}`},children:[e.jsxs("h5",{style:{fontSize:"13px",fontWeight:600,color:r.textMain,marginBottom:"12px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Xe,{size:14,color:o})," Sprechanalyse"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px"},children:[n.speech_rate&&e.jsxs("div",{style:{padding:"12px",background:r.cardBgHover,borderRadius:"10px"},children:[e.jsx("div",{style:{fontSize:"11px",color:r.textMuted,marginBottom:"4px"},children:"Sprechtempo"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:r.textMain,textTransform:"capitalize"},children:n.speech_rate==="optimal"?"‚úì Optimal":n.speech_rate==="zu_schnell"?"‚ö° Zu schnell":n.speech_rate==="zu_langsam"?"üê¢ Zu langsam":n.speech_rate})]}),n.filler_words&&e.jsxs("div",{style:{padding:"12px",background:r.cardBgHover,borderRadius:"10px"},children:[e.jsx("div",{style:{fontSize:"11px",color:r.textMuted,marginBottom:"4px"},children:"F√ºllw√∂rter"}),e.jsxs("div",{style:{fontSize:"14px",fontWeight:600,color:n.filler_words.count<=2?r.success:n.filler_words.count<=5?r.warning:r.error},children:[n.filler_words.count||0," erkannt"]}),n.filler_words.words?.length>0&&e.jsx("div",{style:{fontSize:"11px",color:r.textMuted,marginTop:"4px"},children:n.filler_words.words.slice(0,5).join(", ")})]}),n.confidence_score!=null&&e.jsxs("div",{style:{padding:"12px",background:r.cardBgHover,borderRadius:"10px"},children:[e.jsx("div",{style:{fontSize:"11px",color:r.textMuted,marginBottom:"4px"},children:"Selbstsicherheit"}),e.jsxs("div",{style:{fontSize:"14px",fontWeight:600,color:Z(n.confidence_score,o)},children:[n.confidence_score,"%"]})]}),n.clarity_score!=null&&e.jsxs("div",{style:{padding:"12px",background:r.cardBgHover,borderRadius:"10px"},children:[e.jsx("div",{style:{fontSize:"11px",color:r.textMuted,marginBottom:"4px"},children:"Klarheit"}),e.jsxs("div",{style:{fontSize:"14px",fontWeight:600,color:Z(n.clarity_score,o)},children:[n.clarity_score,"%"]})]})]}),n.notes&&e.jsx("p",{style:{fontSize:"12px",color:r.textMuted,marginTop:"10px",fontStyle:"italic"},children:n.notes})]})]})})})]})},Wi=({isOpen:i,onClose:p,onConfirm:o,isDeleting:r,primaryAccent:l,branding:h})=>i?e.jsx("div",{style:{position:"fixed",inset:0,zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:p,children:e.jsxs(E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},onClick:d=>d.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:h.errorLight,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(U,{size:24,color:h.error})}),e.jsx("div",{children:e.jsx("h3",{style:{fontSize:"18px",fontWeight:600,color:h.textMain,margin:0},children:"Session l√∂schen?"})})]}),e.jsx("p",{style:{fontSize:"14px",color:h.textSecondary,lineHeight:1.6,marginBottom:"24px"},children:"M√∂chtest du diese Session wirklich l√∂schen? Alle Antworten und Feedback werden unwiderruflich entfernt."}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:p,disabled:r,style:{padding:"10px 20px",borderRadius:"10px",border:`1px solid ${h.disabledBg}`,backgroundColor:"white",color:h.textMain,fontSize:"14px",fontWeight:500,cursor:r?"not-allowed":"pointer",opacity:r?.5:1,outline:"none",WebkitAppearance:"none"},children:"Abbrechen"}),e.jsx("button",{onClick:o,disabled:r,style:{padding:"10px 20px",borderRadius:"10px",border:"none",backgroundColor:h.error,color:"white",fontSize:"14px",fontWeight:500,cursor:r?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",opacity:r?.7:1,outline:"none",WebkitAppearance:"none"},children:r?e.jsxs(e.Fragment,{children:[e.jsx(P,{size:16,style:{animation:"spin 1s linear infinite"}}),"L√∂schen..."]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{size:16}),"L√∂schen"]})})]})]})}):null,Di=({category:i,primaryAccent:p,branding:o})=>{const[r,l]=x.useState(!1),h=Si[i.category]||ge,d=Z(i.score,p);return e.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:`1px solid ${o.borderColor}`,overflow:"hidden",marginBottom:"10px"},children:[e.jsxs("button",{onClick:()=>l(!r),style:{width:"100%",padding:"14px 16px",background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"8px",background:`${d}15`,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(h,{size:18,color:d})}),e.jsx("div",{style:{flex:1,textAlign:"left"},children:e.jsx("h4",{style:{fontSize:"14px",fontWeight:600,color:o.textMain,margin:0},children:i.label})}),e.jsxs("span",{style:{fontSize:"16px",fontWeight:700,color:d},children:[Math.round(i.score),"%"]}),e.jsx(St,{size:18,color:o.textMuted,style:{transform:r?"rotate(180deg)":"none",transition:"transform 0.2s"}})]}),e.jsx(kt,{children:r&&e.jsx(E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},style:{overflow:"hidden"},children:e.jsxs("div",{style:{padding:"0 16px 16px",borderTop:`1px solid ${o.borderColor}`,paddingTop:"12px"},children:[i.feedback&&e.jsx("p",{style:{fontSize:"13px",color:o.textSecondary,lineHeight:1.5,marginBottom:"10px"},children:i.feedback}),i.strengths?.length>0&&e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsxs("h6",{style:{fontSize:"12px",fontWeight:600,color:o.success,marginBottom:"4px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(_e,{size:12})," St√§rken"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"18px",fontSize:"12px",color:o.textSecondary},children:i.strengths.map((n,S)=>e.jsx("li",{children:n},S))})]}),i.improvements?.length>0&&e.jsxs("div",{children:[e.jsxs("h6",{style:{fontSize:"12px",fontWeight:600,color:o.warning,marginBottom:"4px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(be,{size:12})," Tipps"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"18px",fontSize:"12px",color:o.textSecondary},children:i.improvements.map((n,S)=>e.jsx("li",{children:n},S))})]})]})})})]})},Mi=({session:i,type:p,scenario:o,onBack:r,onContinueSession:l,onRepeatSession:h,onDeleteSession:d})=>{const n=Rt(),S=Ce(),[g,R]=x.useState(!1);x.useEffect(()=>{const a=()=>{const m=window.innerWidth;R(m>=768&&m<1200)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const t=n.headerGradient,f=n.primaryAccent,[I,v]=x.useState([]),[b,B]=x.useState(!0),[k,F]=x.useState(null),[w,T]=x.useState(!1),[A,L]=x.useState(!1),[C,$]=x.useState(!1),[_,K]=x.useState(null),[J,Se]=x.useState(o),H=p==="video",u=p==="simulator",D=p==="roleplay",N=(()=>{const a=i?.questions||i?.questions_json;if(!a)return!1;try{const m=typeof a=="string"?JSON.parse(a):a;return Array.isArray(m)&&m.length>0}catch{return!1}})(),ke=(()=>{if(!u||!N)return!1;const a=i?.total_questions||0,m=i?.completed_questions||0;return a>0&&m<a})(),Oe=async()=>{if(d){L(!0);try{await d(i,p)}catch(a){console.error("Failed to delete session:",a),L(!1),T(!1)}}},Be=async()=>{if(!(C||!i?.id)){$(!0);try{let a;if(u)a=`${me()}/simulator/sessions/${i.id}/export-pdf`;else if(H)a=`${me()}/video-training/sessions/${i.id}/export-pdf`;else if(D)a=`${me()}/sessions/${i.id}/export-pdf`;else throw new Error("Unsupported session type for PDF export");const m=await fetch(a,{method:"POST",headers:{"X-WP-Nonce":re(),"Content-Type":"application/json"},credentials:"same-origin"}),W=await m.json();if(!m.ok)throw console.error("[PDF] Server error response:",W),new Error(W.error||`HTTP ${m.status}`);if(!W.success||!W.pdf_base64)throw console.error("[PDF] Invalid response data:",W),new Error(W.error||"PDF generation failed");const ue=atob(W.pdf_base64),Y=new Array(ue.length);for(let ce=0;ce<ue.length;ce++)Y[ce]=ue.charCodeAt(ce);const ye=new Uint8Array(Y),We=new Blob([ye],{type:W.content_type||"application/pdf"}),se=window.URL.createObjectURL(We),de=document.createElement("a");de.href=se,de.download=W.filename||"Training.pdf",document.body.appendChild(de),de.click(),document.body.removeChild(de),window.URL.revokeObjectURL(se)}catch(a){console.error("Failed to download PDF:",a)}finally{$(!1)}}};x.useEffect(()=>{u&&i?.id?Fe():D&&i?.id?Re():B(!1)},[i?.id,p]);const Fe=async()=>{try{B(!0);const m=await(await fetch(`${me()}/simulator/sessions/${i.id}/answers`,{headers:{"X-WP-Nonce":re()}})).json();m.success&&m.data?.answers?v(m.data.answers):Array.isArray(m.data)&&v(m.data)}catch(a){console.error("Failed to load answers:",a),F("Fehler beim Laden der Antworten")}finally{B(!1)}},Re=async()=>{try{B(!0);const a=await oi(i.id);if(K({...i,...a,feedback:di(a.feedback_json||i.feedback_json),audioAnalysis:li(a.audio_analysis_json||i.audio_analysis_json),transcript:ai(a.transcript||i.transcript)}),!o&&a.scenario_id)try{const m=await ci(a.scenario_id);Se(m)}catch(m){console.warn("Could not load scenario:",m)}}catch(a){console.error("Failed to load roleplay data:",a),F("Fehler beim Laden der Gespr√§chsdaten")}finally{B(!1)}},Q=i?.summary_feedback_json?typeof i.summary_feedback_json=="string"?JSON.parse(i.summary_feedback_json):i.summary_feedback_json:null,ve=i?.category_scores||[],ee=i?.analysis||{},ne=(()=>{let a=0;return D&&_?.feedback?.rating?.overall?a=_.feedback.rating.overall:a=i?.overall_score||Q?.overall_score||0,(u||D)&&a<=10?a*10:a})();return b?e.jsxs("div",{style:{width:"100%",minHeight:"60vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"40px"},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(P,{size:48,color:f,style:{animation:"spin 1s linear infinite",display:"block",margin:"0 auto"}}),e.jsx("p",{style:{color:n.textMuted,marginTop:"16px"},children:"Analyse wird geladen..."})]}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]}):k?e.jsx("div",{style:{minHeight:"400px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{textAlign:"center",maxWidth:"400px",padding:"24px"},children:[e.jsx(he,{size:48,color:n.error,style:{margin:"0 auto 16px"}}),e.jsx("h2",{style:{fontSize:"20px",fontWeight:700,color:n.textMain,marginBottom:"8px"},children:"Fehler beim Laden"}),e.jsx("p",{style:{color:n.textSecondary,marginBottom:"24px"},children:k}),e.jsx("button",{onClick:r,style:{padding:"12px 24px",borderRadius:"10px",background:n.cardBgHover,border:"none",cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Zur√ºck"})]})}):e.jsxs("div",{style:{minHeight:"100vh",background:n.pageBg,overflow:"hidden",maxWidth:"100vw"},children:[e.jsx("div",{style:{background:t,padding:S?"20px 16px":"24px 32px",position:"sticky",top:0,zIndex:40},children:e.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[r&&e.jsxs("button",{onClick:r,style:{display:"flex",alignItems:"center",gap:"6px",background:"rgba(255,255,255,0.15)",border:"none",borderRadius:"8px",padding:"8px 12px",cursor:"pointer",color:"#fff",fontSize:"13px",marginBottom:"16px"},children:[e.jsx(Ye,{size:16}),"Zur√ºck zur √úbersicht"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px"},children:[!S&&e.jsx(Ii,{score:ne,size:100,primaryAccent:f,isHeader:!0,branding:n}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px",padding:"4px 10px",borderRadius:"20px",background:"rgba(255,255,255,0.2)",color:"#fff"},children:wi(p)}),e.jsx("span",{style:{fontSize:"12px",fontWeight:500,padding:"4px 10px",borderRadius:"20px",background:"rgba(255,255,255,0.9)",color:Z(ne,f)},children:ki(ne)})]}),e.jsx("h1",{style:{fontSize:S?"20px":"24px",fontWeight:700,color:"#fff",margin:0,marginBottom:"8px"},children:(D?J?.title:o?.title)||i?.scenario_title||i?.position||"Training"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"rgba(255,255,255,0.8)"},children:[e.jsx(ze,{size:14}),vi(i?.created_at)]}),i?.duration&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"rgba(255,255,255,0.8)"},children:[e.jsx(we,{size:14}),fe(i.duration)]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:Be,disabled:C,title:"Als PDF herunterladen",style:{display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"10px",padding:"10px 12px",cursor:C?"wait":"pointer",color:"#fff",fontSize:"14px",fontWeight:500,outline:"none",WebkitAppearance:"none",opacity:C?.7:1},children:C?e.jsx(P,{size:16,style:{animation:"spin 1s linear infinite"}}):e.jsx(Vt,{size:16})}),!S&&h&&e.jsxs("button",{onClick:()=>h(i,o),style:{display:"flex",alignItems:"center",gap:"8px",background:"rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"10px",padding:"10px 20px",cursor:"pointer",color:"#fff",fontSize:"14px",fontWeight:500,outline:"none",WebkitAppearance:"none"},children:[e.jsx(qe,{size:16}),"Erneut √ºben"]}),d&&e.jsx("button",{onClick:()=>T(!0),style:{display:"flex",alignItems:"center",gap:"8px",background:"rgba(239,68,68,0.2)",border:"1px solid rgba(239,68,68,0.4)",borderRadius:"10px",padding:S?"10px 12px":"10px 16px",cursor:"pointer",color:"#fff",fontSize:"14px",fontWeight:500,outline:"none",WebkitAppearance:"none"},children:e.jsx(U,{size:16})})]})]})]})}),e.jsx("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:S?"16px":"24px 32px",overflow:"hidden"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:S||g?"1fr":"1fr 400px",gap:"24px",overflow:"hidden"},children:[e.jsxs("div",{style:{minWidth:0,overflow:"hidden"},children:[H&&i?.video_url&&e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},style:{background:"#fff",borderRadius:"16px",padding:"20px",border:`1px solid ${n.borderColor}`,marginBottom:"20px"},children:[e.jsxs("h3",{style:{fontSize:"15px",fontWeight:600,color:n.textMain,marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx($e,{size:18,color:f})," Deine Aufnahme"]}),e.jsx("video",{src:i.video_url,controls:!0,style:{width:"100%",maxWidth:"640px",maxHeight:"360px",borderRadius:"12px",background:"#000",objectFit:"contain"}})]}),u&&I.length>0&&e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[e.jsxs("h3",{style:{fontSize:"16px",fontWeight:600,color:n.textMain,marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(je,{size:18,color:f})," Deine Antworten (",I.length,")"]}),I.map((a,m)=>e.jsx(Ri,{answer:a,index:m,primaryAccent:f,branding:n},a.id||m)),ke&&(l||h)&&e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap",marginTop:"24px",padding:"20px",background:n.cardBgHover,borderRadius:"12px",border:`1px dashed ${n.disabledBg}`},children:[e.jsx("p",{style:{width:"100%",textAlign:"center",color:n.textSecondary,fontSize:"14px",marginBottom:"12px"},children:"Diese Session ist noch nicht abgeschlossen."}),l&&e.jsxs("button",{onClick:()=>l(i,o),style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"12px 24px",borderRadius:"12px",border:"none",background:f,color:"white",fontSize:"14px",fontWeight:600,cursor:"pointer",boxShadow:`0 4px 12px ${f}4d`},children:[e.jsx(ct,{size:18}),"Fortsetzen"]}),h&&e.jsxs("button",{onClick:()=>h(i,o),style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"12px 24px",borderRadius:"12px",border:`2px solid ${n.disabledBg}`,background:"white",color:n.textMain,fontSize:"14px",fontWeight:600,cursor:"pointer"},children:[e.jsx(qe,{size:18}),"Erneut starten"]})]})]}),u&&I.length===0&&e.jsxs("div",{style:{textAlign:"center",padding:"48px 24px",background:n.cardBgHover,borderRadius:"16px"},children:[e.jsx(he,{size:48,color:n.textMuted,style:{margin:"0 auto 16px"}}),e.jsx("h3",{style:{fontSize:"18px",fontWeight:600,color:n.textMain,marginBottom:"8px"},children:"Keine Antworten vorhanden"}),e.jsx("p",{style:{color:n.textMuted,marginBottom:N?"24px":"0"},children:N?"Diese Session wurde nicht abgeschlossen. Du kannst sie fortsetzen oder erneut starten.":"Diese Session wurde verlassen, bevor Fragen generiert wurden."}),ke&&(l||h)&&e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap",marginTop:"24px"},children:[l&&e.jsxs("button",{onClick:()=>l(i,o),style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"12px 24px",borderRadius:"12px",border:"none",background:f,color:"white",fontSize:"14px",fontWeight:600,cursor:"pointer",boxShadow:`0 4px 12px ${f}4d`},children:[e.jsx(ct,{size:18}),"Fortsetzen"]}),h&&e.jsxs("button",{onClick:()=>h(i,o),style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"12px 24px",borderRadius:"12px",border:`2px solid ${n.disabledBg}`,background:"white",color:n.textMain,fontSize:"14px",fontWeight:600,cursor:"pointer"},children:[e.jsx(qe,{size:18}),"Erneut starten"]})]})]}),D&&_&&e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},style:{marginBottom:"20px"},children:e.jsx(Ci,{sessionId:i.id,conversationId:_.conversation_id,primaryAccent:f,branding:n})}),D&&_?.transcript?.length>0&&e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},style:{background:"#fff",borderRadius:"16px",padding:"20px",border:`1px solid ${n.borderColor}`},children:[e.jsxs("h3",{style:{fontSize:"15px",fontWeight:600,color:n.textMain,marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(jt,{size:18,color:f})," Gespr√§chsverlauf"]}),e.jsx("div",{style:{maxHeight:"500px",overflowY:"auto"},children:_.transcript.map((a,m)=>e.jsx(Bi,{entry:a,index:m,primaryAccent:f,branding:n},m))})]})]}),e.jsxs("div",{style:{minWidth:0,overflow:"hidden"},children:[H&&ve.length>0&&e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},style:{marginBottom:"20px"},children:[e.jsxs("h3",{style:{fontSize:"15px",fontWeight:600,color:n.textMain,marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(ge,{size:16,color:f})," Detaillierte Bewertung"]}),ve.map((a,m)=>e.jsx(Di,{category:a,primaryAccent:f,branding:n},a.category||m))]}),H&&(ee.key_strengths?.length>0||ee.actionable_tips?.length>0)&&e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{background:"#fff",borderRadius:"16px",padding:"20px",border:`1px solid ${n.borderColor}`,marginBottom:"20px"},children:[ee.key_strengths?.length>0&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("h4",{style:{fontSize:"14px",fontWeight:600,color:n.success,marginBottom:"10px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(_e,{size:16})," Deine St√§rken"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:ee.key_strengths.map((a,m)=>e.jsx("li",{style:{fontSize:"13px",color:n.textSecondary,marginBottom:"6px",lineHeight:1.4},children:a},m))})]}),ee.actionable_tips?.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{style:{fontSize:"14px",fontWeight:600,color:f,marginBottom:"10px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(be,{size:16})," Tipps zur Verbesserung"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:ee.actionable_tips.map((a,m)=>e.jsx("li",{style:{fontSize:"13px",color:n.textSecondary,marginBottom:"6px",lineHeight:1.4},children:a},m))})]})]}),H&&i?.summary_feedback&&e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},style:{background:n.cardBgHover,borderRadius:"16px",padding:"20px"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:600,color:n.textMain,marginBottom:"10px"},children:"Zusammenfassung"}),e.jsx("p",{style:{fontSize:"13px",color:n.textSecondary,lineHeight:1.6,margin:0},children:i.summary_feedback})]}),u&&Q&&e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[Q.summary&&e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"20px",border:`1px solid ${n.borderColor}`,marginBottom:"20px"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:600,color:n.textMain,marginBottom:"10px"},children:"Zusammenfassung"}),e.jsx("p",{style:{fontSize:"13px",color:n.textSecondary,lineHeight:1.6,margin:0},children:Q.summary})]}),Q.scores&&e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"20px",border:`1px solid ${n.borderColor}`,marginBottom:"20px"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:600,color:n.textMain,marginBottom:"12px"},children:"Bewertung"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px"},children:Object.entries(Q.scores).map(([a,m])=>{const W=m!=null?m*10:null;return e.jsxs("div",{style:{padding:"12px",background:n.cardBgHover,borderRadius:"10px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:700,color:Z(W,f)},children:W!=null?Math.round(W):"-"}),e.jsx("div",{style:{fontSize:"11px",color:n.textMuted,textTransform:"capitalize"},children:a})]},a)})})]}),Q.key_takeaways?.length>0&&e.jsxs("div",{style:{background:n.successLight,borderRadius:"16px",padding:"20px"},children:[e.jsxs("h4",{style:{fontSize:"14px",fontWeight:600,color:n.success,marginBottom:"10px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(be,{size:16})," Wichtigste Erkenntnisse"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"13px",color:n.textMain,lineHeight:1.5},children:Q.key_takeaways.map((a,m)=>e.jsx("li",{style:{marginBottom:"6px"},children:a},m))})]})]}),D&&_?.feedback&&e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[_.feedback.rating&&e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"20px",border:`1px solid ${n.borderColor}`,marginBottom:"20px"},children:[e.jsxs("h4",{style:{fontSize:"15px",fontWeight:600,color:n.textMain,marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(ge,{size:16,color:f})," Bewertungskriterien"]}),e.jsx("div",{style:{display:"grid",gap:"10px"},children:Object.entries(_.feedback.rating).filter(([a])=>a!=="overall").map(([a,m])=>{const W=m*10;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:n.cardBgHover,borderRadius:"10px"},children:[e.jsx("div",{style:{flex:1,fontSize:"13px",fontWeight:500,color:n.textMain,textTransform:"capitalize"},children:a.replace(/_/g," ")}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"80px",height:"6px",background:n.borderColor,borderRadius:"3px"},children:e.jsx("div",{style:{width:`${W}%`,height:"100%",background:Z(W,f),borderRadius:"3px"}})}),e.jsx("span",{style:{fontSize:"14px",fontWeight:600,color:Z(W,f),minWidth:"45px"},children:Math.round(W)})]})]},a)})})]}),_.feedback.strengths?.length>0&&e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"20px",border:`1px solid ${n.borderColor}`,marginBottom:"20px"},children:[e.jsxs("h4",{style:{fontSize:"14px",fontWeight:600,color:n.success,marginBottom:"12px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(_e,{size:16})," Deine St√§rken"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:_.feedback.strengths.map((a,m)=>e.jsx("li",{style:{fontSize:"13px",color:n.textSecondary,marginBottom:"8px",lineHeight:1.5},children:a},m))})]}),_.feedback.improvements?.length>0&&e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"20px",border:`1px solid ${n.borderColor}`,marginBottom:"20px"},children:[e.jsxs("h4",{style:{fontSize:"14px",fontWeight:600,color:n.warning,marginBottom:"12px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(be,{size:16})," Verbesserungspotenzial"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:_.feedback.improvements.map((a,m)=>e.jsx("li",{style:{fontSize:"13px",color:n.textSecondary,marginBottom:"8px",lineHeight:1.5},children:a},m))})]}),_.feedback.summary&&e.jsxs("div",{style:{background:n.cardBgHover,borderRadius:"16px",padding:"20px"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:600,color:n.textMain,marginBottom:"10px"},children:"Zusammenfassung"}),e.jsx("p",{style:{fontSize:"13px",color:n.textSecondary,lineHeight:1.6,margin:0},children:_.feedback.summary})]})]}),D&&!_?.feedback&&e.jsxs("div",{style:{background:n.cardBgHover,borderRadius:"16px",padding:"24px",textAlign:"center"},children:[e.jsx(he,{size:32,color:n.textMuted,style:{margin:"0 auto 12px"}}),e.jsx("p",{style:{fontSize:"14px",color:n.textMuted,margin:0},children:"Keine Analyse verf√ºgbar f√ºr dieses Gespr√§ch."})]})]})]})}),e.jsx(Wi,{isOpen:w,onClose:()=>T(!1),onConfirm:Oe,isDeleting:A,primaryAccent:f,branding:n})]})},le=({isOpen:i,onClose:p,onConfirm:o,title:r="L√∂schen best√§tigen",description:l="Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:h=!1,confirmLabel:d="L√∂schen",cancelLabel:n="Abbrechen"})=>{const{branding:S}=Bt(),g=S?.["--primary-accent"]||Te["--primary-accent"];return e.jsx(ei,{open:i,onOpenChange:p,children:e.jsxs(ti,{style:{maxWidth:"400px"},children:[e.jsxs(ii,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(U,{style:{width:"20px",height:"20px",color:"#fff"}})}),e.jsx(ni,{children:r})]}),e.jsx(si,{children:l})]}),e.jsxs(ri,{style:{marginTop:"16px"},children:[e.jsx("button",{onClick:p,disabled:h,style:{minWidth:"100px",height:"40px",padding:"8px 20px",borderRadius:"8px",border:`2px solid ${g}`,backgroundColor:"white",color:g,fontSize:"14px",fontWeight:500,cursor:h?"not-allowed":"pointer",opacity:h?.5:1,transition:"all 0.2s"},children:n}),e.jsx("button",{onClick:o,disabled:h,style:{minWidth:"100px",height:"40px",padding:"8px 20px",borderRadius:"8px",border:"none",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"#fff",fontSize:"14px",fontWeight:500,cursor:h?"not-allowed":"pointer",opacity:h?.5:1,transition:"all 0.2s",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:h?e.jsxs(e.Fragment,{children:[e.jsx(P,{style:{width:"16px",height:"16px",animation:"spin 1s linear infinite"}}),d,"..."]}):d})]})]})})},Ei=({briefing:i,onClick:p,onDelete:o,headerGradient:r,headerText:l,primaryAccent:h})=>{const[d,n]=x.useState(!1),[S,g]=x.useState(!1),R=Ce(900),t=fi(i.template_icon),f=v=>{v.stopPropagation(),g(!0)},I=async()=>{n(!0);try{await o(i.id),g(!1)}catch(v){console.error("Error deleting briefing:",v)}finally{n(!1)}};return R?e.jsxs(E.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileTap:{scale:.98},children:[e.jsxs("div",{onClick:p,style:{background:"#fff",borderRadius:"16px",padding:"16px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:`linear-gradient(135deg, ${h}15, ${h}30)`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(t,{style:{width:"22px",height:"22px",color:h}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"15px",fontWeight:600,color:"#0f172a",marginBottom:"4px",lineHeight:"1.3",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:i.title||"Briefing"}),e.jsx("div",{style:{fontSize:"13px",color:"#64748b"},children:ae(i.created_at)})]}),e.jsx("button",{onClick:f,disabled:d,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},title:"L√∂schen",children:d?e.jsx(P,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(U,{size:18})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px",paddingTop:"12px",borderTop:"1px solid #f1f5f9"},children:[e.jsx("span",{style:{backgroundColor:`${h}15`,color:h,padding:"4px 10px",borderRadius:"10px",fontSize:"12px",fontWeight:500,maxWidth:"70%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:i.template_title}),e.jsx(oe,{size:22,style:{color:"#94a3b8",flexShrink:0}})]})]}),e.jsx(le,{isOpen:S,onClose:()=>g(!1),onConfirm:I,title:"Briefing l√∂schen",description:"M√∂chtest du dieses Briefing wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:d})]}):e.jsxs(E.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsx("div",{onClick:p,style:{background:"#fff",borderRadius:"16px",padding:"20px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",transition:"all 0.2s"},onMouseEnter:v=>{v.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.08)",v.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:v=>{v.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)",v.currentTarget.style.borderColor="#e2e8f0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:`linear-gradient(135deg, ${h}15, ${h}30)`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(t,{style:{width:"24px",height:"24px",color:h}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#0f172a",marginBottom:"4px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:i.title||"Briefing"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap",fontSize:"13px",color:"#64748b"},children:[e.jsx("span",{style:{backgroundColor:`${h}15`,color:h,padding:"2px 8px",borderRadius:"10px",fontSize:"12px",fontWeight:500},children:i.template_title}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ze,{size:14}),ae(i.created_at)]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[e.jsx("button",{onClick:f,disabled:d,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"L√∂schen",children:d?e.jsx(P,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(U,{size:18})}),e.jsx(oe,{size:20,style:{color:"#94a3b8"}})]})]})}),e.jsx(le,{isOpen:S,onClose:()=>g(!1),onConfirm:I,title:"Briefing l√∂schen",description:"M√∂chtest du dieses Briefing wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:d})]})},ie={SIMULATOR:"simulator",ROLEPLAY:"roleplay",VIDEO:"video"},Ti=({session:i,type:p,scenario:o,onClick:r,onContinueSession:l,onDeleteSession:h,headerGradient:d,headerText:n,primaryAccent:S})=>{const[g,R]=x.useState(!1),[t,f]=x.useState(!1),I=Ce(900),v=()=>{let u=null;if(p===ie.SIMULATOR)u=i.overall_score||i.average_score;else if(p===ie.VIDEO)u=i.overall_score;else if(i.feedback_json)try{let D=i.feedback_json;if(typeof D=="string"){let N=D.trim();N.startsWith("```json")?N=N.replace(/```json\s*/g,"").replace(/```\s*$/g,""):N.startsWith("```")&&(N=N.replace(/```\s*/g,"").replace(/```\s*$/g,"")),D=JSON.parse(N)}u=D.rating?.overall||null}catch{u=null}return u==null||isNaN(u)||u===0?null:u},b=()=>p===ie.SIMULATOR||p===ie.VIDEO?i.status:i.feedback_json?"completed":"pending",B=v(),F=b()==="completed",w=i.total_questions>0&&(i.completed_questions||0)<i.total_questions,T=p===ie.SIMULATOR&&w,A=()=>{if(!T)return null;const u=i.completed_questions||0,D=i.total_questions||0;return`${u}/${D} Fragen`},L=u=>{u.stopPropagation(),l&&l(i,o)},C=u=>{u.stopPropagation(),f(!0)},$=async()=>{R(!0);try{await h(i,p),f(!1)}catch(u){console.error("Error deleting session:",u)}finally{R(!1)}},K=(()=>{if(B==null||isNaN(B))return null;if(p===ie.SIMULATOR||p===ie.ROLEPLAY){const u=B<=10?B*10:B;return isNaN(u)?null:u}return isNaN(B)?null:B})(),J=u=>{if(!u&&u!==0)return{background:"#f1f5f9",color:"#64748b"};const D=parseFloat(u);return D>=80?{background:"#dcfce7",color:"#166534"}:D>=60?{background:"#fef9c3",color:"#854d0e"}:{background:"#fee2e2",color:"#991b1b"}},H=(()=>{switch(p){case ie.SIMULATOR:return Ze;case ie.VIDEO:return $e;default:return je}})();return I?e.jsxs(E.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileTap:{scale:.98},children:[e.jsxs("div",{onClick:r,style:{background:"#fff",borderRadius:"16px",padding:"16px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:d,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(H,{style:{width:"22px",height:"22px",color:n}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"15px",fontWeight:600,color:"#0f172a",marginBottom:"4px",lineHeight:"1.3"},children:o?.title||i.scenario_title||`Session #${i.id}`}),e.jsx("div",{style:{fontSize:"13px",color:"#64748b"},children:ae(i.created_at)})]}),h&&e.jsx("button",{onClick:C,disabled:g,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},title:"L√∂schen",children:g?e.jsx(P,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(U,{size:18})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px",paddingTop:"12px",borderTop:"1px solid #f1f5f9"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[!F&&!T&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"20px",background:"#fef3c7",color:"#92400e",fontSize:"12px",fontWeight:500},children:[e.jsx(we,{size:12}),"In Bearbeitung"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",borderRadius:"20px",fontSize:"13px",fontWeight:600,...J(K)},children:[e.jsx(ge,{size:13}),K!==null?`${Math.round(K)}%`:"-- %"]}),(i.duration||i.video_duration_seconds)&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:"#64748b"},children:[e.jsx(we,{size:12}),fe(i.duration||i.video_duration_seconds)]}),T&&e.jsx("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"20px",background:"#dbeafe",color:"#1e40af",fontSize:"12px",fontWeight:500},children:A()})]}),T&&l?e.jsxs("button",{onClick:L,style:{display:"flex",alignItems:"center",gap:"6px",padding:"10px 16px",borderRadius:"10px",border:"none",background:S||"#3B82F6",color:"#fff",fontSize:"13px",fontWeight:600,cursor:"pointer",boxShadow:`0 2px 8px ${S||"#3B82F6"}40`,flexShrink:0},children:[e.jsx(Ie,{size:14}),"Fortsetzen"]}):e.jsx(oe,{size:22,style:{color:"#94a3b8",flexShrink:0}})]})]}),e.jsx(le,{isOpen:t,onClose:()=>f(!1),onConfirm:$,title:"Session l√∂schen",description:"M√∂chtest du diese Session wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:g})]}):e.jsxs(E.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsx("div",{onClick:r,style:{background:"#fff",borderRadius:"16px",padding:"20px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",transition:"all 0.2s"},onMouseEnter:u=>{u.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.08)",u.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:u=>{u.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)",u.currentTarget.style.borderColor="#e2e8f0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:d,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(H,{style:{width:"24px",height:"24px",color:n}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#0f172a",marginBottom:"4px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:o?.title||i.scenario_title||`Session #${i.id}`}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap",fontSize:"13px",color:"#64748b"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ze,{size:14}),ae(i.created_at)]}),i.duration||i.video_duration_seconds?e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(we,{size:14}),fe(i.duration||i.video_duration_seconds)]}):null]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexShrink:0},children:[T&&l&&e.jsxs("button",{onClick:L,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",borderRadius:"10px",border:"none",background:S||"#3B82F6",color:"#fff",fontSize:"13px",fontWeight:600,cursor:"pointer",boxShadow:`0 2px 8px ${S||"#3B82F6"}40`,transition:"all 0.2s"},onMouseEnter:u=>{u.currentTarget.style.transform="scale(1.02)",u.currentTarget.style.boxShadow=`0 4px 12px ${S||"#3B82F6"}50`},onMouseLeave:u=>{u.currentTarget.style.transform="scale(1)",u.currentTarget.style.boxShadow=`0 2px 8px ${S||"#3B82F6"}40`},children:[e.jsx(Ie,{size:14}),"Fortsetzen"]}),T&&e.jsx("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"20px",background:"#dbeafe",color:"#1e40af",fontSize:"12px",fontWeight:500},children:A()}),!F&&!T&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"20px",background:"#fef3c7",color:"#92400e",fontSize:"12px",fontWeight:500},children:[e.jsx(we,{size:12}),"In Bearbeitung"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"6px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:600,...J(K)},children:[e.jsx(ge,{size:14}),K!==null?`${Math.round(K)}%`:"-- %"]}),h&&e.jsx("button",{onClick:C,disabled:g,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"color 0.2s"},onMouseEnter:u=>{u.currentTarget.style.color="#ef4444"},onMouseLeave:u=>{u.currentTarget.style.color="#94a3b8"},title:"L√∂schen",children:g?e.jsx(P,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(U,{size:18})}),e.jsx(oe,{size:20,style:{color:"#94a3b8"}})]})]})}),e.jsx(le,{isOpen:t,onClose:()=>f(!1),onConfirm:$,title:"Session l√∂schen",description:"M√∂chtest du diese Session wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:g})]})},yt=({proScore:i,contraScore:p})=>{const o=i+p,r=o>0?Math.round(i/o*100):50;return e.jsxs("div",{style:{height:"6px",borderRadius:"3px",overflow:"hidden",display:"flex",backgroundColor:"#f1f5f9",width:"100%",maxWidth:"120px"},children:[e.jsx("div",{style:{background:"linear-gradient(90deg, #22c55e 0%, #16a34a 100%)",width:`${r}%`,height:"100%"}}),e.jsx("div",{style:{background:"linear-gradient(90deg, #ef4444 0%, #dc2626 100%)",width:`${100-r}%`,height:"100%"}})]})},_i=({decision:i,onClick:p,onDelete:o,headerGradient:r,headerText:l,primaryAccent:h})=>{const[d,n]=x.useState(!1),[S,g]=x.useState(!1),R=Ce(900),t=(i.pros||[]).reduce((k,F)=>k+(F.text?.trim()?F.weight||5:0),0),f=(i.cons||[]).reduce((k,F)=>k+(F.text?.trim()?F.weight||5:0),0),I=(i.pros||[]).filter(k=>k.text?.trim()).length,v=(i.cons||[]).filter(k=>k.text?.trim()).length,b=k=>{k.stopPropagation(),g(!0)},B=async()=>{n(!0);try{await o(i.id),g(!1)}catch(k){console.error("Error deleting decision:",k)}finally{n(!1)}};return R?e.jsxs(E.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileTap:{scale:.98},children:[e.jsxs("div",{onClick:p,style:{background:"#fff",borderRadius:"16px",padding:"16px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf615, #8b5cf630)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Ae,{style:{width:"22px",height:"22px",color:"#8b5cf6"}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"15px",fontWeight:600,color:"#0f172a",marginBottom:"4px",lineHeight:"1.3",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:i.topic||"Entscheidung"}),e.jsx("div",{style:{fontSize:"13px",color:"#64748b"},children:ae(i.created_at)})]}),e.jsx("button",{onClick:b,disabled:d,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},title:"L√∂schen",children:d?e.jsx(P,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(U,{size:18})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",paddingTop:"12px",borderTop:"1px solid #f1f5f9"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(xt,{size:14,color:"#16a34a"}),e.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:"#16a34a"},children:I})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ht,{size:14,color:"#dc2626"}),e.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:"#dc2626"},children:v})]}),e.jsx(yt,{proScore:t,contraScore:f})]}),e.jsx(oe,{size:22,style:{color:"#94a3b8",flexShrink:0}})]})]}),e.jsx(le,{isOpen:S,onClose:()=>g(!1),onConfirm:B,title:"Entscheidung l√∂schen",description:"M√∂chtest du diese Entscheidung wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:d})]}):e.jsxs(E.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsx("div",{onClick:p,style:{background:"#fff",borderRadius:"16px",padding:"20px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",transition:"all 0.2s"},onMouseEnter:k=>{k.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.08)",k.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:k=>{k.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)",k.currentTarget.style.borderColor="#e2e8f0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #8b5cf615, #8b5cf630)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Ae,{style:{width:"24px",height:"24px",color:"#8b5cf6"}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#0f172a",marginBottom:"6px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:i.topic||"Entscheidung"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap",fontSize:"13px",color:"#64748b"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(xt,{size:14,color:"#16a34a"}),e.jsxs("span",{style:{fontWeight:500,color:"#16a34a"},children:[I," Pro"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ht,{size:14,color:"#dc2626"}),e.jsxs("span",{style:{fontWeight:500,color:"#dc2626"},children:[v," Contra"]})]})]}),e.jsx(yt,{proScore:t,contraScore:f}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ze,{size:14}),ae(i.created_at)]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[e.jsx("button",{onClick:b,disabled:d,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"L√∂schen",children:d?e.jsx(P,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(U,{size:18})}),e.jsx(oe,{size:20,style:{color:"#94a3b8"}})]})]})}),e.jsx(le,{isOpen:S,onClose:()=>g(!1),onConfirm:B,title:"Entscheidung l√∂schen",description:"M√∂chtest du diese Entscheidung wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:d})]})},Ai={love:{icon:Jt,color:"#E11D48",label:"Liebe"},talent:{icon:ge,color:"#F59E0B",label:"Talent"},need:{icon:Zt,color:"#10B981",label:"Welt"},market:{icon:Xt,color:"#6366F1",label:"Markt"}},mt=({dimensions:i})=>e.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:Object.entries(Ai).map(([p,o])=>{const r=i?.[p]||[],l=r.length>0,h=o.icon;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:500,backgroundColor:l?`${o.color}15`:"#f1f5f9",color:l?o.color:"#94a3b8",border:l?`1px solid ${o.color}30`:"1px solid #e2e8f0"},children:[e.jsx(h,{size:12}),e.jsx("span",{children:r.length})]},p)})}),Li=({ikigai:i,onDelete:p,onNavigate:o,headerGradient:r,headerText:l,primaryAccent:h})=>{const[d,n]=x.useState(!1),[S,g]=x.useState(!1),R=Ce(900),t={love:i.love_tags||[],talent:i.talent_tags||[],need:i.need_tags||[],market:i.market_tags||[]},f=Object.values(t).filter(k=>k.length>0).length,I=i.status==="completed",v=i.paths?.[0]?.role_title||(I?"Ikigai-Analyse abgeschlossen":"Ikigai-Analyse"),b=k=>{k.stopPropagation(),g(!0)},B=async()=>{n(!0);try{await p(i.id),g(!1)}catch(k){console.error("Error deleting ikigai:",k)}finally{n(!1)}};return R?e.jsxs(E.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileTap:{scale:.98},children:[e.jsxs("div",{onClick:o,style:{background:"#fff",borderRadius:"16px",padding:"16px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:I?"linear-gradient(135deg, #E11D48, #F59E0B, #10B981, #6366F1)":"linear-gradient(135deg, #6366F115, #6366F130)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Le,{style:{width:"22px",height:"22px",color:I?"white":"#6366F1"}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"15px",fontWeight:600,color:"#0f172a",marginBottom:"4px",lineHeight:"1.3",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:v}),e.jsx("div",{style:{fontSize:"13px",color:"#64748b"},children:ae(i.created_at)})]}),e.jsx("button",{onClick:b,disabled:d,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},title:"L√∂schen",children:d?e.jsx(P,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(U,{size:18})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",paddingTop:"12px",borderTop:"1px solid #f1f5f9"},children:[e.jsx(mt,{dimensions:t}),e.jsx(oe,{size:22,style:{color:"#94a3b8",flexShrink:0}})]})]}),e.jsx(le,{isOpen:S,onClose:()=>g(!1),onConfirm:B,title:"Ikigai-Analyse l√∂schen",description:"M√∂chtest du diese Ikigai-Analyse wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:d})]}):e.jsxs(E.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsx("div",{onClick:o,style:{background:"#fff",borderRadius:"16px",padding:"20px",cursor:"pointer",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",transition:"all 0.2s"},onMouseEnter:k=>{k.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.08)",k.currentTarget.style.borderColor="#cbd5e1"},onMouseLeave:k=>{k.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)",k.currentTarget.style.borderColor="#e2e8f0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:I?"linear-gradient(135deg, #E11D48, #F59E0B, #10B981, #6366F1)":"linear-gradient(135deg, #6366F115, #6366F130)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Le,{style:{width:"24px",height:"24px",color:I?"white":"#6366F1"}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#0f172a",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:v}),I&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:"10px",fontSize:"11px",fontWeight:600,background:"linear-gradient(135deg, #22c55e, #16a34a)",color:"white"},children:"Abgeschlossen"}),!I&&f>0&&e.jsxs("span",{style:{padding:"2px 8px",borderRadius:"10px",fontSize:"11px",fontWeight:600,background:"#f59e0b20",color:"#f59e0b"},children:[f,"/4 Dimensionen"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap",fontSize:"13px",color:"#64748b"},children:[e.jsx(mt,{dimensions:t}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(ze,{size:14}),ae(i.created_at)]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[e.jsx("button",{onClick:b,disabled:d,style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"L√∂schen",children:d?e.jsx(P,{size:18,style:{animation:"spin 1s linear infinite"}}):e.jsx(U,{size:18})}),e.jsx(oe,{size:20,style:{color:"#94a3b8"}})]})]})}),e.jsx(le,{isOpen:S,onClose:()=>g(!1),onConfirm:B,title:"Ikigai-Analyse l√∂schen",description:"M√∂chtest du diese Ikigai-Analyse wirklich l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.",isDeleting:d})]})},bt={love:{key:"love",label:"Liebe",icon:"‚ù§Ô∏è",color:"#E11D48",question:"Vergiss mal Geld und Karriere. Bei welchen T√§tigkeiten vergisst du die Zeit?",placeholder:"Erz√§hle mir, was du wirklich liebst zu tun...",description:"Was du liebst"},talent:{key:"talent",label:"Talent",icon:"‚≠ê",color:"#F59E0B",question:"Worin bist du richtig gut? Was f√§llt dir leicht, w√§hrend andere damit k√§mpfen?",placeholder:"Beschreibe deine St√§rken und F√§higkeiten...",description:"Worin du gut bist"},need:{key:"need",label:"Welt",icon:"üåç",color:"#10B981",question:"Welche Probleme der Welt w√ºrdest du gerne l√∂sen? Wo siehst du Bedarf?",placeholder:"Welchen Beitrag m√∂chtest du leisten...",description:"Was die Welt braucht"},market:{key:"market",label:"Markt",icon:"üí∞",color:"#6366F1",question:"Wof√ºr werden Menschen in deinem Bereich bezahlt? Was ist gefragt?",placeholder:"Welche Berufe oder M√§rkte interessieren dich...",description:"Wof√ºr du bezahlt wirst"}},c={SIMULATOR:"simulator",ROLEPLAY:"roleplay",VIDEO:"video",BRIEFINGS:"briefings",DECISIONS:"decisions",IKIGAI:"ikigai"},Ke=[{id:c.BRIEFINGS,label:"Smart Briefings",icon:Ct},{id:c.DECISIONS,label:"Entscheidungs-Kompass",icon:Ae},{id:c.IKIGAI,label:"Ikigai-Kompass",icon:Le},{id:c.SIMULATOR,label:"Szenario-Training",icon:Ze},{id:c.VIDEO,label:"Wirkungs-Analyse",icon:$e},{id:c.ROLEPLAY,label:"Live-Simulationen",icon:je}],on=c,an=({onBack:i,onSelectSession:p,isAuthenticated:o,onLoginClick:r,onContinueSession:l,onRepeatSession:h,initialTab:d,onNavigateToModule:n})=>{const{branding:S,demoCode:g,isDemoUser:R}=Bt(),t=Rt(),f=S?.["--header-gradient"]||Te["--header-gradient"],I=S?.["--header-text"]||Te["--header-text"],v=S?.["--primary-accent"]||Te["--primary-accent"],[b,B]=x.useState(d||c.BRIEFINGS);x.useEffect(()=>{d&&B(d)},[d]);const[k,F]=x.useState(null),[w,T]=x.useState(null);x.useEffect(()=>{window.scrollTo(0,0)},[b,k]);const[A,L]=x.useState([]),[C,$]=x.useState([]),[_,K]=x.useState([]),[J,Se]=x.useState([]),[H,u]=x.useState([]),[D,N]=x.useState([]),[ke,Oe]=x.useState([]),[Be,Fe]=x.useState([]),[Re,Q]=x.useState([]),[ve,ee]=x.useState(null),[G,ne]=x.useState(null),[a,m]=x.useState(null),[W,ue]=x.useState(null),[Y,ye]=x.useState({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),[We,se]=x.useState(null),[de,ce]=x.useState(!1),[pe,Ne]=x.useState(!0),[Je,Qe]=x.useState(null);x.useEffect(()=>{o?De():Ne(!1)},[o]);const De=async()=>{Ne(!0),Qe(null);try{const s=me(),y=g?`&demo_code=${encodeURIComponent(g)}`:"",[j,z,O,V,X,te,xe,Ut,Gt]=await Promise.all([xi({limit:50,...g&&{demo_code:g}}).catch(()=>({data:[]})),fetch(`${s}/simulator/sessions?limit=50${y}`,{headers:{"X-WP-Nonce":re()}}).then(M=>M.json()).catch(()=>({data:[]})),fetch(`${s}/video-training/sessions?limit=50${y}`,{headers:{"X-WP-Nonce":re()}}).then(M=>M.json()).catch(()=>({data:[]})),q.request(`/smartbriefing/briefings?limit=50${g?`&demo_code=${encodeURIComponent(g)}`:""}`,{method:"GET"}).catch(()=>({success:!1,data:{briefings:[]}})),q.getDecisions().catch(()=>({success:!1,data:{decisions:[]}})),q.getIkigais().catch(()=>({success:!1,data:{ikigais:[]}})),hi().catch(()=>[]),fetch(`${s}/simulator/scenarios`,{headers:{"X-WP-Nonce":re()}}).then(M=>M.json()).catch(()=>({data:[]})),fetch(`${s}/video-training/scenarios`,{headers:{"X-WP-Nonce":re()}}).then(M=>M.json()).catch(()=>({data:[]}))]),Ge=(M,Me="sessions")=>Array.isArray(M?.data)?M.data:Array.isArray(M?.data?.[Me])?M.data[Me]:Array.isArray(M?.[Me])?M[Me]:Array.isArray(M)?M:[],Ve=M=>Array.isArray(M?.data?.scenarios)?M.data.scenarios:Array.isArray(M?.data)?M.data:Array.isArray(M)?M:[];L(Ge(j)),$(Ge(z)),K(Ge(O)),Se(V?.data?.briefings||[]),u(X?.data?.decisions||[]),N(te?.data?.ikigais||[]),Oe(Ve(xe)),Fe(Ve(Ut)),Q(Ve(Gt))}catch(s){console.error("Failed to load sessions:",s),Qe(s.message||"Fehler beim Laden der Daten")}finally{Ne(!1)}},et=x.useMemo(()=>{const s={};return ke.forEach(y=>{s[y.id]=y}),s},[ke]),tt=x.useMemo(()=>{const s={};return Be.forEach(y=>{s[y.id]=y}),s},[Be]),it=x.useMemo(()=>{const s={};return Re.forEach(y=>{s[y.id]=y}),s},[Re]),Wt=()=>{switch(b){case c.SIMULATOR:return C;case c.VIDEO:return _;case c.BRIEFINGS:return J;case c.DECISIONS:return H;case c.IKIGAI:return D;default:return A}},Dt=()=>{switch(b){case c.SIMULATOR:return tt;case c.VIDEO:return it;default:return et}},nt=A.length+C.length+_.length+J.length+H.length,st=async s=>{(await q.request(`/smartbriefing/briefings/${s}`,{method:"DELETE"})).success&&Se(j=>j.filter(z=>z.id!==s))},Mt=s=>{ee(s)},Et=()=>{ee(null)},rt=async s=>{(await q.deleteDecision(s)).success&&u(j=>j.filter(z=>z.id!==s))},ot=async s=>{await q.deleteIkigai(s)&&N(j=>j.filter(z=>z.id!==s))},Tt=s=>{ne(s)},at=()=>{ne(null),m(null)},_t=s=>{ue(s),ye({love:{input:s.love_input||"",tags:s.love_tags||[]},talent:{input:s.talent_input||"",tags:s.talent_tags||[]},need:{input:s.need_input||"",tags:s.need_tags||[]},market:{input:s.market_input||"",tags:s.market_tags||[]}}),s.status==="completed"&&s.paths?se({summary:s.summary,paths:s.paths}):se(null)},Pe=()=>{ue(null),ye({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),se(null)},At=async(s,y,j)=>{if(ye(z=>({...z,[s]:{input:y,tags:j}})),W?.id)try{await q.updateIkigai(W.id,{[`${s}_input`]:y,[`${s}_tags`]:j})}catch(z){console.error("[Ikigai] Failed to save dimension:",z)}},Lt=async(s,y)=>{try{return(await q.extractIkigaiKeywords(s,y))?.keywords||[]}catch(j){return console.error("[Ikigai] Failed to extract keywords:",j),[]}},$t=(s,y)=>{ye(j=>{const z=j[s].tags.filter(O=>O!==y);return{...j,[s]:{...j[s],tags:z}}})},Ot=async()=>{if(Object.values(Y).every(y=>y.tags&&y.tags.length>0)){ce(!0);try{const y=await q.synthesizeIkigaiPaths({love_tags:Y.love.tags,talent_tags:Y.talent.tags,need_tags:Y.need.tags,market_tags:Y.market.tags});y&&(se(y),W?.id&&(await q.updateIkigai(W.id,{summary:y.summary,paths:y.paths,status:"completed"}),N(j=>j.map(z=>z.id===W.id?{...z,summary:y.summary,paths:y.paths,status:"completed"}:z))))}catch(y){console.error("[Ikigai] Failed to synthesize paths:",y)}finally{ce(!1)}}},Ft=Object.values(Y).every(s=>s.tags&&s.tags.length>0),Nt=s=>{u(y=>y.map(j=>j.id===s.id?s:j)),ne(s)},Pt=s=>{F(s),T(b)},He=()=>{F(null),T(null)},Ue=async(s,y)=>{const j=me();try{let z,O;switch(y){case c.SIMULATOR:z=`${j}/simulator/sessions/${s.id}`,O=()=>$(te=>te.filter(xe=>xe.id!==s.id));break;case c.ROLEPLAY:z=`${j}/sessions/${s.id}`,O=()=>L(te=>te.filter(xe=>xe.id!==s.id));break;case c.VIDEO:z=`${j}/video-training/sessions/${s.id}`,O=()=>K(te=>te.filter(xe=>xe.id!==s.id));break;default:throw new Error("Unknown session type")}const X=await(await fetch(z,{method:"DELETE",headers:{"X-WP-Nonce":re()}})).json();if(X.success)O(),k&&He();else throw new Error(X.message||"Delete failed")}catch(z){throw console.error("Failed to delete session:",z),z}},lt=(s,y)=>(y===c.SIMULATOR?tt:y===c.VIDEO?it:et)[s?.scenario_id];if(ve)return e.jsx(ui,{briefing:ve,onBack:Et,onDelete:st});if(G){const s={topic:G.topic||"",context:G.context||"",pros:G.pros||[],cons:G.cons||[],proScore:G.pro_score||0,contraScore:G.contra_score||0},y=async(O,V)=>{try{const X={topic:O.topic,context:O.context||null,pros:O.pros,cons:O.cons,pro_score:O.proScore,contra_score:O.contraScore,analysis:V,status:"completed"};await q.updateDecision(G.id,X);const te={...G,...X};Nt(te),m({data:O,result:V})}catch(X){console.error("[SessionHistory] Failed to update decision:",X)}},j=async O=>G.id,z=async(O,V)=>{try{await q.updateDecision(O,{topic:V.topic,context:V.context||null,pros:V.pros,cons:V.cons,pro_score:V.proScore,contra_score:V.contraScore,status:V.status||"draft"})}catch(X){console.error("[SessionHistory] Failed to update decision:",X)}};return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:t.space[4],paddingBottom:t.space[4],borderBottom:`1px solid ${t.borderColor}`},children:[e.jsxs("button",{onClick:at,style:{display:"flex",alignItems:"center",gap:t.space[2],padding:`${t.space[2]} ${t.space[3]}`,backgroundColor:"transparent",border:`1px solid ${t.borderColor}`,borderRadius:t.radius.md,cursor:"pointer",color:t.textSecondary,fontSize:t.fontSize.base},children:[e.jsx(Ye,{size:t.iconSize.md}),"Zur√ºck"]}),e.jsxs("button",{onClick:()=>{window.confirm("M√∂chtest du diese Entscheidungs-Analyse wirklich l√∂schen?")&&(rt(G.id),at())},style:{display:"flex",alignItems:"center",gap:t.space[2],padding:`${t.space[2]} ${t.space[3]}`,backgroundColor:"transparent",border:`1px solid ${t.error}`,borderRadius:t.radius.md,cursor:"pointer",color:t.error,fontSize:t.fontSize.base},children:[e.jsx(U,{size:t.iconSize.md}),"L√∂schen"]})]}),a?e.jsx(yi,{decisionData:a.data,analysisResult:a.result,onStartNew:()=>{m(null),ne(null)},onEditDecision:()=>{m(null)}}):e.jsx(mi,{initialData:s,onAnalysisComplete:y,isAuthenticated:o,savedDecisionId:G.id,onSaveDraft:j,onUpdateSession:z,onDecisionIdChange:()=>{}})]})}if(W)return e.jsxs("div",{style:{padding:t.space[6],maxWidth:"900px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:t.space[6]},children:[e.jsxs("button",{onClick:Pe,style:{display:"flex",alignItems:"center",gap:t.space[2],padding:`${t.space[2]} ${t.space[4]}`,backgroundColor:"transparent",border:`1px solid ${t.borderColor}`,borderRadius:t.radius.lg,color:t.textSecondary,cursor:"pointer",fontSize:t.fontSize.sm,fontWeight:t.fontWeight.medium},children:[e.jsx(Ye,{size:16}),"Zur√ºck"]}),e.jsxs("button",{onClick:()=>{window.confirm("M√∂chtest du diese Ikigai-Analyse wirklich l√∂schen?")&&(ot(W.id),Pe())},style:{display:"flex",alignItems:"center",gap:t.space[2],padding:`${t.space[2]} ${t.space[3]}`,backgroundColor:"transparent",border:`1px solid ${t.error}`,borderRadius:t.radius.lg,color:t.error,cursor:"pointer",fontSize:t.fontSize.sm,fontWeight:t.fontWeight.medium},children:[e.jsx(U,{size:16}),"L√∂schen"]})]}),We?e.jsx(bi,{dimensions:Y,synthesisResult:We,onStartNew:Pe,onEdit:()=>se(null),DIMENSIONS:bt}):e.jsx(ji,{dimensions:Y,DIMENSIONS:bt,onExtractKeywords:Lt,onUpdateDimension:At,onRemoveTag:$t,allDimensionsFilled:Ft,onSynthesize:Ot,isSynthesizing:de})]});if(k){if(w===c.ROLEPLAY){const j=lt(k,w);return e.jsx(gi,{session:k,scenario:j,onBack:He,onRepeat:()=>h?.(k,j,"roleplay"),onDelete:z=>Ue(z,c.ROLEPLAY)})}const y={[c.SIMULATOR]:"simulator",[c.VIDEO]:"video"}[w]||"simulator";return e.jsx(Mi,{session:k,type:w,scenario:lt(k,w),onBack:He,onContinueSession:l,onRepeatSession:(j,z)=>h?.(j,z,y),onDeleteSession:Ue})}if(!o)return e.jsxs("div",{style:{padding:t.space[6]},children:[e.jsxs("div",{style:{marginBottom:t.space[8],textAlign:"center"},children:[e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:t.space[3],marginBottom:t.space[3]},children:[e.jsx("div",{style:{width:t.space[12],height:t.space[12],borderRadius:t.radius.lg,background:f,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(gt,{style:{width:t.iconSize["2xl"],height:t.iconSize["2xl"],color:I}})}),e.jsx("h1",{style:{fontSize:t.fontSize["5xl"],fontWeight:t.fontWeight.bold,color:t.textMain,margin:0},children:"Meine Sessions"})]}),e.jsx("p",{style:{fontSize:t.fontSize.lg,color:t.textSecondary,maxWidth:"600px",margin:"0 auto"},children:"Hier findest du deine gespeicherten √úbungen und Fortschritte"})]}),e.jsxs("div",{style:{maxWidth:"500px",margin:`${t.space[15]} auto`,textAlign:"center",padding:t.space[10],backgroundColor:t.cardBg,borderRadius:t.radius["2xl"],boxShadow:t.shadow.md},children:[e.jsx("div",{style:{width:t.space[16],height:t.space[16],borderRadius:t.radius.xl,background:f,display:"flex",alignItems:"center",justifyContent:"center",margin:`0 auto ${t.space[5]}`},children:e.jsx(ft,{style:{width:t.iconSize["3xl"],height:t.iconSize["3xl"],color:I}})}),e.jsx("h2",{style:{fontSize:t.fontSize["3xl"],fontWeight:t.fontWeight.bold,color:t.textMain,marginBottom:t.space[3]},children:"Anmeldung erforderlich"}),e.jsx("p",{style:{fontSize:t.fontSize.md,color:t.textMuted,marginBottom:t.space[6],lineHeight:1.6},children:"Um deine gespeicherten Sessions zu sehen, musst du dich zuerst anmelden."}),e.jsxs("button",{onClick:r,style:{padding:`${t.space[3.5]} ${t.space[8]}`,borderRadius:t.radius.lg,border:"none",background:f,color:I,fontSize:t.fontSize.lg,fontWeight:t.fontWeight.semibold,cursor:"pointer",display:"inline-flex",alignItems:"center",gap:t.space[2.5],boxShadow:t.coloredShadow(v,"md")},children:[e.jsx(ft,{style:{width:t.iconSize.lg,height:t.iconSize.lg}}),"Jetzt anmelden"]})]})]});if(pe)return e.jsxs("div",{style:{minHeight:"60vh",display:"flex",alignItems:"center",justifyContent:"center",padding:t.space[10]},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(P,{style:{width:t.iconSize["4xl"],height:t.iconSize["4xl"],color:v,animation:"spin 1s linear infinite",margin:"0 auto"}}),e.jsx("p",{style:{color:t.textMuted,marginTop:t.space[4]},children:"Sessions werden geladen..."})]}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]});if(Je)return e.jsx("div",{style:{minHeight:"400px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{textAlign:"center",maxWidth:"400px",padding:t.space[6]},children:[e.jsx(he,{style:{width:t.iconSize["4xl"],height:t.iconSize["4xl"],color:t.error,margin:`0 auto ${t.space[4]}`}}),e.jsx("h2",{style:{fontSize:t.fontSize["2xl"],fontWeight:t.fontWeight.bold,color:t.textMain,marginBottom:t.space[2]},children:"Fehler beim Laden"}),e.jsx("p",{style:{color:t.textMuted,marginBottom:t.space[6]},children:Je}),e.jsx(Ee,{onClick:De,children:"Erneut versuchen"})]})});const dt=Wt(),Ht=Dt();return e.jsxs("div",{style:{padding:t.space[6]},children:[e.jsxs("div",{style:{marginBottom:t.space[8],textAlign:"center",position:"relative"},children:[e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:t.space[3],marginBottom:t.space[3]},children:[e.jsx("div",{style:{width:t.space[12],height:t.space[12],borderRadius:t.radius.lg,background:f,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(gt,{style:{width:t.iconSize["2xl"],height:t.iconSize["2xl"],color:I}})}),e.jsx("h1",{style:{fontSize:t.fontSize["5xl"],fontWeight:t.fontWeight.bold,color:t.textMain,margin:0},children:"Meine Sessions"})]}),e.jsxs("p",{style:{fontSize:t.fontSize.lg,color:t.textSecondary,maxWidth:"600px",margin:"0 auto"},children:[nt," ",nt===1?"√úbung":"√úbungen"," gespeichert"]})]}),e.jsx("style",{children:`
        .session-tabs-desktop {
          margin: 0 24px 24px;
          display: flex;
          flex-wrap: wrap;
          gap: 8px;
          background: #f1f5f9;
          padding: 6px;
          border-radius: 14px;
        }
        .session-tab-btn-desktop {
          flex: 1 1 auto;
          min-width: fit-content;
          padding: 12px 16px;
          border-radius: 10px;
          border: none;
          font-size: 14px;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          transition: all 0.2s;
        }
        .session-tabs-mobile {
          margin: 0 16px 16px;
        }
        .session-tabs-mobile-icons {
          display: flex;
          gap: 8px;
          justify-content: center;
          margin-bottom: 12px;
        }
        .session-tab-btn-mobile {
          flex: 1;
          max-width: 80px;
          padding: 12px 8px;
          border-radius: 12px;
          border: none;
          cursor: pointer;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          gap: 4px;
          transition: all 0.2s;
        }
        .session-tab-mobile-label {
          text-align: center;
          font-size: 15px;
          font-weight: 600;
          color: #0f172a;
          padding: 8px 16px;
          background: #fff;
          border-radius: 10px;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }
        .mobile-refresh-btn {
          display: none;
        }
        .desktop-actions {
          margin: 0 24px 24px;
          display: flex;
          justify-content: center;
          flex-wrap: wrap;
          gap: 12px;
        }
        .sessions-list-container {
          margin: 0 24px;
        }
        @media (min-width: 1025px) {
          .session-tabs-mobile { display: none; }
        }
        @media (min-width: 641px) and (max-width: 1023px) {
          .desktop-actions {
            flex-direction: column;
          }
          .desktop-actions button {
            width: 100%;
            justify-content: center;
          }
        }
        @media (min-width: 1024px) {
          .desktop-actions {
            justify-content: flex-end;
          }
        }
        @media (max-width: 1024px) {
          .session-tabs-desktop { display: none; }
        }
        @media (max-width: 640px) {
          .desktop-actions { display: none; }
          .mobile-refresh-btn {
            display: flex !important;
            position: absolute;
            top: 0;
            right: 0;
          }
          .sessions-list-container {
            margin: 0 16px;
          }
        }
      `}),e.jsx("button",{onClick:De,disabled:pe,className:"mobile-refresh-btn",style:{padding:t.space[2.5],borderRadius:t.radius.md,border:`1px solid ${t.borderColor}`,background:t.cardBgColor,color:t.textSecondary,cursor:pe?"not-allowed":"pointer",opacity:pe?.5:1,boxShadow:t.shadow.sm,alignItems:"center",justifyContent:"center"},children:e.jsx(ut,{style:{width:t.iconSize.md,height:t.iconSize.md},className:pe?"animate-spin":""})}),e.jsx("div",{className:"session-tabs-desktop",children:Ke.map(s=>{const y=s.icon,j=b===s.id,z=s.id===c.SIMULATOR?C.length:s.id===c.VIDEO?_.length:s.id===c.BRIEFINGS?J.length:s.id===c.DECISIONS?H.length:s.id===c.IKIGAI?D.length:A.length;return e.jsxs("button",{onClick:()=>B(s.id),className:"session-tab-btn-desktop",style:{background:j?"#fff":"transparent",color:j?"#0f172a":"#64748b",fontWeight:j?600:500,boxShadow:j?"0 2px 8px rgba(0, 0, 0, 0.08)":"none"},children:[e.jsx(y,{size:18}),e.jsx("span",{children:s.label}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:"10px",background:j?v:"#e2e8f0",color:j?"white":"#64748b",fontSize:"12px",fontWeight:600,minWidth:"24px",textAlign:"center"},children:z})]},s.id)})}),e.jsxs("div",{className:"session-tabs-mobile",children:[e.jsx("div",{className:"session-tabs-mobile-icons",children:Ke.map(s=>{const y=s.icon,j=b===s.id,z=s.id===c.SIMULATOR?C.length:s.id===c.VIDEO?_.length:s.id===c.BRIEFINGS?J.length:s.id===c.DECISIONS?H.length:A.length;return e.jsxs("button",{onClick:()=>B(s.id),className:"session-tab-btn-mobile",style:{background:j?"#fff":"#f1f5f9",boxShadow:j?"0 2px 8px rgba(0, 0, 0, 0.1)":"none",border:j?`2px solid ${v}`:"2px solid transparent"},children:[e.jsx(y,{size:20,style:{color:j?v:"#64748b"}}),e.jsx("span",{style:{padding:"2px 6px",borderRadius:"8px",background:j?v:"#e2e8f0",color:j?"white":"#64748b",fontSize:"11px",fontWeight:600,minWidth:"20px",textAlign:"center"},children:z})]},s.id)})}),e.jsx("div",{className:"session-tab-mobile-label",children:Ke.find(s=>s.id===b)?.label})]}),e.jsxs("div",{className:"desktop-actions",children:[e.jsxs(Ee,{variant:"outline",onClick:De,disabled:pe,children:[e.jsx(ut,{style:{width:"16px",height:"16px",marginRight:"8px"},className:pe?"animate-spin":""}),"Aktualisieren"]}),n&&e.jsxs(Ee,{onClick:()=>{const s={[c.BRIEFINGS]:"smart_briefing",[c.DECISIONS]:"decision_board",[c.IKIGAI]:"ikigai",[c.SIMULATOR]:"simulator",[c.VIDEO]:"video_training",[c.ROLEPLAY]:"dashboard"};n(s[b]||"overview")},style:{background:f,color:I},children:[e.jsx(Qt,{style:{width:"16px",height:"16px",marginRight:"8px"}}),b===c.BRIEFINGS?"Neues Briefing":b===c.DECISIONS?"Neue Entscheidungs-Analyse":b===c.IKIGAI?"Neue Ikigai-Analyse":b===c.SIMULATOR?"Neues Szenario-Training":b===c.VIDEO?"Neue Wirkungs-Analyse":"Neue Live-Simulation"]})]}),e.jsx("div",{className:"sessions-list-container",children:dt.length===0?e.jsxs("div",{style:{textAlign:"center",padding:`${t.space[15]} ${t.space[6]}`,background:t.cardBg,borderRadius:t.radius["2xl"],boxShadow:t.shadow.sm},children:[b===c.SIMULATOR&&e.jsx(Ze,{style:{width:t.iconSize["4xl"],height:t.iconSize["4xl"],color:t.textMuted,margin:`0 auto ${t.space[4]}`,display:"block"}}),b===c.ROLEPLAY&&e.jsx(je,{style:{width:t.iconSize["4xl"],height:t.iconSize["4xl"],color:t.textMuted,margin:`0 auto ${t.space[4]}`,display:"block"}}),b===c.VIDEO&&e.jsx($e,{style:{width:t.iconSize["4xl"],height:t.iconSize["4xl"],color:t.textMuted,margin:`0 auto ${t.space[4]}`,display:"block"}}),b===c.BRIEFINGS&&e.jsx(Ct,{style:{width:t.iconSize["4xl"],height:t.iconSize["4xl"],color:t.textMuted,margin:`0 auto ${t.space[4]}`,display:"block"}}),b===c.DECISIONS&&e.jsx(Ae,{style:{width:t.iconSize["4xl"],height:t.iconSize["4xl"],color:t.textMuted,margin:`0 auto ${t.space[4]}`,display:"block"}}),b===c.IKIGAI&&e.jsx(Le,{style:{width:t.iconSize["4xl"],height:t.iconSize["4xl"],color:t.textMuted,margin:`0 auto ${t.space[4]}`,display:"block"}}),e.jsxs("h3",{style:{fontSize:t.fontSize["2xl"],fontWeight:t.fontWeight.semibold,color:t.textSecondary,marginBottom:t.space[2]},children:["Noch keine ",b===c.SIMULATOR?"Szenario-Trainings":b===c.VIDEO?"Wirkungs-Analysen":b===c.BRIEFINGS?"Smart Briefings":b===c.DECISIONS?"Entscheidungs-Analysen":b===c.IKIGAI?"Ikigai-Analysen":"Live-Simulationen"]}),e.jsx("p",{style:{color:t.textMuted,fontSize:t.fontSize.base,marginBottom:t.space[6]},children:b===c.BRIEFINGS?"Erstelle dein erstes Briefing, um dich optimal vorzubereiten.":b===c.DECISIONS?"Nutze den Entscheidungs-Kompass, um deine erste Entscheidung zu analysieren.":b===c.IKIGAI?"Entdecke deinen idealen Karrierepfad mit dem Ikigai-Kompass.":"Starte dein erstes Training, um hier deine Fortschritte zu sehen."}),e.jsxs(Ee,{onClick:i,children:[e.jsx(Ie,{style:{width:t.iconSize.sm,height:t.iconSize.sm,marginRight:t.space[2]}}),b===c.BRIEFINGS?"Briefing erstellen":b===c.DECISIONS?"Entscheidung analysieren":b===c.IKIGAI?"Ikigai entdecken":"Training starten"]})]}):e.jsx(E.div,{style:{display:"flex",flexDirection:"column",gap:t.space[3]},initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},children:b===c.BRIEFINGS?J.map(s=>e.jsx(Ei,{briefing:s,onClick:()=>Mt(s),onDelete:st,headerGradient:f,headerText:I,primaryAccent:v},s.id)):b===c.DECISIONS?H.map(s=>e.jsx(_i,{decision:s,onClick:()=>Tt(s),onDelete:rt,headerGradient:f,headerText:I,primaryAccent:v},s.id)):b===c.IKIGAI?D.map(s=>e.jsx(Li,{ikigai:s,onDelete:ot,onNavigate:()=>_t(s),headerGradient:f,headerText:I,primaryAccent:v},s.id)):dt.map(s=>{const y=Ht[s.scenario_id];return e.jsx(Ti,{session:s,type:b,scenario:y,onClick:()=>Pt(s),onContinueSession:l,onDeleteSession:Ue,headerGradient:f,headerText:I,primaryAccent:v},s.id)})})}),e.jsx("style",{children:"@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"})]})};export{on as SESSION_TABS,an as default};
