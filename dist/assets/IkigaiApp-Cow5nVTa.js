import{j as e,c as v,m as p,ae as J,a0 as Y,U as Q,B as X,e as ee,al as te,f as se,H as ae,h as T,a as W,g as ie}from"./ui-vendor-CK2qDPx5.js";import{a}from"./react-vendor-uDOJF2jQ.js";import{B as A}from"./select-native-wbknQOfn.js";import{w as j,k as ne,q as H,C as d}from"./FeatureInfoButton-BIcqmuT1.js";import"./dialog-CAuklGok.js";import{C as re}from"./card-CNi93tgw.js";import{F as _,u as le}from"./useScrollToTop-C4LULOBo.js";import{M as oe,a as ce}from"./MicrophoneTestDialog-nTQouiDo.js";import{a as de,I as me}from"./IkigaiResults-CQnJ1bBN.js";import"./utils-09jiQjc0.js";import"./index-CXo7hDKg.js";import"./useMobile-YxjH166V.js";import"./button-B5ekuaAG.js";import"./AudioRecorder-Ddk64iHS.js";import"./index.js";import"./DeviceSettingsDialog-BNNUsk9l.js";import"./DeviceSetupPage-4SAV4-fd.js";const ue=[{key:"love",label:"Was du liebst",icon:J,color:d.rose[500],description:"Deine Leidenschaften und Interessen"},{key:"talent",label:"Was du kannst",icon:Y,color:d.amber[500],description:"Deine FÃ¤higkeiten und StÃ¤rken"},{key:"need",label:"Was die Welt braucht",icon:Q,color:d.emerald[500],description:"Wie du anderen helfen kannst"},{key:"market",label:"WofÃ¼r du bezahlt werden kannst",icon:X,color:d.blue[500],description:"Deine beruflichen MÃ¶glichkeiten"}],he=({onStartNew:x,onContinueSession:M,onNavigateToHistory:N,isAuthenticated:m,requireAuth:k,setPendingAction:r,selectedMicrophoneId:g,onMicrophoneChange:w,onTestMicrophone:E})=>{const[f,u]=a.useState([]),[F,I]=a.useState(!1),y=H(d.purple[500],d.purple[400]);a.useEffect(()=>{m&&D()},[m]);const D=async()=>{I(!0);try{const s=await j.getIkigais();if(s?.data?.ikigais){const o=s.data.ikigais.sort((S,C)=>new Date(C.created_at)-new Date(S.created_at)).slice(0,5);u(o)}}catch(s){console.error("[IkigaiDashboard] Failed to load sessions:",s)}finally{I(!1)}},l=a.useCallback(()=>{if(!m){r&&r({type:"ikigai_start"}),k&&k(()=>{x()});return}x()},[m,k,r,x]),b=s=>new Date(s).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}),R=s=>s.status==="completed"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-700",children:[e.jsx(W,{className:"w-3 h-3"}),"Abgeschlossen"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-700",children:[e.jsx(ie,{className:"w-3 h-3"}),"In Bearbeitung"]});return e.jsxs(e.Fragment,{children:[e.jsx(ne,{featureId:"ikigai",showOnMount:!0}),e.jsxs("div",{className:"min-h-full",children:[e.jsx(_,{featureId:"ikigai",icon:v,title:"Ikigai-Kompass",subtitle:"Finde deine berufliche Bestimmung",gradient:y,historyLabel:"Meine Ikigai",onNavigateToHistory:N,showHistoryButton:m&&f.length>0}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl mx-auto mb-6 flex items-center justify-center",style:{background:y},children:e.jsx(v,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Entdecke dein Ikigai"}),e.jsx("p",{className:"text-slate-600 max-w-2xl mx-auto leading-relaxed",children:'Ikigai ist ein japanisches Konzept fÃ¼r den "Grund des Seins" â€“ die perfekte Schnittmenge aus dem, was du liebst, was du kannst, was die Welt braucht und wofÃ¼r du bezahlt werden kannst. Finde deinen einzigartigen Karrierepfad.'})]}),e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-10",children:ue.map((s,o)=>e.jsxs(p.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1+o*.05},className:"bg-white rounded-xl p-4 border border-slate-200 text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl mx-auto mb-3 flex items-center justify-center",style:{backgroundColor:`${s.color}15`},children:e.jsx(s.icon,{className:"w-6 h-6",style:{color:s.color}})}),e.jsx("h3",{className:"font-semibold text-slate-800 text-sm mb-1",children:s.label}),e.jsx("p",{className:"text-xs text-slate-500",children:s.description})]},s.key))}),e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},className:"mb-8",children:e.jsxs(re,{className:"p-5 bg-white border border-slate-200 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center gap-2.5 mb-4",children:[e.jsx(ee,{className:"w-[22px] h-[22px] text-purple-500"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Mikrofon testen"})]}),e.jsx(oe,{selectedDeviceId:g,onDeviceChange:w,onTestClick:E})]})}),e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-center mb-12",children:[e.jsxs(A,{onClick:l,size:"lg",className:"px-8 py-4 text-lg font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all",style:{background:y,color:"white"},children:[e.jsx(te,{className:"w-5 h-5 mr-2"}),"Neues Ikigai starten",e.jsx(se,{className:"w-5 h-5 ml-2"})]}),!m&&e.jsx("p",{className:"text-sm text-slate-500 mt-3",children:"Anmeldung erforderlich zum Starten"})]}),m&&f.length>0&&e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[e.jsx(ae,{className:"w-5 h-5 text-slate-400"}),"Letzte Ikigai-Analysen"]}),f.length>=5&&e.jsxs(A,{variant:"ghost",size:"sm",onClick:N,className:"text-slate-600 hover:text-slate-800",children:["Alle anzeigen",e.jsx(T,{className:"w-4 h-4 ml-1"})]})]}),e.jsx("div",{className:"space-y-3",children:f.map((s,o)=>e.jsx(p.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5+o*.05},className:"bg-white rounded-xl p-4 border border-slate-200 hover:border-purple-300 hover:shadow-md transition-all cursor-pointer group",onClick:()=>M(s),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{background:`${d.purple[500]}15`},children:e.jsx(v,{className:"w-5 h-5",style:{color:d.purple[500]}})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:s.summary?s.summary.substring(0,50)+(s.summary.length>50?"...":""):"Ikigai-Analyse"}),e.jsx("p",{className:"text-sm text-slate-500",children:b(s.created_at)})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[R(s),e.jsx(T,{className:"w-5 h-5 text-slate-400 group-hover:text-purple-500 transition-colors"})]})]})},s.id))})]}),e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-12 bg-gradient-to-br from-purple-50 to-violet-50 rounded-2xl p-6 border border-purple-100",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5 text-purple-500"}),"So funktioniert's"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500 text-white flex items-center justify-center font-bold text-sm flex-shrink-0",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:"Dimensionen ausfÃ¼llen"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Beantworte Fragen zu den vier Ikigai-Bereichen"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500 text-white flex items-center justify-center font-bold text-sm flex-shrink-0",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:"KI-Analyse"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Die KI extrahiert SchlÃ¼sselwÃ¶rter aus deinen Antworten"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500 text-white flex items-center justify-center font-bold text-sm flex-shrink-0",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:"Karrierepfade"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Erhalte personalisierte BerufsvorschlÃ¤ge"})]})]})]})]})]})]})]})},O={love:{key:"love",label:"Leidenschaft",title:"Deine Leidenschaft",icon:"â¤ï¸",color:"#E11D48",question:"Stell dir vor, Geld spielt keine Rolle: Womit wÃ¼rdest du deinen Tag verbringen? Bei welchem Thema vergisst du vÃ¶llig die Zeit?",placeholder:"Schreib einfach drauf los: Hobbys, Themen, TÃ¤tigkeiten...",description:"Was treibt dich an?"},talent:{key:"talent",label:"StÃ¤rken",title:"Deine StÃ¤rken",icon:"â­",color:"#F59E0B",question:'WofÃ¼r bitten dich Freunde oder Kollegen oft um Rat? Was erledigst du "mit links", wÃ¤hrend andere daran verzweifeln?',placeholder:"Z.B. Organisieren, ZuhÃ¶ren, Coden, Designen...",description:"Was fÃ¤llt dir leicht?"},need:{key:"need",label:"Mission",title:"Deine Mission",icon:"ðŸŒ",color:"#10B981",question:"Welches Problem in der Gesellschaft oder Wirtschaft nervt dich? Wo wÃ¼rdest du gerne mitanpacken, um Dinge zu verbessern?",placeholder:"Z.B. Nachhaltigkeit, Bildung, bessere Software, Pflege...",description:"Welchen Beitrag leistest du?"},market:{key:"market",label:"Markt",title:"Der Markt",icon:"ðŸ’°",color:"#6366F1",question:"Welche deiner FÃ¤higkeiten sind bares Geld wert? FÃ¼r welche Jobs oder Dienstleistungen existiert ein echtes Budget?",placeholder:"Z.B. Projektmanagement, Beratung, Handwerk...",description:"WofÃ¼r wirst du bezahlt?"}};Object.values(O).map(x=>x.color);const L="karriereheld_selected_microphone",c={DASHBOARD:"dashboard",COMPASS:"compass",RESULTS:"results"},Ee=({isAuthenticated:x,requireAuth:M,setPendingAction:N,onNavigateToHistory:m})=>{const[k,r]=a.useState(c.DASHBOARD),[g,w]=a.useState(null),[E,f]=a.useState(!1),[u,F]=a.useState(()=>{try{return localStorage.getItem(L)||null}catch{return null}}),[I,y]=a.useState(!1);a.useEffect(()=>{if(u)try{localStorage.setItem(L,u),console.log("[Ikigai] Microphone saved to localStorage:",u)}catch{}},[u]);const D=H(d.purple[500],d.purple[400]),[l,b]=a.useState({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),[R,s]=a.useState(null),o=a.useRef(!1);le({dependencies:[k]});const S=Object.values(l).every(t=>t.tags&&t.tags.length>0),C=a.useCallback(()=>{b({love:{input:"",tags:[]},talent:{input:"",tags:[]},need:{input:"",tags:[]},market:{input:"",tags:[]}}),s(null),w(null),o.current=!1,r(c.COMPASS)},[]),P=a.useCallback(async t=>{try{w(t.id),o.current=!0,b({love:{input:t.love_input||"",tags:t.love_tags||[]},talent:{input:t.talent_input||"",tags:t.talent_tags||[]},need:{input:t.need_input||"",tags:t.need_tags||[]},market:{input:t.market_input||"",tags:t.market_tags||[]}}),t.status==="completed"&&t.paths?(s({summary:t.summary,paths:t.paths}),r(c.RESULTS)):r(c.COMPASS)}catch(i){console.error("[Ikigai] Failed to load session:",i)}},[]),z=a.useCallback(()=>{r(c.DASHBOARD)},[]),B=a.useCallback(async()=>{if(g)return g;try{const t=await j.createIkigai();if(t?.id)return w(t.id),o.current=!0,console.log("[Ikigai] Session created with ID:",t.id),t.id}catch(t){console.error("[Ikigai] Failed to create session:",t)}return null},[g]),G=a.useCallback(async(t,i,n)=>{b(h=>({...h,[t]:{input:i,tags:n}}));try{const h=await B();h&&(await j.updateIkigai(h,{[`${t}_input`]:i,[`${t}_tags`]:n}),console.log(`[Ikigai] Dimension ${t} saved`))}catch(h){console.error("[Ikigai] Failed to save dimension:",h)}},[B]),K=a.useCallback(async(t,i)=>{try{const n=await j.extractIkigaiKeywords(t,i);return n?.keywords?n.keywords:[]}catch(n){return console.error("[Ikigai] Failed to extract keywords:",n),[]}},[]),U=a.useCallback(async()=>{if(S){f(!0);try{const t=await j.synthesizeIkigaiPaths({love_tags:l.love.tags,talent_tags:l.talent.tags,need_tags:l.need.tags,market_tags:l.market.tags});if(t){s(t);const i=g||await B();i&&await j.updateIkigai(i,{summary:t.summary,paths:t.paths,status:"completed"}),r(c.RESULTS)}}catch(t){console.error("[Ikigai] Failed to synthesize paths:",t)}finally{f(!1)}}},[S,l,g,B]),Z=a.useCallback((t,i)=>{b(n=>{const h=n[t].tags.filter(V=>V!==i);return{...n,[t]:{...n[t],tags:h}}})},[]),$=a.useCallback(()=>{s(null),r(c.COMPASS)},[]),q=()=>{switch(k){case c.DASHBOARD:return e.jsx(he,{onStartNew:C,onContinueSession:P,onNavigateToHistory:m,isAuthenticated:x,requireAuth:M,setPendingAction:N,selectedMicrophoneId:u,onMicrophoneChange:F,onTestMicrophone:()=>y(!0)});case c.RESULTS:return e.jsxs(e.Fragment,{children:[e.jsx(_,{featureId:"ikigai",icon:v,title:"Ikigai-Kompass",subtitle:"Deine Ergebnisse",gradient:D,showBackButton:!0,onBack:z}),e.jsx(me,{dimensions:l,synthesisResult:R,onStartNew:C,onEdit:$,DIMENSIONS:O})]});case c.COMPASS:default:return e.jsxs(e.Fragment,{children:[e.jsx(_,{featureId:"ikigai",icon:v,title:"Ikigai-Kompass",subtitle:"Finde deine berufliche Bestimmung",gradient:D,showBackButton:!0,onBack:z}),e.jsx(de,{dimensions:l,DIMENSIONS:O,onExtractKeywords:K,onUpdateDimension:G,onRemoveTag:Z,allDimensionsFilled:S,onSynthesize:U,isSynthesizing:E,selectedMicrophoneId:u,onMicrophoneChange:F})]})}};return e.jsxs("div",{className:"min-h-full",children:[q(),e.jsx(ce,{isOpen:I,onClose:()=>y(!1),deviceId:u})]})};export{Ee as default};
