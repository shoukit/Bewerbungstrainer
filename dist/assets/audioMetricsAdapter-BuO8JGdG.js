import{j as e,m as g,am as _,M as $,a4 as N,u as y,an as C,ao as M,T as S}from"./ui-vendor-Mj2_BHwd.js";import{C as c}from"./FeatureInfoButton-CmzxY1Ui.js";import"./react-vendor-uDOJF2jQ.js";const B=({current:s,total:t,answeredQuestions:o=[],primaryAccent:a,labels:r,showCompleted:u=!0})=>{const d=(s+1)/t*100,x=r?.questionFallback||"Frage",m=f=>{const n=f===s,l=o.length>0?o.includes(f):f<s;return n?a:l?c.green[500]:c.slate[300]},b=f=>{const n=o.length>0?o.includes(f):f<s;return`${x} ${f+1}${n?" (beantwortet)":""}`},j=()=>r?.questionCounter?r.questionCounter(s+1,t):`${x} ${s+1} von ${t}`;return e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-semibold text-slate-700",children:j()}),e.jsxs("span",{className:`text-sm ${u?"font-normal":"font-semibold"}`,style:{color:u?c.slate[500]:a},children:[Math.round(d),"%",u?" abgeschlossen":""]})]}),e.jsx("div",{className:"h-2 bg-slate-200 rounded-sm overflow-hidden mb-3",children:e.jsx(g.div,{initial:{width:0},animate:{width:`${d}%`},transition:{duration:.4},className:"h-full rounded-sm",style:{background:a}})}),e.jsx("div",{className:"flex gap-1.5 justify-center",children:Array.from({length:t},(f,n)=>e.jsx("div",{className:"w-2.5 h-2.5 rounded-full transition-all duration-400",style:{backgroundColor:m(n)},title:b(n)},n))})]})},A=s=>s>=80?{color:c.green[500],bg:c.green[50],label:"Sehr selbstsicher"}:s>=60?{color:c.blue[500],bg:c.blue[50],label:"Selbstsicher"}:s>=40?{color:c.amber[500],bg:c.amber[50],label:"Ausbaufähig"}:{color:c.red[500],bg:c.red[50],label:"Unsicher"},F=s=>{switch(s){case"zu_langsam":return 15;case"optimal":return 50;case"zu_schnell":return 85;default:return 50}},P=s=>s==="lebendig"?"Lebendig":s==="natürlich"?"Natürlich":"Monoton",D=s=>s==="lebendig"?{base:20,variance:30}:s==="natürlich"?{base:25,variance:20}:{base:35,variance:8},v=s=>{if(typeof s=="number")return s;if(!s||typeof s!="string")return 0;const t=s.split(":");if(t.length===2){const o=parseInt(t[0],10)||0,a=parseInt(t[1],10)||0;return o*60+a}if(t.length===3){const o=parseInt(t[0],10)||0,a=parseInt(t[1],10)||0,r=parseInt(t[2],10)||0;return o*3600+a*60+r}return parseFloat(s)||0},K=({audioAnalysis:s,primaryAccent:t,onJumpToTimestamp:o})=>{const a=s?.audio_metrics||s,r=a&&(a.confidence_score!==void 0||a.speech_cleanliness||a.pacing||a.tonality);if(!s||!r)return e.jsxs("div",{className:"bg-white rounded-xl p-10 border border-slate-200 text-center",children:[e.jsx(_,{size:32,className:"text-slate-400 mb-3 mx-auto"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Keine Audio-Analyse verfügbar"})]});const u=a.confidence_score,d=a.speech_cleanliness,x=a.pacing,m=a.tonality,b=d?.total_filler_count||0,j=d?.filler_word_analysis||[],f=d?.feedback;return e.jsxs("div",{className:"flex flex-col gap-4",children:[u!==void 0&&e.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(_,{size:18,className:"text-primary"}),e.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"Selbstsicherheit"})]}),e.jsx("div",{className:"flex justify-center mb-4",children:(()=>{const n=u,l=A(n),i=140,h=i/2-12,p=Math.PI*h,z=p-n/100*p;return e.jsxs("div",{className:"rounded-2xl px-8 py-5 flex flex-col items-center",style:{backgroundColor:l.bg},children:[e.jsxs("div",{className:"relative",style:{width:i,height:i/2+20},children:[e.jsxs("svg",{width:i,height:i/2+20,className:"overflow-visible",children:[e.jsx("path",{d:`M 12 ${i/2} A ${h} ${h} 0 0 1 ${i-12} ${i/2}`,fill:"none",stroke:c.slate[200],strokeWidth:"10",strokeLinecap:"round"}),e.jsx(g.path,{d:`M 12 ${i/2} A ${h} ${h} 0 0 1 ${i-12} ${i/2}`,fill:"none",stroke:l.color,strokeWidth:"10",strokeLinecap:"round",strokeDasharray:p,initial:{strokeDashoffset:p},animate:{strokeDashoffset:z},transition:{duration:1.2,ease:"easeOut"}})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-end pb-1",children:[e.jsx(g.span,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{delay:.5},className:"text-[32px] font-bold",style:{color:l.color},children:Math.round(n)}),e.jsx("span",{className:"text-[11px] text-slate-400",children:"/ 100"})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-2",children:[e.jsx(_,{size:14,style:{color:l.color}}),e.jsx("span",{className:"text-[13px] font-semibold",style:{color:l.color},children:l.label})]})]})})()}),a.summary_text&&e.jsx("p",{className:"text-[13px] leading-normal text-slate-600 text-center",children:a.summary_text})]}),d&&e.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{size:18,className:"text-orange-500"}),e.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"Füllwörter"})]}),e.jsxs("span",{className:`text-[13px] font-semibold px-2.5 py-1 rounded-full ${b<=2?"bg-green-200 text-green-800":b<=5?"bg-amber-200 text-amber-800":"bg-red-200 text-red-800"}`,children:[b,"x gesamt"]})]}),j.length>0?e.jsx("div",{className:"flex flex-col gap-2 mb-3",children:j.map((n,l)=>e.jsxs("div",{className:"rounded-lg bg-amber-100 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[e.jsxs("span",{className:"text-[13px] text-amber-800 font-medium",children:['"',n.word,'"']}),e.jsxs("span",{className:"text-xs text-amber-800 font-semibold",children:[n.count,"x"]})]}),n.examples?.length>0&&o&&e.jsx("div",{className:"flex flex-wrap gap-1.5 px-3 py-2 bg-amber-50 border-t border-amber-200",children:n.examples.map((i,h)=>e.jsxs("button",{onClick:()=>o(v(i.timestamp)),className:"inline-flex items-center gap-1 px-2 py-1 rounded-md border-none bg-amber-100 cursor-pointer text-[11px] text-amber-800 transition-all hover:bg-amber-200",children:[e.jsx("span",{className:"font-mono font-semibold",children:i.timestamp}),e.jsx(N,{size:10})]},h))})]},l))}):e.jsxs("div",{className:"flex items-center gap-2 text-green-500",children:[e.jsx(y,{size:16}),e.jsx("span",{className:"text-[13px]",children:"Keine Füllwörter erkannt!"})]}),f&&e.jsx("p",{className:"text-[13px] leading-normal text-slate-600 mt-3",children:f})]}),x&&e.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{size:18,className:"text-blue-500"}),e.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"Sprechtempo"})]}),x.estimated_wpm&&e.jsxs("span",{className:"text-xs font-mono px-2.5 py-1 rounded-md bg-slate-100 text-slate-600",children:["~",x.estimated_wpm," WPM"]})]}),e.jsxs("div",{className:"relative h-10 mb-2",children:[e.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-2 rounded -translate-y-1/2 bg-gradient-to-r from-blue-300 via-green-300 to-red-300"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-15 h-4 bg-green-500/20 border border-green-500 rounded-lg -translate-x-1/2 -translate-y-1/2"}),e.jsx(g.div,{initial:{left:"50%"},animate:{left:`${F(x.rating)}%`},transition:{duration:.8,ease:"easeOut"},className:"absolute top-1/2 w-4 h-4 rounded-full border-2 border-white shadow-md -translate-x-1/2 -translate-y-1/2",style:{backgroundColor:x.rating==="optimal"?c.green[500]:c.amber[500]}}),e.jsxs("div",{className:"absolute -bottom-1 left-0 right-0 flex justify-between text-[10px] text-slate-400",children:[e.jsx("span",{children:"Langsam"}),e.jsx("span",{className:"text-green-500 font-medium",children:"Optimal"}),e.jsx("span",{children:"Schnell"})]})]}),x.feedback&&e.jsx("p",{className:"text-[13px] leading-normal text-slate-600 mt-4",children:x.feedback})]}),m&&e.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{size:18,className:"text-indigo-500"}),e.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"Betonung & Melodie"})]}),e.jsx("span",{className:"text-xs font-medium px-2.5 py-1 rounded-md bg-indigo-50 text-indigo-700",children:P(m.rating)})]}),e.jsx("div",{className:"flex items-center justify-center gap-0.5 h-12 mb-3",children:Array.from({length:30}).map((n,l)=>{const{base:i,variance:h}=D(m.rating),p=i+Math.sin(l*.5)*h+Math.sin(l*12.9898)%1*(h/2);return e.jsx(g.div,{initial:{height:0},animate:{height:`${Math.max(10,Math.min(100,p))}%`},transition:{duration:.5,delay:l*.02},className:"w-1 rounded-sm bg-indigo-500"},l)})}),m.highlights?.length>0&&o&&e.jsx("div",{className:"mb-3",children:m.highlights.map((n,l)=>e.jsxs("button",{onClick:()=>o(v(n.timestamp)),className:`w-full flex items-start gap-2 px-3 py-2.5 mb-1.5 rounded-lg border-none cursor-pointer text-left ${n.type==="positive"?"bg-green-50":"bg-red-50"}`,children:[e.jsx("span",{className:`text-[11px] font-mono px-1.5 py-0.5 rounded flex-shrink-0 ${n.type==="positive"?"bg-green-200 text-green-800":"bg-red-200 text-red-800"}`,children:n.timestamp}),e.jsx("span",{className:"flex-shrink-0 mt-0.5",children:n.type==="positive"?e.jsx(y,{size:14,className:"text-green-500"}):e.jsx(S,{size:14,className:"text-red-500"})}),e.jsx("span",{className:"text-xs text-slate-600 flex-1 leading-relaxed break-words",children:n.note}),e.jsx(N,{size:12,className:"text-slate-400 flex-shrink-0 mt-0.5"})]},l))}),m.feedback&&e.jsx("p",{className:"text-[13px] leading-normal text-slate-600",children:m.feedback})]})]})};function W(s){return s?s.speech_cleanliness?.filler_word_analysis||s.audio_metrics?.speech_cleanliness?.filler_word_analysis?"professional":s.filler_words?.words!==void 0?"simulator":s.speech_metrics||s.filler_words?.severity!==void 0?"video":s.confidence_score!==void 0&&s.speech_rate!==void 0?"simulator":"unknown":"unknown"}function L(s){const t=s.filler_words?.count||0,a=(s.filler_words?.words||[]).map(d=>({word:d.charAt(0).toUpperCase()+d.slice(1).toLowerCase(),count:1,examples:[]}));let r=100;t>0&&(t<=2?r=90:t<=5?r=70:t<=10?r=50:r=30);const u=s.speech_rate==="optimal"?"optimal":s.speech_rate==="zu_schnell"?"zu_schnell":s.speech_rate==="zu_langsam"?"zu_langsam":"optimal";return{confidence_score:s.confidence_score,summary_text:s.notes||null,speech_cleanliness:{score:r,total_filler_count:t,filler_word_analysis:a,feedback:w(s.filler_words?.severity)},pacing:{rating:u,estimated_wpm:null,issues_detected:[],feedback:k(u)},tonality:{rating:"natürlich",emotional_tone:"neutral",highlights:[],feedback:null}}}function I(s){const t=s.filler_words?.count||0,a=(s.filler_words?.words||[]).map(m=>({word:m.charAt(0).toUpperCase()+m.slice(1).toLowerCase(),count:1,examples:[]}));let r=100;t>0&&(t<=2?r=90:t<=5?r=70:t<=10?r=50:r=30);const u=s.speech_metrics?.pace||"optimal",d=u==="zu schnell"?"zu_schnell":u==="zu langsam"?"zu_langsam":"optimal";return{confidence_score:s.speech_metrics?.clarity||s.speech_metrics?.energy||70,summary_text:null,speech_cleanliness:{score:r,total_filler_count:t,filler_word_analysis:a,feedback:w(s.filler_words?.severity)},pacing:{rating:d,estimated_wpm:null,issues_detected:[],feedback:k(d)},tonality:{rating:"natürlich",emotional_tone:"neutral",highlights:[],feedback:null}}}function w(s){switch(s){case"hoch":return"Versuche, bewusster zu sprechen und Pausen statt Füllwörter zu nutzen.";case"mittel":return"Gute Basis! Mit etwas Übung kannst du die Füllwörter weiter reduzieren.";case"niedrig":return"Sehr gut! Du sprichst bereits sehr klar und flüssig.";case"keine":return"Perfekt! Keine Füllwörter erkannt.";default:return null}}function k(s){switch(s){case"zu_schnell":return"Versuche, etwas langsamer zu sprechen und bewusste Pausen einzubauen.";case"zu_langsam":return"Du könntest etwas zügiger sprechen, um mehr Energie zu vermitteln.";case"optimal":return"Dein Sprechtempo ist optimal für gute Verständlichkeit.";default:return null}}function q(s){if(!s)return null;switch(W(s)){case"professional":return s.audio_metrics||s;case"simulator":return L(s);case"video":return I(s);default:return s}}function U(s){if(!s)return!1;const t=q(s);return t?t.confidence_score!==void 0||t.speech_cleanliness?.total_filler_count!==void 0||t.pacing?.rating!==void 0:!1}export{K as A,B as P,U as h,q as n};
