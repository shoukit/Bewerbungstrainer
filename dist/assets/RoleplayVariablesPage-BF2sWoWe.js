import{j as s,w as I,a as P,I as V,x as k,g as S,f as F}from"./ui-vendor-CDZVYibh.js";import{a as c,d as E}from"./react-vendor-uDOJF2jQ.js";import{D as G}from"./DynamicFormField-B3L7ZkN0.js";import"./FeatureInfoButton-DB5lQe7S.js";const M=r=>r?r.split(/(\*\*.*?\*\*)/g).map((n,x)=>n.startsWith("**")&&n.endsWith("**")?s.jsx("strong",{children:n.slice(2,-2)},x):n):null,$=({scenario:r,onBack:g,onNext:n,primaryAccent:x,headerGradient:h,buttonGradient:W})=>{const[d,v]=c.useState({}),[l,j]=c.useState({}),[w,y]=c.useState({}),i=E.useMemo(()=>{const e=[],t=r?.interviewer_profile?.editable_fields||{},a=r?.interviewer_profile||{};return t.name&&e.push({key:"interviewer_name",label:"Name des Gesprächspartners",value:a.name||""}),t.role&&e.push({key:"interviewer_role",label:"Rolle/Position",value:a.role||""}),t.image&&e.push({key:"interviewer_image",label:"Profilbild URL",value:a.image_url||"",type:"url"}),t.properties&&e.push({key:"interviewer_properties",label:"Eigenschaften",value:a.properties||"",type:"textarea"}),t.objections&&e.push({key:"interviewer_objections",label:"Typische Einwände",value:a.typical_objections||"",type:"textarea"}),t.questions&&e.push({key:"interviewer_questions",label:"Wichtige Fragen",value:a.important_questions||"",type:"textarea"}),e},[r?.interviewer_profile]);c.useEffect(()=>{if(i.length>0){const e={};i.forEach(t=>{e[t.key]=t.value}),j(e)}},[i]);const o=()=>{const e=r?.interviewer_profile||{};return{name:l.interviewer_name??e.name,role:l.interviewer_role??e.role,image_url:l.interviewer_image??e.image_url,properties:l.interviewer_properties??e.properties,typical_objections:l.interviewer_objections??e.typical_objections,important_questions:l.interviewer_questions??e.important_questions}},_=e=>{if(!e)return e;let t=e;Object.entries(d).forEach(([b,u])=>{const f=new RegExp(`\\{\\{${b}\\}\\}`,"g");t=t.replace(f,u||"")});const a=o(),p={interviewer_name:a.name,interviewer_role:a.role,interviewer_properties:a.properties,interviewer_objections:a.typical_objections,interviewer_questions:a.important_questions};return Object.entries(p).forEach(([b,u])=>{if(u){const f=new RegExp(`\\{\\{${b}\\}\\}`,"g");t=t.replace(f,u)}}),t},m=E.useMemo(()=>r?.variables_schema?r.variables_schema.filter(e=>e.user_input!==!1):[],[r?.variables_schema]);c.useEffect(()=>{if(r?.variables_schema){const e={};r.variables_schema.forEach(t=>{t.default&&(e[t.key]=t.default)}),v(e)}},[r?.variables_schema]);const q=(e,t)=>{v(a=>({...a,[e]:t})),w[e]&&y(a=>{const p={...a};return delete p[e],p})},N=(e,t)=>{j(a=>({...a,[e]:t}))},C=()=>{const e={};return m.forEach(t=>{const a=d[t.key];t.required&&(!a||a.toString().trim()==="")&&(e[t.key]=`${t.label} ist ein Pflichtfeld`)}),y(e),Object.keys(e).length===0},R=e=>{if(e.preventDefault(),!C())return;const t={...d,...l};n(t)};return c.useEffect(()=>{if(m.length===0&&i.length===0){const e={};r?.variables_schema?.forEach(t=>{t.default&&(e[t.key]=t.default)}),n(e)}},[m,i,r,n]),m.length===0&&i.length===0?null:s.jsxs("div",{className:"p-6 pb-[200px] max-w-[640px] mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("button",{onClick:g,className:"inline-flex items-center gap-2 px-3 py-2 mb-4 border-none bg-transparent text-slate-600 text-sm cursor-pointer rounded-md transition-colors hover:bg-slate-100",children:[s.jsx(I,{className:"w-[18px] h-[18px]"}),"Zurück zur Übersicht"]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center",style:{background:h},children:s.jsx(P,{className:"w-7 h-7 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-slate-900 m-0",children:r.title}),s.jsx("p",{className:"text-sm text-slate-600 mt-1 mb-0",children:"Personalisiere dein Rollenspiel"})]})]})]}),r.long_description&&s.jsx("div",{className:"p-5 px-6 rounded-xl bg-white border border-slate-200 mb-6",children:s.jsxs("div",{className:"flex items-start gap-3.5",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0",style:{background:h},children:s.jsx(V,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-base font-semibold text-slate-900 m-0 mb-2",children:"Deine Aufgabe"}),s.jsx("div",{className:"text-sm leading-relaxed text-slate-700 m-0 whitespace-pre-wrap",children:M(_(r.long_description?.replace(/\/n/g,`
`)))})]})]})}),!r.long_description&&r.description&&s.jsx("div",{className:"p-4 px-5 rounded-lg bg-slate-100 mb-6",children:s.jsx("p",{className:"text-sm text-slate-700 m-0 leading-relaxed",children:_(r.description)})}),r.interviewer_profile&&i.length===0&&s.jsxs("div",{className:"p-4 px-5 rounded-lg border border-slate-200 mb-6 flex items-center gap-4",children:[o().image_url?s.jsx("img",{src:o().image_url,alt:o().name,className:"w-12 h-12 rounded-full object-cover"}):s.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center bg-primary/10",children:s.jsx(k,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-semibold text-slate-900 m-0",children:["Dein Gesprächspartner: ",o().name]}),o().role&&s.jsx("p",{className:"text-sm text-slate-600 mt-0.5 mb-0",children:o().role})]})]}),s.jsxs("form",{onSubmit:R,children:[m.map(e=>s.jsx(G,{field:e,value:d[e.key],onChange:q,error:w[e.key],focusColor:x},e.key)),i.length>0&&s.jsxs("div",{className:"mt-6 p-5 rounded-xl border border-slate-200 bg-slate-50",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{background:h},children:s.jsx(k,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-base font-semibold text-slate-900 m-0",children:"KI-Gesprächspartner anpassen"}),s.jsx("p",{className:"text-sm text-slate-600 m-0",children:"Passe die Eigenschaften deines Gesprächspartners an"})]})]}),i.map(e=>s.jsxs("div",{className:"mb-4 last:mb-0",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:e.label}),e.type==="textarea"?s.jsx("textarea",{value:l[e.key]||"",onChange:t=>N(e.key,t.target.value),rows:3,className:`w-full px-3 py-2.5 border border-slate-300 rounded-lg text-sm
                               focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary
                               transition-colors bg-white`,placeholder:e.value}):s.jsx("input",{type:e.type||"text",value:l[e.key]||"",onChange:t=>N(e.key,t.target.value),className:`w-full px-3 py-2.5 border border-slate-300 rounded-lg text-sm
                               focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary
                               transition-colors bg-white`,placeholder:e.value})]},e.key))]}),s.jsxs("div",{className:"p-4 px-5 rounded-lg bg-primary/10 mt-6 mb-6 flex gap-5 flex-wrap",children:[s.jsxs("div",{children:[s.jsxs("span",{className:"text-xs text-slate-500 block",children:[s.jsx(S,{className:"w-3 h-3 inline mr-1"}),"Dauer"]}),s.jsx("span",{className:"text-base font-semibold text-slate-900",children:"ca. 10 Min"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-slate-500 block",children:"Typ"}),s.jsx("span",{className:"text-base font-semibold text-slate-900",children:"Live-Gespräch"})]})]}),s.jsxs("button",{type:"submit",className:"w-full px-6 py-4 rounded-xl border-none text-white text-base font-semibold cursor-pointer flex items-center justify-center gap-2.5 transition-all duration-200 hover:-translate-y-0.5 hover:shadow-lg bg-gradient-to-r from-indigo-500 to-violet-500 shadow-primary",children:["Weiter",s.jsx(F,{className:"w-5 h-5"})]})]})]})};export{$ as default};
